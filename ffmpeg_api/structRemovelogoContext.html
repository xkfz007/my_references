<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: RemovelogoContext Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">RemovelogoContext Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This code implements a filter to remove annoying TV logos and other annoying images placed onto a video stream.  
 <a href="structRemovelogoContext.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a4fd10f21d99caa7a73ab5b3b788a19a9"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structAVClass.html">AVClass</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a4fd10f21d99caa7a73ab5b3b788a19a9">class</a></td></tr>
<tr class="separator:a4fd10f21d99caa7a73ab5b3b788a19a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a6d39e356c139e988cbaf77eb9fc60"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a44a6d39e356c139e988cbaf77eb9fc60">filename</a></td></tr>
<tr class="separator:a44a6d39e356c139e988cbaf77eb9fc60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78f911d80baecff1f2e827db46e9fb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ***&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#aa78f911d80baecff1f2e827db46e9fb4">mask</a></td></tr>
<tr class="separator:aa78f911d80baecff1f2e827db46e9fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab74db9c36ee396792a8003d35d1d6bbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#ab74db9c36ee396792a8003d35d1d6bbc">max_mask_size</a></td></tr>
<tr class="separator:ab74db9c36ee396792a8003d35d1d6bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc1536ab10636406fdec8443c34f460"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a4bc1536ab10636406fdec8443c34f460">mask_w</a></td></tr>
<tr class="separator:a4bc1536ab10636406fdec8443c34f460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a476c147bbc757fe4c9edf7ac6584e58f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a476c147bbc757fe4c9edf7ac6584e58f">mask_h</a></td></tr>
<tr class="separator:a476c147bbc757fe4c9edf7ac6584e58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f0f811f59b9c708878bbd409cd8acb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a37f0f811f59b9c708878bbd409cd8acb">full_mask_data</a></td></tr>
<tr class="separator:a37f0f811f59b9c708878bbd409cd8acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a817aac0459d07e51d51bdea91ea306f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFFBoundingBox.html">FFBoundingBox</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a817aac0459d07e51d51bdea91ea306f4">full_mask_bbox</a></td></tr>
<tr class="separator:a817aac0459d07e51d51bdea91ea306f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c2e869704389dcd869b16dd32fd305"><td class="memItemLeft" align="right" valign="top"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#a60c2e869704389dcd869b16dd32fd305">half_mask_data</a></td></tr>
<tr class="separator:a60c2e869704389dcd869b16dd32fd305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a4a8b35a72f1424cb0603364e71213"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFFBoundingBox.html">FFBoundingBox</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRemovelogoContext.html#af8a4a8b35a72f1424cb0603364e71213">half_mask_bbox</a></td></tr>
<tr class="separator:af8a4a8b35a72f1424cb0603364e71213"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This code implements a filter to remove annoying TV logos and other annoying images placed onto a video stream. </p>
<p>It works by filling in the pixels that comprise the logo with neighboring pixels. The transform is very loosely based on a gaussian blur, but it is different enough to merit its own paragraph later on. It is a major improvement on the old delogo filter as it both uses a better blurring algorithm and uses a bitmap to use an arbitrary and generally much tighter fitting shape than a rectangle.</p>
<p>The logo removal algorithm has two key points. The first is that it distinguishes between pixels in the logo and those not in the logo by using the passed-in bitmap. Pixels not in the logo are copied over directly without being modified and they also serve as source pixels for the logo fill-in. Pixels inside the logo have the mask applied.</p>
<p>At init-time the bitmap is reprocessed internally, and the distance to the nearest edge of the logo (Manhattan distance), along with a little extra to remove rough edges, is stored in each pixel. This is done using an in-place erosion algorithm, and incrementing each pixel that survives any given erosion. Once every pixel is eroded, the maximum value is recorded, and a set of masks from size 0 to this size are generaged. The masks are circular binary masks, where each pixel within a radius N (where N is the size of the mask) is a 1, and all other pixels are a 0. Although a gaussian mask would be more mathematically accurate, a binary mask works better in practice because we generally do not use the central pixels in the mask (because they are in the logo region), and thus a gaussian mask will cause too little blur and thus a very unstable image.</p>
<p>The mask is applied in a special way. Namely, only pixels in the mask that line up to pixels outside the logo are used. The dynamic mask size means that the mask is just big enough so that the edges touch pixels outside the logo, so the blurring is kept to a minimum and at least the first boundary condition is met (that the image function itself is continuous), even if the second boundary condition (that the derivative of the image function is continuous) is not met. A masking algorithm that does preserve the second boundary coundition (perhaps something based on a highly-modified bi-cubic algorithm) should offer even better results on paper, but the noise in a typical TV signal should make anything based on derivatives hopelessly noisy. </p>

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00082">82</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a4fd10f21d99caa7a73ab5b3b788a19a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd10f21d99caa7a73ab5b3b788a19a9">&sect;&nbsp;</a></span>class</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structAVClass.html">AVClass</a>* RemovelogoContext::class</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00083">83</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

</div>
</div>
<a id="a44a6d39e356c139e988cbaf77eb9fc60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44a6d39e356c139e988cbaf77eb9fc60">&sect;&nbsp;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* RemovelogoContext::filename</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00084">84</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>.</p>

</div>
</div>
<a id="aa78f911d80baecff1f2e827db46e9fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa78f911d80baecff1f2e827db46e9fb4">&sect;&nbsp;</a></span>mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>*** RemovelogoContext::mask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00087">87</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00495">filter_frame()</a>, <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00536">uninit()</a>.</p>

</div>
</div>
<a id="ab74db9c36ee396792a8003d35d1d6bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74db9c36ee396792a8003d35d1d6bbc">&sect;&nbsp;</a></span>max_mask_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> RemovelogoContext::max_mask_size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00088">88</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00536">uninit()</a>.</p>

</div>
</div>
<a id="a4bc1536ab10636406fdec8443c34f460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc1536ab10636406fdec8443c34f460">&sect;&nbsp;</a></span>mask_w</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> RemovelogoContext::mask_w</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00089">89</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00359">config_props_input()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>.</p>

</div>
</div>
<a id="a476c147bbc757fe4c9edf7ac6584e58f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a476c147bbc757fe4c9edf7ac6584e58f">&sect;&nbsp;</a></span>mask_h</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> RemovelogoContext::mask_h</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00089">89</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00359">config_props_input()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>.</p>

</div>
</div>
<a id="a37f0f811f59b9c708878bbd409cd8acb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f0f811f59b9c708878bbd409cd8acb">&sect;&nbsp;</a></span>full_mask_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* RemovelogoContext::full_mask_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00091">91</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00495">filter_frame()</a>, <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00536">uninit()</a>.</p>

</div>
</div>
<a id="a817aac0459d07e51d51bdea91ea306f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a817aac0459d07e51d51bdea91ea306f4">&sect;&nbsp;</a></span>full_mask_bbox</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFFBoundingBox.html">FFBoundingBox</a> RemovelogoContext::full_mask_bbox</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00092">92</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00495">filter_frame()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>.</p>

</div>
</div>
<a id="a60c2e869704389dcd869b16dd32fd305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60c2e869704389dcd869b16dd32fd305">&sect;&nbsp;</a></span>half_mask_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>* RemovelogoContext::half_mask_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00093">93</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00495">filter_frame()</a>, <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00536">uninit()</a>.</p>

</div>
</div>
<a id="af8a4a8b35a72f1424cb0603364e71213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a4a8b35a72f1424cb0603364e71213">&sect;&nbsp;</a></span>half_mask_bbox</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFFBoundingBox.html">FFBoundingBox</a> RemovelogoContext::half_mask_bbox</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vf__removelogo_8c_source.html#l00094">94</a> of file <a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a>.</p>

<p>Referenced by <a class="el" href="vf__removelogo_8c_source.html#l00495">filter_frame()</a>, and <a class="el" href="vf__removelogo_8c_source.html#l00282">init()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>libavfilter/<a class="el" href="vf__removelogo_8c_source.html">vf_removelogo.c</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:49:28 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
