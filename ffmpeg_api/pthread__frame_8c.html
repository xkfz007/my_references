<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libavcodec/pthread_frame.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1f69f89eda39a44baf4887988d54a7.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pthread_frame.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="structFrame.html">Frame</a> multithreading support functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="avcodec_8h_source.html">avcodec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libavcodec_2internal_8h_source.html">internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pthread__internal_8h_source.html">pthread_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libavcodec_2thread_8h_source.html">thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libavcodec_2version_8h_source.html">version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="avassert_8h_source.html">libavutil/avassert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buffer_8h_source.html">libavutil/buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">libavutil/common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cpu_8h_source.html">libavutil/cpu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="frame_8h_source.html">libavutil/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libavutil_2internal_8h_source.html">libavutil/internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">libavutil/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem_8h_source.html">libavutil/mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt_8h_source.html">libavutil/opt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libavutil_2thread_8h_source.html">libavutil/thread.h</a>&quot;</code><br />
</div>
<p><a href="pthread__frame_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPerThreadContext.html">PerThreadContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structContext.html">Context</a> used by codec threads and stored in their <a class="el" href="structAVCodecInternal.html">AVCodecInternal</a> thread_ctx.  <a href="structPerThreadContext.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFrameThreadContext.html">FrameThreadContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structContext.html">Context</a> stored in the client <a class="el" href="structAVCodecInternal.html">AVCodecInternal</a> thread_ctx.  <a href="structFrameThreadContext.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aae8c0917e794bac1a2683987929c6cbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx)&#160;&#160;&#160;((avctx)-&gt;thread_safe_callbacks || (avctx)-&gt;<a class="el" href="vda__h264__dec_8c.html#a515ddfbff6c1cd0d2e0b89e0c7d5b9a8">get_buffer2</a> == <a class="el" href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a>)</td></tr>
<tr class="separator:aae8c0917e794bac1a2683987929c6cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88463e591607c9b06af8570d934c91a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#af88463e591607c9b06af8570d934c91a">copy_fields</a>(<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>,  e)&#160;&#160;&#160;memcpy(&amp;dst-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, &amp;<a class="el" href="avxsynth__c_8h.html#a67caf60f8ec76e0adc7b693bfb651b66">src</a>-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, (char*)&amp;dst-&gt;e - (char*)&amp;dst-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>);</td></tr>
<tr class="separator:af88463e591607c9b06af8570d934c91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4333a67a652d73e0b1a3290de2202725"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libavutil_2internal_8h.html#adfe57f15d021b52f5137ff917767a525">attribute_align_arg</a> <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a4333a67a652d73e0b1a3290de2202725">frame_worker_thread</a> (<a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> *<a class="el" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</td></tr>
<tr class="memdesc:a4333a67a652d73e0b1a3290de2202725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Codec worker thread.  <a href="#a4333a67a652d73e0b1a3290de2202725">More...</a><br /></td></tr>
<tr class="separator:a4333a67a652d73e0b1a3290de2202725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad82c48daa57a2f86352b0dd80f486a7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *dst, <a class="el" href="structAVCodecContext.html">AVCodecContext</a> *<a class="el" href="avxsynth__c_8h.html#a67caf60f8ec76e0adc7b693bfb651b66">src</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> for_user)</td></tr>
<tr class="memdesc:aad82c48daa57a2f86352b0dd80f486a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the next thread's <a class="el" href="structAVCodecContext.html" title="main external API structure. ">AVCodecContext</a> with values from the reference thread's context.  <a href="#aad82c48daa57a2f86352b0dd80f486a7">More...</a><br /></td></tr>
<tr class="separator:aad82c48daa57a2f86352b0dd80f486a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fc6112564ad20c495e8acd579ac7ddf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a1fc6112564ad20c495e8acd579ac7ddf">update_context_from_user</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *dst, <a class="el" href="structAVCodecContext.html">AVCodecContext</a> *<a class="el" href="avxsynth__c_8h.html#a67caf60f8ec76e0adc7b693bfb651b66">src</a>)</td></tr>
<tr class="memdesc:a1fc6112564ad20c495e8acd579ac7ddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the next thread's <a class="el" href="structAVCodecContext.html" title="main external API structure. ">AVCodecContext</a> with values set by the user.  <a href="#a1fc6112564ad20c495e8acd579ac7ddf">More...</a><br /></td></tr>
<tr class="separator:a1fc6112564ad20c495e8acd579ac7ddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7ebce292612e17b712ad820640078b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a> (<a class="el" href="structPerThreadContext.html">PerThreadContext</a> *p)</td></tr>
<tr class="memdesc:a7b7ebce292612e17b712ad820640078b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the buffers that this decoding thread was the last user of.  <a href="#a7b7ebce292612e17b712ad820640078b">More...</a><br /></td></tr>
<tr class="separator:a7b7ebce292612e17b712ad820640078b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc302b0e5c2e539669c57d52ac678f3f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#afc302b0e5c2e539669c57d52ac678f3f">submit_packet</a> (<a class="el" href="structPerThreadContext.html">PerThreadContext</a> *p, <a class="el" href="structAVPacket.html">AVPacket</a> *avpkt)</td></tr>
<tr class="separator:afc302b0e5c2e539669c57d52ac678f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39dd042416f1f404fe1be56bb91d97d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#ac39dd042416f1f404fe1be56bb91d97d">ff_thread_decode_frame</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="el" href="structAVFrame.html">AVFrame</a> *picture, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> *got_picture_ptr, <a class="el" href="structAVPacket.html">AVPacket</a> *avpkt)</td></tr>
<tr class="memdesc:ac39dd042416f1f404fe1be56bb91d97d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit a new frame to a decoding thread.  <a href="#ac39dd042416f1f404fe1be56bb91d97d">More...</a><br /></td></tr>
<tr class="separator:ac39dd042416f1f404fe1be56bb91d97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c689544e66e3dd516af1d6e6f045367"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a> (<a class="el" href="structThreadFrame.html">ThreadFrame</a> *f, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avxsynth__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> field)</td></tr>
<tr class="memdesc:a1c689544e66e3dd516af1d6e6f045367"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify later decoding threads when part of their reference picture is ready.  <a href="#a1c689544e66e3dd516af1d6e6f045367">More...</a><br /></td></tr>
<tr class="separator:a1c689544e66e3dd516af1d6e6f045367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86d6b711aaa79b65aff17276564fc25e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a> (<a class="el" href="structThreadFrame.html">ThreadFrame</a> *f, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avxsynth__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> field)</td></tr>
<tr class="memdesc:a86d6b711aaa79b65aff17276564fc25e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for earlier decoding threads to finish reference pictures.  <a href="#a86d6b711aaa79b65aff17276564fc25e">More...</a><br /></td></tr>
<tr class="separator:a86d6b711aaa79b65aff17276564fc25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad620f797a848df3977ea512316ceb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</td></tr>
<tr class="memdesc:a9ad620f797a848df3977ea512316ceb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the codec defines update_thread_context(), call this when they are ready for the next thread to start decoding the next frame.  <a href="#a9ad620f797a848df3977ea512316ceb3">More...</a><br /></td></tr>
<tr class="separator:a9ad620f797a848df3977ea512316ceb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af038da83dd3011d06976e91813a8de0f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">park_frame_worker_threads</a> (<a class="el" href="structFrameThreadContext.html">FrameThreadContext</a> *fctx, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> thread_count)</td></tr>
<tr class="memdesc:af038da83dd3011d06976e91813a8de0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for all threads to finish.  <a href="#af038da83dd3011d06976e91813a8de0f">More...</a><br /></td></tr>
<tr class="separator:af038da83dd3011d06976e91813a8de0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44656a5ba9977049dad8e39934bb497b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a44656a5ba9977049dad8e39934bb497b">ff_frame_thread_free</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> thread_count)</td></tr>
<tr class="separator:a44656a5ba9977049dad8e39934bb497b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64637c4de849dbe667c5dbd89d3da9fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a64637c4de849dbe667c5dbd89d3da9fd">ff_frame_thread_init</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</td></tr>
<tr class="separator:a64637c4de849dbe667c5dbd89d3da9fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9fb90d995171cf16ed454f6965e0710"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#af9fb90d995171cf16ed454f6965e0710">ff_thread_flush</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</td></tr>
<tr class="memdesc:af9fb90d995171cf16ed454f6965e0710"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for decoding threads to finish and reset internal state.  <a href="#af9fb90d995171cf16ed454f6965e0710">More...</a><br /></td></tr>
<tr class="separator:af9fb90d995171cf16ed454f6965e0710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4471e4e8fa85c02e2b6eaee22ce4f30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</td></tr>
<tr class="separator:ae4471e4e8fa85c02e2b6eaee22ce4f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a072fb6b4e21f7b1e1d37f9339a87afd9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a072fb6b4e21f7b1e1d37f9339a87afd9">thread_get_buffer_internal</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="el" href="structThreadFrame.html">ThreadFrame</a> *f, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:a072fb6b4e21f7b1e1d37f9339a87afd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72df5e427afa9ab4020584e33a37b70"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#ab72df5e427afa9ab4020584e33a37b70">ff_thread_get_format</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, const enum <a class="el" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *<a class="el" href="avxsynth__c_8h.html#ad9a5b33dafc33a26929ac177b964d4ab">fmt</a>)</td></tr>
<tr class="memdesc:ab72df5e427afa9ab4020584e33a37b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around <a class="el" href="doc_2examples_2qsvdec_8c.html#afe1023087c26d2d410c9cd7d491c8660">get_format()</a> for frame-multithreaded codecs.  <a href="#ab72df5e427afa9ab4020584e33a37b70">More...</a><br /></td></tr>
<tr class="separator:ab72df5e427afa9ab4020584e33a37b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a175c018f02630ddf4e3824b2c8b9184f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#a175c018f02630ddf4e3824b2c8b9184f">ff_thread_get_buffer</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="el" href="structThreadFrame.html">ThreadFrame</a> *f, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="memdesc:a175c018f02630ddf4e3824b2c8b9184f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around <a class="el" href="doc_2examples_2qsvdec_8c.html#a69f0d51f98b7dd03f99ec0571435678b">get_buffer()</a> for frame-multithreaded codecs.  <a href="#a175c018f02630ddf4e3824b2c8b9184f">More...</a><br /></td></tr>
<tr class="separator:a175c018f02630ddf4e3824b2c8b9184f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f6cbc3d5b74d46b247469ca3247ad1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a> (<a class="el" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="el" href="structThreadFrame.html">ThreadFrame</a> *f)</td></tr>
<tr class="memdesc:aa3f6cbc3d5b74d46b247469ca3247ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around <a class="el" href="vda__h264__dec_8c.html#aa4c61dec34ccf18256af2760281354c1">release_buffer()</a> frame-for multithreaded codecs.  <a href="#aa3f6cbc3d5b74d46b247469ca3247ad1">More...</a><br /></td></tr>
<tr class="separator:aa3f6cbc3d5b74d46b247469ca3247ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="structFrame.html">Frame</a> multithreading support functions. </p>
<dl class="section see"><dt>See also</dt><dd>doc/multithreading.txt </dd></dl>

<p>Definition in file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aae8c0917e794bac1a2683987929c6cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8c0917e794bac1a2683987929c6cbc">&sect;&nbsp;</a></span>THREAD_SAFE_CALLBACKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THREAD_SAFE_CALLBACKS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">avctx</td><td>)</td>
          <td>&#160;&#160;&#160;((avctx)-&gt;thread_safe_callbacks || (avctx)-&gt;<a class="el" href="vda__h264__dec_8c.html#a515ddfbff6c1cd0d2e0b89e0c7d5b9a8">get_buffer2</a> == <a class="el" href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00118">118</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00747">ff_thread_can_start_frame()</a>, <a class="el" href="pthread__frame_8c_source.html#l00128">frame_worker_thread()</a>, and <a class="el" href="pthread__frame_8c_source.html#l00757">thread_get_buffer_internal()</a>.</p>

</div>
</div>
<a id="af88463e591607c9b06af8570d934c91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88463e591607c9b06af8570d934c91a">&sect;&nbsp;</a></span>copy_fields</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define copy_fields</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcpy(&amp;dst-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, &amp;<a class="el" href="avxsynth__c_8h.html#a67caf60f8ec76e0adc7b693bfb651b66">src</a>-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, (char*)&amp;dst-&gt;e - (char*)&amp;dst-&gt;<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="vp3_8c_source.html#l01923">ref_frames()</a>, and <a class="el" href="pthread__frame_8c_source.html#l00253">update_context_from_user()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4333a67a652d73e0b1a3290de2202725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4333a67a652d73e0b1a3290de2202725">&sect;&nbsp;</a></span>frame_worker_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libavutil_2internal_8h.html#adfe57f15d021b52f5137ff917767a525">attribute_align_arg</a> <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>* frame_worker_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Codec worker thread. </p>
<p>Automatically calls <a class="el" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3" title="If the codec defines update_thread_context(), call this when they are ready for the next thread to st...">ff_thread_finish_setup()</a> if the codec does not provide an update_thread_context method, or if the codec returns before calling it. </p>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00128">128</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00604">ff_frame_thread_init()</a>.</p>

</div>
</div>
<a id="aad82c48daa57a2f86352b0dd80f486a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad82c48daa57a2f86352b0dd80f486a7">&sect;&nbsp;</a></span>update_context_from_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> update_context_from_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>for_user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the next thread's <a class="el" href="structAVCodecContext.html" title="main external API structure. ">AVCodecContext</a> with values from the reference thread's context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination context. </td></tr>
    <tr><td class="paramname">src</td><td>The source context. </td></tr>
    <tr><td class="paramname">for_user</td><td>0 if the destination is a codec thread, 1 if the destination is the user's thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00184">184</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00540">ff_frame_thread_free()</a>, <a class="el" href="pthread__frame_8c_source.html#l00604">ff_frame_thread_init()</a>, <a class="el" href="pthread__frame_8c_source.html#l00386">ff_thread_decode_frame()</a>, <a class="el" href="pthread__frame_8c_source.html#l00718">ff_thread_flush()</a>, and <a class="el" href="pthread__frame_8c_source.html#l00310">submit_packet()</a>.</p>

</div>
</div>
<a id="a1fc6112564ad20c495e8acd579ac7ddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fc6112564ad20c495e8acd579ac7ddf">&sect;&nbsp;</a></span>update_context_from_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> update_context_from_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the next thread's <a class="el" href="structAVCodecContext.html" title="main external API structure. ">AVCodecContext</a> with values set by the user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination context. </td></tr>
    <tr><td class="paramname">src</td><td>The source context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00253">253</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00386">ff_thread_decode_frame()</a>.</p>

</div>
</div>
<a id="a7b7ebce292612e17b712ad820640078b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b7ebce292612e17b712ad820640078b">&sect;&nbsp;</a></span>release_delayed_buffers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> release_delayed_buffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPerThreadContext.html">PerThreadContext</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases the buffers that this decoding thread was the last user of. </p>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00290">290</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00540">ff_frame_thread_free()</a>, <a class="el" href="pthread__frame_8c_source.html#l00718">ff_thread_flush()</a>, and <a class="el" href="pthread__frame_8c_source.html#l00310">submit_packet()</a>.</p>

</div>
</div>
<a id="afc302b0e5c2e539669c57d52ac678f3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc302b0e5c2e539669c57d52ac678f3f">&sect;&nbsp;</a></span>submit_packet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> submit_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPerThreadContext.html">PerThreadContext</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAVPacket.html">AVPacket</a> *&#160;</td>
          <td class="paramname"><em>avpkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00310">310</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00386">ff_thread_decode_frame()</a>.</p>

</div>
</div>
<a id="ac39dd042416f1f404fe1be56bb91d97d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39dd042416f1f404fe1be56bb91d97d">&sect;&nbsp;</a></span>ff_thread_decode_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ff_thread_decode_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAVFrame.html">AVFrame</a> *&#160;</td>
          <td class="paramname"><em>picture</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> *&#160;</td>
          <td class="paramname"><em>got_picture_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structAVPacket.html">AVPacket</a> *&#160;</td>
          <td class="paramname"><em>avpkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submit a new frame to a decoding thread. </p>
<p>Returns the next available frame in picture. *got_picture_ptr will be 0 if none is available. The return value on success is the size of the consumed packet for compatibility with <a class="el" href="group__lavc__decoding.html#ga3ac51525b7ad8bca4ced9f3446e96532" title="Decode the video frame of size avpkt-&gt;size from avpkt-&gt;data into picture. ">avcodec_decode_video2()</a>. This means the decoder has to consume the full packet.</p>
<p>Parameters are the same as <a class="el" href="group__lavc__decoding.html#ga3ac51525b7ad8bca4ced9f3446e96532" title="Decode the video frame of size avpkt-&gt;size from avpkt-&gt;data into picture. ">avcodec_decode_video2()</a>. </p>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00386">386</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2utils_8c_source.html#l02317">avcodec_decode_audio4()</a>, and <a class="el" href="libavcodec_2utils_8c_source.html#l02214">avcodec_decode_video2()</a>.</p>

</div>
</div>
<a id="a1c689544e66e3dd516af1d6e6f045367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c689544e66e3dd516af1d6e6f045367">&sect;&nbsp;</a></span>ff_thread_report_progress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_thread_report_progress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structThreadFrame.html">ThreadFrame</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>progress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>field</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify later decoding threads when part of their reference picture is ready. </p>
<p>Call this when some part of the picture is finished decoding. Later calls with lower values of progress have no effect.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>The picture being decoded. </td></tr>
    <tr><td class="paramname">progress</td><td>Value, in arbitrary units, of how much of the picture has decoded. </td></tr>
    <tr><td class="paramname">field</td><td>The field being decoded, for field-picture codecs. 0 for top field or frame pictures, 1 for bottom field. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00471">471</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="mimic_8c_source.html#l00275">decode()</a>, <a class="el" href="h264__slice_8c_source.html#l02331">decode_finish_row()</a>, <a class="el" href="ffv1dec_8c_source.html#l00795">decode_frame()</a>, <a class="el" href="pngdec_8c_source.html#l01087">decode_frame_common()</a>, <a class="el" href="libavcodec_2h264dec_8c_source.html#l00726">decode_nal_units()</a>, <a class="el" href="ffv1dec_8c_source.html#l00232">decode_slice()</a>, <a class="el" href="h264__slice_8c_source.html#l01766">ff_h264_decode_slice_header()</a>, <a class="el" href="h264__picture_8c_source.html#l00153">ff_h264_field_end()</a>, <a class="el" href="hevc__filter_8c_source.html#l00842">ff_hevc_hls_filter()</a>, <a class="el" href="mpegvideo_8c_source.html#l01421">ff_mpv_frame_end()</a>, <a class="el" href="mpegvideo_8c_source.html#l01189">ff_mpv_frame_start()</a>, <a class="el" href="mpegvideo_8c_source.html#l02818">ff_mpv_report_decode_progress()</a>, <a class="el" href="rv34_8c_source.html#l01634">ff_rv34_decode_frame()</a>, <a class="el" href="rv34_8c_source.html#l01594">finish_frame()</a>, <a class="el" href="hevc__refs_8c_source.html#l00401">generate_missing_ref()</a>, <a class="el" href="h264__slice_8c_source.html#l01290">h264_field_start()</a>, <a class="el" href="pngdec_8c_source.html#l00974">handle_p_frame_apng()</a>, <a class="el" href="mimic_8c_source.html#l00356">mimic_decode_frame()</a>, <a class="el" href="rv34_8c_source.html#l01404">rv34_decode_slice()</a>, <a class="el" href="vp3_8c_source.html#l01995">vp3_decode_frame()</a>, <a class="el" href="vp3_8c_source.html#l01418">vp3_draw_horiz_band()</a>, <a class="el" href="vp8_8c_source.html#l02526">vp78_decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l02483">vp78_decode_mb_row_sliced()</a>, and <a class="el" href="vp9_8c_source.html#l03992">vp9_decode_frame()</a>.</p>

</div>
</div>
<a id="a86d6b711aaa79b65aff17276564fc25e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d6b711aaa79b65aff17276564fc25e">&sect;&nbsp;</a></span>ff_thread_await_progress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_thread_await_progress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structThreadFrame.html">ThreadFrame</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>progress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>field</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for earlier decoding threads to finish reference pictures. </p>
<p>Call this before accessing some part of a picture, with a given value for progress, and it will return after the responsible decoding thread calls <a class="el" href="libavcodec_2thread_8h.html#a8f2a011a6e511ed85066482460c6c5cd" title="Notify later decoding threads when part of their reference picture is ready. ">ff_thread_report_progress()</a> with the same or higher value for progress.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>The picture being referenced. </td></tr>
    <tr><td class="paramname">progress</td><td>Value, in arbitrary units, to wait for. </td></tr>
    <tr><td class="paramname">field</td><td>The field being referenced, for field-picture codecs. 0 for top field or frame pictures, 1 for bottom field. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00489">489</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="h264__direct_8c_source.html#l00167">await_reference_mb_row()</a>, <a class="el" href="vp3_8c_source.html#l01460">await_reference_row()</a>, <a class="el" href="h264__mb_8c_source.html#l00096">await_references()</a>, <a class="el" href="mimic_8c_source.html#l00275">decode()</a>, <a class="el" href="ffv1dec_8c_source.html#l00795">decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l02278">decode_mb_row_no_filter()</a>, <a class="el" href="vp9_8c_source.html#l01434">decode_mode()</a>, <a class="el" href="ffv1dec_8c_source.html#l00232">decode_slice()</a>, <a class="el" href="error__resilience_8c_source.html#l00853">ff_er_frame_end()</a>, <a class="el" href="vp9_8c_source.html#l01060">find_ref_mvs()</a>, <a class="el" href="error__resilience_8c_source.html#l00376">guess_mv()</a>, <a class="el" href="h264__slice_8c_source.html#l01290">h264_field_start()</a>, <a class="el" href="pngdec_8c_source.html#l00974">handle_p_frame_apng()</a>, <a class="el" href="pngdec_8c_source.html#l00954">handle_p_frame_png()</a>, <a class="el" href="libavcodec_2hevc_8c_source.html#l01645">hevc_await_progress()</a>, <a class="el" href="error__resilience_8c_source.html#l00672">is_intra_more_likely()</a>, <a class="el" href="vp9_8c_source.html#l02904">mc_chroma_scaled()</a>, <a class="el" href="vp9_8c_source.html#l02776">mc_chroma_unscaled()</a>, <a class="el" href="vp9_8c_source.html#l02847">mc_luma_scaled()</a>, <a class="el" href="vp9_8c_source.html#l02741">mc_luma_unscaled()</a>, <a class="el" href="mpeg4videodec_8c_source.html#l01299">mpeg4_decode_mb()</a>, <a class="el" href="mpegvideo_8c_source.html#l02474">mpv_decode_mb_internal()</a>, <a class="el" href="rv34_8c_source.html#l00857">rv34_decode_mv()</a>, <a class="el" href="rv34_8c_source.html#l00664">rv34_mc()</a>, <a class="el" href="hevc__mvs_8c_source.html#l00217">temporal_luma_motion_vector()</a>, <a class="el" href="vp8_8c_source.html#l02526">vp78_decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l01783">vp8_mc_chroma()</a>, and <a class="el" href="vp8_8c_source.html#l01725">vp8_mc_luma()</a>.</p>

</div>
</div>
<a id="a9ad620f797a848df3977ea512316ceb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad620f797a848df3977ea512316ceb3">&sect;&nbsp;</a></span>ff_thread_finish_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_thread_finish_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the codec defines update_thread_context(), call this when they are ready for the next thread to start decoding the next frame. </p>
<p>After calling it, do not change any variables read by the update_thread_context() method, or call <a class="el" href="libavcodec_2thread_8h.html#a175c018f02630ddf4e3824b2c8b9184f" title="Wrapper around get_buffer() for frame-multithreaded codecs. ">ff_thread_get_buffer()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">avctx</td><td>The context. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00507">507</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="ffv1dec_8c_source.html#l00795">decode_frame()</a>, <a class="el" href="pngdec_8c_source.html#l00593">decode_idat_chunk()</a>, <a class="el" href="libavcodec_2h264dec_8c_source.html#l00477">decode_postinit()</a>, <a class="el" href="libavcodec_2h263dec_8c_source.html#l00409">ff_h263_decode_frame()</a>, <a class="el" href="rv34_8c_source.html#l01634">ff_rv34_decode_frame()</a>, <a class="el" href="pthread__frame_8c_source.html#l00128">frame_worker_thread()</a>, <a class="el" href="hapdec_8c_source.html#l00305">hap_decode()</a>, <a class="el" href="libavcodec_2hevc_8c_source.html#l02663">hevc_frame_start()</a>, <a class="el" href="mimic_8c_source.html#l00356">mimic_decode_frame()</a>, <a class="el" href="mpeg12dec_8c_source.html#l01616">mpeg_field_start()</a>, <a class="el" href="libavcodec_2takdec_8c_source.html#l00676">tak_decode_frame()</a>, <a class="el" href="pthread__frame_8c_source.html#l00757">thread_get_buffer_internal()</a>, <a class="el" href="vp3_8c_source.html#l01995">vp3_decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l02526">vp78_decode_frame()</a>, and <a class="el" href="vp9_8c_source.html#l03992">vp9_decode_frame()</a>.</p>

</div>
</div>
<a id="af038da83dd3011d06976e91813a8de0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af038da83dd3011d06976e91813a8de0f">&sect;&nbsp;</a></span>park_frame_worker_threads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> park_frame_worker_threads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFrameThreadContext.html">FrameThreadContext</a> *&#160;</td>
          <td class="paramname"><em>fctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>thread_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits for all threads to finish. </p>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00523">523</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00540">ff_frame_thread_free()</a>, and <a class="el" href="pthread__frame_8c_source.html#l00718">ff_thread_flush()</a>.</p>

</div>
</div>
<a id="a44656a5ba9977049dad8e39934bb497b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44656a5ba9977049dad8e39934bb497b">&sect;&nbsp;</a></span>ff_frame_thread_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_frame_thread_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>thread_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00540">540</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00604">ff_frame_thread_init()</a>, and <a class="el" href="libavcodec_2pthread_8c_source.html#l00082">ff_thread_free()</a>.</p>

</div>
</div>
<a id="a64637c4de849dbe667c5dbd89d3da9fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64637c4de849dbe667c5dbd89d3da9fd">&sect;&nbsp;</a></span>ff_frame_thread_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ff_frame_thread_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00604">604</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2pthread_8c_source.html#l00070">ff_thread_init()</a>.</p>

</div>
</div>
<a id="af9fb90d995171cf16ed454f6965e0710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9fb90d995171cf16ed454f6965e0710">&sect;&nbsp;</a></span>ff_thread_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_thread_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for decoding threads to finish and reset internal state. </p>
<p>Called by <a class="el" href="group__lavc__misc.html#gaf60b0e076f822abcb2700eb601d352a6" title="Reset the internal decoder state / flush internal buffers. ">avcodec_flush_buffers()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">avctx</td><td>The context. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00718">718</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2utils_8c_source.html#l03437">avcodec_flush_buffers()</a>.</p>

</div>
</div>
<a id="ae4471e4e8fa85c02e2b6eaee22ce4f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4471e4e8fa85c02e2b6eaee22ce4f30">&sect;&nbsp;</a></span>ff_thread_can_start_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ff_thread_can_start_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00747">747</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

</div>
</div>
<a id="a072fb6b4e21f7b1e1d37f9339a87afd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a072fb6b4e21f7b1e1d37f9339a87afd9">&sect;&nbsp;</a></span>thread_get_buffer_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> thread_get_buffer_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structThreadFrame.html">ThreadFrame</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00757">757</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="pthread__frame_8c_source.html#l00841">ff_thread_get_buffer()</a>.</p>

</div>
</div>
<a id="ab72df5e427afa9ab4020584e33a37b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab72df5e427afa9ab4020584e33a37b70">&sect;&nbsp;</a></span>ff_thread_get_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> ff_thread_get_format </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const enum <a class="el" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *&#160;</td>
          <td class="paramname"><em>fmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around <a class="el" href="doc_2examples_2qsvdec_8c.html#afe1023087c26d2d410c9cd7d491c8660">get_format()</a> for frame-multithreaded codecs. </p>
<p>Call this function instead of avctx-&gt;<a class="el" href="doc_2examples_2qsvdec_8c.html#afe1023087c26d2d410c9cd7d491c8660">get_format()</a>. Cannot be called after the codec has called <a class="el" href="libavcodec_2thread_8h.html#a9ad620f797a848df3977ea512316ceb3" title="If the codec defines update_thread_context(), call this when they are ready for the next thread to st...">ff_thread_finish_setup()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">avctx</td><td>The current context. </td></tr>
    <tr><td class="paramname">fmt</td><td>The list of available formats. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00815">815</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="h264__slice_8c_source.html#l00767">get_pixel_format()</a>, <a class="el" href="mpeg12dec_8c_source.html#l01189">mpeg_get_pixelformat()</a>, <a class="el" href="libavcodec_2hevc_8c_source.html#l00331">set_sps()</a>, and <a class="el" href="vp9_8c_source.html#l00247">update_size()</a>.</p>

</div>
</div>
<a id="a175c018f02630ddf4e3824b2c8b9184f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a175c018f02630ddf4e3824b2c8b9184f">&sect;&nbsp;</a></span>ff_thread_get_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ff_thread_get_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structThreadFrame.html">ThreadFrame</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around <a class="el" href="doc_2examples_2qsvdec_8c.html#a69f0d51f98b7dd03f99ec0571435678b">get_buffer()</a> for frame-multithreaded codecs. </p>
<p>Call this function instead of ff_get_buffer(f). Cannot be called after the codec has called <a class="el" href="libavcodec_2thread_8h.html#a9ad620f797a848df3977ea512316ceb3" title="If the codec defines update_thread_context(), call this when they are ready for the next thread to st...">ff_thread_finish_setup()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">avctx</td><td>The current context. </td></tr>
    <tr><td class="paramname">f</td><td>The frame to write into. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00841">841</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="aic_8c_source.html#l00369">aic_decode_frame()</a>, <a class="el" href="hevc__refs_8c_source.html#l00081">alloc_frame()</a>, <a class="el" href="mpegpicture_8c_source.html#l00098">alloc_frame_buffer()</a>, <a class="el" href="h264__slice_8c_source.html#l00187">alloc_picture()</a>, <a class="el" href="cfhd_8c_source.html#l00227">cfhd_decode()</a>, <a class="el" href="alac_8c_source.html#l00236">decode_element()</a>, <a class="el" href="webp_8c_source.html#l00586">decode_entropy_coded_image()</a>, <a class="el" href="exr_8c_source.html#l01618">decode_frame()</a>, <a class="el" href="pngdec_8c_source.html#l00593">decode_idat_chunk()</a>, <a class="el" href="libavcodec_2dnxhddec_8c_source.html#l00586">dnxhd_decode_frame()</a>, <a class="el" href="dxv_8c_source.html#l00338">dxv_decode()</a>, <a class="el" href="libavcodec_2flacdec_8c_source.html#l00547">flac_decode_frame()</a>, <a class="el" href="hapdec_8c_source.html#l00305">hap_decode()</a>, <a class="el" href="tiff_8c_source.html#l00652">init_image()</a>, <a class="el" href="jpeg2000dec_8c_source.html#l02067">jpeg2000_decode_frame()</a>, <a class="el" href="lagarith_8c_source.html#l00525">lag_decode_frame()</a>, <a class="el" href="libopenjpegdec_8c_source.html#l00340">libopenjpeg_decode_frame()</a>, <a class="el" href="magicyuv_8c_source.html#l00470">magy_decode_frame()</a>, <a class="el" href="mimic_8c_source.html#l00356">mimic_decode_frame()</a>, <a class="el" href="pixlet_8c_source.html#l00562">pixlet_decode_frame()</a>, <a class="el" href="libavcodec_2takdec_8c_source.html#l00676">tak_decode_frame()</a>, <a class="el" href="libavcodec_2tta_8c_source.html#l00219">tta_decode_frame()</a>, <a class="el" href="vble_8c_source.html#l00117">vble_decode_frame()</a>, <a class="el" href="vp3_8c_source.html#l01995">vp3_decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l00069">vp8_alloc_frame()</a>, <a class="el" href="vp9_8c_source.html#l00186">vp9_alloc_frame()</a>, and <a class="el" href="wavpack_8c_source.html#l00632">wavpack_decode_block()</a>.</p>

</div>
</div>
<a id="aa3f6cbc3d5b74d46b247469ca3247ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f6cbc3d5b74d46b247469ca3247ad1">&sect;&nbsp;</a></span>ff_thread_release_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_thread_release_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAVCodecContext.html">AVCodecContext</a> *&#160;</td>
          <td class="paramname"><em>avctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structThreadFrame.html">ThreadFrame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around <a class="el" href="vda__h264__dec_8c.html#aa4c61dec34ccf18256af2760281354c1">release_buffer()</a> frame-for multithreaded codecs. </p>
<p>Call this function instead of avctx-&gt;release_buffer(f). The <a class="el" href="structAVFrame.html" title="This structure describes decoded (raw) audio or video data. ">AVFrame</a> will be copied and the actual <a class="el" href="vda__h264__dec_8c.html#aa4c61dec34ccf18256af2760281354c1">release_buffer()</a> call will be performed later. The contents of data pointed to by the <a class="el" href="structAVFrame.html" title="This structure describes decoded (raw) audio or video data. ">AVFrame</a> should not be changed until <a class="el" href="libavcodec_2thread_8h.html#a175c018f02630ddf4e3824b2c8b9184f" title="Wrapper around get_buffer() for frame-multithreaded codecs. ">ff_thread_get_buffer()</a> is called on it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">avctx</td><td>The current context. </td></tr>
    <tr><td class="paramname">f</td><td>The picture being released. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pthread__frame_8c_source.html#l00849">849</a> of file <a class="el" href="pthread__frame_8c_source.html">pthread_frame.c</a>.</p>

<p>Referenced by <a class="el" href="ffv1dec_8c_source.html#l00965">copy_fields()</a>, <a class="el" href="ffv1dec_8c_source.html#l00795">decode_frame()</a>, <a class="el" href="pngdec_8c_source.html#l01087">decode_frame_common()</a>, <a class="el" href="pngdec_8c_source.html#l00593">decode_idat_chunk()</a>, <a class="el" href="ffv1_8c_source.html#l00210">ff_ffv1_close()</a>, <a class="el" href="h264__picture_8c_source.html#l00046">ff_h264_unref_picture()</a>, <a class="el" href="hevc__refs_8c_source.html#l00031">ff_hevc_unref_frame()</a>, <a class="el" href="mpegpicture_8c_source.html#l00291">ff_mpeg_unref_picture()</a>, <a class="el" href="mimic_8c_source.html#l00117">mimic_decode_end()</a>, <a class="el" href="mimic_8c_source.html#l00356">mimic_decode_frame()</a>, <a class="el" href="mimic_8c_source.html#l00137">mimic_decode_init()</a>, <a class="el" href="pngdec_8c_source.html#l01482">png_dec_end()</a>, <a class="el" href="vp3_8c_source.html#l01915">ref_frame()</a>, <a class="el" href="vp3_8c_source.html#l01894">update_frames()</a>, <a class="el" href="vp3_8c_source.html#l00282">vp3_decode_flush()</a>, <a class="el" href="vp3_8c_source.html#l01995">vp3_decode_frame()</a>, <a class="el" href="vp8_8c_source.html#l00069">vp8_alloc_frame()</a>, <a class="el" href="vp8_8c_source.html#l00082">vp8_release_frame()</a>, <a class="el" href="vp9_8c_source.html#l04276">vp9_decode_flush()</a>, <a class="el" href="vp9_8c_source.html#l03992">vp9_decode_frame()</a>, <a class="el" href="vp9_8c_source.html#l03966">vp9_decode_free()</a>, <a class="el" href="vp9_8c_source.html#l04313">vp9_decode_init()</a>, and <a class="el" href="vp9_8c_source.html#l00177">vp9_unref_frame()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:48:36 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
