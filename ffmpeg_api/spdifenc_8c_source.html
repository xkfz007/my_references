<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libavformat/spdifenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c323f0049949ddd42f5d8cc7327305d9.html">libavformat</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">spdifenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="spdifenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * IEC 61937 muxer</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2009 Bartlomiej Wolowiec</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2010 Anssi Hannula</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 2010 Carl Eugen Hoyos</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * @file</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * IEC-61937 encapsulation of various formats, used by S/PDIF</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * @author Bartlomiej Wolowiec</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * @author Anssi Hannula</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * @author Carl Eugen Hoyos</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * Terminology used in specification:</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * data-burst - IEC61937 frame, contains header and encapsuled frame</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * burst-preamble - IEC61937 frame header, contains 16-bit words named Pa, Pb, Pc and Pd</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * burst-payload - encapsuled frame</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * Pa, Pb - syncword - 0xF872, 0x4E1F</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * Pc - burst-info, contains data-type (bits 0-6), error flag (bit 7), data-type-dependent info (bits 8-12)</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> *      and bitstream number (bits 13-15)</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * data-type - determines type of encapsuled frames</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * Pd - length code (number of bits or bytes of encapsuled frame - according to data_type)</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * IEC 61937 frames at normal usage start every specific count of bytes,</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *      dependent from data-type (spaces between packets are filled by zeros)</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">avformat.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avio__internal_8h.html">avio_internal.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="spdif_8h.html">spdif.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ac3_8h.html">libavcodec/ac3.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dca_8h.html">libavcodec/dca.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dca__syncwords_8h.html">libavcodec/dca_syncwords.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="aacadtsdec_8h.html">libavcodec/aacadtsdec.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structIEC61937Context.html">   58</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structIEC61937Context.html">IEC61937Context</a> {</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#aca195241c538e2dd25d608141ccf26a3">   59</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="structAVClass.html">AVClass</a> *<a class="code" href="structIEC61937Context.html#aca195241c538e2dd25d608141ccf26a3">av_class</a>;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">   60</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ce">IEC61937DataType</a> <a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>;<span class="comment">///&lt; burst info - reference to type of payload of the data-burst</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">   61</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a>;                <span class="comment">///&lt; length code in bits or bytes, depending on data type</span></div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">   62</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>;                 <span class="comment">///&lt; data burst repetition period in bytes</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">   63</a></span>&#160;<span class="comment"></span>    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>;                <span class="comment">///&lt; allocated buffer, used for swap bytes</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#afa298ba143686d8a2569f61ba2d84151">   64</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#afa298ba143686d8a2569f61ba2d84151">buffer_size</a>;                <span class="comment">///&lt; size of allocated buffer</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">   66</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>;               <span class="comment">///&lt; pointer to the outgoing data before byte-swapping</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">   67</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>;                  <span class="comment">///&lt; amount of outgoing bytes</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">   69</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">use_preamble</a>;               <span class="comment">///&lt; preamble enabled (disabled for exactly pre-padded DTS)</span></div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">   70</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">extra_bswap</a>;                <span class="comment">///&lt; extra bswap for payload (for LE DTS =&gt; standard BE DTS)</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">   72</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>;                <span class="comment">///&lt; allocated buffer to concatenate hd audio frames</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a756cf4cdaeb984739147ab83093cb181">   73</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a756cf4cdaeb984739147ab83093cb181">hd_buf_size</a>;                <span class="comment">///&lt; size of the hd audio buffer</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">   74</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a>;               <span class="comment">///&lt; number of frames in the hd audio buffer</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">   75</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a>;              <span class="comment">///&lt; amount of bytes in the hd audio buffer</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">   77</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a>;                 <span class="comment">///&lt; counter used for skipping DTS-HD frames</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">/* AVOptions: */</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">   80</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">dtshd_rate</a>;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">   81</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">dtshd_fallback</a>;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#aa2a18f134bf496c316028578d274daed">   82</a></span>&#160;<span class="preprocessor">#define SPDIF_FLAG_BIGENDIAN    0x01</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">   83</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">spdif_flags</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    /// function, which generates codec dependent header information.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    /// Sets data_type and pkt_offset, and length_code, out_bytes, out_buf if necessary</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">   87</a></span>&#160;<span class="comment"></span>    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a>) (<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;} <a class="code" href="structIEC61937Context.html">IEC61937Context</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">   90</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structAVOption.html">AVOption</a> <a class="code" href="spdifenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>[] = {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{ <span class="stringliteral">&quot;spdif_flags&quot;</span>, <span class="stringliteral">&quot;IEC 61937 encapsulation flags&quot;</span>, offsetof(<a class="code" href="structIEC61937Context.html">IEC61937Context</a>, <a class="code" href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">spdif_flags</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a>, {.i64 = 0}, 0, INT_MAX, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>, <span class="stringliteral">&quot;spdif_flags&quot;</span> },</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{ <span class="stringliteral">&quot;be&quot;</span>, <span class="stringliteral">&quot;output in big-endian format (for use as s16be)&quot;</span>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, {.i64 = <a class="code" href="spdifenc_8c.html#aa2a18f134bf496c316028578d274daed">SPDIF_FLAG_BIGENDIAN</a>},  0, INT_MAX, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a>, <span class="stringliteral">&quot;spdif_flags&quot;</span> },</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{ <span class="stringliteral">&quot;dtshd_rate&quot;</span>, <span class="stringliteral">&quot;mux complete DTS frames in HD mode at the specified IEC958 rate (in Hz, default 0=disabled)&quot;</span>, offsetof(<a class="code" href="structIEC61937Context.html">IEC61937Context</a>, <a class="code" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">dtshd_rate</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = 0}, 0, 768000, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a> },</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{ <span class="stringliteral">&quot;dtshd_fallback_time&quot;</span>, <span class="stringliteral">&quot;min secs to strip HD for after an overflow (-1: till the end, default 60)&quot;</span>, offsetof(<a class="code" href="structIEC61937Context.html">IEC61937Context</a>, <a class="code" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">dtshd_fallback</a>), <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a>, {.i64 = 60}, -1, INT_MAX, <a class="code" href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a> },</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{ <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;};</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a62b72b02ebcc6fddc33446ec5917d70b">   98</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structAVClass.html">AVClass</a> <a class="code" href="spdifenc_8c.html#a62b72b02ebcc6fddc33446ec5917d70b">spdif_class</a> = {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    .<a class="code" href="structAVClass.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a>     = <span class="stringliteral">&quot;spdif&quot;</span>,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    .item_name      = <a class="code" href="libopenh264enc_8c.html#aff59731e3fa2a7b18cb82c17ae8adace">av_default_item_name</a>,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    .option         = <a class="code" href="spdifenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a>,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    .version        = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;};</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a38718424deafc3bf95212d6a6bf99e6d">  105</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a38718424deafc3bf95212d6a6bf99e6d">spdif_header_ac3</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">int</span> bitstream_mode = pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[5] &amp; 0x7;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>  = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea68623b81409629da51fa83eb22a5eaef">IEC61937_AC3</a> | (bitstream_mode &lt;&lt; 8);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = <a class="code" href="ac3_8h.html#aa274e24f2754e05b48a243ed1e8d2b53">AC3_FRAME_SIZE</a> &lt;&lt; 2;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a0118d1dd889c607d3be729ebe183c593">  115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a0118d1dd889c607d3be729ebe183c593">spdif_header_eac3</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> eac3_repeat[4] = {6, 3, 2, 1};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">int</span> repeat = 1;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> ((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[4] &amp; 0xc0) != 0xc0) <span class="comment">/* fscod */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        repeat = eac3_repeat[(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[4] &amp; 0x30) &gt;&gt; 4]; <span class="comment">/* numblkscod */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>, &amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a756cf4cdaeb984739147ab83093cb181">hd_buf_size</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a> + pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    memcpy(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>[ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a>], pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a> += pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (++ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> &lt; repeat){</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = 0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>   = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceac1c957f04a6f808fb5f396e175efaaf1">IEC61937_EAC3</a>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>  = 24576;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>     = ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>   = ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a> = ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a>  = 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">hd_buf_filled</a> = 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> * DTS type IV (DTS-HD) can be transmitted with various frame repetition</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> * periods; longer repetition periods allow for longer packets and therefore</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> * higher bitrate. Longer repetition periods mean that the constant bitrate of</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> * the output IEC 61937 stream is higher.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> * The repetition period is measured in IEC 60958 frames (4 bytes).</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a38d5865c355c773338f672d16a4a42ba">  153</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a38d5865c355c773338f672d16a4a42ba">spdif_dts4_subtype</a>(<span class="keywordtype">int</span> period)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">switch</span> (period) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">case</span> 512:   <span class="keywordflow">return</span> 0x0;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">case</span> 1024:  <span class="keywordflow">return</span> 0x1;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">case</span> 2048:  <span class="keywordflow">return</span> 0x2;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">case</span> 4096:  <span class="keywordflow">return</span> 0x3;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> 8192:  <span class="keywordflow">return</span> 0x4;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">case</span> 16384: <span class="keywordflow">return</span> 0x5;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a440f5efaf119660019c36cebf0ac4152">  166</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a440f5efaf119660019c36cebf0ac4152">spdif_header_dts4</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> core_size,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                             <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>, <span class="keywordtype">int</span> blocks)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> dtshd_start_code[10] = { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xfe };</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">int</span> pkt_size = pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">int</span> period;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">int</span> subtype;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (!core_size) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;HD mode not supported for this format\n&quot;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(EINVAL);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (!sample_rate) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown DTS sample rate for HD\n&quot;</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    period = ctx-&gt;<a class="code" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">dtshd_rate</a> * (blocks &lt;&lt; 5) / sample_rate;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    subtype = <a class="code" href="spdifenc_8c.html#a38d5865c355c773338f672d16a4a42ba">spdif_dts4_subtype</a>(period);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (subtype &lt; 0) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Specified HD rate of %d Hz would require an &quot;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;               <span class="stringliteral">&quot;impossible repetition period of %d for the current DTS stream&quot;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;               <span class="stringliteral">&quot; (blocks = %d, sample rate = %d)\n&quot;</span>, ctx-&gt;<a class="code" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">dtshd_rate</a>, period,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;               blocks &lt;&lt; 5, sample_rate);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(EINVAL);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">/* set pkt_offset and DTS IV subtype according to the requested output</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">     * rate */</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = period * 4;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceaa6034b94fdfe9d5767a647723c6e47dc">IEC61937_DTSHD</a> | subtype &lt;&lt; 8;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">/* If the bitrate is too high for transmitting at the selected</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">     * repetition period setting, strip DTS-HD until a good amount</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">     * of consecutive non-overflowing HD frames have been observed.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">     * This generally only happens if the caller is cramming a Master</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">     * Audio stream into 192kHz IEC 60958 (which may or may not fit). */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(dtshd_start_code) + 2 + pkt_size</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            &gt; ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> - <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a> &amp;&amp; core_size) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a>)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;DTS-HD bitrate too high, &quot;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                      <span class="stringliteral">&quot;temporarily sending core only\n&quot;</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">dtshd_fallback</a> &gt; 0)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            ctx-&gt;<a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a> = sample_rate * ctx-&gt;<a class="code" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">dtshd_fallback</a> / (blocks &lt;&lt; 5);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">/* skip permanently (dtshd_fallback == -1) or just once</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">             * (dtshd_fallback == 0) */</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            ctx-&gt;<a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a> = 1;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a> &amp;&amp; core_size) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        pkt_size = core_size;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">dtshd_fallback</a> &gt;= 0)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            --ctx-&gt;<a class="code" href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">dtshd_skip</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>   = <span class="keyword">sizeof</span>(dtshd_start_code) + 2 + pkt_size;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">/* Align so that (length_code &amp; 0xf) == 0x8. This is reportedly needed</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">     * with some receivers, but the exact requirement is unconfirmed. */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a> = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> + 0x8, 0x10) - 0x8;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a>(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>, &amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a756cf4cdaeb984739147ab83093cb181">hd_buf_size</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a> = ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    memcpy(ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>, dtshd_start_code, <span class="keyword">sizeof</span>(dtshd_start_code));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="intreadwrite_8h.html#ab7accbb4255a3ca20f84837e4ad36816">AV_WB16</a>(ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a> + <span class="keyword">sizeof</span>(dtshd_start_code), pkt_size);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    memcpy(ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a> + <span class="keyword">sizeof</span>(dtshd_start_code) + 2, pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, pkt_size);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a9c7c30d3b887d6e74ee8136a5313a06f">  243</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a9c7c30d3b887d6e74ee8136a5313a06f">spdif_header_dts</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    uint32_t syncword_dts = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> blocks;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> = 0;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">int</span> core_size = 0;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &lt; 9)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">switch</span> (syncword_dts) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dca__syncwords_8h.html#af4b364fa90de35058d2d5a99bdb53e6c">DCA_SYNCWORD_CORE_BE</a>:</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        blocks = (<a class="code" href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a>(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 4) &gt;&gt; 2) &amp; 0x7f;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        core_size = ((<a class="code" href="avr32_2intreadwrite_8h.html#a18dbad310cbaa8d1f619428edfde1295">AV_RB24</a>(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 5) &gt;&gt; 4) &amp; 0x3fff) + 1;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        sample_rate = <a class="code" href="dca_8c.html#a423131383936a7b5379074a5a5aeced3">avpriv_dca_sample_rates</a>[(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[8] &gt;&gt; 2) &amp; 0x0f];</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dca__syncwords_8h.html#ae0a86d02d2d7475fd1140635e463817c">DCA_SYNCWORD_CORE_LE</a>:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        blocks = (<a class="code" href="avr32_2intreadwrite_8h.html#a1a7214fcedcf4bd3e668506d30d7892f">AV_RL16</a>(pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> + 4) &gt;&gt; 2) &amp; 0x7f;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">extra_bswap</a> = 1;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dca__syncwords_8h.html#a378df519b7dd809c4b906b46d130e63c">DCA_SYNCWORD_CORE_14B_BE</a>:</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        blocks =</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            (((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[5] &amp; 0x07) &lt;&lt; 4) | ((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[6] &amp; 0x3f) &gt;&gt; 2));</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dca__syncwords_8h.html#af658420e683396b8a423228767f349ee">DCA_SYNCWORD_CORE_14B_LE</a>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        blocks =</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            (((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[4] &amp; 0x07) &lt;&lt; 4) | ((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[7] &amp; 0x3f) &gt;&gt; 2));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">extra_bswap</a> = 1;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="dca__syncwords_8h.html#a0744e17ce11fb85f572f0d225038239e">DCA_SYNCWORD_SUBSTREAM</a>:</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">/* We only handle HD frames that are paired with core. However,</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">           sometimes DTS-HD streams with core have a stray HD frame without</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">           core in the beginning of the stream. */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;stray DTS-HD frame\n&quot;</span>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;bad DTS syncword 0x%&quot;</span>PRIx32<span class="stringliteral">&quot;\n&quot;</span>, syncword_dts);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    blocks++;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">dtshd_rate</a>)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">/* DTS type IV output requested */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="spdifenc_8c.html#a440f5efaf119660019c36cebf0ac4152">spdif_header_dts4</a>(s, pkt, core_size, sample_rate, blocks);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">switch</span> (blocks) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">case</span>  512 &gt;&gt; 5: ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cead009dc3ac53288bf600139be4f52ab90">IEC61937_DTS1</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">case</span> 1024 &gt;&gt; 5: ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea61a225cf424f295590becd1d1d18f9c0">IEC61937_DTS2</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">case</span> 2048 &gt;&gt; 5: ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea27119616e3d852f7582c7875682d04e2">IEC61937_DTS3</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;%i samples in DTS frame not supported\n&quot;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;               blocks &lt;&lt; 5);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOSYS);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">/* discard extraneous data by default */</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (core_size &amp;&amp; core_size &lt; pkt-&gt;<a class="code" href="twinvq__data_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> = core_size;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a> = core_size &lt;&lt; 3;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = blocks &lt;&lt; 7;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> == ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">/* The DTS stream fits exactly into the output stream, so skip the</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">         * preamble as it would not fit in there. This is the case for dts</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">         * discs and dts-in-wav. */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">use_preamble</a> = 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> &gt; ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> - <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a>) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="libavutil_2internal_8h.html#a6f548a661473b6189346b3cb9e135ac1">avpriv_request_sample</a>(s, <span class="stringliteral">&quot;Unrecognized large DTS frame&quot;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">/* This will fail with a &quot;bitrate too high&quot; in the caller */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a3ff380bfd0955ae326aab368ca1a8c3e">  320</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ce">IEC61937DataType</a> <a class="code" href="spdifenc_8c.html#a3ff380bfd0955ae326aab368ca1a8c3e">mpeg_data_type</a>[2][3] = {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">//     LAYER1                      LAYER2                  LAYER3</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    { <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceacf728332f2265c7838e29e5798ebfbdd">IEC61937_MPEG2_LAYER1_LSF</a>, <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceab2536a45da9776dc3111923bbfe83efb">IEC61937_MPEG2_LAYER2_LSF</a>, <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cead3078ba7a039d9168fb17924aa4ae28a">IEC61937_MPEG2_LAYER3_LSF</a> }, <span class="comment">// MPEG-2 LSF</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    { <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea05919f94c80295c8a268ca806c7ad120">IEC61937_MPEG1_LAYER1</a>,     <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea52889d4d8fa26625cdc1d76b656b5fd6">IEC61937_MPEG1_LAYER23</a>,    IEC61937_MPEG1_LAYER23 },    <span class="comment">// MPEG-1</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;};</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#abef92416d1836e237cb317294fe170bf">  326</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#abef92416d1836e237cb317294fe170bf">spdif_header_mpeg</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#aad880fc4455c253781e8968f2239d56f">version</a> =      (pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[1] &gt;&gt; 3) &amp; 3;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordtype">int</span> layer   = 3 - ((pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[1] &gt;&gt; 1) &amp; 3);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">int</span> extension = pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>[2] &amp; 1;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (layer == 3 || version == 1) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Wrong MPEG file format\n&quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;version: %i layer: %i extension: %i\n&quot;</span>, version, layer, extension);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (version == 2 &amp;&amp; extension) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>  = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea5de9caf5f425636aefd3786f6be258f6">IEC61937_MPEG2_EXT</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = 4608;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>  = <a class="code" href="spdifenc_8c.html#a3ff380bfd0955ae326aab368ca1a8c3e">mpeg_data_type</a> [version &amp; 1][layer];</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = <a class="code" href="spdif_8h.html#ab0a70f6ec36ee11d4884f8e358ec2d5d">spdif_mpeg_pkt_offset</a>[version &amp; 1][layer];</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// TODO Data type dependent info (normal/karaoke, dynamic range control)</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a59e7fd8355f572f82236644773039a75">  349</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a59e7fd8355f572f82236644773039a75">spdif_header_aac</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="structAACADTSHeaderInfo.html">AACADTSHeaderInfo</a> hdr;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> gbc;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;gbc, pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="aacadtsdec_8h.html#ace9e66d75107e3115fb9239707715d77">AAC_ADTS_HEADER_SIZE</a> * 8);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    ret = <a class="code" href="aacadtsdec_8c.html#a21608895d3ee8758c206900ab9f888ac">avpriv_aac_parse_header</a>(&amp;gbc, &amp;hdr);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Wrong AAC file format\n&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = hdr.<a class="code" href="structAACADTSHeaderInfo.html#abdf77a077c547cb6deeff6362923e3fd">samples</a> &lt;&lt; 2;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">switch</span> (hdr.<a class="code" href="structAACADTSHeaderInfo.html#a0d91b5857fcb8613c8fc6a878c33e9b1">num_aac_frames</a>) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea95f6351a9ac076f52783ace0f2c58464">IEC61937_MPEG2_AAC</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea07cfe77bf897fb0c75d5c9e254a11559">IEC61937_MPEG2_AAC_LSF_2048</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a> = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea76b6429e8da94124354da5d80f9df089">IEC61937_MPEG2_AAC_LSF_4096</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;               <span class="stringliteral">&quot;%&quot;</span>PRIu32<span class="stringliteral">&quot; samples in AAC frame not supported\n&quot;</span>, hdr.<a class="code" href="structAACADTSHeaderInfo.html#abdf77a077c547cb6deeff6362923e3fd">samples</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(EINVAL);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">//TODO Data type dependent info (LC profile/SBR)</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * It seems Dolby TrueHD frames have to be encapsulated in MAT frames before</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> * they can be encapsulated in IEC 61937.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * Here we encapsulate 24 TrueHD frames in a single MAT frame, padding them</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> * to achieve constant rate.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> * The actual format of a MAT frame is unknown, but the below seems to work.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> * However, it seems it is not actually necessary for the 24 TrueHD frames to</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> * be in an exact alignment with the MAT frame.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">  393</a></span>&#160;<span class="preprocessor">#define MAT_FRAME_SIZE          61424</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">  394</a></span>&#160;<span class="preprocessor">#define TRUEHD_FRAME_OFFSET     2560</span></div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a26456977cbc67ce7c094f148bcde9266">  395</a></span>&#160;<span class="preprocessor">#define MAT_MIDDLE_CODE_OFFSET  -4</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a2b3f41c55b3ea743d104459ee9ff5ce8">  397</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a2b3f41c55b3ea743d104459ee9ff5ce8">spdif_header_truehd</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;{</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">int</span> mat_code_length = 0;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> mat_end_code[16] = { 0xC3, 0xC2, 0xC0, 0xC4, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x97, 0x11 };</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> mat_start_code[20] = { 0x07, 0x9E, 0x00, 0x03, 0x84, 0x01, 0x01, 0x01, 0x80, 0x00, 0x56, 0xA5, 0x3B, 0xF4, 0x81, 0x83, 0x49, 0x80, 0x77, 0xE0 };</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        mat_code_length = <span class="keyword">sizeof</span>(mat_start_code) + <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        memcpy(ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>, mat_start_code, <span class="keyword">sizeof</span>(mat_start_code));</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> == 12) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> mat_middle_code[12] = { 0xC3, 0xC1, 0x42, 0x49, 0x3B, 0xFA, 0x82, 0x83, 0x49, 0x80, 0x77, 0xE0 };</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        mat_code_length = <span class="keyword">sizeof</span>(mat_middle_code) + <a class="code" href="spdifenc_8c.html#a26456977cbc67ce7c094f148bcde9266">MAT_MIDDLE_CODE_OFFSET</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        memcpy(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>[12 * <a class="code" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a> - <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a> + <a class="code" href="spdifenc_8c.html#a26456977cbc67ce7c094f148bcde9266">MAT_MIDDLE_CODE_OFFSET</a>],</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;               mat_middle_code, <span class="keyword">sizeof</span>(mat_middle_code));</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &gt; <a class="code" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a> - mat_code_length) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">/* if such frames exist, we&#39;d need some more complex logic to</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">         * distribute the TrueHD frames in the MAT frame */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="libavutil_2internal_8h.html#a6f548a661473b6189346b3cb9e135ac1">avpriv_request_sample</a>(s, <span class="stringliteral">&quot;Too large TrueHD frame of %d bytes&quot;</span>,</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                              pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    memcpy(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>[ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> * <a class="code" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a> - <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a> + mat_code_length],</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;           pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    memset(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>[ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> * <a class="code" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a> - <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a> + mat_code_length + pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>],</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;           0, <a class="code" href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a> - pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> - mat_code_length);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (++ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> &lt; 24){</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> = 0;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    memcpy(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>[<a class="code" href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">MAT_FRAME_SIZE</a> - <span class="keyword">sizeof</span>(mat_end_code)], mat_end_code, <span class="keyword">sizeof</span>(mat_end_code));</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">hd_buf_count</a> = 0;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>   = <a class="code" href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea22320da7fb384844ad704fdd4a885b1a">IEC61937_TRUEHD</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>  = 61440;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>     = ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>   = <a class="code" href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">MAT_FRAME_SIZE</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a> = <a class="code" href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">MAT_FRAME_SIZE</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a76ca342fa980a8315ae919902e10f995">  443</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a76ca342fa980a8315ae919902e10f995">spdif_write_header</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">switch</span> (s-&gt;<a class="code" href="structAVFormatContext.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[0]-&gt;<a class="code" href="structAVStream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="structAVCodecParameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a>:</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#a38718424deafc3bf95212d6a6bf99e6d">spdif_header_ac3</a>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f">AV_CODEC_ID_EAC3</a>:</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#a0118d1dd889c607d3be729ebe183c593">spdif_header_eac3</a>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea585f305d3aab40bdfc9688f9367b04c0">AV_CODEC_ID_MP1</a>:</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a>:</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a>:</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#abef92416d1836e237cb317294fe170bf">spdif_header_mpeg</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3379ed720d45daac872b2f483f545de">AV_CODEC_ID_DTS</a>:</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#a9c7c30d3b887d6e74ee8136a5313a06f">spdif_header_dts</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988">AV_CODEC_ID_AAC</a>:</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#a59e7fd8355f572f82236644773039a75">spdif_header_aac</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e">AV_CODEC_ID_TRUEHD</a>:</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a>:</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a> = <a class="code" href="spdifenc_8c.html#a2b3f41c55b3ea743d104459ee9ff5ce8">spdif_header_truehd</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">MAT_FRAME_SIZE</a>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;codec not supported\n&quot;</span>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a42cac0283952a730c17e315614909b6d">  479</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a42cac0283952a730c17e315614909b6d">spdif_write_trailer</a>(<a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">hd_buf</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">  487</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(<a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                          <a class="code" href="structAVIOContext.html">AVIOContext</a> *pb, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#ad823be0325cd396723f2c37c16b3aaa2">val</a>)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">spdif_flags</a> &amp; <a class="code" href="spdifenc_8c.html#aa2a18f134bf496c316028578d274daed">SPDIF_FLAG_BIGENDIAN</a>)</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a>(pb, val);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="avio_8h.html#a1ba843eb6d34706bbdd177a4256e71e2">avio_wl16</a>(pb, val);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a088321445d12c004c5a48e4b30563b22">  496</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="spdifenc_8c.html#a088321445d12c004c5a48e4b30563b22">spdif_write_packet</a>(<span class="keyword">struct</span> <a class="code" href="structAVFormatContext.html">AVFormatContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="structIEC61937Context.html">IEC61937Context</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = s-&gt;<a class="code" href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordtype">int</span> ret, padding;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a> = pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> = pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a> = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, 2) &lt;&lt; 3;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">use_preamble</a> = 1;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    ctx-&gt;<a class="code" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">extra_bswap</a> = 0;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    ret = ctx-&gt;<a class="code" href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">header_info</a>(s, pkt);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    padding = (ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a> - ctx-&gt;<a class="code" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">use_preamble</a> * <a class="code" href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a> - ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>) &amp; ~1;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (padding &lt; 0) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;bitrate is too high\n&quot;</span>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(EINVAL);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">use_preamble</a>) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(ctx, s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, <a class="code" href="spdif_8h.html#a4aa114754e2418355fe80bba443c3f81">SYNCWORD1</a>);       <span class="comment">//Pa</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(ctx, s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, <a class="code" href="spdif_8h.html#aa5046374d7006bf05f9ba26faf2870c4">SYNCWORD2</a>);       <span class="comment">//Pb</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(ctx, s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>);  <span class="comment">//Pc</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(ctx, s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">length_code</a>);<span class="comment">//Pd</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">extra_bswap</a> ^ (ctx-&gt;<a class="code" href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">spdif_flags</a> &amp; <a class="code" href="spdifenc_8c.html#aa2a18f134bf496c316028578d274daed">SPDIF_FLAG_BIGENDIAN</a>)) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> &amp; ~1);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a>(&amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>, &amp;ctx-&gt;<a class="code" href="structIEC61937Context.html#afa298ba143686d8a2569f61ba2d84151">buffer_size</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (!ctx-&gt;<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="spdif_8c.html#aca06d436eb76d83b752224e5a2e1343f">ff_spdif_bswap_buf16</a>((uint16_t *)ctx-&gt;<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>, (uint16_t *)ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> &gt;&gt; 1);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">buffer</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> &amp; ~1);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">/* a final lone byte has to be MSB aligned */</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> &amp; 1)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a>(ctx, s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">out_buf</a>[ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a> - 1] &lt;&lt; 8);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="avio__internal_8h.html#a4e3d561f0280d04d67cc0e9f33a04e36">ffio_fill</a>(s-&gt;<a class="code" href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>, 0, padding);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;type=%x len=%i pkt_offset=%i\n&quot;</span>,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;           ctx-&gt;<a class="code" href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">data_type</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">out_bytes</a>, ctx-&gt;<a class="code" href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">pkt_offset</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="spdifenc_8c.html#a6d9263d4863f5c7b53700d50e18b3d98">  548</a></span>&#160;<a class="code" href="structAVOutputFormat.html">AVOutputFormat</a> <a class="code" href="spdifenc_8c.html#a6d9263d4863f5c7b53700d50e18b3d98">ff_spdif_muxer</a> = {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    .<a class="code" href="structAVOutputFormat.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>              = <span class="stringliteral">&quot;spdif&quot;</span>,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    .long_name         = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;IEC 61937 (used on S/PDIF - IEC958)&quot;</span>),</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    .extensions        = <span class="stringliteral">&quot;spdif&quot;</span>,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    .priv_data_size    = <span class="keyword">sizeof</span>(<a class="code" href="structIEC61937Context.html">IEC61937Context</a>),</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    .audio_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a>,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    .video_codec       = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a>,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    .<a class="code" href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a>      = <a class="code" href="spdifenc_8c.html#a76ca342fa980a8315ae919902e10f995">spdif_write_header</a>,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    .<a class="code" href="ffmpeg_8c.html#a0ff44ee57a28bbad348d00a32716f22b">write_packet</a>      = <a class="code" href="spdifenc_8c.html#a088321445d12c004c5a48e4b30563b22">spdif_write_packet</a>,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    .<a class="code" href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a>     = <a class="code" href="spdifenc_8c.html#a42cac0283952a730c17e315614909b6d">spdif_write_trailer</a>,</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    .<a class="code" href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>             = <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    .priv_class        = &amp;spdif_class,</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;};</div><div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea07cfe77bf897fb0c75d5c9e254a11559"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea07cfe77bf897fb0c75d5c9e254a11559">IEC61937_MPEG2_AAC_LSF_2048</a></div><div class="ttdoc">MPEG-2 AAC ADTS half-rate low sampling frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00049">spdif.h:49</a></div></div>
<div class="ttc" id="structIEC61937Context_html_aea5fd13ce23881ecbd729f0abdfafbe4"><div class="ttname"><a href="structIEC61937Context.html#aea5fd13ce23881ecbd729f0abdfafbe4">IEC61937Context::out_buf</a></div><div class="ttdeci">uint8_t * out_buf</div><div class="ttdoc">pointer to the outgoing data before byte-swapping </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00066">spdifenc.c:66</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_ad823be0325cd396723f2c37c16b3aaa2"><div class="ttname"><a href="avisynth__c_8h.html#ad823be0325cd396723f2c37c16b3aaa2">val</a></div><div class="ttdeci">const char const char void * val</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00771">avisynth_c.h:771</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00549">avcodec.h:549</a></div></div>
<div class="ttc" id="avio_8h_html_a1ba843eb6d34706bbdd177a4256e71e2"><div class="ttname"><a href="avio_8h.html#a1ba843eb6d34706bbdd177a4256e71e2">avio_wl16</a></div><div class="ttdeci">void avio_wl16(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00446">aviobuf.c:446</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_ab87f55bd0280d90925050a4188c14ab5"><div class="ttname"><a href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a></div><div class="ttdeci">const char * s</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00768">avisynth_c.h:768</a></div></div>
<div class="ttc" id="structAVIOContext_html"><div class="ttname"><a href="structAVIOContext.html">AVIOContext</a></div><div class="ttdoc">Bytestream IO Context. </div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00147">avio.h:147</a></div></div>
<div class="ttc" id="group__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="spdif_8h_html"><div class="ttname"><a href="spdif_8h.html">spdif.h</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea48761c50b102343e2648c3e28a94e7ab">AV_CODEC_ID_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00192">avcodec.h:192</a></div></div>
<div class="ttc" id="twinvq__data_8h_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="twinvq__data_8h.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="structAVOption_html"><div class="ttname"><a href="structAVOption.html">AVOption</a></div><div class="ttdoc">AVOption. </div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00246">opt.h:246</a></div></div>
<div class="ttc" id="structIEC61937Context_html_af1d3bc87d5fd0d7a85adc1654bd3b25b"><div class="ttname"><a href="structIEC61937Context.html#af1d3bc87d5fd0d7a85adc1654bd3b25b">IEC61937Context::pkt_offset</a></div><div class="ttdeci">int pkt_offset</div><div class="ttdoc">data burst repetition period in bytes </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00062">spdifenc.c:62</a></div></div>
<div class="ttc" id="spdifenc_8c_html_abef92416d1836e237cb317294fe170bf"><div class="ttname"><a href="spdifenc_8c.html#abef92416d1836e237cb317294fe170bf">spdif_header_mpeg</a></div><div class="ttdeci">static int spdif_header_mpeg(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00326">spdifenc.c:326</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdoc">Something somehow does not look correct. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00182">log.h:182</a></div></div>
<div class="ttc" id="group__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="spdif_8h_html_abb0950d1d7694d44f5f7dc7fbc9af8b5"><div class="ttname"><a href="spdif_8h.html#abb0950d1d7694d44f5f7dc7fbc9af8b5">BURST_HEADER_SIZE</a></div><div class="ttdeci">#define BURST_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00030">spdif.h:30</a></div></div>
<div class="ttc" id="group__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444ac068b8f6afeeb293a13aeabb5d702411">AV_OPT_TYPE_INT</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00223">opt.h:223</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4ceacf728332f2265c7838e29e5798ebfbdd"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceacf728332f2265c7838e29e5798ebfbdd">IEC61937_MPEG2_LAYER1_LSF</a></div><div class="ttdoc">MPEG-2, layer-1 low sampling frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00038">spdif.h:38</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a38d5865c355c773338f672d16a4a42ba"><div class="ttname"><a href="spdifenc_8c.html#a38d5865c355c773338f672d16a4a42ba">spdif_dts4_subtype</a></div><div class="ttdeci">static int spdif_dts4_subtype(int period)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00153">spdifenc.c:153</a></div></div>
<div class="ttc" id="ff__glob_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="ff__glob_8c_source.html#l00222">ff_glob.c:222</a></div></div>
<div class="ttc" id="structAVCodecParameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="structAVCodecParameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdoc">Specific type of the encoded data (the codec used). </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03999">avcodec.h:3999</a></div></div>
<div class="ttc" id="structAVPacket_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01612">avcodec.h:1612</a></div></div>
<div class="ttc" id="avr32_2intreadwrite_8h_html_a18dbad310cbaa8d1f619428edfde1295"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a18dbad310cbaa8d1f619428edfde1295">AV_RB24</a></div><div class="ttdeci">#define AV_RB24</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00064">intreadwrite.h:64</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea585f305d3aab40bdfc9688f9367b04c0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea585f305d3aab40bdfc9688f9367b04c0">AV_CODEC_ID_MP1</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00565">avcodec.h:565</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4ce"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ce">IEC61937DataType</a></div><div class="ttdeci">IEC61937DataType</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00032">spdif.h:32</a></div></div>
<div class="ttc" id="dca_8h_html"><div class="ttname"><a href="dca_8h.html">dca.h</a></div></div>
<div class="ttc" id="avr32_2intreadwrite_8h_html_a1a7214fcedcf4bd3e668506d30d7892f"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a1a7214fcedcf4bd3e668506d30d7892f">AV_RL16</a></div><div class="ttdeci">#define AV_RL16</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00042">intreadwrite.h:42</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a088321445d12c004c5a48e4b30563b22"><div class="ttname"><a href="spdifenc_8c.html#a088321445d12c004c5a48e4b30563b22">spdif_write_packet</a></div><div class="ttdeci">static int spdif_write_packet(struct AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00496">spdifenc.c:496</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_aad880fc4455c253781e8968f2239d56f"><div class="ttname"><a href="avisynth__c_8h.html#aad880fc4455c253781e8968f2239d56f">version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00766">avisynth_c.h:766</a></div></div>
<div class="ttc" id="demuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a9c7c30d3b887d6e74ee8136a5313a06f"><div class="ttname"><a href="spdifenc_8c.html#a9c7c30d3b887d6e74ee8136a5313a06f">spdif_header_dts</a></div><div class="ttdeci">static int spdif_header_dts(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00243">spdifenc.c:243</a></div></div>
<div class="ttc" id="spdif_8c_html_aca06d436eb76d83b752224e5a2e1343f"><div class="ttname"><a href="spdif_8c.html#aca06d436eb76d83b752224e5a2e1343f">ff_spdif_bswap_buf16</a></div><div class="ttdeci">void ff_spdif_bswap_buf16(uint16_t *dst, const uint16_t *src, int w)</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8c_source.html#l00026">spdif.c:26</a></div></div>
<div class="ttc" id="group__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00222">opt.h:222</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a0118d1dd889c607d3be729ebe183c593"><div class="ttname"><a href="spdifenc_8c.html#a0118d1dd889c607d3be729ebe183c593">spdif_header_eac3</a></div><div class="ttdeci">static int spdif_header_eac3(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00115">spdifenc.c:115</a></div></div>
<div class="ttc" id="structIEC61937Context_html_afa298ba143686d8a2569f61ba2d84151"><div class="ttname"><a href="structIEC61937Context.html#afa298ba143686d8a2569f61ba2d84151">IEC61937Context::buffer_size</a></div><div class="ttdeci">int buffer_size</div><div class="ttdoc">size of allocated buffer </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00064">spdifenc.c:64</a></div></div>
<div class="ttc" id="structAVFormatContext_html"><div class="ttname"><a href="structAVFormatContext.html">AVFormatContext</a></div><div class="ttdoc">Format I/O context. </div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01338">avformat.h:1338</a></div></div>
<div class="ttc" id="structAVClass_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="structAVClass.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdoc">The name of the class; usually it is the same name as the context structure type to which the AVClass...</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a62b72b02ebcc6fddc33446ec5917d70b"><div class="ttname"><a href="spdifenc_8c.html#a62b72b02ebcc6fddc33446ec5917d70b">spdif_class</a></div><div class="ttdeci">static const AVClass spdif_class</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00098">spdifenc.c:98</a></div></div>
<div class="ttc" id="group__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00232">opt.h:232</a></div></div>
<div class="ttc" id="libavutil_2internal_8h_html_a6f548a661473b6189346b3cb9e135ac1"><div class="ttname"><a href="libavutil_2internal_8h.html#a6f548a661473b6189346b3cb9e135ac1">avpriv_request_sample</a></div><div class="ttdeci">void void avpriv_request_sample(void *avc, const char *msg,...) av_printf_format(2</div><div class="ttdoc">Log a generic warning message about a missing feature. </div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea95f6351a9ac076f52783ace0f2c58464"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea95f6351a9ac076f52783ace0f2c58464">IEC61937_MPEG2_AAC</a></div><div class="ttdoc">MPEG-2 AAC ADTS. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00037">spdif.h:37</a></div></div>
<div class="ttc" id="audio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="opt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div><div class="ttdoc">AVOptions. </div></div>
<div class="ttc" id="avr32_2intreadwrite_8h_html_a236265133da1ecd6375e5e7c405020a0"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a></div><div class="ttdeci">#define AV_RB32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00130">intreadwrite.h:130</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html_a378df519b7dd809c4b906b46d130e63c"><div class="ttname"><a href="dca__syncwords_8h.html#a378df519b7dd809c4b906b46d130e63c">DCA_SYNCWORD_CORE_14B_BE</a></div><div class="ttdeci">#define DCA_SYNCWORD_CORE_14B_BE</div><div class="ttdef"><b>Definition:</b> <a href="dca__syncwords_8h_source.html#l00024">dca_syncwords.h:24</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaadba4b5a087e2b6bf2acdd1b5aebb988">AV_CODEC_ID_AAC</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00522">avcodec.h:522</a></div></div>
<div class="ttc" id="structAVFormatContext_html_acfefb6b6cf21e87a0dcbd1a547ba2348"><div class="ttname"><a href="structAVFormatContext.html#acfefb6b6cf21e87a0dcbd1a547ba2348">AVFormatContext::streams</a></div><div class="ttdeci">AVStream ** streams</div><div class="ttdoc">A list of all streams in the file. </div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01406">avformat.h:1406</a></div></div>
<div class="ttc" id="avio__internal_8h_html"><div class="ttname"><a href="avio__internal_8h.html">avio_internal.h</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a6d9263d4863f5c7b53700d50e18b3d98"><div class="ttname"><a href="spdifenc_8c.html#a6d9263d4863f5c7b53700d50e18b3d98">ff_spdif_muxer</a></div><div class="ttdeci">AVOutputFormat ff_spdif_muxer</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00548">spdifenc.c:548</a></div></div>
<div class="ttc" id="structAVPacket_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01611">avcodec.h:1611</a></div></div>
<div class="ttc" id="log_8c_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a></div><div class="ttdeci">static int flags</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00057">log.c:57</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a26456977cbc67ce7c094f148bcde9266"><div class="ttname"><a href="spdifenc_8c.html#a26456977cbc67ce7c094f148bcde9266">MAT_MIDDLE_CODE_OFFSET</a></div><div class="ttdeci">#define MAT_MIDDLE_CODE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00395">spdifenc.c:395</a></div></div>
<div class="ttc" id="spdifenc_8c_html_aa2a18f134bf496c316028578d274daed"><div class="ttname"><a href="spdifenc_8c.html#aa2a18f134bf496c316028578d274daed">SPDIF_FLAG_BIGENDIAN</a></div><div class="ttdeci">#define SPDIF_FLAG_BIGENDIAN</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00082">spdifenc.c:82</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea61a225cf424f295590becd1d1d18f9c0"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea61a225cf424f295590becd1d1d18f9c0">IEC61937_DTS2</a></div><div class="ttdoc">DTS type II (1024 samples) </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00042">spdif.h:42</a></div></div>
<div class="ttc" id="avio_8h_html_acc3626afc6aa3964b75d02811457164e"><div class="ttname"><a href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a></div><div class="ttdeci">void avio_write(AVIOContext *s, const unsigned char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00204">aviobuf.c:204</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a42cac0283952a730c17e315614909b6d"><div class="ttname"><a href="spdifenc_8c.html#a42cac0283952a730c17e315614909b6d">spdif_write_trailer</a></div><div class="ttdeci">static int spdif_write_trailer(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00479">spdifenc.c:479</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_ab7accbb4255a3ca20f84837e4ad36816"><div class="ttname"><a href="intreadwrite_8h.html#ab7accbb4255a3ca20f84837e4ad36816">AV_WB16</a></div><div class="ttdeci">#define AV_WB16(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00405">intreadwrite.h:405</a></div></div>
<div class="ttc" id="macros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea22320da7fb384844ad704fdd4a885b1a"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea22320da7fb384844ad704fdd4a885b1a">IEC61937_TRUEHD</a></div><div class="ttdoc">TrueHD data. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00052">spdif.h:52</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="opt_8h_html_aba0d5e41287b6fbeae5dd59f643695cc"><div class="ttname"><a href="opt_8h.html#aba0d5e41287b6fbeae5dd59f643695cc">AV_OPT_FLAG_ENCODING_PARAM</a></div><div class="ttdeci">#define AV_OPT_FLAG_ENCODING_PARAM</div><div class="ttdoc">a generic parameter which can be set by the user for muxing or encoding </div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00276">opt.h:276</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html_af4b364fa90de35058d2d5a99bdb53e6c"><div class="ttname"><a href="dca__syncwords_8h.html#af4b364fa90de35058d2d5a99bdb53e6c">DCA_SYNCWORD_CORE_BE</a></div><div class="ttdeci">#define DCA_SYNCWORD_CORE_BE</div><div class="ttdef"><b>Definition:</b> <a href="dca__syncwords_8h_source.html#l00022">dca_syncwords.h:22</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4ceaa6034b94fdfe9d5767a647723c6e47dc"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceaa6034b94fdfe9d5767a647723c6e47dc">IEC61937_DTSHD</a></div><div class="ttdoc">DTS HD data. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00047">spdif.h:47</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e">AV_CODEC_ID_TRUEHD</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00567">avcodec.h:567</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdoc">Something went wrong and cannot losslessly be recovered. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00176">log.h:176</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea27119616e3d852f7582c7875682d04e2"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea27119616e3d852f7582c7875682d04e2">IEC61937_DTS3</a></div><div class="ttdoc">DTS type III (2048 samples) </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00043">spdif.h:43</a></div></div>
<div class="ttc" id="aacadtsdec_8h_html"><div class="ttname"><a href="aacadtsdec_8h.html">aacadtsdec.h</a></div></div>
<div class="ttc" id="structIEC61937Context_html_aca195241c538e2dd25d608141ccf26a3"><div class="ttname"><a href="structIEC61937Context.html#aca195241c538e2dd25d608141ccf26a3">IEC61937Context::av_class</a></div><div class="ttdeci">const AVClass * av_class</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00059">spdifenc.c:59</a></div></div>
<div class="ttc" id="libopenh264enc_8c_html_aff59731e3fa2a7b18cb82c17ae8adace"><div class="ttname"><a href="libopenh264enc_8c.html#aff59731e3fa2a7b18cb82c17ae8adace">av_default_item_name</a></div><div class="ttdeci">av_default_item_name</div><div class="ttdef"><b>Definition:</b> <a href="libopenh264enc_8c_source.html#l00078">libopenh264enc.c:78</a></div></div>
<div class="ttc" id="avr32_2intreadwrite_8h_html_a6a4c12ef75a81c72f96410e9d1d8c8e9"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a6a4c12ef75a81c72f96410e9d1d8c8e9">AV_RB16</a></div><div class="ttdeci">#define AV_RB16</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00053">intreadwrite.h:53</a></div></div>
<div class="ttc" id="group__lavu__error_html_gae4bb6f165973d09584e0ec0f335f69ca"><div class="ttname"><a href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a></div><div class="ttdeci">#define AVERROR(e)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00043">error.h:43</a></div></div>
<div class="ttc" id="libavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdoc">Return NULL if CONFIG_SMALL is true, otherwise the argument without modification. ...</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00176">internal.h:176</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a07e7c5e26b53e237f3afbf9ad893a0a9"><div class="ttname"><a href="structIEC61937Context.html#a07e7c5e26b53e237f3afbf9ad893a0a9">IEC61937Context::header_info</a></div><div class="ttdeci">int(* header_info)(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdoc">function, which generates codec dependent header information. </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00087">spdifenc.c:87</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdoc">Stuff which is only useful for libav* developers. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00197">log.h:197</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaa3379ed720d45daac872b2f483f545de"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaa3379ed720d45daac872b2f483f545de">AV_CODEC_ID_DTS</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00524">avcodec.h:524</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a></div><div class="ttdoc">preferred ID for decoding MPEG audio layer 1, 2 or 3 </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00521">avcodec.h:521</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea52889d4d8fa26625cdc1d76b656b5fd6"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea52889d4d8fa26625cdc1d76b656b5fd6">IEC61937_MPEG1_LAYER23</a></div><div class="ttdoc">MPEG-1 layer 2 or 3 data or MPEG-2 without extension. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00035">spdif.h:35</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cead3078ba7a039d9168fb17924aa4ae28a"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cead3078ba7a039d9168fb17924aa4ae28a">IEC61937_MPEG2_LAYER3_LSF</a></div><div class="ttdoc">MPEG-2, layer-3 low sampling frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00040">spdif.h:40</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a488151067ef96c481f33b8caba2a01a0"><div class="ttname"><a href="structIEC61937Context.html#a488151067ef96c481f33b8caba2a01a0">IEC61937Context::hd_buf_count</a></div><div class="ttdeci">int hd_buf_count</div><div class="ttdoc">number of frames in the hd audio buffer </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00074">spdifenc.c:74</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html_af658420e683396b8a423228767f349ee"><div class="ttname"><a href="dca__syncwords_8h.html#af658420e683396b8a423228767f349ee">DCA_SYNCWORD_CORE_14B_LE</a></div><div class="ttdeci">#define DCA_SYNCWORD_CORE_14B_LE</div><div class="ttdef"><b>Definition:</b> <a href="dca__syncwords_8h_source.html#l00025">dca_syncwords.h:25</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea05919f94c80295c8a268ca806c7ad120"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea05919f94c80295c8a268ca806c7ad120">IEC61937_MPEG1_LAYER1</a></div><div class="ttdoc">MPEG-1 layer 1. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00034">spdif.h:34</a></div></div>
<div class="ttc" id="group__lavu__mem__funcs_html_ga29d0252b981f157e713a68ffca52f003"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a></div><div class="ttdeci">void av_fast_malloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdoc">Allocate a buffer, reusing the given one if large enough. </div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00499">mem.c:499</a></div></div>
<div class="ttc" id="avio__internal_8h_html_a4e3d561f0280d04d67cc0e9f33a04e36"><div class="ttname"><a href="avio__internal_8h.html#a4e3d561f0280d04d67cc0e9f33a04e36">ffio_fill</a></div><div class="ttdeci">void ffio_fill(AVIOContext *s, int b, int count)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00190">aviobuf.c:190</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a73e7f9b1831fbd9b8ddaab60c215563d"><div class="ttname"><a href="structIEC61937Context.html#a73e7f9b1831fbd9b8ddaab60c215563d">IEC61937Context::buffer</a></div><div class="ttdeci">uint8_t * buffer</div><div class="ttdoc">allocated buffer, used for swap bytes </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00063">spdifenc.c:63</a></div></div>
<div class="ttc" id="structIEC61937Context_html_af56e3e637936c55d4c4a07f88804fc92"><div class="ttname"><a href="structIEC61937Context.html#af56e3e637936c55d4c4a07f88804fc92">IEC61937Context::out_bytes</a></div><div class="ttdeci">int out_bytes</div><div class="ttdoc">amount of outgoing bytes </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00067">spdifenc.c:67</a></div></div>
<div class="ttc" id="v4l2enc_8c_html_a4f80c0767194e6e297d2952ed1e75ccc"><div class="ttname"><a href="v4l2enc_8c.html#a4f80c0767194e6e297d2952ed1e75ccc">write_trailer</a></div><div class="ttdeci">static int write_trailer(AVFormatContext *s1)</div><div class="ttdef"><b>Definition:</b> <a href="v4l2enc_8c_source.html#l00094">v4l2enc.c:94</a></div></div>
<div class="ttc" id="structAACADTSHeaderInfo_html_a0d91b5857fcb8613c8fc6a878c33e9b1"><div class="ttname"><a href="structAACADTSHeaderInfo.html#a0d91b5857fcb8613c8fc6a878c33e9b1">AACADTSHeaderInfo::num_aac_frames</a></div><div class="ttdeci">uint8_t num_aac_frames</div><div class="ttdef"><b>Definition:</b> <a href="aacadtsdec_8h_source.html#l00039">aacadtsdec.h:39</a></div></div>
<div class="ttc" id="structAVOutputFormat_html_ac3abc5f47f3465b6b7eec89c9476351c"><div class="ttname"><a href="structAVOutputFormat.html#ac3abc5f47f3465b6b7eec89c9476351c">AVOutputFormat::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00524">avformat.h:524</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html"><div class="ttname"><a href="dca__syncwords_8h.html">dca_syncwords.h</a></div></div>
<div class="ttc" id="tests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="spdifenc_8c_html_ab743ba621b96cd4ef04d8187574427fe"><div class="ttname"><a href="spdifenc_8c.html#ab743ba621b96cd4ef04d8187574427fe">TRUEHD_FRAME_OFFSET</a></div><div class="ttdeci">#define TRUEHD_FRAME_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00394">spdifenc.c:394</a></div></div>
<div class="ttc" id="group__lavu__mem__funcs_html_ga869fd8884d8d29a7a4910d879926d94a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a></div><div class="ttdeci">void * av_fast_realloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdoc">Reallocate the given buffer if it is not large enough, otherwise do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00480">mem.c:480</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a2772eeacd4227273ed7d062925c481b7"><div class="ttname"><a href="structIEC61937Context.html#a2772eeacd4227273ed7d062925c481b7">IEC61937Context::dtshd_fallback</a></div><div class="ttdeci">int dtshd_fallback</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00081">spdifenc.c:81</a></div></div>
<div class="ttc" id="structAACADTSHeaderInfo_html_abdf77a077c547cb6deeff6362923e3fd"><div class="ttname"><a href="structAACADTSHeaderInfo.html#abdf77a077c547cb6deeff6362923e3fd">AACADTSHeaderInfo::samples</a></div><div class="ttdeci">uint32_t samples</div><div class="ttdef"><b>Definition:</b> <a href="aacadtsdec_8h_source.html#l00033">aacadtsdec.h:33</a></div></div>
<div class="ttc" id="dca_8c_html_a423131383936a7b5379074a5a5aeced3"><div class="ttname"><a href="dca_8c.html#a423131383936a7b5379074a5a5aeced3">avpriv_dca_sample_rates</a></div><div class="ttdeci">const uint32_t avpriv_dca_sample_rates[16]</div><div class="ttdef"><b>Definition:</b> <a href="dca_8c_source.html#l00034">dca.c:34</a></div></div>
<div class="ttc" id="spdifenc_8c_html_ae80324be40e9f8cd6e61ac16f08c8b5b"><div class="ttname"><a href="spdifenc_8c.html#ae80324be40e9f8cd6e61ac16f08c8b5b">spdif_put_16</a></div><div class="ttdeci">static av_always_inline void spdif_put_16(IEC61937Context *ctx, AVIOContext *pb, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00487">spdifenc.c:487</a></div></div>
<div class="ttc" id="structIEC61937Context_html_aaab93420f6a4a95cdd3a8281454e333b"><div class="ttname"><a href="structIEC61937Context.html#aaab93420f6a4a95cdd3a8281454e333b">IEC61937Context::data_type</a></div><div class="ttdeci">enum IEC61937DataType data_type</div><div class="ttdoc">burst info - reference to type of payload of the data-burst </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00060">spdifenc.c:60</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a3ff380bfd0955ae326aab368ca1a8c3e"><div class="ttname"><a href="spdifenc_8c.html#a3ff380bfd0955ae326aab368ca1a8c3e">mpeg_data_type</a></div><div class="ttdeci">static enum IEC61937DataType mpeg_data_type[2][3]</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00320">spdifenc.c:320</a></div></div>
<div class="ttc" id="spdif_8h_html_aa5046374d7006bf05f9ba26faf2870c4"><div class="ttname"><a href="spdif_8h.html#aa5046374d7006bf05f9ba26faf2870c4">SYNCWORD2</a></div><div class="ttdeci">#define SYNCWORD2</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00029">spdif.h:29</a></div></div>
<div class="ttc" id="group__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="avformat_8h_html_ae4418d32b17890be22da9c5f95087168"><div class="ttname"><a href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a></div><div class="ttdeci">#define AVFMT_NOTIMESTAMPS</div><div class="ttdoc">Format does not need / have any timestamps. </div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00486">avformat.h:486</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a384ff94b5139f441c282c9b4c7b985e6"><div class="ttname"><a href="spdifenc_8c.html#a384ff94b5139f441c282c9b4c7b985e6">options</a></div><div class="ttdeci">static const AVOption options[]</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00090">spdifenc.c:90</a></div></div>
<div class="ttc" id="aacadtsdec_8h_html_ace9e66d75107e3115fb9239707715d77"><div class="ttname"><a href="aacadtsdec_8h.html#ace9e66d75107e3115fb9239707715d77">AAC_ADTS_HEADER_SIZE</a></div><div class="ttdeci">#define AAC_ADTS_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="aacadtsdec_8h_source.html#l00029">aacadtsdec.h:29</a></div></div>
<div class="ttc" id="ffmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00190">ffmpeg_filter.c:190</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a0e10e17c35d195c695f667a821f4f021"><div class="ttname"><a href="spdifenc_8c.html#a0e10e17c35d195c695f667a821f4f021">MAT_FRAME_SIZE</a></div><div class="ttdeci">#define MAT_FRAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00393">spdifenc.c:393</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a76ca342fa980a8315ae919902e10f995"><div class="ttname"><a href="spdifenc_8c.html#a76ca342fa980a8315ae919902e10f995">spdif_write_header</a></div><div class="ttdeci">static int spdif_write_header(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00443">spdifenc.c:443</a></div></div>
<div class="ttc" id="structAVFormatContext_html_a1e7324262b6b78522e52064daaa7bc87"><div class="ttname"><a href="structAVFormatContext.html#a1e7324262b6b78522e52064daaa7bc87">AVFormatContext::pb</a></div><div class="ttdeci">AVIOContext * pb</div><div class="ttdoc">I/O context. </div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01380">avformat.h:1380</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a939bba15cec11983a7f10e65d96494cf"><div class="ttname"><a href="structIEC61937Context.html#a939bba15cec11983a7f10e65d96494cf">IEC61937Context::use_preamble</a></div><div class="ttdeci">int use_preamble</div><div class="ttdoc">preamble enabled (disabled for exactly pre-padded DTS) </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00069">spdifenc.c:69</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html_ae0a86d02d2d7475fd1140635e463817c"><div class="ttname"><a href="dca__syncwords_8h.html#ae0a86d02d2d7475fd1140635e463817c">DCA_SYNCWORD_CORE_LE</a></div><div class="ttdeci">#define DCA_SYNCWORD_CORE_LE</div><div class="ttdef"><b>Definition:</b> <a href="dca__syncwords_8h_source.html#l00023">dca_syncwords.h:23</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00523">avcodec.h:523</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea14c0f2031427f1065ae8c18095e4384f">AV_CODEC_ID_EAC3</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00563">avcodec.h:563</a></div></div>
<div class="ttc" id="aacadtsdec_8c_html_a21608895d3ee8758c206900ab9f888ac"><div class="ttname"><a href="aacadtsdec_8c.html#a21608895d3ee8758c206900ab9f888ac">avpriv_aac_parse_header</a></div><div class="ttdeci">int avpriv_aac_parse_header(GetBitContext *gbc, AACADTSHeaderInfo *hdr)</div><div class="ttdoc">Parse AAC frame header. </div><div class="ttdef"><b>Definition:</b> <a href="aacadtsdec_8c_source.html#l00029">aacadtsdec.c:29</a></div></div>
<div class="ttc" id="ffmpeg_8c_html_a0ff44ee57a28bbad348d00a32716f22b"><div class="ttname"><a href="ffmpeg_8c.html#a0ff44ee57a28bbad348d00a32716f22b">write_packet</a></div><div class="ttdeci">static void write_packet(OutputFile *of, AVPacket *pkt, OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00655">ffmpeg.c:655</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a736ba9f9f0c1d3d416f2e7b81a6fdc08"><div class="ttname"><a href="structIEC61937Context.html#a736ba9f9f0c1d3d416f2e7b81a6fdc08">IEC61937Context::hd_buf_filled</a></div><div class="ttdeci">int hd_buf_filled</div><div class="ttdoc">amount of bytes in the hd audio buffer </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00075">spdifenc.c:75</a></div></div>
<div class="ttc" id="structAVClass_html"><div class="ttname"><a href="structAVClass.html">AVClass</a></div><div class="ttdoc">Describe the class of an AVClass context structure. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a022e495658c8c961523f1e5e76334c9a"><div class="ttname"><a href="structIEC61937Context.html#a022e495658c8c961523f1e5e76334c9a">IEC61937Context::length_code</a></div><div class="ttdeci">int length_code</div><div class="ttdoc">length code in bits or bytes, depending on data type </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00061">spdifenc.c:61</a></div></div>
<div class="ttc" id="get__bits_8h_html_af65c008755f74e99d139eae8b46534b5"><div class="ttname"><a href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a></div><div class="ttdeci">static int init_get_bits(GetBitContext *s, const uint8_t *buffer, int bit_size)</div><div class="ttdoc">Initialize GetBitContext. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00411">get_bits.h:411</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea90ffce5aedda33269b22221916cd8487">AV_CODEC_ID_MP2</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00520">avcodec.h:520</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a2b3f41c55b3ea743d104459ee9ff5ce8"><div class="ttname"><a href="spdifenc_8c.html#a2b3f41c55b3ea743d104459ee9ff5ce8">spdif_header_truehd</a></div><div class="ttdeci">static int spdif_header_truehd(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00397">spdifenc.c:397</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cead009dc3ac53288bf600139be4f52ab90"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cead009dc3ac53288bf600139be4f52ab90">IEC61937_DTS1</a></div><div class="ttdoc">DTS type I (512 samples) </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00041">spdif.h:41</a></div></div>
<div class="ttc" id="avio_8h_html_a21c2d7b7ddd7f31d24d278f8b3281ec3"><div class="ttname"><a href="avio_8h.html#a21c2d7b7ddd7f31d24d278f8b3281ec3">avio_wb16</a></div><div class="ttdeci">void avio_wb16(AVIOContext *s, unsigned int val)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00452">aviobuf.c:452</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4ceab2536a45da9776dc3111923bbfe83efb"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceab2536a45da9776dc3111923bbfe83efb">IEC61937_MPEG2_LAYER2_LSF</a></div><div class="ttdoc">MPEG-2, layer-2 low sampling frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00039">spdif.h:39</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a59e7fd8355f572f82236644773039a75"><div class="ttname"><a href="spdifenc_8c.html#a59e7fd8355f572f82236644773039a75">spdif_header_aac</a></div><div class="ttdeci">static int spdif_header_aac(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00349">spdifenc.c:349</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4ceac1c957f04a6f808fb5f396e175efaaf1"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4ceac1c957f04a6f808fb5f396e175efaaf1">IEC61937_EAC3</a></div><div class="ttdoc">E-AC-3 data. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00051">spdif.h:51</a></div></div>
<div class="ttc" id="ac3_8h_html_aa274e24f2754e05b48a243ed1e8d2b53"><div class="ttname"><a href="ac3_8h.html#aa274e24f2754e05b48a243ed1e8d2b53">AC3_FRAME_SIZE</a></div><div class="ttdeci">#define AC3_FRAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="ac3_8h_source.html#l00037">ac3.h:37</a></div></div>
<div class="ttc" id="structAACADTSHeaderInfo_html"><div class="ttname"><a href="structAACADTSHeaderInfo.html">AACADTSHeaderInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="aacadtsdec_8h_source.html#l00031">aacadtsdec.h:31</a></div></div>
<div class="ttc" id="avformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div><div class="ttdoc">Main libavformat public API header. </div></div>
<div class="ttc" id="ffmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00190">ffmpeg_filter.c:190</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a568a654e73c240a04a0f4649a84bc5c4"><div class="ttname"><a href="structIEC61937Context.html#a568a654e73c240a04a0f4649a84bc5c4">IEC61937Context::dtshd_rate</a></div><div class="ttdeci">int dtshd_rate</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00080">spdifenc.c:80</a></div></div>
<div class="ttc" id="structGetBitContext_html"><div class="ttname"><a href="structGetBitContext.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00055">get_bits.h:55</a></div></div>
<div class="ttc" id="structAVOutputFormat_html"><div class="ttname"><a href="structAVOutputFormat.html">AVOutputFormat</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00523">avformat.h:523</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdoc">Required number of additionally allocated bytes at the end of the input bitstream for decoding...</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00738">avcodec.h:738</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea5de9caf5f425636aefd3786f6be258f6"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea5de9caf5f425636aefd3786f6be258f6">IEC61937_MPEG2_EXT</a></div><div class="ttdoc">MPEG-2 data with extension. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00036">spdif.h:36</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a67be5b57660eb386873dcff4e56bd1cc"><div class="ttname"><a href="structIEC61937Context.html#a67be5b57660eb386873dcff4e56bd1cc">IEC61937Context::dtshd_skip</a></div><div class="ttdeci">int dtshd_skip</div><div class="ttdoc">counter used for skipping DTS-HD frames </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00077">spdifenc.c:77</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a756cf4cdaeb984739147ab83093cb181"><div class="ttname"><a href="structIEC61937Context.html#a756cf4cdaeb984739147ab83093cb181">IEC61937Context::hd_buf_size</a></div><div class="ttdeci">int hd_buf_size</div><div class="ttdoc">size of the hd audio buffer </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00073">spdifenc.c:73</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea76b6429e8da94124354da5d80f9df089"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea76b6429e8da94124354da5d80f9df089">IEC61937_MPEG2_AAC_LSF_4096</a></div><div class="ttdoc">MPEG-2 AAC ADTS quarter-rate low sampling frequency. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00050">spdif.h:50</a></div></div>
<div class="ttc" id="spdif_8h_html_ab0a70f6ec36ee11d4884f8e358ec2d5d"><div class="ttname"><a href="spdif_8h.html#ab0a70f6ec36ee11d4884f8e358ec2d5d">spdif_mpeg_pkt_offset</a></div><div class="ttdeci">static const uint16_t spdif_mpeg_pkt_offset[2][3]</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00055">spdif.h:55</a></div></div>
<div class="ttc" id="spdif_8h_html_a4aa114754e2418355fe80bba443c3f81"><div class="ttname"><a href="spdif_8h.html#a4aa114754e2418355fe80bba443c3f81">SYNCWORD1</a></div><div class="ttdeci">#define SYNCWORD1</div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00028">spdif.h:28</a></div></div>
<div class="ttc" id="structAVFormatContext_html_ac4c0777e54085af2f3f1b27130e2b21b"><div class="ttname"><a href="structAVFormatContext.html#ac4c0777e54085af2f3f1b27130e2b21b">AVFormatContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdoc">Format private data. </div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01366">avformat.h:1366</a></div></div>
<div class="ttc" id="dca__syncwords_8h_html_a0744e17ce11fb85f572f0d225038239e"><div class="ttname"><a href="dca__syncwords_8h.html#a0744e17ce11fb85f572f0d225038239e">DCA_SYNCWORD_SUBSTREAM</a></div><div class="ttdeci">#define DCA_SYNCWORD_SUBSTREAM</div><div class="ttdef"><b>Definition:</b> <a href="dca__syncwords_8h_source.html#l00032">dca_syncwords.h:32</a></div></div>
<div class="ttc" id="ffv1enc_8c_html_a5ba88be0a987de9abb6091eb8e167e09"><div class="ttname"><a href="ffv1enc_8c.html#a5ba88be0a987de9abb6091eb8e167e09">write_header</a></div><div class="ttdeci">static void write_header(FFV1Context *f)</div><div class="ttdef"><b>Definition:</b> <a href="ffv1enc_8c_source.html#l00344">ffv1enc.c:344</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a38718424deafc3bf95212d6a6bf99e6d"><div class="ttname"><a href="spdifenc_8c.html#a38718424deafc3bf95212d6a6bf99e6d">spdif_header_ac3</a></div><div class="ttdeci">static int spdif_header_ac3(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00105">spdifenc.c:105</a></div></div>
<div class="ttc" id="spdif_8h_html_a0cf3ad0b83690e327a42813de1b6f4cea68623b81409629da51fa83eb22a5eaef"><div class="ttname"><a href="spdif_8h.html#a0cf3ad0b83690e327a42813de1b6f4cea68623b81409629da51fa83eb22a5eaef">IEC61937_AC3</a></div><div class="ttdoc">AC-3 data. </div><div class="ttdef"><b>Definition:</b> <a href="spdif_8h_source.html#l00033">spdif.h:33</a></div></div>
<div class="ttc" id="spdifenc_8c_html_a440f5efaf119660019c36cebf0ac4152"><div class="ttname"><a href="spdifenc_8c.html#a440f5efaf119660019c36cebf0ac4152">spdif_header_dts4</a></div><div class="ttdeci">static int spdif_header_dts4(AVFormatContext *s, AVPacket *pkt, int core_size, int sample_rate, int blocks)</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00166">spdifenc.c:166</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="attributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00039">attributes.h:39</a></div></div>
<div class="ttc" id="structAVStream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="structAVStream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01241">avformat.h:1241</a></div></div>
<div class="ttc" id="structIEC61937Context_html"><div class="ttname"><a href="structIEC61937Context.html">IEC61937Context</a></div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00058">spdifenc.c:58</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a7417810294736a5ee925d10230b87310"><div class="ttname"><a href="structIEC61937Context.html#a7417810294736a5ee925d10230b87310">IEC61937Context::extra_bswap</a></div><div class="ttdeci">int extra_bswap</div><div class="ttdoc">extra bswap for payload (for LE DTS =&gt; standard BE DTS) </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00070">spdifenc.c:70</a></div></div>
<div class="ttc" id="structAVPacket_html"><div class="ttname"><a href="structAVPacket.html">AVPacket</a></div><div class="ttdoc">This structure stores compressed data. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01588">avcodec.h:1588</a></div></div>
<div class="ttc" id="structIEC61937Context_html_a0ef920982025f0adfdf73f9f13fe8b57"><div class="ttname"><a href="structIEC61937Context.html#a0ef920982025f0adfdf73f9f13fe8b57">IEC61937Context::hd_buf</a></div><div class="ttdeci">uint8_t * hd_buf</div><div class="ttdoc">allocated buffer to concatenate hd audio frames </div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00072">spdifenc.c:72</a></div></div>
<div class="ttc" id="ac3_8h_html"><div class="ttname"><a href="ac3_8h.html">ac3.h</a></div><div class="ttdoc">Common code between the AC-3 encoder and decoder. </div></div>
<div class="ttc" id="structIEC61937Context_html_a0938d3c0aeff58da20b0a7a058204fa6"><div class="ttname"><a href="structIEC61937Context.html#a0938d3c0aeff58da20b0a7a058204fa6">IEC61937Context::spdif_flags</a></div><div class="ttdeci">int spdif_flags</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00083">spdifenc.c:83</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:48:00 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
