<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libavcodec/ac3.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1f69f89eda39a44baf4887988d54a7.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ac3.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Common code between the AC-3 encoder and decoder.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h_source.html">libavutil/common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="avcodec_8h_source.html">avcodec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ac3_8h_source.html">ac3.h</a>&quot;</code><br />
</div>
<p><a href="ac3_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9fd13619ac4feffd91e345ae23fb7eaf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#a9fd13619ac4feffd91e345ae23fb7eaf">calc_lowcomp1</a> (<a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="h264pred__template_8c.html#a4124bc0a9335c27f086f24ba207a4912">a</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> b0, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> b1, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="vsrc__mptestsrc_8c.html#a075ab94ec54fff64326db9aed0350ffa">c</a>)</td></tr>
<tr class="separator:a9fd13619ac4feffd91e345ae23fb7eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd022dc01208e923ab98e655d4b842c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#aebd022dc01208e923ab98e655d4b842c">calc_lowcomp</a> (<a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="h264pred__template_8c.html#a4124bc0a9335c27f086f24ba207a4912">a</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> b0, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> b1, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> bin)</td></tr>
<tr class="separator:aebd022dc01208e923ab98e655d4b842c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d676dd5a89c7fd73e90424c532c35f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#a90d676dd5a89c7fd73e90424c532c35f">ff_ac3_bit_alloc_calc_psd</a> (int8_t *<a class="el" href="eval_8c.html#afc05d41e1a0fc024ac21072d11d4f263">exp</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avxsynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>, int16_t *psd, int16_t *band_psd)</td></tr>
<tr class="memdesc:a90d676dd5a89c7fd73e90424c532c35f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the log power-spectral density of the input signal.  <a href="#a90d676dd5a89c7fd73e90424c532c35f">More...</a><br /></td></tr>
<tr class="separator:a90d676dd5a89c7fd73e90424c532c35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139a486ec398022184dbac433bad7186"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#a139a486ec398022184dbac433bad7186">ff_ac3_bit_alloc_calc_mask</a> (<a class="el" href="structAC3BitAllocParameters.html">AC3BitAllocParameters</a> *<a class="el" href="avxsynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, int16_t *band_psd, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avxsynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="el" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> fast_gain, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> is_lfe, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> dba_mode, <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> dba_nsegs, <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dba_offsets, <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dba_lengths, <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dba_values, int16_t *<a class="el" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>)</td></tr>
<tr class="memdesc:a139a486ec398022184dbac433bad7186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the masking curve.  <a href="#a139a486ec398022184dbac433bad7186">More...</a><br /></td></tr>
<tr class="separator:a139a486ec398022184dbac433bad7186"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a76fe880edb8b96c4cfb95112fc23ade7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#a76fe880edb8b96c4cfb95112fc23ade7">ff_ac3_band_start_tab</a> [<a class="el" href="ac3_8h.html#a622cc3ceaabf9c31a0291ddb96a3a565">AC3_CRITICAL_BANDS</a>+1]</td></tr>
<tr class="memdesc:a76fe880edb8b96c4cfb95112fc23ade7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting frequency coefficient bin for each critical band.  <a href="#a76fe880edb8b96c4cfb95112fc23ade7">More...</a><br /></td></tr>
<tr class="separator:a76fe880edb8b96c4cfb95112fc23ade7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eeb4470c63ff8b843a12683a1edc786"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac3_8c.html#a4eeb4470c63ff8b843a12683a1edc786">ff_ac3_bin_to_band_tab</a> [253]</td></tr>
<tr class="memdesc:a4eeb4470c63ff8b843a12683a1edc786"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map each frequency coefficient bin to the critical band that contains it.  <a href="#a4eeb4470c63ff8b843a12683a1edc786">More...</a><br /></td></tr>
<tr class="separator:a4eeb4470c63ff8b843a12683a1edc786"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Common code between the AC-3 encoder and decoder. </p>

<p>Definition in file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9fd13619ac4feffd91e345ae23fb7eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd13619ac4feffd91e345ae23fb7eaf">&sect;&nbsp;</a></span>calc_lowcomp1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> calc_lowcomp1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>b0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>b1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00071">71</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3_8c_source.html#l00081">calc_lowcomp()</a>, and <a class="el" href="ac3_8c_source.html#l00118">ff_ac3_bit_alloc_calc_mask()</a>.</p>

</div>
</div>
<a id="aebd022dc01208e923ab98e655d4b842c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd022dc01208e923ab98e655d4b842c">&sect;&nbsp;</a></span>calc_lowcomp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> calc_lowcomp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>b0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>b1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>bin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00081">81</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3_8c_source.html#l00118">ff_ac3_bit_alloc_calc_mask()</a>.</p>

</div>
</div>
<a id="a90d676dd5a89c7fd73e90424c532c35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d676dd5a89c7fd73e90424c532c35f">&sect;&nbsp;</a></span>ff_ac3_bit_alloc_calc_psd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> ff_ac3_bit_alloc_calc_psd </td>
          <td>(</td>
          <td class="paramtype">int8_t *&#160;</td>
          <td class="paramname"><em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>psd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>band_psd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the log power-spectral density of the input signal. </p>
<p>This gives a rough estimate of signal power in the frequency domain by using the spectral envelope (exponents). The psd is also separately grouped into critical bands for use in the calculating the masking curve. 128 units in psd = -6 dB. The dbknee parameter in <a class="el" href="structAC3BitAllocParameters.html">AC3BitAllocParameters</a> determines the reference level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">exp</td><td>frequency coefficient exponents </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>starting bin location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end</td><td>ending bin location </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">psd</td><td>signal power for each frequency bin </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">band_psd</td><td>signal power for each critical band </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00092">92</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3enc_8c_source.html#l00941">bit_alloc_masking()</a>, and <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00807">decode_audio_block()</a>.</p>

</div>
</div>
<a id="a139a486ec398022184dbac433bad7186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139a486ec398022184dbac433bad7186">&sect;&nbsp;</a></span>ff_ac3_bit_alloc_calc_mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> ff_ac3_bit_alloc_calc_mask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structAC3BitAllocParameters.html">AC3BitAllocParameters</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>band_psd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>fast_gain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>is_lfe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>dba_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>dba_nsegs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>dba_offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>dba_lengths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>dba_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the masking curve. </p>
<p>First, the excitation is calculated using parameters in s and the signal power in each critical band. The excitation is compared with a predefined hearing threshold table to produce the masking curve. If delta bit allocation information is provided, it is used for adjusting the masking curve, usually to give a closer match to a better psychoacoustic model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>adjustable bit allocation parameters </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">band_psd</td><td>signal power for each critical band </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>starting bin location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end</td><td>ending bin location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fast_gain</td><td>fast gain (estimated signal-to-mask ratio) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_lfe</td><td>whether or not the channel being processed is the LFE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dba_mode</td><td>delta bit allocation mode (none, reuse, or new) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dba_nsegs</td><td>number of delta segments </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dba_offsets</td><td>location offsets for each segment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dba_lengths</td><td>length of each segment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dba_values</td><td>delta bit allocation for each segment </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mask</td><td>calculated masking curve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns 0 for success, non-zero for error </dd></dl>

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00118">118</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3enc_8c_source.html#l00941">bit_alloc_masking()</a>, and <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00807">decode_audio_block()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a76fe880edb8b96c4cfb95112fc23ade7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fe880edb8b96c4cfb95112fc23ade7">&sect;&nbsp;</a></span>ff_ac3_band_start_tab</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> ff_ac3_band_start_tab[<a class="el" href="ac3_8h.html#a622cc3ceaabf9c31a0291ddb96a3a565">AC3_CRITICAL_BANDS</a>+1]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">      0,  1,   2,   3,   4,   5,   6,   7,   8,   9,</div><div class="line">     10,  11, 12,  13,  14,  15,  16,  17,  18,  19,</div><div class="line">     20,  21, 22,  23,  24,  25,  26,  27,  28,  31,</div><div class="line">     34,  37, 40,  43,  46,  49,  55,  61,  67,  73,</div><div class="line">     79,  85, 97, 109, 121, 133, 157, 181, 205, 229, 253</div><div class="line">}</div></div><!-- fragment -->
<p>Starting frequency coefficient bin for each critical band. </p>

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00035">35</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3dsp_8c_source.html#l00106">ac3_bit_alloc_calc_bap_c()</a>, and <a class="el" href="ac3_8c_source.html#l00092">ff_ac3_bit_alloc_calc_psd()</a>.</p>

</div>
</div>
<a id="a4eeb4470c63ff8b843a12683a1edc786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eeb4470c63ff8b843a12683a1edc786">&sect;&nbsp;</a></span>ff_ac3_bin_to_band_tab</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> ff_ac3_bin_to_band_tab[253]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">     0,</div><div class="line">     1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,</div><div class="line">    13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,</div><div class="line">    25, 26, 27, 28, 28, 28, 29, 29, 29, 30, 30, 30,</div><div class="line">    31, 31, 31, 32, 32, 32, 33, 33, 33, 34, 34, 34,</div><div class="line">    35, 35, 35, 35, 35, 35, 36, 36, 36, 36, 36, 36,</div><div class="line">    37, 37, 37, 37, 37, 37, 38, 38, 38, 38, 38, 38,</div><div class="line">    39, 39, 39, 39, 39, 39, 40, 40, 40, 40, 40, 40,</div><div class="line">    41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41,</div><div class="line">    42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42,</div><div class="line">    43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43, 43,</div><div class="line">    44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44, 44,</div><div class="line">    45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45,</div><div class="line">    45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45,</div><div class="line">    46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46,</div><div class="line">    46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46,</div><div class="line">    47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47,</div><div class="line">    47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47, 47,</div><div class="line">    48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48,</div><div class="line">    48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48,</div><div class="line">    49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49,</div><div class="line">    49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49, 49</div><div class="line">}</div></div><!-- fragment -->
<p>Map each frequency coefficient bin to the critical band that contains it. </p>

<p>Definition at line <a class="el" href="ac3_8c_source.html#l00046">46</a> of file <a class="el" href="ac3_8c_source.html">ac3.c</a>.</p>

<p>Referenced by <a class="el" href="ac3dsp_8c_source.html#l00106">ac3_bit_alloc_calc_bap_c()</a>, <a class="el" href="ac3_8c_source.html#l00118">ff_ac3_bit_alloc_calc_mask()</a>, and <a class="el" href="ac3_8c_source.html#l00092">ff_ac3_bit_alloc_calc_psd()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:48:16 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
