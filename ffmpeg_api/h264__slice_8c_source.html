<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libavcodec/h264_slice.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1f69f89eda39a44baf4887988d54a7.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">h264_slice.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="h264__slice_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * H.26L/H.264/AVC/JVT/14496-10/... decoder</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2003 Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * @file</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * H.264 / AVC / MPEG-4 part10 codec.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * @author Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">libavutil/display.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2stereo3d_8h.html">libavutil/stereo3d.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timer_8h.html">libavutil/timer.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavcodec_2internal_8h.html">internal.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cabac_8h.html">cabac.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cabac__functions_8h.html">cabac_functions.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="error__resilience_8h.html">error_resilience.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264_8h.html">h264.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264dec_8h.html">h264dec.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264data_8h.html">h264data.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264chroma_8h.html">h264chroma.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__mvpred_8h.html">h264_mvpred.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__ps_8h.html">h264_ps.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="golomb_8h.html">golomb.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathops_8h.html">mathops.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegutils_8h.html">mpegutils.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rectangle_8h.html">rectangle.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavcodec_2thread_8h.html">thread.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a6031f2c91f61f97b7b3f3fb93d1e0209">   50</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="h264__slice_8c.html#a6031f2c91f61f97b7b3f3fb93d1e0209">field_scan</a>[16+1] = {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    0 + 0 * 4, 0 + 1 * 4, 1 + 0 * 4, 0 + 2 * 4,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    0 + 3 * 4, 1 + 1 * 4, 1 + 2 * 4, 1 + 3 * 4,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    2 + 0 * 4, 2 + 1 * 4, 2 + 2 * 4, 2 + 3 * 4,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    3 + 0 * 4, 3 + 1 * 4, 3 + 2 * 4, 3 + 3 * 4,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;};</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a814f769cd6907170152a08cd537ff1dd">   57</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="h264__slice_8c.html#a814f769cd6907170152a08cd537ff1dd">field_scan8x8</a>[64+1] = {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    0 + 0 * 8, 0 + 1 * 8, 0 + 2 * 8, 1 + 0 * 8,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    1 + 1 * 8, 0 + 3 * 8, 0 + 4 * 8, 1 + 2 * 8,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    2 + 0 * 8, 1 + 3 * 8, 0 + 5 * 8, 0 + 6 * 8,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    0 + 7 * 8, 1 + 4 * 8, 2 + 1 * 8, 3 + 0 * 8,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    2 + 2 * 8, 1 + 5 * 8, 1 + 6 * 8, 1 + 7 * 8,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    2 + 3 * 8, 3 + 1 * 8, 4 + 0 * 8, 3 + 2 * 8,</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    2 + 4 * 8, 2 + 5 * 8, 2 + 6 * 8, 2 + 7 * 8,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    3 + 3 * 8, 4 + 1 * 8, 5 + 0 * 8, 4 + 2 * 8,</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    3 + 4 * 8, 3 + 5 * 8, 3 + 6 * 8, 3 + 7 * 8,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    4 + 3 * 8, 5 + 1 * 8, 6 + 0 * 8, 5 + 2 * 8,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    4 + 4 * 8, 4 + 5 * 8, 4 + 6 * 8, 4 + 7 * 8,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    5 + 3 * 8, 6 + 1 * 8, 6 + 2 * 8, 5 + 4 * 8,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    5 + 5 * 8, 5 + 6 * 8, 5 + 7 * 8, 6 + 3 * 8,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    7 + 0 * 8, 7 + 1 * 8, 6 + 4 * 8, 6 + 5 * 8,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    6 + 6 * 8, 6 + 7 * 8, 7 + 2 * 8, 7 + 3 * 8,</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    7 + 4 * 8, 7 + 5 * 8, 7 + 6 * 8, 7 + 7 * 8,</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;};</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a8484c6fa0ed16cb11b33fa44fe11c504">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="h264__slice_8c.html#a8484c6fa0ed16cb11b33fa44fe11c504">field_scan8x8_cavlc</a>[64+1] = {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    0 + 0 * 8, 1 + 1 * 8, 2 + 0 * 8, 0 + 7 * 8,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    2 + 2 * 8, 2 + 3 * 8, 2 + 4 * 8, 3 + 3 * 8,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    3 + 4 * 8, 4 + 3 * 8, 4 + 4 * 8, 5 + 3 * 8,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    5 + 5 * 8, 7 + 0 * 8, 6 + 6 * 8, 7 + 4 * 8,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    0 + 1 * 8, 0 + 3 * 8, 1 + 3 * 8, 1 + 4 * 8,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    1 + 5 * 8, 3 + 1 * 8, 2 + 5 * 8, 4 + 1 * 8,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    3 + 5 * 8, 5 + 1 * 8, 4 + 5 * 8, 6 + 1 * 8,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    5 + 6 * 8, 7 + 1 * 8, 6 + 7 * 8, 7 + 5 * 8,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    0 + 2 * 8, 0 + 4 * 8, 0 + 5 * 8, 2 + 1 * 8,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    1 + 6 * 8, 4 + 0 * 8, 2 + 6 * 8, 5 + 0 * 8,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    3 + 6 * 8, 6 + 0 * 8, 4 + 6 * 8, 6 + 2 * 8,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    5 + 7 * 8, 6 + 4 * 8, 7 + 2 * 8, 7 + 6 * 8,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    1 + 0 * 8, 1 + 2 * 8, 0 + 6 * 8, 3 + 0 * 8,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    1 + 7 * 8, 3 + 2 * 8, 2 + 7 * 8, 4 + 2 * 8,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    3 + 7 * 8, 5 + 2 * 8, 4 + 7 * 8, 5 + 4 * 8,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    6 + 3 * 8, 6 + 5 * 8, 7 + 3 * 8, 7 + 7 * 8,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;};</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// zigzag_scan8x8_cavlc[i] = zigzag_scan8x8[(i/4) + 16*(i%4)]</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#adce17734fa38715fb8d6d1e48ce2e486">   96</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="h264__slice_8c.html#adce17734fa38715fb8d6d1e48ce2e486">zigzag_scan8x8_cavlc</a>[64+1] = {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    0 + 0 * 8, 1 + 1 * 8, 1 + 2 * 8, 2 + 2 * 8,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    4 + 1 * 8, 0 + 5 * 8, 3 + 3 * 8, 7 + 0 * 8,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    3 + 4 * 8, 1 + 7 * 8, 5 + 3 * 8, 6 + 3 * 8,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    2 + 7 * 8, 6 + 4 * 8, 5 + 6 * 8, 7 + 5 * 8,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    1 + 0 * 8, 2 + 0 * 8, 0 + 3 * 8, 3 + 1 * 8,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    3 + 2 * 8, 0 + 6 * 8, 4 + 2 * 8, 6 + 1 * 8,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    2 + 5 * 8, 2 + 6 * 8, 6 + 2 * 8, 5 + 4 * 8,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    3 + 7 * 8, 7 + 3 * 8, 4 + 7 * 8, 7 + 6 * 8,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    0 + 1 * 8, 3 + 0 * 8, 0 + 4 * 8, 4 + 0 * 8,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    2 + 3 * 8, 1 + 5 * 8, 5 + 1 * 8, 5 + 2 * 8,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    1 + 6 * 8, 3 + 5 * 8, 7 + 1 * 8, 4 + 5 * 8,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    4 + 6 * 8, 7 + 4 * 8, 5 + 7 * 8, 6 + 7 * 8,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    0 + 2 * 8, 2 + 1 * 8, 1 + 3 * 8, 5 + 0 * 8,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    1 + 4 * 8, 2 + 4 * 8, 6 + 0 * 8, 4 + 3 * 8,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    0 + 7 * 8, 4 + 4 * 8, 7 + 2 * 8, 3 + 6 * 8,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    5 + 5 * 8, 6 + 5 * 8, 6 + 6 * 8, 7 + 7 * 8,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;};</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a8aa4245e89614c37b985310da7f1c6f5">  115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a8aa4245e89614c37b985310da7f1c6f5">release_unused_pictures</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> remove_current)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">/* release non reference frames */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="h264dec_8h.html#a3d79954dd0655090e5371f876023fa7c">H264_MAX_PICTURE_COUNT</a>; i++) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i].<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0] &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i].<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a> &amp;&amp;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            (remove_current || &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i] != h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>)) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <a class="code" href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i]);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a6c6df1b650bca2e5ad20c1f2eb543de3">  128</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a6c6df1b650bca2e5ad20c1f2eb543de3">alloc_scratch_buffers</a>(<a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl, <span class="keywordtype">int</span> linesize)</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">int</span> alloc_size = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(linesize) + 32, 32);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a7573cf72aed66e7334dcbca0fea4fbdb">bipred_scratchpad</a>, &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a3c6e2f6b54dfeec997802b3c0a0057cc">bipred_scratchpad_allocated</a>, 16 * 6 * alloc_size);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// edge emu needs blocksize + filter length - 1</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// (= 21x21 for  H.264)</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a599e4b9d4fc650cef865b765f98aff7d">edge_emu_buffer</a>, &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#ac9f1f375091dc04045f5accc9edfc39d">edge_emu_buffer_allocated</a>, alloc_size * 2 * 21);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga0bfda4adf7f9e943f9eb1a08eeda3791">av_fast_mallocz</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[0], &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a70d1d0d049925c935855503135b8181d">top_borders_allocated</a>[0],</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * 16 * 3 * <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>) * 2);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga0bfda4adf7f9e943f9eb1a08eeda3791">av_fast_mallocz</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[1], &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a70d1d0d049925c935855503135b8181d">top_borders_allocated</a>[1],</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * 16 * 3 * <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>) * 2);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (!sl-&gt;<a class="code" href="structH264SliceContext.html#a7573cf72aed66e7334dcbca0fea4fbdb">bipred_scratchpad</a> || !sl-&gt;<a class="code" href="structH264SliceContext.html#a599e4b9d4fc650cef865b765f98aff7d">edge_emu_buffer</a> ||</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        !sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[0]    || !sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[1]) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a7573cf72aed66e7334dcbca0fea4fbdb">bipred_scratchpad</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a599e4b9d4fc650cef865b765f98aff7d">edge_emu_buffer</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[0]);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[1]);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a3c6e2f6b54dfeec997802b3c0a0057cc">bipred_scratchpad_allocated</a> = 0;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#ac9f1f375091dc04045f5accc9edfc39d">edge_emu_buffer_allocated</a>   = 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a70d1d0d049925c935855503135b8181d">top_borders_allocated</a>[0]    = 0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a70d1d0d049925c935855503135b8181d">top_borders_allocated</a>[1]    = 0;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#ab6c605a4f84ed6cfda07cbabd98f708f">  160</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#ab6c605a4f84ed6cfda07cbabd98f708f">init_table_pools</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> big_mb_num    = h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> * (h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> + 1) + 1;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mb_array_size = h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> b4_stride     = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * 4 + 1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> b4_array_size = b4_stride * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> * 4;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">qscale_table_pool</a> = <a class="code" href="group__lavu__bufferpool.html#ga26af9b07c08bc7fd2cfc62767e490b93">av_buffer_pool_init</a>(big_mb_num + h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>,</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                               <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4f9375fd7d80842fe9e2369b26be96d9">mb_type_pool</a>      = <a class="code" href="group__lavu__bufferpool.html#ga26af9b07c08bc7fd2cfc62767e490b93">av_buffer_pool_init</a>((big_mb_num + h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>) *</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                               <span class="keyword">sizeof</span>(uint32_t), <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#afc12b6d1e8abdb2e8b231b8fbf4a5ce2">motion_val_pool</a>   = <a class="code" href="group__lavu__bufferpool.html#ga26af9b07c08bc7fd2cfc62767e490b93">av_buffer_pool_init</a>(2 * (b4_array_size + 4) *</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                               <span class="keyword">sizeof</span>(int16_t), <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a80d10429100f73b2387dd37ade981f7e">ref_index_pool</a>    = <a class="code" href="group__lavu__bufferpool.html#ga26af9b07c08bc7fd2cfc62767e490b93">av_buffer_pool_init</a>(4 * mb_array_size, <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">qscale_table_pool</a> || !h-&gt;<a class="code" href="structH264Context.html#a4f9375fd7d80842fe9e2369b26be96d9">mb_type_pool</a> || !h-&gt;<a class="code" href="structH264Context.html#afc12b6d1e8abdb2e8b231b8fbf4a5ce2">motion_val_pool</a> ||</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        !h-&gt;<a class="code" href="structH264Context.html#a80d10429100f73b2387dd37ade981f7e">ref_index_pool</a>) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="group__lavu__bufferpool.html#ga7b76781c5944b3bb59b2e3b1a8994e4a">av_buffer_pool_uninit</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">qscale_table_pool</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="group__lavu__bufferpool.html#ga7b76781c5944b3bb59b2e3b1a8994e4a">av_buffer_pool_uninit</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a4f9375fd7d80842fe9e2369b26be96d9">mb_type_pool</a>);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="group__lavu__bufferpool.html#ga7b76781c5944b3bb59b2e3b1a8994e4a">av_buffer_pool_uninit</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#afc12b6d1e8abdb2e8b231b8fbf4a5ce2">motion_val_pool</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="group__lavu__bufferpool.html#ga7b76781c5944b3bb59b2e3b1a8994e4a">av_buffer_pool_uninit</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a80d10429100f73b2387dd37ade981f7e">ref_index_pool</a>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a8463f747babbd5fff2ba959dadd006cc">  187</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a8463f747babbd5fff2ba959dadd006cc">alloc_picture</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="structH264Picture.html">H264Picture</a> *pic)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">int</span> i, ret = 0;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(!pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0]);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>.<a class="code" href="structThreadFrame.html#a6d4ef36cc340178903e148e89903f1a1">f</a> = pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ret = <a class="code" href="pthread__frame_8c.html#a175c018f02630ddf4e3824b2c8b9184f">ff_thread_get_buffer</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, &amp;pic-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, pic-&gt;<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a> ?</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                                   <a class="code" href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a> : 0);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#aa5d0a214d5e71e1e7ba93035bfe6e949">crop</a>     = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a8a0e92ec13aa58774e5f2bc928780397">crop</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#ac619082a693f3540738ce5c1fb60100c">crop_top</a> = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#ae372ab078c7e80d95adde2717d6d26f9">crop_top</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a07dc99f7f517853ae2ea8e2edfc19cc7">crop_left</a>= h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a87fc1b7271d5d42e66b7b2f0c7dd3bfb">crop_left</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">hwaccel</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keyword">const</span> <a class="code" href="structAVHWAccel.html">AVHWAccel</a> *hwaccel = h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">hwaccel</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(!pic-&gt;<a class="code" href="structH264Picture.html#a8b67142afab123820381a21f27e19082">hwaccel_picture_private</a>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (hwaccel-&gt;<a class="code" href="structAVHWAccel.html#aecd7bfd22ce294f1ae5073164bb90d65">frame_priv_data_size</a>) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            pic-&gt;<a class="code" href="structH264Picture.html#ab34ba520671ce5d5922f8fff7cd223b2">hwaccel_priv_buf</a> = <a class="code" href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a>(hwaccel-&gt;<a class="code" href="structAVHWAccel.html#aecd7bfd22ce294f1ae5073164bb90d65">frame_priv_data_size</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">if</span> (!pic-&gt;<a class="code" href="structH264Picture.html#ab34ba520671ce5d5922f8fff7cd223b2">hwaccel_priv_buf</a>)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            pic-&gt;<a class="code" href="structH264Picture.html#a8b67142afab123820381a21f27e19082">hwaccel_picture_private</a> = pic-&gt;<a class="code" href="structH264Picture.html#ab34ba520671ce5d5922f8fff7cd223b2">hwaccel_priv_buf</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#a9a535d5c874618a1b06ef3808069e834">CONFIG_GRAY</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">hwaccel</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#afdc9479cf975e2eb72366eab748f7280">flags</a> &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a> &amp;&amp; pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[2]) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordtype">int</span> h_chroma_shift, v_chroma_shift;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aed14fa772ce46881020fd1545c86432c">format</a>,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                         &amp;h_chroma_shift, &amp;v_chroma_shift);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>, v_chroma_shift); i++) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            memset(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[1] + pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1]*i,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                   0x80, AV_CEIL_RSHIFT(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>, h_chroma_shift));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            memset(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[2] + pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[2]*i,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                   0x80, AV_CEIL_RSHIFT(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>, h_chroma_shift));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">qscale_table_pool</a>) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#ab6c605a4f84ed6cfda07cbabd98f708f">init_table_pools</a>(h);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#adc3950617a42e8e2b314ba79dc2565c9">qscale_table_buf</a> = <a class="code" href="group__lavu__bufferpool.html#ga2c745ecb4001452423e775b06b20fb7c">av_buffer_pool_get</a>(h-&gt;<a class="code" href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">qscale_table_pool</a>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a9401ccdf615c263f6eec087a39d8de39">mb_type_buf</a>      = <a class="code" href="group__lavu__bufferpool.html#ga2c745ecb4001452423e775b06b20fb7c">av_buffer_pool_get</a>(h-&gt;<a class="code" href="structH264Context.html#a4f9375fd7d80842fe9e2369b26be96d9">mb_type_pool</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (!pic-&gt;<a class="code" href="structH264Picture.html#adc3950617a42e8e2b314ba79dc2565c9">qscale_table_buf</a> || !pic-&gt;<a class="code" href="structH264Picture.html#a9401ccdf615c263f6eec087a39d8de39">mb_type_buf</a>)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>      = (uint32_t*)pic-&gt;<a class="code" href="structH264Picture.html#a9401ccdf615c263f6eec087a39d8de39">mb_type_buf</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a> + 2 * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> + 1;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a> = pic-&gt;<a class="code" href="structH264Picture.html#adc3950617a42e8e2b314ba79dc2565c9">qscale_table_buf</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a> + 2 * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> + 1;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        pic-&gt;<a class="code" href="structH264Picture.html#a4a8b8764ff22f8d20f9397f6e1d644af">motion_val_buf</a>[i] = <a class="code" href="group__lavu__bufferpool.html#ga2c745ecb4001452423e775b06b20fb7c">av_buffer_pool_get</a>(h-&gt;<a class="code" href="structH264Context.html#afc12b6d1e8abdb2e8b231b8fbf4a5ce2">motion_val_pool</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        pic-&gt;<a class="code" href="structH264Picture.html#a95931854067cfeb06c8f11018bae5460">ref_index_buf</a>[i]  = <a class="code" href="group__lavu__bufferpool.html#ga2c745ecb4001452423e775b06b20fb7c">av_buffer_pool_get</a>(h-&gt;<a class="code" href="structH264Context.html#a80d10429100f73b2387dd37ade981f7e">ref_index_pool</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span> (!pic-&gt;<a class="code" href="structH264Picture.html#a4a8b8764ff22f8d20f9397f6e1d644af">motion_val_buf</a>[i] || !pic-&gt;<a class="code" href="structH264Picture.html#a95931854067cfeb06c8f11018bae5460">ref_index_buf</a>[i])</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        pic-&gt;<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[i] = (int16_t (*)[2])pic-&gt;<a class="code" href="structH264Picture.html#a4a8b8764ff22f8d20f9397f6e1d644af">motion_val_buf</a>[i]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a> + 4;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        pic-&gt;<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[i]  = pic-&gt;<a class="code" href="structH264Picture.html#a95931854067cfeb06c8f11018bae5460">ref_index_buf</a>[i]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a>(h, pic);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> (ret &lt; 0) ? ret : <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a6f8c2bd9b4ad9f856c922bd68aad0487">  256</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a6f8c2bd9b4ad9f856c922bd68aad0487">pic_is_unused</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="structH264Picture.html">H264Picture</a> *pic)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0])</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#afd01b8373b02eb3456286a824a12f017">  263</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#afd01b8373b02eb3456286a824a12f017">find_unused_picture</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="h264dec_8h.html#a3d79954dd0655090e5371f876023fa7c">H264_MAX_PICTURE_COUNT</a>; i++) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264__slice_8c.html#a6f8c2bd9b4ad9f856c922bd68aad0487">pic_is_unused</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i]))</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (i == H264_MAX_PICTURE_COUNT)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a6acbb6020b325238d89cff488d929c7d">  278</a></span>&#160;<span class="preprocessor">#define IN_RANGE(a, b, size) (((void*)(a) &gt;= (void*)(b)) &amp;&amp; ((void*)(a) &lt; (void*)((b) + (size))))</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a5ba00de78c6be31f8548f7df05c022f6">  280</a></span>&#160;<span class="preprocessor">#define REBASE_PICTURE(pic, new_ctx, old_ctx)             \</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">    (((pic) &amp;&amp; (pic) &gt;= (old_ctx)-&gt;DPB &amp;&amp;                       \</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">      (pic) &lt; (old_ctx)-&gt;DPB + H264_MAX_PICTURE_COUNT) ?          \</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">     &amp;(new_ctx)-&gt;DPB[(pic) - (old_ctx)-&gt;DPB] : NULL)</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">  285</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">copy_picture_range</a>(<a class="code" href="structH264Picture.html">H264Picture</a> **<a class="code" href="libavcodec_2webvttdec_8c.html#a5d467a63df9ff99d33d6749038f6f421">to</a>, <a class="code" href="structH264Picture.html">H264Picture</a> **<a class="code" href="libavcodec_2jacosubdec_8c.html#af9f143e62cdad4afb8a53a21b8b8fcfd">from</a>, <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#aaa746f43957975c7273cc08bf006f747">count</a>,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                               <a class="code" href="structH264Context.html">H264Context</a> *new_base,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                               <a class="code" href="structH264Context.html">H264Context</a> *old_base)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="avisynth__c_8h.html#aaa746f43957975c7273cc08bf006f747">count</a>; i++) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(!from[i] ||</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                   <a class="code" href="h264__slice_8c.html#a6acbb6020b325238d89cff488d929c7d">IN_RANGE</a>(from[i], old_base, 1) ||</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                   <a class="code" href="h264__slice_8c.html#a6acbb6020b325238d89cff488d929c7d">IN_RANGE</a>(from[i], old_base-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>, <a class="code" href="h264dec_8h.html#a3d79954dd0655090e5371f876023fa7c">H264_MAX_PICTURE_COUNT</a>));</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        to[i] = <a class="code" href="h264__slice_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a>(from[i], new_base, old_base);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">h264_slice_header_init</a>(<a class="code" href="structH264Context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="h264dec_8h.html#a1ee1c405d5637d2ab895eb0457107aeb">  301</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a1ee1c405d5637d2ab895eb0457107aeb">ff_h264_update_thread_context</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *dst,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="structH264Context.html">H264Context</a> *h = dst-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>, *h1 = src-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">int</span> inited = h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a>, err = 0;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">int</span> need_reinit = 0;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">int</span> i, ret;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (dst == src)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// We can&#39;t fail if SPS isn&#39;t set at it breaks current skip_frame code</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">//if (!h1-&gt;ps.sps)</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">//    return AVERROR_INVALIDDATA;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (inited &amp;&amp;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>                 != h1-&gt;width                 ||</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>                != h1-&gt;height                ||</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>              != h1-&gt;mb_width              ||</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>             != h1-&gt;mb_height             ||</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;         !h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>                                            ||</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>    != h1-&gt;ps.sps-&gt;bit_depth_luma    ||</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a> != h1-&gt;ps.sps-&gt;chroma_format_idc ||</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#ac8e79ef69181ffdb8a2c7726c880a78a">colorspace</a>        != h1-&gt;ps.sps-&gt;colorspace)) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        need_reinit = 1;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">/* copy block_offset since frame_start may not be called */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>, h1-&gt;block_offset, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>));</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// SPS/PPS</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>); i++) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[i]);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span> (h1-&gt;ps.sps_list[i]) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[i] = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h1-&gt;ps.sps_list[i]);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[i])</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>); i++) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[i]);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span> (h1-&gt;ps.pps_list[i]) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[i] = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h1-&gt;ps.pps_list[i]);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[i])</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (h1-&gt;ps.pps_ref) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h1-&gt;ps.pps_ref);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>)</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a> = (<span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (h1-&gt;ps.sps_ref) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h1-&gt;ps.sps_ref);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (need_reinit || !inited) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>     = h1-&gt;width;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>    = h1-&gt;height;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> = h1-&gt;mb_height;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>  = h1-&gt;mb_width;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a>    = h1-&gt;mb_num;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> = h1-&gt;mb_stride;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#af1072d18d4a2c415b03010aa108a46e4">b_stride</a>  = h1-&gt;b_stride;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> || h1-&gt;context_initialized) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> ((err = <a class="code" href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">h264_slice_header_init</a>(h)) &lt; 0) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;h264_slice_header_init() failed&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">return</span> err;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">/* copy block_offset since frame_start may not be called */</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>, h1-&gt;block_offset, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>));</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a>  = h1-&gt;avctx-&gt;coded_height;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>   = h1-&gt;avctx-&gt;coded_width;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>         = h1-&gt;avctx-&gt;width;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>        = h1-&gt;avctx-&gt;height;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa07a46a42eb4f92e58bdb065deb5f4f0">coded_picture_number</a> = h1-&gt;coded_picture_number;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>          = h1-&gt;first_field;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>    = h1-&gt;picture_structure;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a947d562c497e7851f6bf396ee9bd642c">mb_aff_frame</a>         = h1-&gt;mb_aff_frame;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>            = h1-&gt;droppable;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a2962d24a52f1e43cd52f5f4439d226e8">backup_width</a>         = h1-&gt;backup_width;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a66cb971947c79cba4b68dbc43d81fc77">backup_height</a>        = h1-&gt;backup_height;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a641363d5e6e24f0897875090040b153a">backup_pix_fmt</a>       = h1-&gt;backup_pix_fmt;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="h264dec_8h.html#a3d79954dd0655090e5371f876023fa7c">H264_MAX_PICTURE_COUNT</a>; i++) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i]);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (h1-&gt;DPB[i].f-&gt;buf[0] &amp;&amp;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            (ret = <a class="code" href="h264__picture_8c.html#af2fc1e22bb4ced1cd420710fd2340017">ff_h264_ref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i], &amp;h1-&gt;DPB[i])) &lt; 0)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="h264__slice_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a>(h1-&gt;cur_pic_ptr, h, h1);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (h1-&gt;cur_pic.f-&gt;buf[0]) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        ret = <a class="code" href="h264__picture_8c.html#af2fc1e22bb4ced1cd420710fd2340017">ff_h264_ref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>, &amp;h1-&gt;cur_pic);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ac92881ef5e4b0211a34246d45cb6a545">enable_er</a>       = h1-&gt;enable_er;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a3456ca73eda021262493f1cfe79cbac6">workaround_bugs</a> = h1-&gt;workaround_bugs;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>       = h1-&gt;droppable;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// extradata/NAL handling</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aaf48016f739631d7e62d0fbbae678bf8">is_avc</a> = h1-&gt;is_avc;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ae2421152de96024a0c56fbb6fe53504b">nal_length_size</a> = h1-&gt;nal_length_size;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a4527a0423f130fba74975dcb715f4d3e">unregistered</a>.<a class="code" href="structH264SEIUnregistered.html#a95980486ba910c1f780228f0bdf617fd">x264_build</a> = h1-&gt;sei.unregistered.x264_build;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    memcpy(&amp;h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>,        &amp;h1-&gt;poc,        <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>));</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a1869c6ceb2c14499a9d90461d3226ddd">default_ref</a>, h1-&gt;default_ref, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a1869c6ceb2c14499a9d90461d3226ddd">default_ref</a>));</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>,   h1-&gt;short_ref,   <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">long_ref</a>,    h1-&gt;<a class="code" href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a>,    <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">long_ref</a>));</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a014b265bb0ec646aee83562656df1eac">delayed_pic</a>, h1-&gt;delayed_pic, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a014b265bb0ec646aee83562656df1eac">delayed_pic</a>));</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a518e81f0fa40b4a34c0c551ab17db3ed">last_pocs</a>,   h1-&gt;last_pocs,   <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a518e81f0fa40b4a34c0c551ab17db3ed">last_pocs</a>));</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a3d25f4757cc624eef70cd43679fcd345">next_output_pic</a>   = h1-&gt;next_output_pic;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#afd86434037ab7a0d2df99a024f46ecf4">next_outputed_poc</a> = h1-&gt;next_outputed_poc;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a196fc6d61308029f77d51e4b017caaf1">mmco</a>, h1-&gt;mmco, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a196fc6d61308029f77d51e4b017caaf1">mmco</a>));</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a3a0c33830a7839a259872c9b92fffad9">nb_mmco</a>         = h1-&gt;nb_mmco;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a0881a5ed88c46eb8180701365f48d772">mmco_reset</a>      = h1-&gt;mmco_reset;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa407392c074d869de73748cc036870ee">explicit_ref_marking</a> = h1-&gt;explicit_ref_marking;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a7150642cabd4140a87643d7ae81fa592">long_ref_count</a>  = h1-&gt;long_ref_count;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">short_ref_count</a> = h1-&gt;short_ref_count;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">copy_picture_range</a>(h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>, h1-&gt;short_ref, 32, h, h1);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">copy_picture_range</a>(h-&gt;<a class="code" href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">long_ref</a>, h1-&gt;<a class="code" href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a>, 32, h, h1);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">copy_picture_range</a>(h-&gt;<a class="code" href="structH264Context.html#a014b265bb0ec646aee83562656df1eac">delayed_pic</a>, h1-&gt;delayed_pic,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                       <a class="code" href="h264dec_8h.html#a8a553d2528997041b79fa929a4583614">MAX_DELAYED_PIC_COUNT</a> + 2, h, h1);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">frame_recovered</a>       = h1-&gt;frame_recovered;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        err = <a class="code" href="h264__refs_8c.html#a861f272e73a68147cb73cd589ed7f927">ff_h264_execute_ref_pic_marking</a>(h);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#aa6c592fb728917d2be7f4195931b9831">prev_poc_msb</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a148cb3fbaf1f221c4e69b5d2f6a8a5fa">poc_msb</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#ae971208eb58b9e3a14f990a8831fbe8d">prev_poc_lsb</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#ad99c7c3c16e8f7c3dc49f540debcbc15">poc_lsb</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a16d18e46d7774d45510dd895563d9384">prev_frame_num_offset</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a0e21c7d790d0f35af6d738daff2354f0">frame_num_offset</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>        = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a>        = h1-&gt;recovery_frame;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> err;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a18543104885d8131b4c439c1966161c7">  464</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a18543104885d8131b4c439c1966161c7">h264_frame_start</a>(<a class="code" href="structH264Context.html">H264Context</a> *h)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="structH264Picture.html">H264Picture</a> *pic;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">int</span> i, ret;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pixel_shift = h-&gt;<a class="code" href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">pixel_shift</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>[4] = {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        1&lt;&lt;(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>-1),</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        1&lt;&lt;(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a8aa2e291cb39b21e4ba13d1d57ef20ac">bit_depth_chroma</a>-1),</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        1&lt;&lt;(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a8aa2e291cb39b21e4ba13d1d57ef20ac">bit_depth_chroma</a>-1),</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        -1</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    };</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavcodec_2internal_8h.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>)) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Attempt to start a frame outside SETUP state\n&quot;</span>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="h264__slice_8c.html#a8aa4245e89614c37b985310da7f1c6f5">release_unused_pictures</a>(h, 1);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    i = <a class="code" href="h264__slice_8c.html#afd01b8373b02eb3456286a824a12f017">find_unused_picture</a>(h);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (i &lt; 0) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;no frame buffer available\n&quot;</span>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    pic = &amp;h-&gt;<a class="code" href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">DPB</a>[i];</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a>              = h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a> ? 0 : h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a02ca9bb7f500d3d850f8736f3cb29c6c">coded_picture_number</a> = h-&gt;<a class="code" href="structH264Context.html#aa07a46a42eb4f92e58bdb065deb5f4f0">coded_picture_number</a>++;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a79d92c2c1e4bc4172dece5096225b073">field_picture</a>          = h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a>               = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">     * Zero key_frame here; IDR markings per slice in frame or fields are ORed</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">     * in later.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">     * See decode_nal_units().</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3649a81e8414a193d685a6eee06ce902">key_frame</a> = 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a9ac8879154d0c1f31b0e884dd6e98137">mmco_reset</a>  = 0;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a3d2476196bfe4c0f3b59967138f366cc">recovered</a>   = 0;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a483d8ef880b44be9d7890a749b4367d3">invalid_gap</a> = 0;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a740358e32ee45d76bf1226340f70b9f3">sei_recovery_frame_cnt</a> = h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#abf4373e2101a4f740a584179a9f98c5a">recovery_point</a>.<a class="code" href="structH264SEIRecoveryPoint.html#a8012e2f9dace6155e00b654652ca8c99">recovery_frame_cnt</a>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a> = h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="h264__slice_8c.html#a8463f747babbd5fff2ba959dadd006cc">alloc_picture</a>(h, pic)) &lt; 0)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span>(!h-&gt;<a class="code" href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">frame_recovered</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">hwaccel</a></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="libavcodec_2version_8h.html#a1355287109a7ef6248603670c9541383">FF_API_CAP_VDPAU</a></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;       &amp;&amp; !(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="structAVCodec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#gaff12f286c59b73665a48768204cf866d">AV_CODEC_CAP_HWACCEL_VDPAU</a>)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;#endif</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;       )</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="libavcodec_2internal_8h.html#a08861ce0ee1369a1e3cb5d1ba30ec38a">ff_color_frame</a>(pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>, c);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = pic;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a>) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="h264__picture_8c.html#af2978b979fb935891ada40de22ca078b">ff_h264_set_erpic</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a6b5cd4007a0ccf9e63527e6cf7cf013a">cur_pic</a>, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">if</span> ((ret = <a class="code" href="h264__picture_8c.html#af2fc1e22bb4ced1cd420710fd2340017">ff_h264_ref_picture</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>, h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>)) &lt; 0)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structH264Context.html#a05f9c096dcd78bb73e20e53b207624a4">nb_slice_ctx</a>; i++) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i].<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>   = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0];</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i].<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1];</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#ac92881ef5e4b0211a34246d45cb6a545">enable_er</a>) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <a class="code" href="error__resilience_8c.html#ae8d70ac72d47676353321483847593e7">ff_er_frame_start</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="h264__picture_8c.html#af2978b979fb935891ada40de22ca078b">ff_h264_set_erpic</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#ad469cc1653a95c6d083a391d8b8467e7">last_pic</a>, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="h264__picture_8c.html#af2978b979fb935891ada40de22ca078b">ff_h264_set_erpic</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a27b3944c5dfb8f8135bcf2b1f3b00417">next_pic</a>, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[i]           = (4 * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &amp; 7) &lt;&lt; pixel_shift) + 4 * pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &gt;&gt; 3);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[48 + i]      = (4 * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &amp; 7) &lt;&lt; pixel_shift) + 8 * pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0] * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &gt;&gt; 3);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[16 + i]      =</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[32 + i]      = (4 * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &amp; 7) &lt;&lt; pixel_shift) + 4 * pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1] * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &gt;&gt; 3);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[48 + 16 + i] =</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[48 + 32 + i] = (4 * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &amp; 7) &lt;&lt; pixel_shift) + 8 * pic-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1] * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &gt;&gt; 3);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">/* We mark the current picture as non-reference after allocating it, so</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">     * that if we break out due to an error it can be released automatically</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">     * in the next ff_mpv_frame_start().</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a> = 0;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[0] = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[1] = INT_MAX;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a3d25f4757cc624eef70cd43679fcd345">next_output_pic</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a> = 0;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a947d562c497e7851f6bf396ee9bd642c">mb_aff_frame</a> = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#ac003204457c3d9c286de94d063c6b485">mb_aff</a> &amp;&amp; (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    assert(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a> == 0);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a68d9e2cb4f88a831ff1c5c01b18cb714">  567</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a68d9e2cb4f88a831ff1c5c01b18cb714">backup_mb_border</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                              <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_y,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                              <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_cb, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src_cr,</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                              <span class="keywordtype">int</span> linesize, <span class="keywordtype">int</span> uvlinesize,</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                              <span class="keywordtype">int</span> simple)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *top_border;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">int</span> top_idx = 1;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pixel_shift = h-&gt;<a class="code" href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">pixel_shift</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">int</span> chroma444 = <a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">int</span> chroma422 = <a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    src_y  -= linesize;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    src_cb -= uvlinesize;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    src_cr -= uvlinesize;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!simple &amp;&amp; <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a>(sl)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                top_border = sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[0][sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>];</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border, src_y + 15 * linesize);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                <span class="keywordflow">if</span> (pixel_shift)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 16, src_y + 15 * linesize + 16);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">if</span> (simple || !<a class="code" href="build_2config_8h.html#a9a535d5c874618a1b06ef3808069e834">CONFIG_GRAY</a> || !(h-&gt;<a class="code" href="structH264Context.html#afdc9479cf975e2eb72366eab748f7280">flags</a> &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="keywordflow">if</span> (chroma444) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 15 * uvlinesize);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cb + 15 * uvlinesize + 16);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 64, src_cr + 15 * uvlinesize);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 80, src_cr + 15 * uvlinesize + 16);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 16, src_cb + 15 * uvlinesize);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cr + 15 * uvlinesize);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chroma422) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                        <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 15 * uvlinesize);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cr + 15 * uvlinesize);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 16, src_cb + 15 * uvlinesize);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 24, src_cr + 15 * uvlinesize);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 7 * uvlinesize);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cr + 7 * uvlinesize);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 16, src_cb + 7 * uvlinesize);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                            <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 24, src_cr + 7 * uvlinesize);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                        }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a>(sl)) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            top_idx = 0;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    }</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    top_border = sl-&gt;<a class="code" href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">top_borders</a>[top_idx][sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>];</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">/* There are two lines saved, the line above the top macroblock</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">     * of a pair, and the line above the bottom macroblock. */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border, src_y + 16 * linesize);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span> (pixel_shift)</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 16, src_y + 16 * linesize + 16);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (simple || !<a class="code" href="build_2config_8h.html#a9a535d5c874618a1b06ef3808069e834">CONFIG_GRAY</a> || !(h-&gt;<a class="code" href="structH264Context.html#afdc9479cf975e2eb72366eab748f7280">flags</a> &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (chroma444) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 16 * linesize);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cb + 16 * linesize + 16);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 64, src_cr + 16 * linesize);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 80, src_cr + 16 * linesize + 16);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 16, src_cb + 16 * linesize);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cr + 16 * linesize);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chroma422) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 16 * uvlinesize);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cr + 16 * uvlinesize);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 16, src_cb + 16 * uvlinesize);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 24, src_cr + 16 * uvlinesize);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">if</span> (pixel_shift) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 32, src_cb + 8 * uvlinesize);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(top_border + 48, src_cr + 8 * uvlinesize);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 16, src_cb + 8 * uvlinesize);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <a class="code" href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a>(top_border + 24, src_cr + 8 * uvlinesize);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"> * Initialize implicit_weight table.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"> * @param field  0/1 initialize the weight for interlaced MBAFF</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment"> *                -1 initializes the rest</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">  669</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">implicit_weight_table</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl, <span class="keywordtype">int</span> field)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">int</span> ref0, ref1, i, cur_poc, ref_start, ref_count0, ref_count1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aae8731c46851202ca932d143015a5107">luma_weight_flag</a>[i]   = 0;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a9190fabf8380f5630655d3474eea85f0">chroma_weight_flag</a>[i] = 0;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> (field &lt; 0) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            cur_poc = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#ab34d56d9c0dcfe5643a351cf8c5bd0de">poc</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            cur_poc = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> - 1];</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0] == 1 &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1] == 1 &amp;&amp; !<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h) &amp;&amp;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][0].<a class="code" href="structH264Ref.html#a68870b34f122a60f87e85a12143deba9">poc</a> + (int64_t)sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="structH264Ref.html#a68870b34f122a60f87e85a12143deba9">poc</a> == 2 * cur_poc) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">use_weight</a>        = 0;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a91db714feae7406cbb86aac539d44cd8">use_weight_chroma</a> = 0;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        ref_start  = 0;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        ref_count0 = sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0];</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        ref_count1 = sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1];</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        cur_poc    = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[field];</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        ref_start  = 16;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        ref_count0 = 16 + 2 * sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0];</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        ref_count1 = 16 + 2 * sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1];</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">use_weight</a>               = 2;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a91db714feae7406cbb86aac539d44cd8">use_weight_chroma</a>        = 2;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a26a36b7542db3af34c16985b22e9828f">luma_log2_weight_denom</a>   = 5;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a076779b8febc5310542e63f0d36d3f2c">chroma_log2_weight_denom</a> = 5;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (ref0 = ref_start; ref0 &lt; ref_count0; ref0++) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        int64_t poc0 = sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][ref0].<a class="code" href="structH264Ref.html#a68870b34f122a60f87e85a12143deba9">poc</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">for</span> (ref1 = ref_start; ref1 &lt; ref_count1; ref1++) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="keywordtype">int</span> w = 32;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keywordflow">if</span> (!sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][ref0].<a class="code" href="structH264Ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a> &amp;&amp; !sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][ref1].<a class="code" href="structH264Ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a>) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordtype">int</span> poc1 = sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][ref1].<a class="code" href="structH264Ref.html#a68870b34f122a60f87e85a12143deba9">poc</a>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>   = av_clip_int8(poc1 - poc0);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                <span class="keywordflow">if</span> (td) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a> = av_clip_int8(cur_poc - poc0);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                    <span class="keywordtype">int</span> tx = (16384 + (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(td) &gt;&gt; 1)) / <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                    <span class="keywordtype">int</span> dist_scale_factor = (tb * tx + 32) &gt;&gt; 8;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    <span class="keywordflow">if</span> (dist_scale_factor &gt;= -64 &amp;&amp; dist_scale_factor &lt;= 128)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                        w = 64 - dist_scale_factor;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">if</span> (field &lt; 0) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a64b49108b9663a7408874580f7df8562">implicit_weight</a>[ref0][ref1][0] =</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a64b49108b9663a7408874580f7df8562">implicit_weight</a>[ref0][ref1][1] = w;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a64b49108b9663a7408874580f7df8562">implicit_weight</a>[ref0][ref1][field] = w;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * initialize scan tables</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a27b9bae7c36430b2cc94a91805a7cf7f">  733</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a27b9bae7c36430b2cc94a91805a7cf7f">init_scan_tables</a>(<a class="code" href="structH264Context.html">H264Context</a> *h)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">#define TRANSPOSE(x) ((x) &gt;&gt; 2) | (((x) &lt;&lt; 2) &amp; 0xF)</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aefa4dd77744f5a738d02cd1c342de9c9">zigzag_scan</a>[i] = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="mathops_8h.html#ac8a0f0ffe3ce93875d537922ab910b95">ff_zigzag_scan</a>[i]);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a46104f217cbc3bb4757de114340bf2f2">field_scan</a>[i]  = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="h264__slice_8c.html#a6031f2c91f61f97b7b3f3fb93d1e0209">field_scan</a>[i]);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">#undef TRANSPOSE</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 64; i++) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="preprocessor">#define TRANSPOSE(x) ((x) &gt;&gt; 3) | (((x) &amp; 7) &lt;&lt; 3)</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#ac2dbbdd8b9facb3b205f12bd66a764cc">zigzag_scan8x8</a>[i]       = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>[i]);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa5661ac29a4e3b1deddca0d58ca515e7">zigzag_scan8x8_cavlc</a>[i] = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="h264__slice_8c.html#adce17734fa38715fb8d6d1e48ce2e486">zigzag_scan8x8_cavlc</a>[i]);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a3e8152eb8de0d2fe11a77e7b20fbe9e4">field_scan8x8</a>[i]        = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="h264__slice_8c.html#a814f769cd6907170152a08cd537ff1dd">field_scan8x8</a>[i]);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a6b3fe16f9c7e2e644e22546ae73a8008">field_scan8x8_cavlc</a>[i]  = <a class="code" href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a>(<a class="code" href="h264__slice_8c.html#a8484c6fa0ed16cb11b33fa44fe11c504">field_scan8x8_cavlc</a>[i]);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">#undef TRANSPOSE</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a4efedf93defec67533cd876b6a03c2cd">transform_bypass</a>) { <span class="comment">// FIXME same ugly</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#ae8a6151f1996c0335542d95e3173df03">zigzag_scan_q0</a>          , <a class="code" href="mathops_8h.html#ac8a0f0ffe3ce93875d537922ab910b95">ff_zigzag_scan</a>          , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#ae8a6151f1996c0335542d95e3173df03">zigzag_scan_q0</a>         ));</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a4715363c28118c1b52ab78582ad83442">zigzag_scan8x8_q0</a>       , <a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>        , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a4715363c28118c1b52ab78582ad83442">zigzag_scan8x8_q0</a>      ));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a299c3f718fade86805b04eb3ed5b0b80">zigzag_scan8x8_cavlc_q0</a> , <a class="code" href="h264__slice_8c.html#adce17734fa38715fb8d6d1e48ce2e486">zigzag_scan8x8_cavlc</a>    , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a299c3f718fade86805b04eb3ed5b0b80">zigzag_scan8x8_cavlc_q0</a>));</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a1579591f0f1723ea5d0b861a5bb6259c">field_scan_q0</a>           , <a class="code" href="h264__slice_8c.html#a6031f2c91f61f97b7b3f3fb93d1e0209">field_scan</a>              , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a1579591f0f1723ea5d0b861a5bb6259c">field_scan_q0</a>          ));</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#ab1f2d86d6d476e605594f9956198c60e">field_scan8x8_q0</a>        , <a class="code" href="h264__slice_8c.html#a814f769cd6907170152a08cd537ff1dd">field_scan8x8</a>           , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#ab1f2d86d6d476e605594f9956198c60e">field_scan8x8_q0</a>       ));</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#aa4e40ba18c7689b09b0aae23825d5a6d">field_scan8x8_cavlc_q0</a>  , <a class="code" href="h264__slice_8c.html#a8484c6fa0ed16cb11b33fa44fe11c504">field_scan8x8_cavlc</a>     , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#aa4e40ba18c7689b09b0aae23825d5a6d">field_scan8x8_cavlc_q0</a> ));</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#ae8a6151f1996c0335542d95e3173df03">zigzag_scan_q0</a>          , h-&gt;<a class="code" href="structH264Context.html#aefa4dd77744f5a738d02cd1c342de9c9">zigzag_scan</a>          , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#ae8a6151f1996c0335542d95e3173df03">zigzag_scan_q0</a>         ));</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a4715363c28118c1b52ab78582ad83442">zigzag_scan8x8_q0</a>       , h-&gt;<a class="code" href="structH264Context.html#ac2dbbdd8b9facb3b205f12bd66a764cc">zigzag_scan8x8</a>       , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a4715363c28118c1b52ab78582ad83442">zigzag_scan8x8_q0</a>      ));</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a299c3f718fade86805b04eb3ed5b0b80">zigzag_scan8x8_cavlc_q0</a> , h-&gt;<a class="code" href="structH264Context.html#aa5661ac29a4e3b1deddca0d58ca515e7">zigzag_scan8x8_cavlc</a> , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a299c3f718fade86805b04eb3ed5b0b80">zigzag_scan8x8_cavlc_q0</a>));</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#a1579591f0f1723ea5d0b861a5bb6259c">field_scan_q0</a>           , h-&gt;<a class="code" href="structH264Context.html#a46104f217cbc3bb4757de114340bf2f2">field_scan</a>           , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#a1579591f0f1723ea5d0b861a5bb6259c">field_scan_q0</a>          ));</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#ab1f2d86d6d476e605594f9956198c60e">field_scan8x8_q0</a>        , h-&gt;<a class="code" href="structH264Context.html#a3e8152eb8de0d2fe11a77e7b20fbe9e4">field_scan8x8</a>        , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#ab1f2d86d6d476e605594f9956198c60e">field_scan8x8_q0</a>       ));</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        memcpy(h-&gt;<a class="code" href="structH264Context.html#aa4e40ba18c7689b09b0aae23825d5a6d">field_scan8x8_cavlc_q0</a>  , h-&gt;<a class="code" href="structH264Context.html#a6b3fe16f9c7e2e644e22546ae73a8008">field_scan8x8_cavlc</a>  , <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#aa4e40ba18c7689b09b0aae23825d5a6d">field_scan8x8_cavlc_q0</a> ));</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#aab87336eef35f1203881a73b60622223">  767</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="h264__slice_8c.html#aab87336eef35f1203881a73b60622223">get_pixel_format</a>(<a class="code" href="structH264Context.html">H264Context</a> *h, <span class="keywordtype">int</span> force_callback)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;{</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#define HWACCEL_MAX (CONFIG_H264_DXVA2_HWACCEL + \</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">                     CONFIG_H264_D3D11VA_HWACCEL + \</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">                     CONFIG_H264_VAAPI_HWACCEL + \</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">                     (CONFIG_H264_VDA_HWACCEL * 2) + \</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">                     CONFIG_H264_VIDEOTOOLBOX_HWACCEL + \</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="preprocessor">                     CONFIG_H264_VDPAU_HWACCEL)</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>[<a class="code" href="h264__slice_8c.html#a8e25fb6de2602478d1a220135a3264c4">HWACCEL_MAX</a> + 2], *<a class="code" href="avisynth__c_8h.html#a868274bcce53dba81808c75d008593b4">fmt</a> = <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *choices = <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">switch</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">case</span> 9:</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> == <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a>) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a35c39789390ba2489026c7ecdbfafba7">AV_PIX_FMT_GBRP9</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a1455e5fb4ec9fc402e3fa8a65211bacd">AV_PIX_FMT_YUV444P9</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h))</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a39097263283e4f4448321880d9b28d08">AV_PIX_FMT_YUV422P9</a>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a87065facbceef6fc4aa6d1b00042d7cd">AV_PIX_FMT_YUV420P9</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">case</span> 10:</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> == <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a>) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a65c2f27287363d45e9e1da64bf569ebd">AV_PIX_FMT_GBRP10</a>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#aff612e03cf2a557ac25e8e2032e37d9a">AV_PIX_FMT_YUV444P10</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h))</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a66e08cc645d119c6383c994529f5dff4">AV_PIX_FMT_YUV422P10</a>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a2095c546851496e10160077ab89c845c">AV_PIX_FMT_YUV420P10</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">case</span> 12:</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> == <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a>) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a7de060139e9fd1ba12510b9e14e1e259">AV_PIX_FMT_GBRP12</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a143cd27f91e2f9f4517781dfbf5c6bc1">AV_PIX_FMT_YUV444P12</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h))</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a570adc38d3ba623b3c4e07a6d22abfa8">AV_PIX_FMT_YUV422P12</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a4f1a2065ddb07bd4881c07c1f6b0568c">AV_PIX_FMT_YUV420P12</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">case</span> 14:</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> == <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a>) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#ae081a48741bb30a5028a1745a5ade38e">AV_PIX_FMT_GBRP14</a>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#ada8c97e7cb5dde4ac4cb7924693b8a66">AV_PIX_FMT_YUV444P14</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h))</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9d7af54227476bc448d263b395d8df35">AV_PIX_FMT_YUV422P14</a>;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a98d0b74e6ef1318f91629879f59d2dab">AV_PIX_FMT_YUV420P14</a>;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#if CONFIG_H264_VDPAU_HWACCEL</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5affe7961ec99ad3559ab175e557bf908e">AV_PIX_FMT_VDPAU</a>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> == <a class="code" href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a>)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef">AV_PIX_FMT_GBRP</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> == <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ae21031dcb2dd7bc75c83ec1ac2c26157">AV_PIX_FMT_YUVJ444P</a>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a>(h)) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> == <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>)</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab2e2ccfaeec66c0a5f58ffdbe2e850f9">AV_PIX_FMT_YUVJ422P</a>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="preprocessor">#if CONFIG_H264_DXVA2_HWACCEL</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a35e418d6581792c6daa3c0aaba601cb1">AV_PIX_FMT_DXVA2_VLD</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="preprocessor">#if CONFIG_H264_D3D11VA_HWACCEL</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a9e5137ae10c8b3e1051dc3159c4799a7">AV_PIX_FMT_D3D11VA_VLD</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">#if CONFIG_H264_VAAPI_HWACCEL</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8">AV_PIX_FMT_VAAPI</a>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">#if CONFIG_H264_VDA_HWACCEL</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a511c9130f7e271adc6dcd2d70d4fb238">AV_PIX_FMT_VDA_VLD</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a579c605ac9d8b247dbb43f696f539a17">AV_PIX_FMT_VDA</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="preprocessor">#if CONFIG_H264_VIDEOTOOLBOX_HWACCEL</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1159ef8f6f56dd9d60d1236517d14d20">AV_PIX_FMT_VIDEOTOOLBOX</a>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="structAVCodec.html#ac2b97bd3c19686025e1b7d577329c250">pix_fmts</a>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                choices = h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="structAVCodec.html#ac2b97bd3c19686025e1b7d577329c250">pix_fmts</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> == <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a>)</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5aef61d7a65003ef618420f618294107b0">AV_PIX_FMT_YUVJ420P</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                *fmt++ = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;               <span class="stringliteral">&quot;Unsupported bit depth %d\n&quot;</span>, h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    *fmt = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">for</span> (i=0; choices[i] != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>; i++)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">if</span> (choices[i] == h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> &amp;&amp; !force_callback)</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">return</span> choices[i];</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="pthread__frame_8c.html#ab72df5e427afa9ab4020584e33a37b70">ff_thread_get_format</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, choices);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">/* export coded and cropped frame dimensions to AVCodecContext */</span></div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#ad2a4f4f26c82a8c7776111eb01085d28">  880</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#ad2a4f4f26c82a8c7776111eb01085d28">init_dimensions</a>(<a class="code" href="structH264Context.html">H264Context</a> *h)</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>  = h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>  - (sps-&gt;<a class="code" href="structSPS.html#ac694b35ba551ef4c69b61413e413e331">crop_right</a> + sps-&gt;<a class="code" href="structSPS.html#a87fc1b7271d5d42e66b7b2f0c7dd3bfb">crop_left</a>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a> = h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a> - (sps-&gt;<a class="code" href="structSPS.html#ae372ab078c7e80d95adde2717d6d26f9">crop_top</a>   + sps-&gt;<a class="code" href="structSPS.html#a42dcaf80edd8d13036b9f26cd869b3ba">crop_bottom</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(sps-&gt;<a class="code" href="structSPS.html#ac694b35ba551ef4c69b61413e413e331">crop_right</a> + sps-&gt;<a class="code" href="structSPS.html#a87fc1b7271d5d42e66b7b2f0c7dd3bfb">crop_left</a> &lt; (<span class="keywordtype">unsigned</span>)h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(sps-&gt;<a class="code" href="structSPS.html#ae372ab078c7e80d95adde2717d6d26f9">crop_top</a> + sps-&gt;<a class="code" href="structSPS.html#a42dcaf80edd8d13036b9f26cd869b3ba">crop_bottom</a> &lt; (<span class="keywordtype">unsigned</span>)h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">/* handle container cropping */</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>,  16) == <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>,  16) &amp;&amp;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, 16) == <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(height, 16) &amp;&amp;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  &lt;= <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a> &amp;&amp;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> &lt;= height</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    ) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>  = h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        height = h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>  = h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a> = h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>        = <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>       = <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">  906</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">h264_slice_header_init</a>(<a class="code" href="structH264Context.html">H264Context</a> *h)</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">int</span> i, ret;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, sps-&gt;<a class="code" href="structSPS.html#a399115cc91b5f8d9c14611b88b8e6c88">sar</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>,</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                                     &amp;h-&gt;<a class="code" href="structH264Context.html#a5a0a26ec417321473254a47fae2e8364">chroma_x_shift</a>, &amp;h-&gt;<a class="code" href="structH264Context.html#a71978724c4e6bcff50ea90e7c8925333">chroma_y_shift</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#ab21bf601e5fa957560646bdfc73956e9">timing_info_present_flag</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        int64_t den = sps-&gt;<a class="code" href="structSPS.html#a9f898c38f001b83f5c7321972ab4a1a6">time_scale</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a4527a0423f130fba74975dcb715f4d3e">unregistered</a>.<a class="code" href="structH264SEIUnregistered.html#a95980486ba910c1f780228f0bdf617fd">x264_build</a> &lt; 44<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            den *= 2;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>, &amp;h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>,</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                  sps-&gt;<a class="code" href="structSPS.html#a65dee1cea59c0cfc2f91c24e3b9ebcb9">num_units_in_tick</a> * h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>, den, 1 &lt;&lt; 30);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="libavcodec_2h264dec_8c.html#a488e8b0923fddc82c07e2996257da500">ff_h264_free_tables</a>(h);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>           = 0;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a8e1d6ca2dc69b9a4cf251c82be17e6e1">prev_interlaced_frame</a> = 1;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <a class="code" href="h264__slice_8c.html#a27b9bae7c36430b2cc94a91805a7cf7f">init_scan_tables</a>(h);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    ret = <a class="code" href="libavcodec_2h264dec_8c.html#a2fd02f06bf7ca6119b6b8f7c7ebfbdba">ff_h264_alloc_tables</a>(h);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate memory\n&quot;</span>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="preprocessor">#if FF_API_CAP_VDPAU</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a> &amp;&amp;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="structAVCodec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#gaff12f286c59b73665a48768204cf866d">AV_CODEC_CAP_HWACCEL_VDPAU</a> &amp;&amp;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        (sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> != 8 || sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a> &gt; 1)) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="stringliteral">&quot;VDPAU decoding does not support video colorspace.\n&quot;</span>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        ret = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> &lt; 8 || sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> &gt; 14 ||</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> == 11 || sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> == 13</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    ) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported bit depth %d\n&quot;</span>,</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;               sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        ret = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ada5f0d7164345be2b94ddcbcc4f8c25c">cur_bit_depth_luma</a>         =</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a61601f3569128cf01f733b38d21dac68">cur_chroma_format_idc</a>      = sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">pixel_shift</a>                = sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> &gt; 8;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a8f1e24c748e2746f4574d75242819090">chroma_format_idc</a>          = sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a8af49eba92ae68b5d53b07da94361c3c">bit_depth_luma</a>             = sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="libavcodec_2h264dsp_8c.html#a51e816243be07609dc2707f7fece2747">ff_h264dsp_init</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa21e235b8cd7c397023d0c1b632b4f94">h264dsp</a>, sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>,</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                    sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="h264chroma_8c.html#a4183ca41207e383f4a607c6786737af1">ff_h264chroma_init</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a0b0d6ef5ad565686e884c5833e70fd5f">h264chroma</a>, sps-&gt;<a class="code" href="structSPS.html#a8aa2e291cb39b21e4ba13d1d57ef20ac">bit_depth_chroma</a>);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="libavcodec_2h264qpel_8c.html#a35f46ef87d865025f9a66182391c76d7">ff_h264qpel_init</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a1be97509b3dfcf351c93289b103a3a88">h264qpel</a>, sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="libavcodec_2h264pred_8c.html#a26a390b3c8d98a2da44646b85703b967">ff_h264_pred_init</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#ac4236ddc35be793ffa0ec7d613993bef">hpc</a>, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#adc5f65d6099fd8339c1580c091777223">codec_id</a>, sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>,</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                      sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a6adaf2e2e936aec1f0004aa1d51fcb09">vdsp</a>, sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a>);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="build_2config_8h.html#a5c6fd7a6f40c799a79dffcce7837e2db">HAVE_THREADS</a> || !(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> &amp; <a class="code" href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a>)) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        ret = <a class="code" href="libavcodec_2h264dec_8c.html#a361a33ac36f58ca3c05d593aa549fe50">ff_h264_slice_context_init</a>(h, &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0]);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;context_init() failed.\n&quot;</span>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; h-&gt;<a class="code" href="structH264Context.html#a05f9c096dcd78bb73e20e53b207624a4">nb_slice_ctx</a>; i++) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl = &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i];</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>               = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#aba31a41242e77bfcb88068d9898b03a0">intra4x4_pred_mode</a> = h-&gt;<a class="code" href="structH264Context.html#a663cd14f67b774b9a003d859e139e5c7">intra4x4_pred_mode</a> + i * 8 * 2 * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#aa114667882e7d54ce595ac53e2b12fea">mvd_table</a>[0]       = h-&gt;<a class="code" href="structH264Context.html#a4425adcb1b06580d223381a5e2d68f03">mvd_table</a>[0]       + i * 8 * 2 * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#aa114667882e7d54ce595ac53e2b12fea">mvd_table</a>[1]       = h-&gt;<a class="code" href="structH264Context.html#a4425adcb1b06580d223381a5e2d68f03">mvd_table</a>[1]       + i * 8 * 2 * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">if</span> ((ret = <a class="code" href="libavcodec_2h264dec_8c.html#a361a33ac36f58ca3c05d593aa549fe50">ff_h264_slice_context_init</a>(h, sl)) &lt; 0) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;context_init() failed.\n&quot;</span>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> = 1;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="libavcodec_2h264dec_8c.html#a488e8b0923fddc82c07e2996257da500">ff_h264_free_tables</a>(h);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> = 0;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#ac06de11c285020badbb26356e9d5dcb9"> 1001</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="h264__slice_8c.html#ac06de11c285020badbb26356e9d5dcb9">non_j_pixfmt</a>(<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="h264pred__template_8c.html#a4124bc0a9335c27f086f24ba207a4912">a</a>)</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;{</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">switch</span> (a) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5aef61d7a65003ef618420f618294107b0">AV_PIX_FMT_YUVJ420P</a>: <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab2e2ccfaeec66c0a5f58ffdbe2e850f9">AV_PIX_FMT_YUVJ422P</a>: <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ae21031dcb2dd7bc75c83ec1ac2c26157">AV_PIX_FMT_YUVJ444P</a>: <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a>;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="h264pred__template_8c.html#a4124bc0a9335c27f086f24ba207a4912">a</a>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;}</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a998c1323db67bde61cee62037b76569f"> 1012</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a998c1323db67bde61cee62037b76569f">h264_init_ps</a>(<a class="code" href="structH264Context.html">H264Context</a> *h, <span class="keyword">const</span> <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl, <span class="keywordtype">int</span> first_slice)</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;{</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">int</span> needs_reinit = 0, must_reinit, ret;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (first_slice) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>]);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>)</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a> = (<span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">pps_ref</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> != (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>]);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">sps_ref</a>-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>  != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#abbb1845fcda79fa20df8fc0db62a0904">mb_width</a> ||</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#a678b68e048b54ddf3e3f1ef26a00a5f5">mb_height</a> ||</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#ada5f0d7164345be2b94ddcbcc4f8c25c">cur_bit_depth_luma</a>    != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> ||</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a61601f3569128cf01f733b38d21dac68">cur_chroma_format_idc</a> != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        )</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            needs_reinit = 1;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a8af49eba92ae68b5d53b07da94361c3c">bit_depth_luma</a>    != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> ||</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a8f1e24c748e2746f4574d75242819090">chroma_format_idc</a> != h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a>)</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            needs_reinit         = 1;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    sps = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    must_reinit = (h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> &amp;&amp;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    (   16*sps-&gt;<a class="code" href="structSPS.html#abbb1845fcda79fa20df8fc0db62a0904">mb_width</a> != h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                     || 16*sps-&gt;<a class="code" href="structSPS.html#a678b68e048b54ddf3e3f1ef26a00a5f5">mb_height</a> != h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                     || h-&gt;<a class="code" href="structH264Context.html#ada5f0d7164345be2b94ddcbcc4f8c25c">cur_bit_depth_luma</a>    != sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                     || h-&gt;<a class="code" href="structH264Context.html#a61601f3569128cf01f733b38d21dac68">cur_chroma_format_idc</a> != sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                     || h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>  != sps-&gt;<a class="code" href="structSPS.html#abbb1845fcda79fa20df8fc0db62a0904">mb_width</a></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                     || h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> != sps-&gt;<a class="code" href="structSPS.html#a678b68e048b54ddf3e3f1ef26a00a5f5">mb_height</a></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                    ));</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        || (<a class="code" href="h264__slice_8c.html#ac06de11c285020badbb26356e9d5dcb9">non_j_pixfmt</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>) != <a class="code" href="h264__slice_8c.html#ac06de11c285020badbb26356e9d5dcb9">non_j_pixfmt</a>(<a class="code" href="h264__slice_8c.html#aab87336eef35f1203881a73b60622223">get_pixel_format</a>(h, 0))))</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        must_reinit = 1;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (first_slice &amp;&amp; <a class="code" href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a>(sps-&gt;<a class="code" href="structSPS.html#a399115cc91b5f8d9c14611b88b8e6c88">sar</a>, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>))</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        must_reinit = 1;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#ae39b3f488eeca34fa1d9ead3898e274a">setup_finished</a>) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> = <a class="code" href="h264__parse_8c.html#a076fb7aed718961e10f2e42b2ace61df">ff_h264_get_profile</a>(sps);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a>   = sps-&gt;<a class="code" href="structSPS.html#a5ea90e73e9044a02840f902e3be8c432">level_idc</a>;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#aa0cb7241b4624dba761c8cf58fb2d5f0">refs</a>    = sps-&gt;<a class="code" href="structSPS.html#a117778cb82b0e129b6265229bcf140db">ref_frame_count</a>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>  = sps-&gt;<a class="code" href="structSPS.html#abbb1845fcda79fa20df8fc0db62a0904">mb_width</a>;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> = sps-&gt;<a class="code" href="structSPS.html#a678b68e048b54ddf3e3f1ef26a00a5f5">mb_height</a>;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a>    = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> + 1;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#af1072d18d4a2c415b03010aa108a46e4">b_stride</a> = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * 4;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a71978724c4e6bcff50ea90e7c8925333">chroma_y_shift</a> = sps-&gt;<a class="code" href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">chroma_format_idc</a> &lt;= 1; <span class="comment">// 400 uses yuv420p</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>  = 16 * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a> = 16 * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#ad2a4f4f26c82a8c7776111eb01085d28">init_dimensions</a>(h);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#ac1e927369601e11728fea2e70970bf19">video_signal_type_present_flag</a>) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> = sps-&gt;<a class="code" href="structSPS.html#a9ad3491a3f867b6174e543e8cec3b22a">full_range</a> &gt; 0 ? <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                                        : <a class="code" href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#ac785c2f7eece0ea1cd5424fb2efa6060">colour_description_present_flag</a>) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a> != sps-&gt;<a class="code" href="structSPS.html#ac8e79ef69181ffdb8a2c7726c880a78a">colorspace</a>)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    needs_reinit = 1;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> = sps-&gt;<a class="code" href="structSPS.html#a63d7ab8d12f86afdbbb181bedae9473c">color_primaries</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>       = sps-&gt;<a class="code" href="structSPS.html#a7f29983ecf3f39d09a00f2d1b5da2257">color_trc</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>      = sps-&gt;<a class="code" href="structSPS.html#ac8e79ef69181ffdb8a2c7726c880a78a">colorspace</a>;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> || must_reinit || needs_reinit) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordtype">int</span> flush_changes = h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">context_initialized</a> = 0;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">if</span> (sl != h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                   <span class="stringliteral">&quot;changing width %d -&gt; %d / height %d -&gt; %d on &quot;</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                   <span class="stringliteral">&quot;slice %d\n&quot;</span>,</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>,</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a>,</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> + 1);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(first_slice);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordflow">if</span> (flush_changes)</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <a class="code" href="libavcodec_2h264dec_8c.html#aecf76122512b6be062320ce7d596dd5b">ff_h264_flush_change</a>(h);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="h264__slice_8c.html#aab87336eef35f1203881a73b60622223">get_pixel_format</a>(h, 1)) &lt; 0)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = ret;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Reinit context to %dx%d, &quot;</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;               <span class="stringliteral">&quot;pix_fmt: %s\n&quot;</span>, h-&gt;<a class="code" href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">width</a>, h-&gt;<a class="code" href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">height</a>, <a class="code" href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>));</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">h264_slice_header_init</a>(h)) &lt; 0) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                   <span class="stringliteral">&quot;h264_slice_header_init() failed\n&quot;</span>);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a8191969d0c5c258762c0d8e5bfc7cc85"> 1131</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a8191969d0c5c258762c0d8e5bfc7cc85">h264_export_frame_props</a>(<a class="code" href="structH264Context.html">H264Context</a> *h)</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;{</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="structH264Picture.html">H264Picture</a> *cur = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = 0;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a>      = 0;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">/* Signal interlacing information externally. */</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="comment">/* Prioritize picture timing SEI information over used</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">     * decoding process if it exists. */</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#a9865c7e9e1b3cb4021448bc8c7e8f322">pic_struct_present_flag</a>) {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="structH264SEIPictureTiming.html">H264SEIPictureTiming</a> *<a class="code" href="rtp_8c.html#aa51c0cd81327c3099d0a4d1738c6a45d">pt</a> = &amp;h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#afd596ddb9ec0aa85ec1b1973631c965b">picture_timing</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">switch</span> (pt-&gt;<a class="code" href="structH264SEIPictureTiming.html#a9edd57d8cf631178246b59160ad4110c">pic_struct</a>) {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a844955f27f856e8fdc98b41947716294">SEI_PIC_STRUCT_FRAME</a>:</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980ab4fba940b1593d6115828af4f5651aa7">SEI_PIC_STRUCT_TOP_FIELD</a>:</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980aa46dd1294d9ce2711d098a7553eb3655">SEI_PIC_STRUCT_BOTTOM_FIELD</a>:</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = 1;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a139b07716f025b6287e134237cc682ce">SEI_PIC_STRUCT_TOP_BOTTOM</a>:</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980aae7491f604c8a911a3cca45167c55025">SEI_PIC_STRUCT_BOTTOM_TOP</a>:</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h))</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = 1;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                <span class="comment">// try to flag soft telecine progressive</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = h-&gt;<a class="code" href="structH264Context.html#a8e1d6ca2dc69b9a4cf251c82be17e6e1">prev_interlaced_frame</a>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a0fb580d3929741f4c0ed5111fdd00e7e">SEI_PIC_STRUCT_TOP_BOTTOM_TOP</a>:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980ae3b7183ce436ffd0634012449b1a1ee4">SEI_PIC_STRUCT_BOTTOM_TOP_BOTTOM</a>:</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="comment">/* Signal the possibility of telecined film externally</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">             * (pic_struct 5,6). From these hints, let the applications</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">             * decide if they apply deinterlacing. */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> = 1;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a2e4b1caf939aa24dcc51f0e0a0211f49">SEI_PIC_STRUCT_FRAME_DOUBLING</a>:</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> = 2;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a11897f520418c6848aef99136a4ebf22">SEI_PIC_STRUCT_FRAME_TRIPLING</a>:</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aef11fd783ad17b6841af82efa07c859e">repeat_pict</a> = 4;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span> ((pt-&gt;<a class="code" href="structH264SEIPictureTiming.html#a6511084c34e5594c55b0cbbcc26dfd3a">ct_type</a> &amp; 3) &amp;&amp;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            pt-&gt;<a class="code" href="structH264SEIPictureTiming.html#a9edd57d8cf631178246b59160ad4110c">pic_struct</a> &lt;= <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980aae7491f604c8a911a3cca45167c55025">SEI_PIC_STRUCT_BOTTOM_TOP</a>)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = (pt-&gt;<a class="code" href="structH264SEIPictureTiming.html#a6511084c34e5594c55b0cbbcc26dfd3a">ct_type</a> &amp; (1 &lt;&lt; 1)) != 0;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="comment">/* Derive interlacing flag from used decoding process. */</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a> = <a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a8e1d6ca2dc69b9a4cf251c82be17e6e1">prev_interlaced_frame</a> = cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[0] != cur-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[1]) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="comment">/* Derive top_field_first from field pocs. */</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = cur-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[0] &lt; cur-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[1];</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#a9865c7e9e1b3cb4021448bc8c7e8f322">pic_struct_present_flag</a>) {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="comment">/* Use picture timing SEI information. Even if it is a</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">             * information of a past frame, better than nothing. */</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#afd596ddb9ec0aa85ec1b1973631c965b">picture_timing</a>.<a class="code" href="structH264SEIPictureTiming.html#a9edd57d8cf631178246b59160ad4110c">pic_struct</a> == <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a139b07716f025b6287e134237cc682ce">SEI_PIC_STRUCT_TOP_BOTTOM</a> ||</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#afd596ddb9ec0aa85ec1b1973631c965b">picture_timing</a>.<a class="code" href="structH264SEIPictureTiming.html#a9edd57d8cf631178246b59160ad4110c">pic_struct</a> == <a class="code" href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a0fb580d3929741f4c0ed5111fdd00e7e">SEI_PIC_STRUCT_TOP_BOTTOM_TOP</a>)</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = 1;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = 0;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">interlaced_frame</a>) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="comment">/* Default to top field first when pic_struct_present_flag</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">             * is not set but interlaced frame detected */</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = 1;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="comment">/* Most likely progressive */</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = 0;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    }</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">frame_packing</a>.<a class="code" href="structH264SEIFramePacking.html#a7c261db199dfbbcb2df7f97ad17f6e7c">present</a> &amp;&amp;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">frame_packing</a>.<a class="code" href="structH264SEIFramePacking.html#a402747c52e210b73d7c483a3e28d058e">frame_packing_arrangement_type</a> &lt;= 6 &amp;&amp;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">frame_packing</a>.<a class="code" href="structH264SEIFramePacking.html#a344d8ea80c22a7290362f1c1717720d6">content_interpretation_type</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">frame_packing</a>.<a class="code" href="structH264SEIFramePacking.html#a344d8ea80c22a7290362f1c1717720d6">content_interpretation_type</a> &lt; 3) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <a class="code" href="structH264SEIFramePacking.html">H264SEIFramePacking</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a> = &amp;h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">frame_packing</a>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <a class="code" href="structAVStereo3D.html">AVStereo3D</a> *stereo = <a class="code" href="stereo3d_8c.html#a9401b2d2cbd0c0988b1cdde6c88f6e6b">av_stereo3d_create_side_data</a>(cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">if</span> (stereo) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keywordflow">switch</span> (fp-&gt;<a class="code" href="structH264SEIFramePacking.html#a402747c52e210b73d7c483a3e28d058e">frame_packing_arrangement_type</a>) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a29a4a89f56c46999741e394e2019b221">AV_STEREO3D_CHECKERBOARD</a>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a1ea7966fe2696b13348a3cf0544e3caa">AV_STEREO3D_COLUMNS</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a23d62b9a67d4a99d745eb9bebcfd2b3e">AV_STEREO3D_LINES</a>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="structH264SEIFramePacking.html#acc259fa1fc862d183a9c3336020c55e5">quincunx_sampling_flag</a>)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a6176782f4b7b21776faf6738baa520e2">AV_STEREO3D_SIDEBYSIDE_QUINCUNX</a>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c">AV_STEREO3D_SIDEBYSIDE</a>;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9">AV_STEREO3D_TOPBOTTOM</a>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6aa23e3e6b40107100e62fa16ea536aa07">AV_STEREO3D_FRAMESEQUENCE</a>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">case</span> 6:</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">type</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7">AV_STEREO3D_2D</a>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="structH264SEIFramePacking.html#a344d8ea80c22a7290362f1c1717720d6">content_interpretation_type</a> == 2)</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            stereo-&gt;<a class="code" href="structAVStereo3D.html#a9e74d14d6b5dddcd6126da075558f102">flags</a> = <a class="code" href="libavutil_2stereo3d_8h.html#a5cca86880e9be72c89bca1c7a41eec99">AV_STEREO3D_FLAG_INVERT</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">display_orientation</a>.<a class="code" href="structH264SEIDisplayOrientation.html#abbd7ad10c91b469826ea6ab385da5b03">present</a> &amp;&amp;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">display_orientation</a>.<a class="code" href="structH264SEIDisplayOrientation.html#a4be27e6fc057ce51d36f123d50dcdbf5">anticlockwise_rotation</a> ||</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">display_orientation</a>.<a class="code" href="structH264SEIDisplayOrientation.html#afab4e060440e8d5cf9e1b1878a001a32">hflip</a> ||</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">display_orientation</a>.<a class="code" href="structH264SEIDisplayOrientation.html#ad64b59af0be61d1e91b9e1689c412cda">vflip</a>)) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <a class="code" href="structH264SEIDisplayOrientation.html">H264SEIDisplayOrientation</a> *o = &amp;h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">display_orientation</a>;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordtype">double</span> angle = o-&gt;<a class="code" href="structH264SEIDisplayOrientation.html#a4be27e6fc057ce51d36f123d50dcdbf5">anticlockwise_rotation</a> * 360 / (double) (1 &lt;&lt; 16);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <a class="code" href="structAVFrameSideData.html">AVFrameSideData</a> *rotation = <a class="code" href="group__lavu__frame.html#gab4caf9361b00f9b2ab57c222dce3fec4">av_frame_new_side_data</a>(cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>,</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                                           <a class="code" href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca3e01b882b6fa04724076067d6d9f8b69">AV_FRAME_DATA_DISPLAYMATRIX</a>,</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                                           <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) * 9);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">if</span> (rotation) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <a class="code" href="display_8c.html#a5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a>((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *)rotation-&gt;<a class="code" href="structAVFrameSideData.html#a76937ad48652a5a0cc4bff65fc6c886e">data</a>, angle);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="display_8c.html#add236b7ced34637aa9f0a9bceaeac5c3">av_display_matrix_flip</a>((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *)rotation-&gt;<a class="code" href="structAVFrameSideData.html#a76937ad48652a5a0cc4bff65fc6c886e">data</a>,</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                                   o-&gt;<a class="code" href="structH264SEIDisplayOrientation.html#afab4e060440e8d5cf9e1b1878a001a32">hflip</a>, o-&gt;<a class="code" href="structH264SEIDisplayOrientation.html#ad64b59af0be61d1e91b9e1689c412cda">vflip</a>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a7d2858362aad314feedb98b43c6aba34">afd</a>.<a class="code" href="structH264SEIAFD.html#a3f55fc55761e61b697b256c53a7f19a8">present</a>) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <a class="code" href="structAVFrameSideData.html">AVFrameSideData</a> *sd = <a class="code" href="group__lavu__frame.html#gab4caf9361b00f9b2ab57c222dce3fec4">av_frame_new_side_data</a>(cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>, <a class="code" href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca9aabf5c0b8abc7064bfcc59485e54aea">AV_FRAME_DATA_AFD</a>,</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                                     <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>));</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <span class="keywordflow">if</span> (sd) {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            *sd-&gt;<a class="code" href="structAVFrameSideData.html#a76937ad48652a5a0cc4bff65fc6c886e">data</a> = h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a7d2858362aad314feedb98b43c6aba34">afd</a>.<a class="code" href="structH264SEIAFD.html#aa2ccbf0decf5f4d5a5994b938e6bd88c">active_format_description</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a7d2858362aad314feedb98b43c6aba34">afd</a>.<a class="code" href="structH264SEIAFD.html#a3f55fc55761e61b697b256c53a7f19a8">present</a> = 0;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a8f5d97b6a0a4ec462efdebaa0c41a013">a53_caption</a>.<a class="code" href="structH264SEIA53Caption.html#a8ac17ce2b7d3547504d0b967d1e3614d">a53_caption</a>) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <a class="code" href="structH264SEIA53Caption.html">H264SEIA53Caption</a> *a53 = &amp;h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#a8f5d97b6a0a4ec462efdebaa0c41a013">a53_caption</a>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <a class="code" href="structAVFrameSideData.html">AVFrameSideData</a> *sd = <a class="code" href="group__lavu__frame.html#gab4caf9361b00f9b2ab57c222dce3fec4">av_frame_new_side_data</a>(cur-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>,</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                                                     <a class="code" href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6">AV_FRAME_DATA_A53_CC</a>,</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                                                     a53-&gt;<a class="code" href="structH264SEIA53Caption.html#a4367602fa939c09e011bae59c1617ad1">a53_caption_size</a>);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">if</span> (sd)</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            memcpy(sd-&gt;<a class="code" href="structAVFrameSideData.html#a76937ad48652a5a0cc4bff65fc6c886e">data</a>, a53-&gt;<a class="code" href="structH264SEIA53Caption.html#a8ac17ce2b7d3547504d0b967d1e3614d">a53_caption</a>, a53-&gt;<a class="code" href="structH264SEIA53Caption.html#a4367602fa939c09e011bae59c1617ad1">a53_caption_size</a>);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;a53-&gt;<a class="code" href="structH264SEIA53Caption.html#a8ac17ce2b7d3547504d0b967d1e3614d">a53_caption</a>);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        a53-&gt;<a class="code" href="structH264SEIA53Caption.html#a4367602fa939c09e011bae59c1617ad1">a53_caption_size</a> = 0;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a7b1cd65e6136d656808269f1b22f49b4">properties</a> |= <a class="code" href="avcodec_8h.html#a03b58ae91087dc342ceca69f67ee4512">FF_CODEC_PROPERTY_CLOSED_CAPTIONS</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;}</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">/* This function is called right after decoding the slice header for a first</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"> * slice in a field (or a frame). It decides whether we are decoding a new frame</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"> * or a second field in a pair and does the necessary setup.</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a4dca8c64006f039f3fa04cbeb02cab0a"> 1290</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a4dca8c64006f039f3fa04cbeb02cab0a">h264_field_start</a>(<a class="code" href="structH264Context.html">H264Context</a> *h, <span class="keyword">const</span> <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structH2645NAL.html">H2645NAL</a> *nal, <span class="keywordtype">int</span> first_slice)</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;{</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordtype">int</span> last_pic_structure, last_pic_droppable, ret;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    ret = <a class="code" href="h264__slice_8c.html#a998c1323db67bde61cee62037b76569f">h264_init_ps</a>(h, sl, first_slice);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    sps = h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    last_pic_droppable   = h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    last_pic_structure   = h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>         = (nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a> == 0);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#ae9d02484d93c4ca6da9c91d6553773cc">picture_structure</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>        = sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#ad99c7c3c16e8f7c3dc49f540debcbc15">poc_lsb</a>          = sl-&gt;<a class="code" href="structH264SliceContext.html#a2fa23639b0154c5bc87a97ddbbbae9ee">poc_lsb</a>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a640fc14ce6f7f9d3ac8aa0e103115170">delta_poc_bottom</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a6810bce2e584e56a42aa7c73afa49427">delta_poc_bottom</a>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#ab4c293367c96258913ff322fbb1711f6">delta_poc</a>[0]     = sl-&gt;<a class="code" href="structH264SliceContext.html#a6cb93d0b66d23451ab3b5b67c81e584f">delta_poc</a>[0];</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#ab4c293367c96258913ff322fbb1711f6">delta_poc</a>[1]     = sl-&gt;<a class="code" href="structH264SliceContext.html#a6cb93d0b66d23451ab3b5b67c81e584f">delta_poc</a>[1];</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="comment">/* Shorten frame num gaps so we don&#39;t have to allocate reference</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">     * frames just to throw them away */</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> != h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>) {</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordtype">int</span> unwrap_prev_frame_num = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordtype">int</span> max_frame_num         = 1 &lt;&lt; sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keywordflow">if</span> (unwrap_prev_frame_num &gt; h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>)</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            unwrap_prev_frame_num -= max_frame_num;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">if</span> ((h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> - unwrap_prev_frame_num) &gt; sps-&gt;<a class="code" href="structSPS.html#a117778cb82b0e129b6265229bcf140db">ref_frame_count</a>) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            unwrap_prev_frame_num = (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> - sps-&gt;<a class="code" href="structSPS.html#a117778cb82b0e129b6265229bcf140db">ref_frame_count</a>) - 1;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="keywordflow">if</span> (unwrap_prev_frame_num &lt; 0)</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                unwrap_prev_frame_num += max_frame_num;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a> = unwrap_prev_frame_num;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">/* See if we have a decoded first field looking for a pair...</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">     * Here, we&#39;re using that to see if we should mark previously</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">     * decode frames as &quot;finished&quot;.</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">     * We have to do that before the &quot;dummy&quot; in-between frame allocation,</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">     * since that can modify h-&gt;cur_pic_ptr. */</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        assert(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a> != <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="comment">/* Mark old field/frame as completed */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>.<a class="code" href="structThreadFrame.html#ab66edf8c145f996dac20596b7f7ab392">owner</a> == h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>) {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX,</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                      last_pic_structure == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="comment">/* figure out if we have a complementary field pair */</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) || h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == last_pic_structure) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="comment">/* Previous field is unmatched. Don&#39;t display it, but let it</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">             * remain for reference if marked as such. */</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="keywordflow">if</span> (last_pic_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX,</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                                          last_pic_structure == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a>);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> != h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                <span class="comment">/* This and previous field were reference, but had</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">                 * different frame_nums. Consider this field first in</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">                 * pair. Throw away previous field except for reference</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">                 * purposes. */</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                <span class="keywordflow">if</span> (last_pic_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                    <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX,</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                                              last_pic_structure == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a>);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <span class="comment">/* Second field in complementary pair */</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                <span class="keywordflow">if</span> (!((last_pic_structure   == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a> &amp;&amp;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                       h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>) ||</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                      (last_pic_structure   == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a> &amp;&amp;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                       h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a>))) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                           <span class="stringliteral">&quot;Invalid field mode combination %d/%d\n&quot;</span>,</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                           last_pic_structure, h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                    h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> = last_pic_structure;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                    h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>         = last_pic_droppable;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (last_pic_droppable != h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                    <a class="code" href="libavutil_2internal_8h.html#a6f548a661473b6189346b3cb9e135ac1">avpriv_request_sample</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>,</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                                          <span class="stringliteral">&quot;Found reference and non-reference fields in the same frame, which&quot;</span>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                    h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> = last_pic_structure;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                    h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>         = last_pic_droppable;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                }</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">while</span> (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> != h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> &amp;&amp;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;           h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> != (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a> + 1) % (1 &lt;&lt; sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>)) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="structH264Picture.html">H264Picture</a> *prev = h-&gt;<a class="code" href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">short_ref_count</a> ? h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0] : <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Frame num gap %d %d\n&quot;</span>,</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;               h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>, h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">if</span> (!sps-&gt;<a class="code" href="structSPS.html#a1a97e5f58c3bc871f6b079e9667b2119">gaps_in_frame_num_allowed_flag</a>)</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(h-&gt;<a class="code" href="structH264Context.html#a518e81f0fa40b4a34c0c551ab17db3ed">last_pocs</a>); i++)</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a518e81f0fa40b4a34c0c551ab17db3ed">last_pocs</a>[i] = INT_MIN;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#a18543104885d8131b4c439c1966161c7">h264_frame_start</a>(h);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = 0;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>++;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>        %= 1 &lt;&lt; sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a483d8ef880b44be9d7890a749b4367d3">invalid_gap</a> = !sps-&gt;<a class="code" href="structSPS.html#a1a97e5f58c3bc871f6b079e9667b2119">gaps_in_frame_num_allowed_flag</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 0);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 1);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#aa407392c074d869de73748cc036870ee">explicit_ref_marking</a> = 0;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        ret = <a class="code" href="h264__refs_8c.html#a861f272e73a68147cb73cd589ed7f927">ff_h264_execute_ref_pic_marking</a>(h);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af9978d9bd6ac80a494ef1b78fe1d004f">err_recognition</a> &amp; <a class="code" href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a>))</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="comment">/* Error concealment: If a ref is missing, copy the previous ref</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">         * in its place.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">         * FIXME: Avoiding a memcpy would be nice, but ref handling makes</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">         * many assumptions about there being no actual duplicates.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">         * FIXME: This does not copy padding for out-of-frame motion</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">         * vectors.  Given we are concealing a lost frame, this probably</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">         * is not noticeable by comparison, but it should be fixed. */</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">short_ref_count</a>) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <span class="keywordflow">if</span> (prev &amp;&amp;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> == prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> &amp;&amp;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> == prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> &amp;&amp;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aed14fa772ce46881020fd1545c86432c">format</a> == prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aed14fa772ce46881020fd1545c86432c">format</a>) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                <a class="code" href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a>(&amp;prev-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 0);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="structH264Picture.html#a79d92c2c1e4bc4172dece5096225b073">field_picture</a>)</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                    <a class="code" href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a>(&amp;prev-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 1);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                <a class="code" href="group__lavu__picture.html#ga6b5a267e202daadf81cbde6584055d1e">av_image_copy</a>(h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>,</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                              h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>,</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                              (<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **)prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>,</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                              prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>,</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                              prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aed14fa772ce46881020fd1545c86432c">format</a>,</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                              prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>,</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                              prev-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#ab34d56d9c0dcfe5643a351cf8c5bd0de">poc</a> = prev-&gt;<a class="code" href="structH264Picture.html#ab34d56d9c0dcfe5643a351cf8c5bd0de">poc</a> + 2;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            }</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[0]-&gt;<a class="code" href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">prev_frame_num</a>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="comment">/* See if we have a decoded first field looking for a pair...</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">     * We&#39;re using that to see whether to continue decoding in that</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">     * frame, or to allocate a new one. */</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        assert(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">reference</a> != <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="comment">/* figure out if we have a complementary field pair */</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) || h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == last_pic_structure) {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <span class="comment">/* Previous field is unmatched. Don&#39;t display it, but let it</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">             * remain for reference if marked as such. */</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a030592020ae404851d2a39a2c6a61a6f">missing_fields</a> ++;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a030592020ae404851d2a39a2c6a61a6f">missing_fields</a> = 0;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> != h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX,</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                                          h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>==<a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                <span class="comment">/* This and the previous field had different frame_nums.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">                 * Consider this field first in pair. Throw away previous</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">                 * one except for reference purposes. */</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = 1;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                <span class="comment">/* Second field in complementary pair */</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = 0;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="comment">/* Frame or first field in a potentially complementary pair */</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) || h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264__slice_8c.html#a18543104885d8131b4c439c1966161c7">h264_frame_start</a>(h) &lt; 0) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> = 0;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="h264__slice_8c.html#a8aa4245e89614c37b985310da7f1c6f5">release_unused_pictures</a>(h, 0);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="comment">/* Some macroblocks can be accessed before they&#39;re available in case</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">    * of lost slices, MBAFF or threading. */</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h)) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">for</span>(i = (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>); i&lt;h-&gt;mb_height; i++)</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            memset(h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a> + i*h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>, -1, (h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> - (i+1==h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>)) * <span class="keyword">sizeof</span>(*h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>));</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        memset(h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>, -1,</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            (h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> - 1) * <span class="keyword">sizeof</span>(*h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>));</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="h264__parse_8c.html#a2cfb8c24dff618a801f32a3d13515d92">ff_h264_init_poc</a>(h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>, &amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#ab34d56d9c0dcfe5643a351cf8c5bd0de">poc</a>,</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                     h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>, &amp;h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>, h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>, nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    memcpy(h-&gt;<a class="code" href="structH264Context.html#a196fc6d61308029f77d51e4b017caaf1">mmco</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#afa06721e1d83090b1758f9678941eac6">mmco</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a9e7ec9f412ef496e9e919bc1dff57c86">nb_mmco</a> * <span class="keyword">sizeof</span>(*h-&gt;<a class="code" href="structH264Context.html#a196fc6d61308029f77d51e4b017caaf1">mmco</a>));</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a3a0c33830a7839a259872c9b92fffad9">nb_mmco</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a9e7ec9f412ef496e9e919bc1dff57c86">nb_mmco</a>;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aa407392c074d869de73748cc036870ee">explicit_ref_marking</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#acb22821480b4c72ca917d5941828a59e">explicit_ref_marking</a>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#aca0f3c5eeeeed8272457957748ed8309">picture_idr</a> = nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#abf4373e2101a4f740a584179a9f98c5a">recovery_point</a>.<a class="code" href="structH264SEIRecoveryPoint.html#a8012e2f9dace6155e00b654652ca8c99">recovery_frame_cnt</a> &gt;= 0) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sei_recovery_frame_cnt = h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#abf4373e2101a4f740a584179a9f98c5a">recovery_point</a>.<a class="code" href="structH264SEIRecoveryPoint.html#a8012e2f9dace6155e00b654652ca8c99">recovery_frame_cnt</a>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> != sei_recovery_frame_cnt || sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a9fc00bf6f7c536ecc4566ff3ba1e2ae6">valid_recovery_point</a> = 1;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">if</span> (   h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a> &lt; 0</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            || av_mod_uintp2(h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a> - h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>, h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>) &gt; sei_recovery_frame_cnt) {</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a> = av_mod_uintp2(h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> + sei_recovery_frame_cnt, h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a9fc00bf6f7c536ecc4566ff3ba1e2ae6">valid_recovery_point</a>)</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a> = h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    }</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a3649a81e8414a193d685a6eee06ce902">key_frame</a> |= (nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">if</span> (nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a> ||</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a> == h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> &amp;&amp; nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a>)) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">recovery_frame</a>         = -1;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a3d2476196bfe4c0f3b59967138f366cc">recovered</a> = 1;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// If we have an IDR, all frames after it in decoded order are</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// &quot;recovered&quot;.</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">if</span> (nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>)</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">frame_recovered</a> |= <a class="code" href="h264dec_8h.html#a148b410eeaa7a343459ef912843a232a">FRAME_RECOVERED_IDR</a>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="preprocessor">#if 1</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a3d2476196bfe4c0f3b59967138f366cc">recovered</a> |= h-&gt;<a class="code" href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">frame_recovered</a>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a3d2476196bfe4c0f3b59967138f366cc">recovered</a> |= !!(h-&gt;<a class="code" href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">frame_recovered</a> &amp; <a class="code" href="h264dec_8h.html#a148b410eeaa7a343459ef912843a232a">FRAME_RECOVERED_IDR</a>);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">/* Set the frame properties/side data. Only done for the second field in</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">     * field coded frames, since some SEI information is present for each field</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">     * and is merged by the SEI parsing code. */</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) || !h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#a8191969d0c5c258762c0d8e5bfc7cc85">h264_export_frame_props</a>(h);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a79a71eb50219252f898f53fc0e23ab09"> 1549</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a79a71eb50219252f898f53fc0e23ab09">h264_slice_header_parse</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="structH2645NAL.html">H2645NAL</a> *nal)</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;{</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a> *<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a> *<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> slice_type, <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>, i;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordtype">int</span> field_pic_flag, bottom_field_flag;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordtype">int</span> first_slice = sl == h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordtype">int</span> picture_structure;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (first_slice)</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(!h-&gt;<a class="code" href="structH264Context.html#ae39b3f488eeca34fa1d9ead3898e274a">setup_finished</a>);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> = <a class="code" href="golomb_8h.html#af09ebe1db4301aaa62f22ec381c89bd2">get_ue_golomb_long</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    slice_type = <a class="code" href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">if</span> (slice_type &gt; 9) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;               <span class="stringliteral">&quot;slice type %d too large at %d\n&quot;</span>,</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;               slice_type, sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a>);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    }</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">if</span> (slice_type &gt; 4) {</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        slice_type -= 5;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2eaae684a5973f13a492781551733b17">slice_type_fixed</a> = 1;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2eaae684a5973f13a492781551733b17">slice_type_fixed</a> = 0;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    slice_type         = <a class="code" href="h264data_8c.html#ae4dd4297f1d85bb11789e535c8941cfe">ff_h264_golomb_to_pict_type</a>[slice_type];</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>     = slice_type;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> = slice_type &amp; 3;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a>  == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a> &amp;&amp;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;A non-intra slice in an IDR NAL unit.\n&quot;</span>);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a> = <a class="code" href="golomb_8h.html#a9fbef3a4a48ea960374f521702c9c8e0">get_ue_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a> &gt;= <a class="code" href="h264__ps_8h.html#ac669a873376311bf057af13000fc64ba">MAX_PPS_COUNT</a>) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;pps_id %u out of range\n&quot;</span>, sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    }</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>]) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;               <span class="stringliteral">&quot;non-existing PPS %u referenced\n&quot;</span>,</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    pps = (<span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (!h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[pps-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>]) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;               <span class="stringliteral">&quot;non-existing SPS %u referenced\n&quot;</span>, pps-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    }</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    sps = (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[pps-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>, sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> (!first_slice) {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a> != sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a>) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Frame num change from %d to %d\n&quot;</span>,</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a>);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a9b58576ddc0a23be9f80ee86a2b15a20">mb_mbaff</a>       = 0;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#a7f2579b33d6caa349d49fd8a85741ccc">frame_mbs_only_flag</a>) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        picture_structure = <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">if</span> (!sps-&gt;<a class="code" href="structSPS.html#a2d522ab7c981c5869a24a99d9bbdcd28">direct_8x8_inference_flag</a> &amp;&amp; slice_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;This stream was generated by a broken encoder, invalid 8x8 inference\n&quot;</span>);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        field_pic_flag = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keywordflow">if</span> (field_pic_flag) {</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            bottom_field_flag = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;            picture_structure = <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a> + bottom_field_flag;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;            picture_structure = <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        }</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ae9d02484d93c4ca6da9c91d6553773cc">picture_structure</a>      = picture_structure;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a0ad2defd854cd1c753ad204883a442e8">mb_field_decoding_flag</a> = picture_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">if</span> (picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#af938881b381dec4d3896ae00b86ccb02">curr_pic_num</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a>;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#adeb83fcfd7e47a9eaa50ebbc5a25e524">max_pic_num</a>  = 1 &lt;&lt; sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a>;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#af938881b381dec4d3896ae00b86ccb02">curr_pic_num</a> = 2 * sl-&gt;<a class="code" href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">frame_num</a> + 1;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#adeb83fcfd7e47a9eaa50ebbc5a25e524">max_pic_num</a>  = 1 &lt;&lt; (sps-&gt;<a class="code" href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">log2_max_frame_num</a> + 1);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">if</span> (nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <a class="code" href="golomb_8h.html#af09ebe1db4301aaa62f22ec381c89bd2">get_ue_golomb_long</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>); <span class="comment">/* idr_pic_id */</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#abce31c4863777246fc903dc60a845324">poc_type</a> == 0) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2fa23639b0154c5bc87a97ddbbbae9ee">poc_lsb</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>, sps-&gt;<a class="code" href="structSPS.html#a1683e6d71ff227b12a3ffeb1241808b0">log2_max_poc_lsb</a>);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">if</span> (pps-&gt;<a class="code" href="structPPS.html#aa5e560485030a6b329142ebcfcfb0ff0">pic_order_present</a> == 1 &amp;&amp; picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>)</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a6810bce2e584e56a42aa7c73afa49427">delta_poc_bottom</a> = <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    }</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">if</span> (sps-&gt;<a class="code" href="structSPS.html#abce31c4863777246fc903dc60a845324">poc_type</a> == 1 &amp;&amp; !sps-&gt;<a class="code" href="structSPS.html#a08f7c9654efe1cffe69c799dbc696ade">delta_pic_order_always_zero_flag</a>) {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a6cb93d0b66d23451ab3b5b67c81e584f">delta_poc</a>[0] = <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordflow">if</span> (pps-&gt;<a class="code" href="structPPS.html#aa5e560485030a6b329142ebcfcfb0ff0">pic_order_present</a> == 1 &amp;&amp; picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>)</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a6cb93d0b66d23451ab3b5b67c81e584f">delta_poc</a>[1] = <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    }</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a61f91cf8000dc68ea6245bcdbd775e07">redundant_pic_count</a> = 0;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">if</span> (pps-&gt;<a class="code" href="structPPS.html#aa5de9f593c92cb51962b96e4a15af037">redundant_pic_cnt_present</a>)</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a61f91cf8000dc68ea6245bcdbd775e07">redundant_pic_count</a> = <a class="code" href="golomb_8h.html#a9fbef3a4a48ea960374f521702c9c8e0">get_ue_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>)</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a9ad3dcddcd056cd92a0b18bd10339370">direct_spatial_mv_pred</a> = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    ret = <a class="code" href="h264__parse_8c.html#a1f736885e46a4a9a075a03b443f0eaad">ff_h264_parse_ref_count</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a0c7c424a1526d27d6d359719c0bea391">list_count</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>,</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                                  &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>, pps, sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a>,</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                                  picture_structure, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;       ret = <a class="code" href="h264__refs_8c.html#a10640d544a6ad123c55adfbf1343a61a">ff_h264_decode_ref_pic_list_reordering</a>(sl, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;       <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;           sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1] = sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0] = 0;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;           <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;       }</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    }</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">use_weight</a> = 0;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aae8731c46851202ca932d143015a5107">luma_weight_flag</a>[i]   = 0;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a9190fabf8380f5630655d3474eea85f0">chroma_weight_flag</a>[i] = 0;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> ((pps-&gt;<a class="code" href="structPPS.html#a6dd553cd2d08e4664d557962ff48783e">weighted_pred</a> &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>) ||</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        (pps-&gt;<a class="code" href="structPPS.html#ad7bf111c6836e059076e6700561856cd">weighted_bipred_idc</a> == 1 &amp;&amp;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;         sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>))</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <a class="code" href="h264__parse_8c.html#a90a85677af6f6d907c5aab0135410d81">ff_h264_pred_weight_table</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>, sps, sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>,</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                                  sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a>, &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#acb22821480b4c72ca917d5941828a59e">explicit_ref_marking</a> = 0;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="keywordflow">if</span> (nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a>) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        ret = <a class="code" href="h264__refs_8c.html#a14824fcc81a02c46994bdeb2b086e0ad">ff_h264_decode_ref_pic_marking</a>(sl, &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>, nal, h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af9978d9bd6ac80a494ef1b78fe1d004f">err_recognition</a> &amp; <a class="code" href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a>))</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a> &amp;&amp; pps-&gt;<a class="code" href="structPPS.html#a7e11bc70fea55b94b8f03d585b309c78">cabac</a>) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        tmp = <a class="code" href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">if</span> (tmp &gt; 2) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;cabac_init_idc %u overflow\n&quot;</span>, tmp);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a02b26f1e924d99afb172f6fd0a89d849">cabac_init_idc</a> = <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a31a22c8f7deafe008953aabadc8ef3fe">last_qscale_diff</a> = 0;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    tmp = pps-&gt;<a class="code" href="structPPS.html#a5629d24334617c9d043a6714d6f8d126">init_qp</a> + <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">if</span> (tmp &gt; 51 + 6 * (sps-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> - 8)) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;QP %u out of range\n&quot;</span>, tmp);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>       = <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[0] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(pps, 0, sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[1] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(pps, 1, sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">// FIXME qscale / qp ... stuff</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea83789bae2515a1ce384a88f074244e4e">AV_PICTURE_TYPE_SP</a>)</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>); <span class="comment">/* sp_for_switch_flag */</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea83789bae2515a1ce384a88f074244e4e">AV_PICTURE_TYPE_SP</a> ||</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa7199b8035cf5a076a05a7fcf6dfc7fe">AV_PICTURE_TYPE_SI</a>)</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>); <span class="comment">/* slice_qs_delta */</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>     = 1;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a> = 0;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a>     = 0;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">if</span> (pps-&gt;<a class="code" href="structPPS.html#a6a89f1af35dc97ed3b0be50e5055d54a">deblocking_filter_parameters_present</a>) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        tmp = <a class="code" href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (tmp &gt; 2) {</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                   <span class="stringliteral">&quot;deblocking_filter_idc %u out of range\n&quot;</span>, tmp);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> = <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> &lt; 2)</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> ^= 1;  <span class="comment">// 1&lt;-&gt;0</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>) {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a> = <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) * 2;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a>     = <a class="code" href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) * 2;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a> &gt;  12 ||</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a> &lt; -12 ||</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a> &gt;  12     ||</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a> &lt; -12) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                       <span class="stringliteral">&quot;deblocking filter parameters %d %d out of range\n&quot;</span>,</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                       sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a>);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    }</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;}</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment"> * Decode a slice header.</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment"> * This will (re)initialize the decoder and call h264_frame_start() as needed.</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment"> * @param h h264context</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment"> * @return 0 if okay, &lt;0 if an error occurred</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01766"></a><span class="lineno"><a class="line" href="h264dec_8h.html#a2c3a62d8fd3c3282b33be427ab6e02c8"> 1766</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a2c3a62d8fd3c3282b33be427ab6e02c8">ff_h264_decode_slice_header</a>(<a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structH2645NAL.html">H2645NAL</a> *nal)</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordtype">int</span> i, j, ret = 0;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keywordtype">int</span> first_slice = sl == h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    ret = <a class="code" href="h264__slice_8c.html#a79a71eb50219252f898f53fc0e23ab09">h264_slice_header_parse</a>(h, sl, nal);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="comment">// discard redundant pictures</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a61f91cf8000dc68ea6245bcdbd775e07">redundant_pic_count</a> &gt; 0)</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> == 0 || !h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ae39b3f488eeca34fa1d9ead3898e274a">setup_finished</a>) {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Too many fields\n&quot;</span>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> == 0) { <span class="comment">// FIXME better field boundary detection</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>) {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4f5a42e1149a1de0eb3b626a83efd3a3">max_contexts</a> &gt; 1) {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a6aae08bceaf5a1b600432d03faf4f2ff">single_decode_warning</a>) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot decode multiple access units as slice threads\n&quot;</span>);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                    h-&gt;<a class="code" href="structH264Context.html#a6aae08bceaf5a1b600432d03faf4f2ff">single_decode_warning</a> = 1;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a4f5a42e1149a1de0eb3b626a83efd3a3">max_contexts</a> = 1;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="h264dec_8h.html#a1719ae0ec5299c5b97ff0cee0a5128d5">SLICE_SINGLETHREAD</a>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> &amp;&amp; <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                ret = <a class="code" href="h264__picture_8c.html#ade5cb5aa08b2bddd1989a08e80bb5420">ff_h264_field_end</a>(h, h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>, 1);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> = 0;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> &amp;&amp; !<a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h) &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#ad61de9d1617296a603e0dcccb9487d6d">nal_unit_type</a>  == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>) {</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Broken frame packetizing\n&quot;</span>);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                ret = <a class="code" href="h264__picture_8c.html#ade5cb5aa08b2bddd1989a08e80bb5420">ff_h264_field_end</a>(h, h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>, 1);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> = 0;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 0);</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX, 1);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        }</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, INT_MAX,</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                                          h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>)</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(sl == h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> == 0 &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">first_field</a>) {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="keywordflow">if</span> (</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8">AVDISCARD_NONREF</a> &amp;&amp; !h-&gt;<a class="code" href="structH264Context.html#a7e242fcd0985055ecf49848537051418">nal_ref_idc</a>) ||</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a776541ad00a4f13c3fdcd363988bffb3">AVDISCARD_BIDIR</a>  &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) ||</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16aabee31ca5c7c140d3a84b848164eeaf8">AVDISCARD_NONINTRA</a> &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) ||</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#ad61de9d1617296a603e0dcccb9487d6d">nal_unit_type</a> != <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">sei</a>.<a class="code" href="structH264SEIContext.html#abf4373e2101a4f740a584179a9f98c5a">recovery_point</a>.<a class="code" href="structH264SEIRecoveryPoint.html#a8012e2f9dace6155e00b654652ca8c99">recovery_frame_cnt</a> &lt; 0) ||</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="h264dec_8h.html#a8fa94dfb807ce0b503ac7a2d4cd7164e">SLICE_SKIPED</a>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        }</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">if</span> (!first_slice) {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a> *<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a> = (<span class="keyword">const</span> <a class="code" href="structPPS.html">PPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">pps_list</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">pps_id</a>]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a> != pps-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a> ||</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#ade523751b7233a72d6ebdd666398f063">transform_8x8_mode</a> != pps-&gt;<a class="code" href="structPPS.html#ade523751b7233a72d6ebdd666398f063">transform_8x8_mode</a> <span class="comment">/*||</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment">            (h-&gt;setup_finished &amp;&amp; h-&gt;ps.pps != pps)*/</span>) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;PPS changed between slices\n&quot;</span>);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a> != (<span class="keyword">const</span> <a class="code" href="structSPS.html">SPS</a>*)h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">sps_list</a>[h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">sps_id</a>]-&gt;<a class="code" href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">data</a>) {</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;               <span class="stringliteral">&quot;SPS changed in the middle of the frame\n&quot;</span>);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        }</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> == 0) {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#a4dca8c64006f039f3fa04cbeb02cab0a">h264_field_start</a>(h, sl, nal, first_slice);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> != sl-&gt;<a class="code" href="structH264SliceContext.html#ae9d02484d93c4ca6da9c91d6553773cc">picture_structure</a> ||</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a>         != (nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a> == 0)) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                   <span class="stringliteral">&quot;Changing field mode (%d -&gt; %d) between slices is not allowed\n&quot;</span>,</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#ae9d02484d93c4ca6da9c91d6553773cc">picture_structure</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                   <span class="stringliteral">&quot;unset cur_pic_ptr on slice %d\n&quot;</span>,</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                   h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a> + 1);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        }</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    }</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aca0f3c5eeeeed8272457957748ed8309">picture_idr</a> &amp;&amp; nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> != <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid mix of IDR and non-IDR slices\n&quot;</span>);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a> == h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> &lt;&lt; <a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h) &gt;= h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a> ||</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a>) {</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;first_mb_in_slice overflow\n&quot;</span>);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    }</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> =  sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> % h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> = (sl-&gt;<a class="code" href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">first_mb_addr</a> / h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>) &lt;&lt;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                                 <a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>)</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> + 1;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &lt; h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    ret = <a class="code" href="h264__refs_8c.html#ac1c419d9a15f88b94f736285ed2977de">ff_h264_build_ref_list</a>(h, sl);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#ad7bf111c6836e059076e6700561856cd">weighted_bipred_idc</a> == 2 &amp;&amp;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <a class="code" href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">implicit_weight_table</a>(h, sl, -1);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <a class="code" href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">implicit_weight_table</a>(h, sl, 0);</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <a class="code" href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">implicit_weight_table</a>(h, sl, 1);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; !sl-&gt;<a class="code" href="structH264SliceContext.html#a9ad3dcddcd056cd92a0b18bd10339370">direct_spatial_mv_pred</a>)</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <a class="code" href="h264__direct_8c.html#a8212d9afa9c7cdb1d19923b6627c6a6f">ff_h264_direct_dist_scale_factor</a>(h, sl);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="h264__direct_8c.html#a0cd0942db98ece2d9390787b87f4fd55">ff_h264_direct_ref_list_init</a>(h, sl);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a> ||</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a> &amp;&amp;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;         h-&gt;<a class="code" href="structH264Context.html#ad61de9d1617296a603e0dcccb9487d6d">nal_unit_type</a> != <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a>) ||</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16aabee31ca5c7c140d3a84b848164eeaf8">AVDISCARD_NONINTRA</a> &amp;&amp;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;         sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>) ||</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a776541ad00a4f13c3fdcd363988bffb3">AVDISCARD_BIDIR</a>  &amp;&amp;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         sl-&gt;<a class="code" href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) ||</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8">AVDISCARD_NONREF</a> &amp;&amp;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;         nal-&gt;<a class="code" href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">ref_idc</a> == 0))</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> = 0;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> == 1 &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#a4f5a42e1149a1de0eb3b626a83efd3a3">max_contexts</a> &gt; 1) {</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a1944f9a4f8f2e123c087e1fe7613d571">flags2</a> &amp; <a class="code" href="group__lavc__core.html#ga1a6a486e686ab6c581ffffcb88cb31b3">AV_CODEC_FLAG2_FAST</a>) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <span class="comment">/* Cheat slightly for speed:</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment">             * Do not bother to deblock across slices. */</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> = 2;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a> = 1;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    }</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a7acc1e9cb7de31c1fe13bac51dab8d6c">qp_thresh</a> = 15 -</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                   <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a>) -</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                   <a class="code" href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a>(0,</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                          h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4dae79f86eba176d3e0db2980826c701">chroma_qp_index_offset</a>[0],</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                          h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a4dae79f86eba176d3e0db2980826c701">chroma_qp_index_offset</a>[1]) +</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                   6 * (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">sps</a>-&gt;<a class="code" href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">bit_depth_luma</a> - 8);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>       = ++h-&gt;<a class="code" href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">current_slice</a>;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>)</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afb16e049eec2446151bfa6065eaece2a">slice_row</a>[(sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>-1)&amp;(<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a>-1)]= sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span> (   h-&gt;<a class="code" href="structH264Context.html#afb16e049eec2446151bfa6065eaece2a">slice_row</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>&amp;(<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a>-1)] + 3 &gt;= sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#afb16e049eec2446151bfa6065eaece2a">slice_row</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>&amp;(<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a>-1)] &lt;= sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a> &gt;= <a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a>) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="comment">//in case of ASO this check needs to be updated depending on how we decide to assign slice numbers in this case</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Possibly too many slices (%d &gt;= %d), increase MAX_SLICES and recompile if there are artifacts\n&quot;</span>, sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>, <a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="keywordtype">int</span> id_list[16];</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordtype">int</span> *ref2frm = h-&gt;<a class="code" href="structH264Context.html#a44c45873e29b02440969517b0feb0745">ref2frm</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a> &amp; (<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a> - 1)][j];</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            id_list[i] = 60;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            <span class="keywordflow">if</span> (j &lt; sl-&gt;list_count &amp;&amp; i &lt; sl-&gt;ref_count[j] &amp;&amp;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[j][i].<a class="code" href="structH264Ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]) {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                <span class="keywordtype">int</span> k;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                <a class="code" href="structAVBuffer.html">AVBuffer</a> *<a class="code" href="avisynth__c_8h.html#a5bc5fa69bee375df074734a2c4858604">buf</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[j][i].<a class="code" href="structH264Ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]-&gt;<a class="code" href="structAVBufferRef.html#a3c692274c56720d7903bbd35bcaec3a2">buffer</a>;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; h-&gt;<a class="code" href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">short_ref_count</a>; k++)</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">short_ref</a>[k]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]-&gt;<a class="code" href="structAVBufferRef.html#a3c692274c56720d7903bbd35bcaec3a2">buffer</a> == buf) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                        id_list[i] = k;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                    }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; h-&gt;<a class="code" href="structH264Context.html#a7150642cabd4140a87643d7ae81fa592">long_ref_count</a>; k++)</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">long_ref</a>[k] &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">long_ref</a>[k]-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]-&gt;<a class="code" href="structAVBufferRef.html#a3c692274c56720d7903bbd35bcaec3a2">buffer</a> == buf) {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                        id_list[i] = h-&gt;<a class="code" href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">short_ref_count</a> + k;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                    }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        }</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        ref2frm[0] =</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        ref2frm[1] = -1;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            ref2frm[i + 2] = 4 * id_list[i] + (sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[j][i].<a class="code" href="structH264Ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        ref2frm[18 + 0] =</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        ref2frm[18 + 1] = -1;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="keywordflow">for</span> (i = 16; i &lt; 48; i++)</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            ref2frm[i + 4] = 4 * id_list[(i - 16) &gt;&gt; 1] +</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                             (sl-&gt;<a class="code" href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[j][i].<a class="code" href="structH264Ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    }</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a1c52e4da25b608b2b9a80af21bb86d58">debug</a> &amp; <a class="code" href="avcodec_8h.html#a5d34f0bd0c235b8b9ee96e658df557af">FF_DEBUG_PICT_INFO</a>) {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;               <span class="stringliteral">&quot;slice:%d %s mb:%d %c%s%s frame:%d poc:%d/%d ref:%d/%d qp:%d loop:%d:%d:%d weight:%d%s %s\n&quot;</span>,</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>,</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;               (h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a> ? <span class="stringliteral">&quot;F&quot;</span> : h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a> ? <span class="stringliteral">&quot;T&quot;</span> : <span class="stringliteral">&quot;B&quot;</span>),</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;               <a class="code" href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a>(sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>),</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a2eaae684a5973f13a492781551733b17">slice_type_fixed</a> ? <span class="stringliteral">&quot; fix&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;               nal-&gt;<a class="code" href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">type</a> == <a class="code" href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a> ? <span class="stringliteral">&quot; IDR&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;               h-&gt;<a class="code" href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">poc</a>.<a class="code" href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">frame_num</a>,</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;               h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[0],</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;               h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[1],</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0], sl-&gt;<a class="code" href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1],</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>,</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>,</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">slice_alpha_c0_offset</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">slice_beta_offset</a>,</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">use_weight</a>,</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">use_weight</a> == 1 &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">pwt</a>.<a class="code" href="structH264PredWeightTable.html#a91db714feae7406cbb86aac539d44cd8">use_weight_chroma</a> ? <span class="stringliteral">&quot;c&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;               sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a> == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> ? (sl-&gt;<a class="code" href="structH264SliceContext.html#a9ad3dcddcd056cd92a0b18bd10339370">direct_spatial_mv_pred</a> ? <span class="stringliteral">&quot;SPAT&quot;</span> : <span class="stringliteral">&quot;TEMP&quot;</span>) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;}</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="h264dec_8h.html#ab601c1bdf8905c63f4cab5668b462dff"> 2004</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#ab601c1bdf8905c63f4cab5668b462dff">ff_h264_get_slice_type</a>(<span class="keyword">const</span> <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl)</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;{</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">switch</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>) {</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>:</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>:</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>:</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea83789bae2515a1ce384a88f074244e4e">AV_PICTURE_TYPE_SP</a>:</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">return</span> 3;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa7199b8035cf5a076a05a7fcf6dfc7fe">AV_PICTURE_TYPE_SI</a>:</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    }</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;}</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a5d157b6580d010b39acfab476257aedb"> 2022</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a5d157b6580d010b39acfab476257aedb">fill_filter_caches_inter</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h,</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                                      <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                                                      <span class="keywordtype">int</span> mb_type, <span class="keywordtype">int</span> top_xy,</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                                                      <span class="keywordtype">int</span> left_xy[<a class="code" href="h264dec_8h.html#a888d981e3f12d4c8650fc34130eda33e">LEFT_MBS</a>],</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                                      <span class="keywordtype">int</span> top_type,</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                                                      <span class="keywordtype">int</span> left_type[LEFT_MBS],</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                                                      <span class="keywordtype">int</span> mb_xy, <span class="keywordtype">int</span> list)</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;{</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordtype">int</span> b_stride = h-&gt;<a class="code" href="structH264Context.html#af1072d18d4a2c415b03010aa108a46e4">b_stride</a>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    int16_t(*mv_dst)[2] = &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a4938574b415e4b2d5a8c3df33a3c8734">mv_cache</a>[list][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]];</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    int8_t *ref_cache   = &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a108395326528ede67d08c0a6c52dc46b">ref_cache</a>[list][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]];</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a69ee557358fd6cd78c0d051e2532c89f">IS_INTER</a>(mb_type) || <a class="code" href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a>(mb_type)) {</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a9e0ee168ee7b4c7ce87a303fafd0d8c0">USES_LIST</a>(top_type, list)) {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> b_xy  = h-&gt;<a class="code" href="structH264Context.html#adbdc4e84a627d6deeda47bd0b336e664">mb2b_xy</a>[top_xy] + 3 * b_stride;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> b8_xy = 4 * top_xy + 2;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> *ref2frm = &amp;h-&gt;<a class="code" href="structH264Context.html#a44c45873e29b02440969517b0feb0745">ref2frm</a>[h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[top_xy] &amp; (<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a> - 1)][list][(<a class="code" href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a>(sl) ? 20 : 2)];</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(mv_dst - 1 * 8, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][b_xy + 0]);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            ref_cache[0 - 1 * 8] =</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            ref_cache[1 - 1 * 8] = ref2frm[h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[list][b8_xy + 0]];</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            ref_cache[2 - 1 * 8] =</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            ref_cache[3 - 1 * 8] = ref2frm[h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[list][b8_xy + 1]];</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            <a class="code" href="intreadwrite_8h.html#a7c3f497db4f11e02df33b15dddbe5fed">AV_ZERO128</a>(mv_dst - 1 * 8);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[0 - 1 * 8], ((<a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>) &amp; 0xFF) * 0x01010101u);</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type ^ left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>])) {</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a9e0ee168ee7b4c7ce87a303fafd0d8c0">USES_LIST</a>(left_type[LTOP], list)) {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> b_xy  = h-&gt;<a class="code" href="structH264Context.html#adbdc4e84a627d6deeda47bd0b336e664">mb2b_xy</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]] + 3;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> b8_xy = 4 * left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] + 1;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> *ref2frm = &amp;h-&gt;<a class="code" href="structH264Context.html#a44c45873e29b02440969517b0feb0745">ref2frm</a>[h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]] &amp; (<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a> - 1)][list][(<a class="code" href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a>(sl) ? 20 : 2)];</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(mv_dst - 1 +  0, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][b_xy + b_stride * 0]);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(mv_dst - 1 +  8, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][b_xy + b_stride * 1]);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(mv_dst - 1 + 16, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][b_xy + b_stride * 2]);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(mv_dst - 1 + 24, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][b_xy + b_stride * 3]);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                ref_cache[-1 +  0] =</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                ref_cache[-1 +  8] = ref2frm[h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[list][b8_xy + 2 * 0]];</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                ref_cache[-1 + 16] =</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                ref_cache[-1 + 24] = ref2frm[h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[list][b8_xy + 2 * 1]];</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(mv_dst - 1 +  0);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(mv_dst - 1 +  8);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(mv_dst - 1 + 16);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(mv_dst - 1 + 24);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                ref_cache[-1 +  0] =</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                ref_cache[-1 +  8] =</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                ref_cache[-1 + 16] =</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                ref_cache[-1 + 24] = <a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mpegutils_8h.html#a9e0ee168ee7b4c7ce87a303fafd0d8c0">USES_LIST</a>(mb_type, list)) {</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(mv_dst, 4, 4, 8, <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(0, 0), 4);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[0 * 8], ((<a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>) &amp; 0xFF) * 0x01010101u);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[1 * 8], ((<a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>) &amp; 0xFF) * 0x01010101u);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[2 * 8], ((<a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>) &amp; 0xFF) * 0x01010101u);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[3 * 8], ((<a class="code" href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a>) &amp; 0xFF) * 0x01010101u);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    }</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    {</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        int8_t *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[list][4 * mb_xy];</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> *ref2frm = &amp;h-&gt;<a class="code" href="structH264Context.html#a44c45873e29b02440969517b0feb0745">ref2frm</a>[sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a> &amp; (<a class="code" href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a> - 1)][list][(<a class="code" href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a>(sl) ? 20 : 2)];</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        uint32_t ref01 = (<a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(ref2frm[ref[0]], ref2frm[ref[1]]) &amp; 0x00FF00FF) * 0x0101;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        uint32_t ref23 = (<a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(ref2frm[ref[2]], ref2frm[ref[3]]) &amp; 0x00FF00FF) * 0x0101;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[0 * 8], ref01);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[1 * 8], ref01);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[2 * 8], ref23);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(&amp;ref_cache[3 * 8], ref23);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    {</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        int16_t(*mv_src)[2] = &amp;h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[list][4 * sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + 4 * sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * b_stride];</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(mv_dst + 8 * 0, mv_src + 0 * b_stride);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(mv_dst + 8 * 1, mv_src + 1 * b_stride);</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(mv_dst + 8 * 2, mv_src + 2 * b_stride);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <a class="code" href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a>(mv_dst + 8 * 3, mv_src + 3 * b_stride);</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;}</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment"> * @return non zero if the loop filter can be skipped</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02106"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a299b2d0eff55a139f51057128e347343"> 2106</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#a299b2d0eff55a139f51057128e347343">fill_filter_caches</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl, <span class="keywordtype">int</span> mb_type)</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;{</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = sl-&gt;<a class="code" href="structH264SliceContext.html#aec4803c68b3153315c802f3c4c5a856b">mb_xy</a>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordtype">int</span> top_xy, left_xy[<a class="code" href="h264dec_8h.html#a888d981e3f12d4c8650fc34130eda33e">LEFT_MBS</a>];</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordtype">int</span> top_type, left_type[<a class="code" href="h264dec_8h.html#a888d981e3f12d4c8650fc34130eda33e">LEFT_MBS</a>];</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *nnz;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *nnz_cache;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    top_xy = mb_xy - (h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> &lt;&lt; <a class="code" href="h264dec_8h.html#a4b6e9be890e19617a2ee277a0abd7c7a">MB_FIELD</a>(sl));</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = mb_xy - 1;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> left_mb_field_flag = <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy - 1]);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> curr_mb_field_flag = <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="keywordflow">if</span> (left_mb_field_flag != curr_mb_field_flag)</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] -= h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            <span class="keywordflow">if</span> (curr_mb_field_flag)</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                top_xy += h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> &amp;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                          (((h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[top_xy] &gt;&gt; 7) &amp; 1) - 1);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="keywordflow">if</span> (left_mb_field_flag != curr_mb_field_flag)</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] += h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    }</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#aa43e8dceaab262d59e16478bea82e163">top_mb_xy</a>        = top_xy;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a522dd45ca7afaa108ed107ad8bb080be">left_mb_xy</a>[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>];</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a522dd45ca7afaa108ed107ad8bb080be">left_mb_xy</a>[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>];</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="comment">/* For sufficiently low qp, filtering wouldn&#39;t do anything.</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">         * This is a conservative estimate: could also check beta_offset</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">         * and more accurate chroma_qp. */</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        <span class="keywordtype">int</span> qp_thresh = sl-&gt;<a class="code" href="structH264SliceContext.html#a7acc1e9cb7de31c1fe13bac51dab8d6c">qp_thresh</a>; <span class="comment">// FIXME strictly we should store qp_thresh for each mb of a slice</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <span class="keywordtype">int</span> qp        = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[mb_xy];</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <span class="keywordflow">if</span> (qp &lt;= qp_thresh &amp;&amp;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            (left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] &lt; 0 ||</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;             ((qp + h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]] + 1) &gt;&gt; 1) &lt;= qp_thresh) &amp;&amp;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            (top_xy &lt; 0 ||</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;             ((qp + h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[top_xy] + 1) &gt;&gt; 1) &lt;= qp_thresh)) {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h))</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            <span class="keywordflow">if</span> ((left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] &lt; 0 ||</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                 ((qp + h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>]] + 1) &gt;&gt; 1) &lt;= qp_thresh) &amp;&amp;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                (top_xy &lt; h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a> ||</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                 ((qp + h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[top_xy - h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>] + 1) &gt;&gt; 1) &lt;= qp_thresh))</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        }</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    top_type        = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[top_xy];</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]];</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    left_type[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>]];</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> == 2) {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[top_xy] != sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>)</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;            top_type = 0;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>]] != sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>)</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = left_type[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = 0;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[top_xy] == 0xFFFF)</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            top_type = 0;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>]] == 0xFFFF)</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;            left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = left_type[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = 0;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    }</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a999fe74dbf0606daebe9691d6c489864">top_type</a>        = top_type;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2eb5c17dfb2b780cac69462cb324604e">left_type</a>[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>] = left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>];</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a2eb5c17dfb2b780cac69462cb324604e">left_type</a>[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>] = left_type[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>];</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type))</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="h264__slice_8c.html#a5d157b6580d010b39acfab476257aedb">fill_filter_caches_inter</a>(h, sl, mb_type, top_xy, left_xy,</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                             top_type, left_type, mb_xy, 0);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a0c7c424a1526d27d6d359719c0bea391">list_count</a> == 2)</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <a class="code" href="h264__slice_8c.html#a5d157b6580d010b39acfab476257aedb">fill_filter_caches_inter</a>(h, sl, mb_type, top_xy, left_xy,</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                                 top_type, left_type, mb_xy, 1);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    nnz       = h-&gt;<a class="code" href="structH264Context.html#a740cd9ac8b22ca6c83ae20586a0d4413">non_zero_count</a>[mb_xy];</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    nnz_cache = sl-&gt;<a class="code" href="structH264SliceContext.html#ae02b07f823f7ff8170d226ca01a53088">non_zero_count_cache</a>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(&amp;nnz_cache[4 + 8 * 1], &amp;nnz[0]);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(&amp;nnz_cache[4 + 8 * 2], &amp;nnz[4]);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(&amp;nnz_cache[4 + 8 * 3], &amp;nnz[8]);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(&amp;nnz_cache[4 + 8 * 4], &amp;nnz[12]);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">cbp</a> = h-&gt;<a class="code" href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">cbp_table</a>[mb_xy];</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordflow">if</span> (top_type) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        nnz = h-&gt;<a class="code" href="structH264Context.html#a740cd9ac8b22ca6c83ae20586a0d4413">non_zero_count</a>[top_xy];</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <a class="code" href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a>(&amp;nnz_cache[4 + 8 * 0], &amp;nnz[3 * 4]);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    }</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="keywordflow">if</span> (left_type[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        nnz = h-&gt;<a class="code" href="structH264Context.html#a740cd9ac8b22ca6c83ae20586a0d4413">non_zero_count</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]];</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        nnz_cache[3 + 8 * 1] = nnz[3 + 0 * 4];</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        nnz_cache[3 + 8 * 2] = nnz[3 + 1 * 4];</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        nnz_cache[3 + 8 * 3] = nnz[3 + 2 * 4];</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        nnz_cache[3 + 8 * 4] = nnz[3 + 3 * 4];</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="comment">/* CAVLC 8x8dct requires NNZ values for residual decoding that differ</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">     * from what the loop filter needs */</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="h264__cabac_8c.html#a4542b0e4de6c4c58f9bd4cfa90d1d462">CABAC</a>(h) &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#ade523751b7233a72d6ebdd666398f063">transform_8x8_mode</a>) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a4afa967e732c1bc49d1eef91eb2bb29e">IS_8x8DCT</a>(top_type)) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            nnz_cache[4 + 8 * 0] =</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            nnz_cache[5 + 8 * 0] = (h-&gt;<a class="code" href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">cbp_table</a>[top_xy] &amp; 0x4000) &gt;&gt; 12;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            nnz_cache[6 + 8 * 0] =</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            nnz_cache[7 + 8 * 0] = (h-&gt;<a class="code" href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">cbp_table</a>[top_xy] &amp; 0x8000) &gt;&gt; 12;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a4afa967e732c1bc49d1eef91eb2bb29e">IS_8x8DCT</a>(left_type[LTOP])) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            nnz_cache[3 + 8 * 1] =</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            nnz_cache[3 + 8 * 2] = (h-&gt;<a class="code" href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">cbp_table</a>[left_xy[<a class="code" href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a>]] &amp; 0x2000) &gt;&gt; 12; <span class="comment">// FIXME check MBAFF</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        }</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a4afa967e732c1bc49d1eef91eb2bb29e">IS_8x8DCT</a>(left_type[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>])) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            nnz_cache[3 + 8 * 3] =</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            nnz_cache[3 + 8 * 4] = (h-&gt;<a class="code" href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">cbp_table</a>[left_xy[<a class="code" href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a>]] &amp; 0x8000) &gt;&gt; 12; <span class="comment">// FIXME check MBAFF</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;        }</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a4afa967e732c1bc49d1eef91eb2bb29e">IS_8x8DCT</a>(mb_type)) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            nnz_cache[<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]] =</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            nnz_cache[scan8[1]] =</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            nnz_cache[scan8[2]] =</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            nnz_cache[scan8[3]] = (sl-&gt;<a class="code" href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">cbp</a> &amp; 0x1000) &gt;&gt; 12;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            nnz_cache[scan8[0 + 4]] =</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            nnz_cache[scan8[1 + 4]] =</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            nnz_cache[scan8[2 + 4]] =</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            nnz_cache[scan8[3 + 4]] = (sl-&gt;<a class="code" href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">cbp</a> &amp; 0x2000) &gt;&gt; 12;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            nnz_cache[scan8[0 + 8]] =</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            nnz_cache[scan8[1 + 8]] =</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            nnz_cache[scan8[2 + 8]] =</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            nnz_cache[scan8[3 + 8]] = (sl-&gt;<a class="code" href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">cbp</a> &amp; 0x4000) &gt;&gt; 12;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            nnz_cache[scan8[0 + 12]] =</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            nnz_cache[scan8[1 + 12]] =</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            nnz_cache[scan8[2 + 12]] =</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            nnz_cache[scan8[3 + 12]] = (sl-&gt;<a class="code" href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">cbp</a> &amp; 0x8000) &gt;&gt; 12;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;}</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3"> 2248</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl, <span class="keywordtype">int</span> start_x, <span class="keywordtype">int</span> end_x)</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;{</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, *dest_cb, *dest_cr;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordtype">int</span> linesize, uvlinesize, mb_x, mb_y;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> end_mb_y       = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> + <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> old_slice_type = sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> pixel_shift    = h-&gt;<a class="code" href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">pixel_shift</a>;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> block_h        = 16 &gt;&gt; h-&gt;<a class="code" href="structH264Context.html#a71978724c4e6bcff50ea90e7c8925333">chroma_y_shift</a>;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a>)</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <span class="keywordflow">for</span> (mb_x = start_x; mb_x &lt; end_x; mb_x++)</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;            <span class="keywordflow">for</span> (mb_y = end_mb_y - <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h); mb_y &lt;= end_mb_y; mb_y++) {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                <span class="keywordtype">int</span> mb_xy, mb_type;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                mb_xy         = sl-&gt;<a class="code" href="structH264SliceContext.html#aec4803c68b3153315c802f3c4c5a856b">mb_xy</a> = mb_x + mb_y * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                mb_type       = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy];</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h))</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                    sl-&gt;<a class="code" href="structH264SliceContext.html#a9b58576ddc0a23be9f80ee86a2b15a20">mb_mbaff</a>               =</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                    sl-&gt;<a class="code" href="structH264SliceContext.html#a0ad2defd854cd1c753ad204883a442e8">mb_field_decoding_flag</a> = !!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> = mb_x;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> = mb_y;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                dest_y  = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0] +</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                          ((mb_x &lt;&lt; pixel_shift) + mb_y * sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>) * 16;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                dest_cb = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[1] +</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                          (mb_x &lt;&lt; pixel_shift) * (8 &lt;&lt; <a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) +</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                          mb_y * sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> * block_h;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                dest_cr = h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[2] +</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                          (mb_x &lt;&lt; pixel_shift) * (8 &lt;&lt; <a class="code" href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a>(h)) +</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                          mb_y * sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> * block_h;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                <span class="comment">// FIXME simplify above</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (<a class="code" href="h264dec_8h.html#a4b6e9be890e19617a2ee277a0abd7c7a">MB_FIELD</a>(sl)) {</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    linesize   = sl-&gt;<a class="code" href="structH264SliceContext.html#a0472c459734b9637afe44cd490e429d8">mb_linesize</a>   = sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>   * 2;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                    uvlinesize = sl-&gt;<a class="code" href="structH264SliceContext.html#a42cd44c2819560905709065d0b696868">mb_uvlinesize</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> * 2;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                    <span class="keywordflow">if</span> (mb_y &amp; 1) { <span class="comment">// FIXME move out of this function?</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                        dest_y  -= sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>   * 15;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                        dest_cb -= sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> * (block_h - 1);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                        dest_cr -= sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> * (block_h - 1);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                    }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                    linesize   = sl-&gt;<a class="code" href="structH264SliceContext.html#a0472c459734b9637afe44cd490e429d8">mb_linesize</a>   = sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                    uvlinesize = sl-&gt;<a class="code" href="structH264SliceContext.html#a42cd44c2819560905709065d0b696868">mb_uvlinesize</a> = sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a>;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                }</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                <a class="code" href="h264__slice_8c.html#a68d9e2cb4f88a831ff1c5c01b18cb714">backup_mb_border</a>(h, sl, dest_y, dest_cb, dest_cr, linesize,</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                                 uvlinesize, 0);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="h264__slice_8c.html#a299b2d0eff55a139f51057128e347343">fill_filter_caches</a>(h, sl, mb_type))</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[0] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>, 0, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[mb_xy]);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[1] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>, 1, h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">qscale_table</a>[mb_xy]);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                    <a class="code" href="h264__loopfilter_8c.html#a804e5b441d52a1268fd8e8ba275ce0bc">ff_h264_filter_mb</a>(h, sl, mb_x, mb_y, dest_y, dest_cb, dest_cr,</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                                      linesize, uvlinesize);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                    <a class="code" href="h264__loopfilter_8c.html#aee8102bd3b04183491b032c40ab82867">ff_h264_filter_mb_fast</a>(h, sl, mb_x, mb_y, dest_y, dest_cb,</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                                           dest_cr, linesize, uvlinesize);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    }</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">slice_type</a>  = old_slice_type;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>         = end_x;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>         = end_mb_y - <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[0] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>, 0, sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>);</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">chroma_qp</a>[1] = <a class="code" href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a>(h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>, 1, sl-&gt;<a class="code" href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">qscale</a>);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a3e11f4d75a3107359a15a94c3613cac8"> 2318</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a3e11f4d75a3107359a15a94c3613cac8">predict_field_decoding_flag</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl)</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordtype">int</span> mb_type     = (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[mb_xy - 1] == sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>) ?</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                      h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy - 1] :</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                      (h-&gt;<a class="code" href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">slice_table</a>[mb_xy - h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>] == sl-&gt;<a class="code" href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">slice_num</a>) ?</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                      h-&gt;<a class="code" href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">cur_pic</a>.<a class="code" href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy - h-&gt;<a class="code" href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">mb_stride</a>] : 0;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a9b58576ddc0a23be9f80ee86a2b15a20">mb_mbaff</a>    = sl-&gt;<a class="code" href="structH264SliceContext.html#a0ad2defd854cd1c753ad204883a442e8">mb_field_decoding_flag</a> = <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type) ? 1 : 0;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;}</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment"> * Draw edges and report progress for the last MB row.</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#ab8849f35ed7ba07e50b78eea9b1037df"> 2331</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#ab8849f35ed7ba07e50b78eea9b1037df">decode_finish_row</a>(<span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h, <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;{</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordtype">int</span> top            = 16 * (sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>      &gt;&gt; <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h));</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordtype">int</span> pic_height     = 16 *  h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a> &gt;&gt; <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(h);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>         =  16      &lt;&lt; <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h);</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordtype">int</span> deblock_border = (16 + 4) &lt;&lt; <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>) {</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">if</span> ((top + height) &gt;= pic_height)</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            height += deblock_border;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        top -= deblock_border;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    }</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span> (top &gt;= pic_height || (top + height) &lt; 0)</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    height = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(height, pic_height - top);</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">if</span> (top &lt; 0) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        height = top + <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        top    = 0;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <a class="code" href="libavcodec_2h264dec_8c.html#a60a4f324fda3d7394906cf6a2e422bd5">ff_h264_draw_horiz_band</a>(h, sl, top, height);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">droppable</a> || sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a8607db4a68758e6bd12bdc7b1a5518e5">error_occurred</a>)</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">tf</a>, top + height - 1,</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                              h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;}</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div><div class="line"><a name="l02362"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936"> 2362</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(<a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl,</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                         <span class="keywordtype">int</span> startx, <span class="keywordtype">int</span> starty,</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                         <span class="keywordtype">int</span> endx, <span class="keywordtype">int</span> endy, <span class="keywordtype">int</span> status)</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;{</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">if</span> (!sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>-&gt;<a class="code" href="structH264Context.html#ac92881ef5e4b0211a34246d45cb6a545">enable_er</a>)</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a>) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        <a class="code" href="structERContext.html">ERContext</a> *er = &amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <a class="code" href="error__resilience_8c.html#a00b6ab0da3b338afa209792001e707fb">ff_er_add_slice</a>(er, startx, starty, endx, endy, status);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;}</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"><a class="line" href="h264__slice_8c.html#ab4c172264d72e44fe906d9dcfaca86ef"> 2376</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#ab4c172264d72e44fe906d9dcfaca86ef">decode_slice</a>(<span class="keyword">struct</span> <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;{</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keyword">const</span> <a class="code" href="structH264Context.html">H264Context</a> *h = sl-&gt;<a class="code" href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keywordtype">int</span> lf_x_start = sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordtype">int</span> orig_deblock = sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>   = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0];</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">uvlinesize</a> = h-&gt;<a class="code" href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">cur_pic_ptr</a>-&gt;<a class="code" href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">f</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1];</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    ret = <a class="code" href="h264__slice_8c.html#a6c6df1b650bca2e5ad20c1f2eb543de3">alloc_scratch_buffers</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a>);</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#ae23587a6d707e7d63ed3e6718338ba76">mb_skip_run</a> = -1;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(h-&gt;<a class="code" href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">block_offset</a>[15] == (4 * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[15] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &amp; 7) &lt;&lt; h-&gt;<a class="code" href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">pixel_shift</a>) + 4 * sl-&gt;<a class="code" href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">linesize</a> * ((<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[15] - <a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]) &gt;&gt; 3));</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a>)</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> = 0;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#aad79f9d158b8c1c576bdeb9ed79a5788">is_complex</a> = <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h) || h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a> ||</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                     (<a class="code" href="build_2config_8h.html#a9a535d5c874618a1b06ef3808069e834">CONFIG_GRAY</a> &amp;&amp; (h-&gt;<a class="code" href="structH264Context.html#afdc9479cf975e2eb72366eab748f7280">flags</a> &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>));</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="keywordflow">if</span> (!(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> &amp; <a class="code" href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a>) &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">picture_structure</a> == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a> &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a71d13f17709a29253ade0e23488e7f27">error_status_table</a>) {</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> start_i  = av_clip(sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>, 0, h-&gt;<a class="code" href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">mb_num</a> - 1);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <span class="keywordflow">if</span> (start_i) {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <span class="keywordtype">int</span> prev_status = h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a71d13f17709a29253ade0e23488e7f27">error_status_table</a>[h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a9f2ecd0d1185887b0be7962ae3614cde">mb_index2xy</a>[start_i - 1]];</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            prev_status &amp;= ~<a class="code" href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3"> VP_START</a>;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;            <span class="keywordflow">if</span> (prev_status != (<a class="code" href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a> | <a class="code" href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a> | <a class="code" href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a>))</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a8607db4a68758e6bd12bdc7b1a5518e5">error_occurred</a> = 1;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        }</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    }</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">ps</a>.<a class="code" href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">pps</a>-&gt;<a class="code" href="structPPS.html#a7e11bc70fea55b94b8f03d585b309c78">cabac</a>) {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="comment">/* realign */</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="comment">/* init cabac */</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        ret = <a class="code" href="cabac_8c.html#a222d3304683cf997beb1b955febaa9b8">ff_init_cabac_decoder</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>,</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                              sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>.<a class="code" href="structGetBitContext.html#ad3bbe8f5d0b9e28a1070396fac5725d8">buffer</a> + <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) / 8,</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                              (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) + 7) / 8);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        <a class="code" href="h264__cabac_8c.html#ae2cd68fe6384805b65ed5a8bb3d650bf">ff_h264_init_cabac_states</a>(h, sl);</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            <span class="comment">// START_TIMER</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            <span class="keywordtype">int</span> ret, eos;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;            <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> &gt;= sl-&gt;<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a>) {</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Slice overlaps with next at %d\n&quot;</span>,</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                       sl-&gt;<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a>);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;            }</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            ret = <a class="code" href="h264__cabac_8c.html#aacb6c6e44ab941f9a05d0cf897def003">ff_h264_decode_mb_cabac</a>(h, sl);</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            <span class="comment">// STOP_TIMER(&quot;decode_mb_cabac&quot;)</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                <a class="code" href="h264__mb_8c.html#a1e18e7ab5648a75bb25c4cd4cb9899fd">ff_h264_hl_decode_mb</a>(h, sl);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            <span class="comment">// FIXME optimal? or let mb_decode decode 16x32 ?</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            <span class="keywordflow">if</span> (ret &gt;= 0 &amp;&amp; <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>++;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                ret = <a class="code" href="h264__cabac_8c.html#aacb6c6e44ab941f9a05d0cf897def003">ff_h264_decode_mb_cabac</a>(h, sl);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                    <a class="code" href="h264__mb_8c.html#a1e18e7ab5648a75bb25c4cd4cb9899fd">ff_h264_hl_decode_mb</a>(h, sl);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>--;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            }</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            eos = <a class="code" href="cabac__functions_8h.html#afcc6359f0421928ee881270e37cee8e6">get_cabac_terminate</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>);</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            <span class="keywordflow">if</span> ((h-&gt;<a class="code" href="structH264Context.html#a3456ca73eda021262493f1cfe79cbac6">workaround_bugs</a> &amp; <a class="code" href="avcodec_8h.html#a9cc7522439883f6ff0787386119678b7">FF_BUG_TRUNCATED</a>) &amp;&amp;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a88c67766fb020075568713a205943275">bytestream</a> &gt; sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">bytestream_end</a> + 2) {</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> - 1,</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>);</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> &gt;= lf_x_start)</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                    <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, lf_x_start, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + 1);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            }</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a88c67766fb020075568713a205943275">bytestream</a> &gt; sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">bytestream_end</a> + 2 )</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;bytestream overread %&quot;</span><a class="code" href="libavutil_2internal_8h.html#a5a241f1b73b42f74b4122da23004dc6c">PTRDIFF_SPECIFIER</a><span class="stringliteral">&quot;\n&quot;</span>, sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">bytestream_end</a> - sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a88c67766fb020075568713a205943275">bytestream</a>);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keywordflow">if</span> (ret &lt; 0 || sl-&gt;cabac.bytestream &gt; sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">bytestream_end</a> + 4) {</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                       <span class="stringliteral">&quot;error while decoding MB %d %d, bytestream %&quot;</span><a class="code" href="libavutil_2internal_8h.html#a5a241f1b73b42f74b4122da23004dc6c">PTRDIFF_SPECIFIER</a><span class="stringliteral">&quot;\n&quot;</span>,</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                       sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>,</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                       sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">bytestream_end</a> - sl-&gt;<a class="code" href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">cabac</a>.<a class="code" href="structCABACContext.html#a88c67766fb020075568713a205943275">bytestream</a>);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;            }</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            <span class="keywordflow">if</span> (++sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>) {</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, lf_x_start, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> = lf_x_start = 0;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                <a class="code" href="h264__slice_8c.html#ab8849f35ed7ba07e50b78eea9b1037df">decode_finish_row</a>(h, sl);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                ++sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h)) {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                    ++sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h) &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &lt; h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>)</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                        <a class="code" href="h264__slice_8c.html#a3e11f4d75a3107359a15a94c3613cac8">predict_field_decoding_flag</a>(h, sl);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            }</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            <span class="keywordflow">if</span> (eos || sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>) {</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                <a class="code" href="libavcodec_2internal_8h.html#ab0611a4c87b1248b4a560776c0a5d86a">ff_tlog</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <span class="stringliteral">&quot;slice end %d %d\n&quot;</span>,</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                        <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>), sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>.<a class="code" href="structGetBitContext.html#adacaccb7e1e29f7d0e669659f17a9bfd">size_in_bits</a>);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> - 1,</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>);</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> &gt; lf_x_start)</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                    <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, lf_x_start, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            }</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        }</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;            <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> &gt;= sl-&gt;<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a>) {</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Slice overlaps with next at %d\n&quot;</span>,</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                       sl-&gt;<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a>);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;            ret = <a class="code" href="h264__cavlc_8c.html#a3caf7495c02d839df8b3729291df23fd">ff_h264_decode_mb_cavlc</a>(h, sl);</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                <a class="code" href="h264__mb_8c.html#a1e18e7ab5648a75bb25c4cd4cb9899fd">ff_h264_hl_decode_mb</a>(h, sl);</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;            <span class="comment">// FIXME optimal? or let mb_decode decode 16x32 ?</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="keywordflow">if</span> (ret &gt;= 0 &amp;&amp; <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h)) {</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>++;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                ret = <a class="code" href="h264__cavlc_8c.html#a3caf7495c02d839df8b3729291df23fd">ff_h264_decode_mb_cavlc</a>(h, sl);</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                    <a class="code" href="h264__mb_8c.html#a1e18e7ab5648a75bb25c4cd4cb9899fd">ff_h264_hl_decode_mb</a>(h, sl);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>--;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            }</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                       <span class="stringliteral">&quot;error while decoding MB %d %d\n&quot;</span>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                             sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            }</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            <span class="keywordflow">if</span> (++sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>) {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, lf_x_start, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> = lf_x_start = 0;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                <a class="code" href="h264__slice_8c.html#ab8849f35ed7ba07e50b78eea9b1037df">decode_finish_row</a>(h, sl);</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                ++sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h)) {</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                    ++sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(h) &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &lt; h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>)</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                        <a class="code" href="h264__slice_8c.html#a3e11f4d75a3107359a15a94c3613cac8">predict_field_decoding_flag</a>(h, sl);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                }</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>) {</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                    <a class="code" href="libavcodec_2internal_8h.html#ab0611a4c87b1248b4a560776c0a5d86a">ff_tlog</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <span class="stringliteral">&quot;slice end %d %d\n&quot;</span>,</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                            <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>), sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>.<a class="code" href="structGetBitContext.html#adacaccb7e1e29f7d0e669659f17a9bfd">size_in_bits</a>);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                    <span class="keywordflow">if</span> (   <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) == 0</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                        || <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) &gt; 0 &amp;&amp; !(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#af9978d9bd6ac80a494ef1b78fe1d004f">err_recognition</a> &amp; <a class="code" href="avcodec_8h.html#a84b2a67f04fa6d2cab74d09e2779b6ec">AV_EF_AGGRESSIVE</a>)) {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                        <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>,</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                                     sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> - 1, sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                        <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>,</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                                     sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                    }</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                }</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) &lt;= 0 &amp;&amp; sl-&gt;<a class="code" href="structH264SliceContext.html#ae23587a6d707e7d63ed3e6718338ba76">mb_skip_run</a> &lt;= 0) {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                <a class="code" href="libavcodec_2internal_8h.html#ab0611a4c87b1248b4a560776c0a5d86a">ff_tlog</a>(h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <span class="stringliteral">&quot;slice end %d %d\n&quot;</span>,</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                        <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>), sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>.<a class="code" href="structGetBitContext.html#adacaccb7e1e29f7d0e669659f17a9bfd">size_in_bits</a>);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;sl-&gt;<a class="code" href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">gb</a>) == 0) {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                    <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>,</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                                 sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> - 1, sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a>);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> &gt; lf_x_start)</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                        <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, lf_x_start, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                    <a class="code" href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a>(sl, sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>, sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>,</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                                 sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>, <a class="code" href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a>);</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                }</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;            }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    }</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    sl-&gt;<a class="code" href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">deblocking_filter</a> = orig_deblock;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;}</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment"> * Call decode_slice() for each context.</span></div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment"> * @param h h264 master context</span></div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="comment"> * @param context_count number of contexts to execute</span></div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02591"></a><span class="lineno"><a class="line" href="h264dec_8h.html#ac85c2dff7d125ee1b908d41cb42d46ef"> 2591</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="h264__slice_8c.html#ac85c2dff7d125ee1b908d41cb42d46ef">ff_h264_execute_decode_slices</a>(<a class="code" href="structH264Context.html">H264Context</a> *h, <span class="keywordtype">unsigned</span> context_count)</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;{</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *<span class="keyword">const</span> avctx = h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordtype">int</span> i, j;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(context_count &amp;&amp; h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[context_count - 1].<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &lt; h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a> = INT_MAX;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">hwaccel</a></div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="libavcodec_2version_8h.html#a1355287109a7ef6248603670c9541383">FF_API_CAP_VDPAU</a></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        || h-&gt;<a class="code" href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="structAVCodec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#gaff12f286c59b73665a48768204cf866d">AV_CODEC_CAP_HWACCEL_VDPAU</a></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;#endif</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        )</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="keywordflow">if</span> (context_count == 1) {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a> = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a> = 0;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        ret = <a class="code" href="h264__slice_8c.html#ab4c172264d72e44fe906d9dcfaca86ef">decode_slice</a>(avctx, &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0]);</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a0e377b280bdba31b43929f10fd86d256">mb_y</a> = h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(context_count &gt; 0);</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; context_count; i++) {</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;            <span class="keywordtype">int</span> next_slice_idx = h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> * h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="keywordtype">int</span> slice_idx;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            sl                 = &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i];</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a>) {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                sl-&gt;<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a2913aee806fe806ffc0c0902d23a3782">error_count</a> = 0;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            }</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            <span class="comment">/* make sure none of those slices overlap */</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            slice_idx = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> + sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; context_count; j++) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                <a class="code" href="structH264SliceContext.html">H264SliceContext</a> *sl2 = &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[j];</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                <span class="keywordtype">int</span>        slice_idx2 = sl2-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> * h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> + sl2-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                <span class="keywordflow">if</span> (i == j || slice_idx2 &lt; slice_idx)</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                next_slice_idx = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(next_slice_idx, slice_idx2);</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            sl-&gt;<a class="code" href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">next_slice_idx</a> = next_slice_idx;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        }</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">execute</a>(avctx, <a class="code" href="h264__slice_8c.html#ab4c172264d72e44fe906d9dcfaca86ef">decode_slice</a>, h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>,</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                       <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context_count, <span class="keyword">sizeof</span>(h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0]));</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <span class="comment">/* pull back stuff from slices to master context */</span></div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        sl                   = &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[context_count - 1];</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        h-&gt;<a class="code" href="structH264Context.html#a0e377b280bdba31b43929f10fd86d256">mb_y</a>              = sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a>) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <span class="keywordflow">for</span> (i = 1; i &lt; context_count; i++)</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[0].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a2913aee806fe806ffc0c0902d23a3782">error_count</a> += h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i].<a class="code" href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">er</a>.<a class="code" href="structERContext.html#a2913aee806fe806ffc0c0902d23a3782">error_count</a>;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="keywordflow">if</span> (h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a>) {</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            h-&gt;<a class="code" href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">postpone_filter</a> = 0;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; context_count; i++) {</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                <span class="keywordtype">int</span> y_end, x_end;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                sl = &amp;h-&gt;<a class="code" href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">slice_ctx</a>[i];</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                y_end = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> + 1, h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                x_end = (sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &gt;= h-&gt;<a class="code" href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">mb_height</a>) ? h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a> : sl-&gt;<a class="code" href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (j = sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a>; j &lt; y_end; j += 1 + <a class="code" href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a>(h)) {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                    sl-&gt;<a class="code" href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> = j;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                    <a class="code" href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a>(h, sl, j &gt; sl-&gt;<a class="code" href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">resync_mb_y</a> ? 0 : sl-&gt;<a class="code" href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">resync_mb_x</a>,</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                                j == y_end - 1 ? x_end : h-&gt;<a class="code" href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">mb_width</a>);</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                }</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            }</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        }</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    }</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;}</div><div class="ttc" id="structSPS_html_aff49f0a019b776c48a0d71a9906eefcd"><div class="ttname"><a href="structSPS.html#aff49f0a019b776c48a0d71a9906eefcd">SPS::chroma_format_idc</a></div><div class="ttdeci">int chroma_format_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00047">h264_ps.h:47</a></div></div>
<div class="ttc" id="structSPS_html_ac1e927369601e11728fea2e70970bf19"><div class="ttname"><a href="structSPS.html#ac1e927369601e11728fea2e70970bf19">SPS::video_signal_type_present_flag</a></div><div class="ttdeci">int video_signal_type_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00073">h264_ps.h:73</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a62d72421e3e1fa2d53e12416be3800fa"><div class="ttname"><a href="structH264SliceContext.html#a62d72421e3e1fa2d53e12416be3800fa">H264SliceContext::h264</a></div><div class="ttdeci">struct H264Context * h264</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00182">h264dec.h:182</a></div></div>
<div class="ttc" id="avcodec_8h_html_a84b2a67f04fa6d2cab74d09e2779b6ec"><div class="ttname"><a href="avcodec_8h.html#a84b2a67f04fa6d2cab74d09e2779b6ec">AV_EF_AGGRESSIVE</a></div><div class="ttdeci">#define AV_EF_AGGRESSIVE</div><div class="ttdoc">consider things that a sane encoder should not do as an error </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02991">avcodec.h:2991</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a2c3a62d8fd3c3282b33be427ab6e02c8"><div class="ttname"><a href="h264__slice_8c.html#a2c3a62d8fd3c3282b33be427ab6e02c8">ff_h264_decode_slice_header</a></div><div class="ttdeci">int ff_h264_decode_slice_header(H264Context *h, H264SliceContext *sl, const H2645NAL *nal)</div><div class="ttdoc">Decode a slice header. </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01766">h264_slice.c:1766</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_ab0611a4c87b1248b4a560776c0a5d86a"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab0611a4c87b1248b4a560776c0a5d86a">ff_tlog</a></div><div class="ttdeci">#define ff_tlog(ctx,...)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00065">internal.h:65</a></div></div>
<div class="ttc" id="libavcodec_2videodsp_8c_html_a9f55abcd843195bcf47dae7689bcf894"><div class="ttname"><a href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a></div><div class="ttdeci">av_cold void ff_videodsp_init(VideoDSPContext *ctx, int bpc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2videodsp_8c_source.html#l00038">videodsp.c:38</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_ae4471e4e8fa85c02e2b6eaee22ce4f30"><div class="ttname"><a href="libavcodec_2internal_8h.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a></div><div class="ttdeci">int ff_thread_can_start_frame(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00747">pthread_frame.c:747</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a6e606effa68724cae2ef5cc05f7fd9cb"><div class="ttname"><a href="structAVCodecContext.html#a6e606effa68724cae2ef5cc05f7fd9cb">AVCodecContext::codec</a></div><div class="ttdeci">const struct AVCodec * codec</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01695">avcodec.h:1695</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="structAVCodecContext.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03386">avcodec.h:3386</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a></div><div class="ttdoc">discard all frames except keyframes </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00790">avcodec.h:790</a></div></div>
<div class="ttc" id="structH264Context_html_a3a0c33830a7839a259872c9b92fffad9"><div class="ttname"><a href="structH264Context.html#a3a0c33830a7839a259872c9b92fffad9">H264Context::nb_mmco</a></div><div class="ttdeci">int nb_mmco</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00476">h264dec.h:476</a></div></div>
<div class="ttc" id="structH264Context_html_a3456ca73eda021262493f1cfe79cbac6"><div class="ttname"><a href="structH264Context.html#a3456ca73eda021262493f1cfe79cbac6">H264Context::workaround_bugs</a></div><div class="ttdeci">int workaround_bugs</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00378">h264dec.h:378</a></div></div>
<div class="ttc" id="structH264Picture_html_a80b4dc0bced803a4daef543a4c23c791"><div class="ttname"><a href="structH264Picture.html#a80b4dc0bced803a4daef543a4c23c791">H264Picture::long_ref</a></div><div class="ttdeci">int long_ref</div><div class="ttdoc">1-&gt;long term reference 0-&gt;short term reference </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00154">h264dec.h:154</a></div></div>
<div class="ttc" id="group__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="structH264Context_html_a6aae08bceaf5a1b600432d03faf4f2ff"><div class="ttname"><a href="structH264Context.html#a6aae08bceaf5a1b600432d03faf4f2ff">H264Context::single_decode_warning</a></div><div class="ttdeci">int single_decode_warning</div><div class="ttdoc">1 if the single thread fallback warning has already been displayed, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00504">h264dec.h:504</a></div></div>
<div class="ttc" id="structH264Picture_html_a740358e32ee45d76bf1226340f70b9f3"><div class="ttname"><a href="structH264Picture.html#a740358e32ee45d76bf1226340f70b9f3">H264Picture::sei_recovery_frame_cnt</a></div><div class="ttdeci">int sei_recovery_frame_cnt</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00163">h264dec.h:163</a></div></div>
<div class="ttc" id="structH264Context_html_a641363d5e6e24f0897875090040b153a"><div class="ttname"><a href="structH264Context.html#a641363d5e6e24f0897875090040b153a">H264Context::backup_pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat backup_pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00371">h264dec.h:371</a></div></div>
<div class="ttc" id="structH264Context_html_a46f1fc46c5e79d9512fd88ab5a69bb82"><div class="ttname"><a href="structH264Context.html#a46f1fc46c5e79d9512fd88ab5a69bb82">H264Context::poc</a></div><div class="ttdeci">H264POCContext poc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00462">h264dec.h:462</a></div></div>
<div class="ttc" id="structH264Context_html_a39f3c3f54d1a870d20396d6f1e2cf375"><div class="ttname"><a href="structH264Context.html#a39f3c3f54d1a870d20396d6f1e2cf375">H264Context::mb_num</a></div><div class="ttdeci">int mb_num</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00441">h264dec.h:441</a></div></div>
<div class="ttc" id="group__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdoc">Free a given reference and automatically free the buffer if there are no more references to it...</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00124">buffer.c:124</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00061">pixfmt.h:61</a></div></div>
<div class="ttc" id="structH264Context_html_a947d562c497e7851f6bf396ee9bd642c"><div class="ttname"><a href="structH264Context.html#a947d562c497e7851f6bf396ee9bd642c">H264Context::mb_aff_frame</a></div><div class="ttdeci">int mb_aff_frame</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00411">h264dec.h:411</a></div></div>
<div class="ttc" id="structH264SEIRecoveryPoint_html_a8012e2f9dace6155e00b654652ca8c99"><div class="ttname"><a href="structH264SEIRecoveryPoint.html#a8012e2f9dace6155e00b654652ca8c99">H264SEIRecoveryPoint::recovery_frame_cnt</a></div><div class="ttdeci">int recovery_frame_cnt</div><div class="ttdoc">recovery_frame_cnt </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00109">h264_sei.h:109</a></div></div>
<div class="ttc" id="vp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="structH264SEIFramePacking_html_a7c261db199dfbbcb2df7f97ad17f6e7c"><div class="ttname"><a href="structH264SEIFramePacking.html#a7c261db199dfbbcb2df7f97ad17f6e7c">H264SEIFramePacking::present</a></div><div class="ttdeci">int present</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00118">h264_sei.h:118</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a4938574b415e4b2d5a8c3df33a3c8734"><div class="ttname"><a href="structH264SliceContext.html#a4938574b415e4b2d5a8c3df33a3c8734">H264SliceContext::mv_cache</a></div><div class="ttdeci">int16_t mv_cache[2][5 *8][2]</div><div class="ttdoc">Motion vector cache. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00303">h264dec.h:303</a></div></div>
<div class="ttc" id="pixfmt_8h_html_ada8c97e7cb5dde4ac4cb7924693b8a66"><div class="ttname"><a href="pixfmt_8h.html#ada8c97e7cb5dde4ac4cb7924693b8a66">AV_PIX_FMT_YUV444P14</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV444P14</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00361">pixfmt.h:361</a></div></div>
<div class="ttc" id="golomb_8h_html_a1a8150f1a40583eb3ea8a04a207bb1fd"><div class="ttname"><a href="golomb_8h.html#a1a8150f1a40583eb3ea8a04a207bb1fd">get_se_golomb</a></div><div class="ttdeci">static int get_se_golomb(GetBitContext *gb)</div><div class="ttdoc">read signed exp golomb code. </div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00183">golomb.h:183</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ac9f1f375091dc04045f5accc9edfc39d"><div class="ttname"><a href="structH264SliceContext.html#ac9f1f375091dc04045f5accc9edfc39d">H264SliceContext::edge_emu_buffer_allocated</a></div><div class="ttdeci">int edge_emu_buffer_allocated</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00291">h264dec.h:291</a></div></div>
<div class="ttc" id="structAVCodecContext_html_ae3c157e97ff15d46e898a538c6bc7f09"><div class="ttname"><a href="structAVCodecContext.html#ae3c157e97ff15d46e898a538c6bc7f09">AVCodecContext::coded_width</a></div><div class="ttdeci">int coded_width</div><div class="ttdoc">Bitstream width / height, may be different from width/height e.g. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01888">avcodec.h:1888</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ab8849f35ed7ba07e50b78eea9b1037df"><div class="ttname"><a href="h264__slice_8c.html#ab8849f35ed7ba07e50b78eea9b1037df">decode_finish_row</a></div><div class="ttdeci">static void decode_finish_row(const H264Context *h, H264SliceContext *sl)</div><div class="ttdoc">Draw edges and report progress for the last MB row. </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02331">h264_slice.c:2331</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_a868274bcce53dba81808c75d008593b4"><div class="ttname"><a href="avisynth__c_8h.html#a868274bcce53dba81808c75d008593b4">fmt</a></div><div class="ttdeci">const char * fmt</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00769">avisynth_c.h:769</a></div></div>
<div class="ttc" id="structH264Context_html_a95e33b47b0534452647ce91fecc08747"><div class="ttname"><a href="structH264Context.html#a95e33b47b0534452647ce91fecc08747">H264Context::first_field</a></div><div class="ttdeci">int first_field</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00413">h264dec.h:413</a></div></div>
<div class="ttc" id="structH264Context_html_ab1f2d86d6d476e605594f9956198c60e"><div class="ttname"><a href="structH264Context.html#ab1f2d86d6d476e605594f9956198c60e">H264Context::field_scan8x8_q0</a></div><div class="ttdeci">uint8_t field_scan8x8_q0[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00435">h264dec.h:435</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a82034006e681cddbb7b1d5cb7045626a">AV_PIX_FMT_YUV444P</a></div><div class="ttdoc">planar YUV 4:4:4, 24bpp, (1 Cr &amp; Cb sample per 1x1 Y samples) </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00067">pixfmt.h:67</a></div></div>
<div class="ttc" id="imgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div><div class="ttdoc">misc image utilities </div></div>
<div class="ttc" id="get__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdoc">Read 1-25 bits. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00247">get_bits.h:247</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdoc">Something somehow does not look correct. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00182">log.h:182</a></div></div>
<div class="ttc" id="error__resilience_8h_html_a52711cb6645977b95bf9d991b02a4a8f"><div class="ttname"><a href="error__resilience_8h.html#a52711cb6645977b95bf9d991b02a4a8f">ER_MB_END</a></div><div class="ttdeci">#define ER_MB_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00038">error_resilience.h:38</a></div></div>
<div class="ttc" id="structThreadFrame_html_a6d4ef36cc340178903e148e89903f1a1"><div class="ttname"><a href="structThreadFrame.html#a6d4ef36cc340178903e148e89903f1a1">ThreadFrame::f</a></div><div class="ttdeci">AVFrame * f</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00036">thread.h:36</a></div></div>
<div class="ttc" id="structPPS_html_ad7bf111c6836e059076e6700561856cd"><div class="ttname"><a href="structPPS.html#ad7bf111c6836e059076e6700561856cd">PPS::weighted_bipred_idc</a></div><div class="ttdeci">int weighted_bipred_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00116">h264_ps.h:116</a></div></div>
<div class="ttc" id="structERContext_html"><div class="ttname"><a href="structERContext.html">ERContext</a></div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00052">error_resilience.h:52</a></div></div>
<div class="ttc" id="h264__refs_8c_html_ac1c419d9a15f88b94f736285ed2977de"><div class="ttname"><a href="h264__refs_8c.html#ac1c419d9a15f88b94f736285ed2977de">ff_h264_build_ref_list</a></div><div class="ttdeci">int ff_h264_build_ref_list(H264Context *h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__refs_8c_source.html#l00299">h264_refs.c:299</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a522dd45ca7afaa108ed107ad8bb080be"><div class="ttname"><a href="structH264SliceContext.html#a522dd45ca7afaa108ed107ad8bb080be">H264SliceContext::left_mb_xy</a></div><div class="ttdeci">int left_mb_xy[LEFT_MBS]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00215">h264dec.h:215</a></div></div>
<div class="ttc" id="structPPS_html_a4dae79f86eba176d3e0db2980826c701"><div class="ttname"><a href="structPPS.html#a4dae79f86eba176d3e0db2980826c701">PPS::chroma_qp_index_offset</a></div><div class="ttdeci">int chroma_qp_index_offset[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00119">h264_ps.h:119</a></div></div>
<div class="ttc" id="structH264ParamSets_html_a98a438860c31aa25695f8e484d6607ba"><div class="ttname"><a href="structH264ParamSets.html#a98a438860c31aa25695f8e484d6607ba">H264ParamSets::sps_list</a></div><div class="ttdeci">AVBufferRef * sps_list[MAX_SPS_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00138">h264_ps.h:138</a></div></div>
<div class="ttc" id="structCABACContext_html_a2e6c3dbb26aa55d541de43f6c94251c9"><div class="ttname"><a href="structCABACContext.html#a2e6c3dbb26aa55d541de43f6c94251c9">CABACContext::bytestream_end</a></div><div class="ttdeci">const uint8_t * bytestream_end</div><div class="ttdef"><b>Definition:</b> <a href="cabac_8h_source.html#l00049">cabac.h:49</a></div></div>
<div class="ttc" id="h264dec_8h_html_a78c239abf45a45bd26817bc6c4e66fb9"><div class="ttname"><a href="h264dec_8h.html#a78c239abf45a45bd26817bc6c4e66fb9">get_chroma_qp</a></div><div class="ttdeci">static av_always_inline int get_chroma_qp(const PPS *pps, int t, int qscale)</div><div class="ttdoc">Get the chroma qp. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00693">h264dec.h:693</a></div></div>
<div class="ttc" id="structAVFrame_html_a4a64d05cc676bfa8e18bf22d16c8a51f"><div class="ttname"><a href="structAVFrame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">AVFrame::buf</a></div><div class="ttdeci">AVBufferRef * buf[AV_NUM_DATA_POINTERS]</div><div class="ttdoc">AVBuffer references backing the data for this frame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00373">frame.h:373</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1159ef8f6f56dd9d60d1236517d14d20"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1159ef8f6f56dd9d60d1236517d14d20">AV_PIX_FMT_VIDEOTOOLBOX</a></div><div class="ttdoc">hardware decoding through Videotoolbox </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00296">pixfmt.h:296</a></div></div>
<div class="ttc" id="structH264Context_html_a0b0d6ef5ad565686e884c5833e70fd5f"><div class="ttname"><a href="structH264Context.html#a0b0d6ef5ad565686e884c5833e70fd5f">H264Context::h264chroma</a></div><div class="ttdeci">H264ChromaContext h264chroma</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00346">h264dec.h:346</a></div></div>
<div class="ttc" id="structH264POCContext_html_ad99c7c3c16e8f7c3dc49f540debcbc15"><div class="ttname"><a href="structH264POCContext.html#ad99c7c3c16e8f7c3dc49f540debcbc15">H264POCContext::poc_lsb</a></div><div class="ttdeci">int poc_lsb</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00044">h264_parse.h:44</a></div></div>
<div class="ttc" id="structH264Context_html_a26ca062305939f270cdf700ef046dd82"><div class="ttname"><a href="structH264Context.html#a26ca062305939f270cdf700ef046dd82">H264Context::cbp_table</a></div><div class="ttdeci">uint16_t * cbp_table</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00418">h264dec.h:418</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aec4803c68b3153315c802f3c4c5a856b"><div class="ttname"><a href="structH264SliceContext.html#aec4803c68b3153315c802f3c4c5a856b">H264SliceContext::mb_xy</a></div><div class="ttdeci">int mb_xy</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00235">h264dec.h:235</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_aae8731c46851202ca932d143015a5107"><div class="ttname"><a href="structH264PredWeightTable.html#aae8731c46851202ca932d143015a5107">H264PredWeightTable::luma_weight_flag</a></div><div class="ttdeci">int luma_weight_flag[2]</div><div class="ttdoc">7.4.3.2 luma_weight_lX_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00035">h264_parse.h:35</a></div></div>
<div class="ttc" id="structH264Context_html_a196fc6d61308029f77d51e4b017caaf1"><div class="ttname"><a href="structH264Context.html#a196fc6d61308029f77d51e4b017caaf1">H264Context::mmco</a></div><div class="ttdeci">MMCO mmco[MAX_MMCO_COUNT]</div><div class="ttdoc">memory management control operations buffer. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00475">h264dec.h:475</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a2f42a7b0a3c1e0ceeea175ad9755bae1"><div class="ttname"><a href="h264__slice_8c.html#a2f42a7b0a3c1e0ceeea175ad9755bae1">implicit_weight_table</a></div><div class="ttdeci">static void implicit_weight_table(const H264Context *h, H264SliceContext *sl, int field)</div><div class="ttdoc">Initialize implicit_weight table. </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00669">h264_slice.c:669</a></div></div>
<div class="ttc" id="structH264SliceContext_html"><div class="ttname"><a href="structH264SliceContext.html">H264SliceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00181">h264dec.h:181</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a9e7ec9f412ef496e9e919bc1dff57c86"><div class="ttname"><a href="structH264SliceContext.html#a9e7ec9f412ef496e9e919bc1dff57c86">H264SliceContext::nb_mmco</a></div><div class="ttdeci">int nb_mmco</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00327">h264dec.h:327</a></div></div>
<div class="ttc" id="ff__glob_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="ff__glob_8c_source.html#l00222">ff_glob.c:222</a></div></div>
<div class="ttc" id="structSPS_html"><div class="ttname"><a href="structSPS.html">SPS</a></div><div class="ttdoc">Sequence parameter set. </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00043">h264_ps.h:43</a></div></div>
<div class="ttc" id="structH264SEIFramePacking_html"><div class="ttname"><a href="structH264SEIFramePacking.html">H264SEIFramePacking</a></div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00117">h264_sei.h:117</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdoc">MPEG vs JPEG YUV range. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02423">avcodec.h:2423</a></div></div>
<div class="ttc" id="structH264Context_html_a0e377b280bdba31b43929f10fd86d256"><div class="ttname"><a href="structH264Context.html#a0e377b280bdba31b43929f10fd86d256">H264Context::mb_y</a></div><div class="ttdeci">int mb_y</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00438">h264dec.h:438</a></div></div>
<div class="ttc" id="structH264Context_html_aa07a46a42eb4f92e58bdb065deb5f4f0"><div class="ttname"><a href="structH264Context.html#aa07a46a42eb4f92e58bdb065deb5f4f0">H264Context::coded_picture_number</a></div><div class="ttdeci">int coded_picture_number</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00374">h264dec.h:374</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ad000ae47faa5fbe8d4b3b375151694ef">AV_PIX_FMT_GBRP</a></div><div class="ttdoc">planar GBR 4:4:4 24bpp </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00180">pixfmt.h:180</a></div></div>
<div class="ttc" id="structAVRational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="structH264Picture_html_a9401ccdf615c263f6eec087a39d8de39"><div class="ttname"><a href="structH264Picture.html#a9401ccdf615c263f6eec087a39d8de39">H264Picture::mb_type_buf</a></div><div class="ttdeci">AVBufferRef * mb_type_buf</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00138">h264dec.h:138</a></div></div>
<div class="ttc" id="structAVFrame_html_aef11fd783ad17b6841af82efa07c859e"><div class="ttname"><a href="structAVFrame.html#aef11fd783ad17b6841af82efa07c859e">AVFrame::repeat_pict</a></div><div class="ttdeci">int repeat_pict</div><div class="ttdoc">When decoding, this signals how much the picture must be delayed. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00323">frame.h:323</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a3c6e2f6b54dfeec997802b3c0a0057cc"><div class="ttname"><a href="structH264SliceContext.html#a3c6e2f6b54dfeec997802b3c0a0057cc">H264SliceContext::bipred_scratchpad_allocated</a></div><div class="ttdeci">int bipred_scratchpad_allocated</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00290">h264dec.h:290</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aba7dedd7a7e2912556069b84f6b08e16"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a></div><div class="ttdeci">#define DELAYED_PIC_REF</div><div class="ttdoc">Value of Picture.reference when Picture is not a reference picture, but is held for delayed output...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00065">diracdec.c:65</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a65c2f27287363d45e9e1da64bf569ebd"><div class="ttname"><a href="pixfmt_8h.html#a65c2f27287363d45e9e1da64bf569ebd">AV_PIX_FMT_GBRP10</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00367">pixfmt.h:367</a></div></div>
<div class="ttc" id="error__resilience_8h_html_a0bf1ca2f964d50a238af584b681cf1e3"><div class="ttname"><a href="error__resilience_8h.html#a0bf1ca2f964d50a238af584b681cf1e3">VP_START</a></div><div class="ttdeci">#define VP_START</div><div class="ttdoc">&lt; current MB is the first after a resync marker </div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00029">error_resilience.h:29</a></div></div>
<div class="ttc" id="structH264Context_html_a4f9375fd7d80842fe9e2369b26be96d9"><div class="ttname"><a href="structH264Context.html#a4f9375fd7d80842fe9e2369b26be96d9">H264Context::mb_type_pool</a></div><div class="ttdeci">AVBufferPool * mb_type_pool</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00561">h264dec.h:561</a></div></div>
<div class="ttc" id="h264__parse_8c_html_a2cfb8c24dff618a801f32a3d13515d92"><div class="ttname"><a href="h264__parse_8c.html#a2cfb8c24dff618a801f32a3d13515d92">ff_h264_init_poc</a></div><div class="ttdeci">int ff_h264_init_poc(int pic_field_poc[2], int *pic_poc, const SPS *sps, H264POCContext *pc, int picture_structure, int nal_ref_idc)</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8c_source.html#l00254">h264_parse.c:254</a></div></div>
<div class="ttc" id="structH264Context_html_a5a0a26ec417321473254a47fae2e8364"><div class="ttname"><a href="structH264Context.html#a5a0a26ec417321473254a47fae2e8364">H264Context::chroma_x_shift</a></div><div class="ttdeci">int chroma_x_shift</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00363">h264dec.h:363</a></div></div>
<div class="ttc" id="structGetBitContext_html_ad3bbe8f5d0b9e28a1070396fac5725d8"><div class="ttname"><a href="structGetBitContext.html#ad3bbe8f5d0b9e28a1070396fac5725d8">GetBitContext::buffer</a></div><div class="ttdeci">const uint8_t * buffer</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00056">get_bits.h:56</a></div></div>
<div class="ttc" id="structPPS_html"><div class="ttname"><a href="structPPS.html">PPS</a></div><div class="ttdoc">Picture parameter set. </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00108">h264_ps.h:108</a></div></div>
<div class="ttc" id="structH264Picture_html_aa5d0a214d5e71e1e7ba93035bfe6e949"><div class="ttname"><a href="structH264Picture.html#aa5d0a214d5e71e1e7ba93035bfe6e949">H264Picture::crop</a></div><div class="ttdeci">int crop</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00165">h264dec.h:165</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="structAVCodecContext.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdoc">sample aspect ratio (0 if unknown) That is the width of a pixel divided by the height of the pixel...</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02097">avcodec.h:2097</a></div></div>
<div class="ttc" id="h264dec_8h_html_a1719ae0ec5299c5b97ff0cee0a5128d5"><div class="ttname"><a href="h264dec_8h.html#a1719ae0ec5299c5b97ff0cee0a5128d5">SLICE_SINGLETHREAD</a></div><div class="ttdeci">#define SLICE_SINGLETHREAD</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00849">h264dec.h:849</a></div></div>
<div class="ttc" id="structH264Picture_html_a5b7ab5627aa627e1a9938e4707316ba8"><div class="ttname"><a href="structH264Picture.html#a5b7ab5627aa627e1a9938e4707316ba8">H264Picture::motion_val</a></div><div class="ttdeci">int16_t(*[2] motion_val)[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00136">h264dec.h:136</a></div></div>
<div class="ttc" id="structH264Context_html_afdc9479cf975e2eb72366eab748f7280"><div class="ttname"><a href="structH264Context.html#afdc9479cf975e2eb72366eab748f7280">H264Context::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00377">h264dec.h:377</a></div></div>
<div class="ttc" id="libavcodec_2h264dec_8c_html_aecf76122512b6be062320ce7d596dd5b"><div class="ttname"><a href="libavcodec_2h264dec_8c.html#aecf76122512b6be062320ce7d596dd5b">ff_h264_flush_change</a></div><div class="ttdeci">void ff_h264_flush_change(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dec_8c_source.html#l00609">h264dec.c:609</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdoc">Pixel format, see AV_PIX_FMT_xxx. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01914">avcodec.h:1914</a></div></div>
<div class="ttc" id="structSPS_html_a7f2579b33d6caa349d49fd8a85741ccc"><div class="ttname"><a href="structSPS.html#a7f2579b33d6caa349d49fd8a85741ccc">SPS::frame_mbs_only_flag</a></div><div class="ttdeci">int frame_mbs_only_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00061">h264_ps.h:61</a></div></div>
<div class="ttc" id="structH264Context_html_aaabbf99ddf0f1c5dfe645a4ec66f2697"><div class="ttname"><a href="structH264Context.html#aaabbf99ddf0f1c5dfe645a4ec66f2697">H264Context::mb_height</a></div><div class="ttdeci">int mb_height</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00439">h264dec.h:439</a></div></div>
<div class="ttc" id="structH264Context_html_a014b265bb0ec646aee83562656df1eac"><div class="ttname"><a href="structH264Context.html#a014b265bb0ec646aee83562656df1eac">H264Context::delayed_pic</a></div><div class="ttdeci">H264Picture * delayed_pic[MAX_DELAYED_PIC_COUNT+2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00467">h264dec.h:467</a></div></div>
<div class="ttc" id="structH264Context_html_aaf48016f739631d7e62d0fbbae678bf8"><div class="ttname"><a href="structH264Context.html#aaf48016f739631d7e62d0fbbae678bf8">H264Context::is_avc</a></div><div class="ttdeci">int is_avc</div><div class="ttdoc">Used to parse AVC variant of H.264. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00452">h264dec.h:452</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980a139b07716f025b6287e134237cc682ce"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a139b07716f025b6287e134237cc682ce">SEI_PIC_STRUCT_TOP_BOTTOM</a></div><div class="ttdoc">3: top field, bottom field, in that order </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00045">h264_sei.h:45</a></div></div>
<div class="ttc" id="structH264Context_html_a1869c6ceb2c14499a9d90461d3226ddd"><div class="ttname"><a href="structH264Context.html#a1869c6ceb2c14499a9d90461d3226ddd">H264Context::default_ref</a></div><div class="ttdeci">H264Ref default_ref[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00464">h264dec.h:464</a></div></div>
<div class="ttc" id="libavcodec_2h264pred_8c_html_a26a390b3c8d98a2da44646b85703b967"><div class="ttname"><a href="libavcodec_2h264pred_8c.html#a26a390b3c8d98a2da44646b85703b967">ff_h264_pred_init</a></div><div class="ttdeci">av_cold void ff_h264_pred_init(H264PredContext *h, int codec_id, const int bit_depth, int chroma_format_idc)</div><div class="ttdoc">Set the intra prediction function pointers. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264pred_8c_source.html#l00411">h264pred.c:411</a></div></div>
<div class="ttc" id="h264chroma_8h_html"><div class="ttname"><a href="h264chroma_8h.html">h264chroma.h</a></div></div>
<div class="ttc" id="structH264Context_html_a80d10429100f73b2387dd37ade981f7e"><div class="ttname"><a href="structH264Context.html#a80d10429100f73b2387dd37ade981f7e">H264Context::ref_index_pool</a></div><div class="ttdeci">AVBufferPool * ref_index_pool</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00563">h264dec.h:563</a></div></div>
<div class="ttc" id="structH264Context_html_aa5661ac29a4e3b1deddca0d58ca515e7"><div class="ttname"><a href="structH264Context.html#aa5661ac29a4e3b1deddca0d58ca515e7">H264Context::zigzag_scan8x8_cavlc</a></div><div class="ttdeci">uint8_t zigzag_scan8x8_cavlc[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00427">h264dec.h:427</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a4f1a2065ddb07bd4881c07c1f6b0568c"><div class="ttname"><a href="pixfmt_8h.html#a4f1a2065ddb07bd4881c07c1f6b0568c">AV_PIX_FMT_YUV420P12</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV420P12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00355">pixfmt.h:355</a></div></div>
<div class="ttc" id="h264chroma_8c_html_a4183ca41207e383f4a607c6786737af1"><div class="ttname"><a href="h264chroma_8c.html#a4183ca41207e383f4a607c6786737af1">ff_h264chroma_init</a></div><div class="ttdeci">av_cold void ff_h264chroma_init(H264ChromaContext *c, int bit_depth)</div><div class="ttdef"><b>Definition:</b> <a href="h264chroma_8c_source.html#l00041">h264chroma.c:41</a></div></div>
<div class="ttc" id="structERContext_html_ad469cc1653a95c6d083a391d8b8467e7"><div class="ttname"><a href="structERContext.html#ad469cc1653a95c6d083a391d8b8467e7">ERContext::last_pic</a></div><div class="ttdeci">ERPicture last_pic</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00073">error_resilience.h:73</a></div></div>
<div class="ttc" id="structH264SEIContext_html_a0a2962be9925c06a808fef0df43b24e4"><div class="ttname"><a href="structH264SEIContext.html#a0a2962be9925c06a808fef0df43b24e4">H264SEIContext::display_orientation</a></div><div class="ttdeci">H264SEIDisplayOrientation display_orientation</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00154">h264_sei.h:154</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a18191a5ef77eda47f2df8d94a7cc599f"><div class="ttname"><a href="structH264SliceContext.html#a18191a5ef77eda47f2df8d94a7cc599f">H264SliceContext::next_slice_idx</a></div><div class="ttdeci">int next_slice_idx</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00240">h264dec.h:240</a></div></div>
<div class="ttc" id="h264__slice_8c_html_adce17734fa38715fb8d6d1e48ce2e486"><div class="ttname"><a href="h264__slice_8c.html#adce17734fa38715fb8d6d1e48ce2e486">zigzag_scan8x8_cavlc</a></div><div class="ttdeci">static const uint8_t zigzag_scan8x8_cavlc[64+1]</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00096">h264_slice.c:96</a></div></div>
<div class="ttc" id="structH264Context_html"><div class="ttname"><a href="structH264Context.html">H264Context</a></div><div class="ttdoc">H264Context. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00341">h264dec.h:341</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16aabee31ca5c7c140d3a84b848164eeaf8"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16aabee31ca5c7c140d3a84b848164eeaf8">AVDISCARD_NONINTRA</a></div><div class="ttdoc">discard all non intra frames </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00789">avcodec.h:789</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div><div class="ttdoc">discard all </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00791">avcodec.h:791</a></div></div>
<div class="ttc" id="structH264Picture_html_a9604cc66ecc63ad72161c2c33f6394b3"><div class="ttname"><a href="structH264Picture.html#a9604cc66ecc63ad72161c2c33f6394b3">H264Picture::f</a></div><div class="ttdeci">AVFrame * f</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00129">h264dec.h:129</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a889b84d5b3657df4a4e45b17b87848f5"><div class="ttname"><a href="structAVCodecContext.html#a889b84d5b3657df4a4e45b17b87848f5">AVCodecContext::bits_per_raw_sample</a></div><div class="ttdeci">int bits_per_raw_sample</div><div class="ttdoc">Bits per sample/pixel of internal libavcodec pixel/sample format. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03088">avcodec.h:3088</a></div></div>
<div class="ttc" id="structSPS_html_a65dee1cea59c0cfc2f91c24e3b9ebcb9"><div class="ttname"><a href="structSPS.html#a65dee1cea59c0cfc2f91c24e3b9ebcb9">SPS::num_units_in_tick</a></div><div class="ttdeci">uint32_t num_units_in_tick</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00080">h264_ps.h:80</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a6031f2c91f61f97b7b3f3fb93d1e0209"><div class="ttname"><a href="h264__slice_8c.html#a6031f2c91f61f97b7b3f3fb93d1e0209">field_scan</a></div><div class="ttdeci">static const uint8_t field_scan[16+1]</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00050">h264_slice.c:50</a></div></div>
<div class="ttc" id="pthread__frame_8c_html_a86d6b711aaa79b65aff17276564fc25e"><div class="ttname"><a href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a></div><div class="ttdeci">void ff_thread_await_progress(ThreadFrame *f, int n, int field)</div><div class="ttdoc">Wait for earlier decoding threads to finish reference pictures. </div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00489">pthread_frame.c:489</a></div></div>
<div class="ttc" id="structH264Context_html_a2423a00d34f00e9ecf64a0cfa220867f"><div class="ttname"><a href="structH264Context.html#a2423a00d34f00e9ecf64a0cfa220867f">H264Context::long_ref</a></div><div class="ttdeci">H264Picture * long_ref[32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00466">h264dec.h:466</a></div></div>
<div class="ttc" id="tests_2checkasm_2vp8dsp_8c_html_a522f8e5cb2658746479ebd5b805263cf"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980a11897f520418c6848aef99136a4ebf22"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a11897f520418c6848aef99136a4ebf22">SEI_PIC_STRUCT_FRAME_TRIPLING</a></div><div class="ttdoc">8: frame tripling </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00050">h264_sei.h:50</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a7abe7095de73df98df4895bf9e25fc6b"><div class="ttname"><a href="structAVCodecContext.html#a7abe7095de73df98df4895bf9e25fc6b">AVCodecContext::profile</a></div><div class="ttdeci">int profile</div><div class="ttdoc">profile </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03192">avcodec.h:3192</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6aaa1ee993fc27f99269c536c51b0b5f3c">AV_STEREO3D_SIDEBYSIDE</a></div><div class="ttdoc">Views are next to each other. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00045">stereo3d.h:45</a></div></div>
<div class="ttc" id="structH264Context_html_ac0abe06a7c6a4362cd735d13b3a27a6a"><div class="ttname"><a href="structH264Context.html#ac0abe06a7c6a4362cd735d13b3a27a6a">H264Context::picture_structure</a></div><div class="ttdeci">int picture_structure</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00412">h264dec.h:412</a></div></div>
<div class="ttc" id="pixfmt_8h_html_aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d"><div class="ttname"><a href="pixfmt_8h.html#aff71a069509a1ad3ff54d53a1c894c85a6e7b38ac24fb682ade84cada0dd0770d">AVCOL_SPC_RGB</a></div><div class="ttdoc">order of coefficients is actually GBR, also IEC 61966-2-1 (sRGB) </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00451">pixfmt.h:451</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a83fe05faaabe74423b69af94ef8bfd59"><div class="ttname"><a href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a></div><div class="ttdeci">#define AV_WN32A(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00538">intreadwrite.h:538</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_af4d73eb3f0a39c7cb3a97ce7296b80bf"><div class="ttname"><a href="intreadwrite_8h.html#af4d73eb3f0a39c7cb3a97ce7296b80bf">AV_COPY32</a></div><div class="ttdeci">#define AV_COPY32(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00586">intreadwrite.h:586</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ae53f785906fb2fd9993189fc2f2012d1"><div class="ttname"><a href="structH264SliceContext.html#ae53f785906fb2fd9993189fc2f2012d1">H264SliceContext::ref_count</a></div><div class="ttdeci">unsigned int ref_count[2]</div><div class="ttdoc">num_ref_idx_l0/1_active_minus1 + 1 </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00271">h264dec.h:271</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a6acbb6020b325238d89cff488d929c7d"><div class="ttname"><a href="h264__slice_8c.html#a6acbb6020b325238d89cff488d929c7d">IN_RANGE</a></div><div class="ttdeci">#define IN_RANGE(a, b, size)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00278">h264_slice.c:278</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a5ba00de78c6be31f8548f7df05c022f6"><div class="ttname"><a href="h264__slice_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a></div><div class="ttdeci">#define REBASE_PICTURE(pic, new_ctx, old_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00280">h264_slice.c:280</a></div></div>
<div class="ttc" id="structH264SliceContext_html_afa06721e1d83090b1758f9678941eac6"><div class="ttname"><a href="structH264SliceContext.html#afa06721e1d83090b1758f9678941eac6">H264SliceContext::mmco</a></div><div class="ttdeci">MMCO mmco[MAX_MMCO_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00326">h264dec.h:326</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a1ee1c405d5637d2ab895eb0457107aeb"><div class="ttname"><a href="h264__slice_8c.html#a1ee1c405d5637d2ab895eb0457107aeb">ff_h264_update_thread_context</a></div><div class="ttdeci">int ff_h264_update_thread_context(AVCodecContext *dst, const AVCodecContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00301">h264_slice.c:301</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78eaa7199b8035cf5a076a05a7fcf6dfc7fe"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa7199b8035cf5a076a05a7fcf6dfc7fe">AV_PICTURE_TYPE_SI</a></div><div class="ttdoc">Switching Intra. </div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00278">avutil.h:278</a></div></div>
<div class="ttc" id="structH264Context_html_ae39b3f488eeca34fa1d9ead3898e274a"><div class="ttname"><a href="structH264Context.html#ae39b3f488eeca34fa1d9ead3898e274a">H264Context::setup_finished</a></div><div class="ttdeci">int setup_finished</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00550">h264dec.h:550</a></div></div>
<div class="ttc" id="structAVCodecContext_html_af869b808363998c80adf7df6a944a5a6"><div class="ttname"><a href="structAVCodecContext.html#af869b808363998c80adf7df6a944a5a6">AVCodecContext::skip_frame</a></div><div class="ttdeci">enum AVDiscard skip_frame</div><div class="ttdoc">Skip decoding for selected frames. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03312">avcodec.h:3312</a></div></div>
<div class="ttc" id="structH264Context_html_afd021640d7060d5c9423b218b46cbc2a"><div class="ttname"><a href="structH264Context.html#afd021640d7060d5c9423b218b46cbc2a">H264Context::sei</a></div><div class="ttdeci">H264SEIContext sei</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00558">h264dec.h:558</a></div></div>
<div class="ttc" id="structAVCodecContext_html_ab1030454a58273fd5ab88679b1eed7cc"><div class="ttname"><a href="structAVCodecContext.html#ab1030454a58273fd5ab88679b1eed7cc">AVCodecContext::hwaccel</a></div><div class="ttdeci">struct AVHWAccel * hwaccel</div><div class="ttdoc">Hardware accelerator in use. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03007">avcodec.h:3007</a></div></div>
<div class="ttc" id="structSPS_html_ae372ab078c7e80d95adde2717d6d26f9"><div class="ttname"><a href="structSPS.html#ae372ab078c7e80d95adde2717d6d26f9">SPS::crop_top</a></div><div class="ttdeci">unsigned int crop_top</div><div class="ttdoc">frame_cropping_rect_top_offset </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00069">h264_ps.h:69</a></div></div>
<div class="ttc" id="mpegutils_8h_html_a9e0ee168ee7b4c7ce87a303fafd0d8c0"><div class="ttname"><a href="mpegutils_8h.html#a9e0ee168ee7b4c7ce87a303fafd0d8c0">USES_LIST</a></div><div class="ttdeci">#define USES_LIST(a, list)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00101">mpegutils.h:101</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_a08861ce0ee1369a1e3cb5d1ba30ec38a"><div class="ttname"><a href="libavcodec_2internal_8h.html#a08861ce0ee1369a1e3cb5d1ba30ec38a">ff_color_frame</a></div><div class="ttdeci">void ff_color_frame(AVFrame *frame, const int color[4])</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00700">utils.c:700</a></div></div>
<div class="ttc" id="avassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdoc">assert() equivalent, that is always enabled. </div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aad79f9d158b8c1c576bdeb9ed79a5788"><div class="ttname"><a href="structH264SliceContext.html#aad79f9d158b8c1c576bdeb9ed79a5788">H264SliceContext::is_complex</a></div><div class="ttdeci">int is_complex</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00242">h264dec.h:242</a></div></div>
<div class="ttc" id="structCABACContext_html_a88c67766fb020075568713a205943275"><div class="ttname"><a href="structCABACContext.html#a88c67766fb020075568713a205943275">CABACContext::bytestream</a></div><div class="ttdeci">const uint8_t * bytestream</div><div class="ttdef"><b>Definition:</b> <a href="cabac_8h_source.html#l00048">cabac.h:48</a></div></div>
<div class="ttc" id="structH264Context_html_a44c45873e29b02440969517b0feb0745"><div class="ttname"><a href="structH264Context.html#a44c45873e29b02440969517b0feb0745">H264Context::ref2frm</a></div><div class="ttdeci">int ref2frm[MAX_SLICES][2][64]</div><div class="ttdoc">reference to frame number lists, used in the loop filter, the first 2 are for -2,-1 ...</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00564">h264dec.h:564</a></div></div>
<div class="ttc" id="structPPS_html_a6a89f1af35dc97ed3b0be50e5055d54a"><div class="ttname"><a href="structPPS.html#a6a89f1af35dc97ed3b0be50e5055d54a">PPS::deblocking_filter_parameters_present</a></div><div class="ttdeci">int deblocking_filter_parameters_present</div><div class="ttdoc">deblocking_filter_parameters_present_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00120">h264_ps.h:120</a></div></div>
<div class="ttc" id="libavutil_2internal_8h_html_a6f548a661473b6189346b3cb9e135ac1"><div class="ttname"><a href="libavutil_2internal_8h.html#a6f548a661473b6189346b3cb9e135ac1">avpriv_request_sample</a></div><div class="ttdeci">void void avpriv_request_sample(void *avc, const char *msg,...) av_printf_format(2</div><div class="ttdoc">Log a generic warning message about a missing feature. </div></div>
<div class="ttc" id="structH264ParamSets_html_a51716cf3fc26de6fb7eb4a71d111345a"><div class="ttname"><a href="structH264ParamSets.html#a51716cf3fc26de6fb7eb4a71d111345a">H264ParamSets::pps</a></div><div class="ttdeci">const PPS * pps</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00144">h264_ps.h:144</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ac06de11c285020badbb26356e9d5dcb9"><div class="ttname"><a href="h264__slice_8c.html#ac06de11c285020badbb26356e9d5dcb9">non_j_pixfmt</a></div><div class="ttdeci">static enum AVPixelFormat non_j_pixfmt(enum AVPixelFormat a)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01001">h264_slice.c:1001</a></div></div>
<div class="ttc" id="audio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="structSPS_html_a9ad3491a3f867b6174e543e8cec3b22a"><div class="ttname"><a href="structSPS.html#a9ad3491a3f867b6174e543e8cec3b22a">SPS::full_range</a></div><div class="ttdeci">int full_range</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00074">h264_ps.h:74</a></div></div>
<div class="ttc" id="structSPS_html_a87fc1b7271d5d42e66b7b2f0c7dd3bfb"><div class="ttname"><a href="structSPS.html#a87fc1b7271d5d42e66b7b2f0c7dd3bfb">SPS::crop_left</a></div><div class="ttdeci">unsigned int crop_left</div><div class="ttdoc">frame_cropping_rect_left_offset </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00067">h264_ps.h:67</a></div></div>
<div class="ttc" id="structSPS_html_a1a97e5f58c3bc871f6b079e9667b2119"><div class="ttname"><a href="structSPS.html#a1a97e5f58c3bc871f6b079e9667b2119">SPS::gaps_in_frame_num_allowed_flag</a></div><div class="ttdeci">int gaps_in_frame_num_allowed_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00057">h264_ps.h:57</a></div></div>
<div class="ttc" id="h264dec_8h_html_a1a295590385962cae41e17b550f1f478"><div class="ttname"><a href="h264dec_8h.html#a1a295590385962cae41e17b550f1f478">MB_MBAFF</a></div><div class="ttdeci">#define MB_MBAFF(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00071">h264dec.h:71</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ad36f09011ec35d31991a4e2ad8c77e03"><div class="ttname"><a href="structH264SliceContext.html#ad36f09011ec35d31991a4e2ad8c77e03">H264SliceContext::slice_alpha_c0_offset</a></div><div class="ttdeci">int slice_alpha_c0_offset</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00198">h264dec.h:198</a></div></div>
<div class="ttc" id="structAVStereo3D_html"><div class="ttname"><a href="structAVStereo3D.html">AVStereo3D</a></div><div class="ttdoc">Stereo 3D type: this structure describes how two videos are packed within a single video surface...</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00123">stereo3d.h:123</a></div></div>
<div class="ttc" id="structH264Ref_html_a68870b34f122a60f87e85a12143deba9"><div class="ttname"><a href="structH264Ref.html#a68870b34f122a60f87e85a12143deba9">H264Ref::poc</a></div><div class="ttdeci">int poc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00175">h264dec.h:175</a></div></div>
<div class="ttc" id="h264__picture_8c_html_af2978b979fb935891ada40de22ca078b"><div class="ttname"><a href="h264__picture_8c.html#af2978b979fb935891ada40de22ca078b">ff_h264_set_erpic</a></div><div class="ttdeci">void ff_h264_set_erpic(ERPicture *dst, H264Picture *src)</div><div class="ttdef"><b>Definition:</b> <a href="h264__picture_8c_source.html#l00130">h264_picture.c:130</a></div></div>
<div class="ttc" id="structH264Picture_html_a79d92c2c1e4bc4172dece5096225b073"><div class="ttname"><a href="structH264Picture.html#a79d92c2c1e4bc4172dece5096225b073">H264Picture::field_picture</a></div><div class="ttdeci">int field_picture</div><div class="ttdoc">whether or not picture was encoded in separate fields </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00158">h264dec.h:158</a></div></div>
<div class="ttc" id="structSPS_html_a8aa2e291cb39b21e4ba13d1d57ef20ac"><div class="ttname"><a href="structSPS.html#a8aa2e291cb39b21e4ba13d1d57ef20ac">SPS::bit_depth_chroma</a></div><div class="ttdeci">int bit_depth_chroma</div><div class="ttdoc">bit_depth_chroma_minus8 + 8 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00098">h264_ps.h:98</a></div></div>
<div class="ttc" id="h264__mb_8c_html_a1e18e7ab5648a75bb25c4cd4cb9899fd"><div class="ttname"><a href="h264__mb_8c.html#a1e18e7ab5648a75bb25c4cd4cb9899fd">ff_h264_hl_decode_mb</a></div><div class="ttdeci">void ff_h264_hl_decode_mb(const H264Context *h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__mb_8c_source.html#l00799">h264_mb.c:799</a></div></div>
<div class="ttc" id="avcodec_8h_html_a5d34f0bd0c235b8b9ee96e658df557af"><div class="ttname"><a href="avcodec_8h.html#a5d34f0bd0c235b8b9ee96e658df557af">FF_DEBUG_PICT_INFO</a></div><div class="ttdeci">#define FF_DEBUG_PICT_INFO</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02928">avcodec.h:2928</a></div></div>
<div class="ttc" id="structSPS_html_a63d7ab8d12f86afdbbb181bedae9473c"><div class="ttname"><a href="structSPS.html#a63d7ab8d12f86afdbbb181bedae9473c">SPS::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00076">h264_ps.h:76</a></div></div>
<div class="ttc" id="structH264Picture_html_ab34d56d9c0dcfe5643a351cf8c5bd0de"><div class="ttname"><a href="structH264Picture.html#ab34d56d9c0dcfe5643a351cf8c5bd0de">H264Picture::poc</a></div><div class="ttdeci">int poc</div><div class="ttdoc">frame POC </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00148">h264dec.h:148</a></div></div>
<div class="ttc" id="structH264POCContext_html_a0e21c7d790d0f35af6d738daff2354f0"><div class="ttname"><a href="structH264POCContext.html#a0e21c7d790d0f35af6d738daff2354f0">H264POCContext::frame_num_offset</a></div><div class="ttdeci">int frame_num_offset</div><div class="ttdoc">for POC type 2 </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00051">h264_parse.h:51</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a8dd36fd811346174b0f612c46c10bf87"><div class="ttname"><a href="structH264SliceContext.html#a8dd36fd811346174b0f612c46c10bf87">H264SliceContext::slice_type</a></div><div class="ttdeci">int slice_type</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00187">h264dec.h:187</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_a9190fabf8380f5630655d3474eea85f0"><div class="ttname"><a href="structH264PredWeightTable.html#a9190fabf8380f5630655d3474eea85f0">H264PredWeightTable::chroma_weight_flag</a></div><div class="ttdeci">int chroma_weight_flag[2]</div><div class="ttdoc">7.4.3.2 chroma_weight_lX_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00036">h264_parse.h:36</a></div></div>
<div class="ttc" id="libavcodec_2thread_8h_html"><div class="ttname"><a href="libavcodec_2thread_8h.html">thread.h</a></div><div class="ttdoc">Multithreading support functions. </div></div>
<div class="ttc" id="structH264SliceContext_html_af938881b381dec4d3896ae00b86ccb02"><div class="ttname"><a href="structH264SliceContext.html#af938881b381dec4d3896ae00b86ccb02">H264SliceContext::curr_pic_num</a></div><div class="ttdeci">int curr_pic_num</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00334">h264dec.h:334</a></div></div>
<div class="ttc" id="error__resilience_8h_html_ad43db7da26ad2ea6d2d466ea7f039aee"><div class="ttname"><a href="error__resilience_8h.html#ad43db7da26ad2ea6d2d466ea7f039aee">ER_MB_ERROR</a></div><div class="ttdeci">#define ER_MB_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00037">error_resilience.h:37</a></div></div>
<div class="ttc" id="structPPS_html_a7e11bc70fea55b94b8f03d585b309c78"><div class="ttname"><a href="structPPS.html#a7e11bc70fea55b94b8f03d585b309c78">PPS::cabac</a></div><div class="ttdeci">int cabac</div><div class="ttdoc">entropy_coding_mode_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00110">h264_ps.h:110</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_a91db714feae7406cbb86aac539d44cd8"><div class="ttname"><a href="structH264PredWeightTable.html#a91db714feae7406cbb86aac539d44cd8">H264PredWeightTable::use_weight_chroma</a></div><div class="ttdeci">int use_weight_chroma</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00032">h264_parse.h:32</a></div></div>
<div class="ttc" id="h264dec_8h_html_a4b6e9be890e19617a2ee277a0abd7c7a"><div class="ttname"><a href="h264dec_8h.html#a4b6e9be890e19617a2ee277a0abd7c7a">MB_FIELD</a></div><div class="ttdeci">#define MB_FIELD(sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00072">h264dec.h:72</a></div></div>
<div class="ttc" id="libavcodec_2jacosubdec_8c_html_af9f143e62cdad4afb8a53a21b8b8fcfd"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#af9f143e62cdad4afb8a53a21b8b8fcfd">from</a></div><div class="ttdeci">const char * from</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00065">jacosubdec.c:65</a></div></div>
<div class="ttc" id="structSPS_html_ac694b35ba551ef4c69b61413e413e331"><div class="ttname"><a href="structSPS.html#ac694b35ba551ef4c69b61413e413e331">SPS::crop_right</a></div><div class="ttdeci">unsigned int crop_right</div><div class="ttdoc">frame_cropping_rect_right_offset </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00068">h264_ps.h:68</a></div></div>
<div class="ttc" id="structH264POCContext_html_a148cb3fbaf1f221c4e69b5d2f6a8a5fa"><div class="ttname"><a href="structH264POCContext.html#a148cb3fbaf1f221c4e69b5d2f6a8a5fa">H264POCContext::poc_msb</a></div><div class="ttdeci">int poc_msb</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00045">h264_parse.h:45</a></div></div>
<div class="ttc" id="h264dec_8h_html_a8fa94dfb807ce0b503ac7a2d4cd7164e"><div class="ttname"><a href="h264dec_8h.html#a8fa94dfb807ce0b503ac7a2d4cd7164e">SLICE_SKIPED</a></div><div class="ttdeci">#define SLICE_SKIPED</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00850">h264dec.h:850</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a35c39789390ba2489026c7ecdbfafba7"><div class="ttname"><a href="pixfmt_8h.html#a35c39789390ba2489026c7ecdbfafba7">AV_PIX_FMT_GBRP9</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP9</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00366">pixfmt.h:366</a></div></div>
<div class="ttc" id="structH264Picture_html_a483d8ef880b44be9d7890a749b4367d3"><div class="ttname"><a href="structH264Picture.html#a483d8ef880b44be9d7890a749b4367d3">H264Picture::invalid_gap</a></div><div class="ttdeci">int invalid_gap</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00162">h264dec.h:162</a></div></div>
<div class="ttc" id="libavcodec_2version_8h_html_a1355287109a7ef6248603670c9541383"><div class="ttname"><a href="libavcodec_2version_8h.html#a1355287109a7ef6248603670c9541383">FF_API_CAP_VDPAU</a></div><div class="ttdeci">#define FF_API_CAP_VDPAU</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2version_8h_source.html#l00073">version.h:73</a></div></div>
<div class="ttc" id="structERContext_html_a6b5cd4007a0ccf9e63527e6cf7cf013a"><div class="ttname"><a href="structERContext.html#a6b5cd4007a0ccf9e63527e6cf7cf013a">ERContext::cur_pic</a></div><div class="ttdeci">ERPicture cur_pic</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00072">error_resilience.h:72</a></div></div>
<div class="ttc" id="structH264Context_html_a6bdbe14961aa1eeb269eae6279776a1b"><div class="ttname"><a href="structH264Context.html#a6bdbe14961aa1eeb269eae6279776a1b">H264Context::frame_recovered</a></div><div class="ttdeci">int frame_recovered</div><div class="ttdoc">Initial frame has been completely recovered. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00540">h264dec.h:540</a></div></div>
<div class="ttc" id="structAVFrameSideData_html"><div class="ttname"><a href="structAVFrameSideData.html">AVFrameSideData</a></div><div class="ttdoc">Structure to hold side data for an AVFrame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00149">frame.h:149</a></div></div>
<div class="ttc" id="structH264Context_html_aacc8e3bb3b3f5e52338e65889495ab24"><div class="ttname"><a href="structH264Context.html#aacc8e3bb3b3f5e52338e65889495ab24">H264Context::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00362">h264dec.h:362</a></div></div>
<div class="ttc" id="mpegutils_8h_html_ad823c61c62f9f3563c62ab33feec902d"><div class="ttname"><a href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a></div><div class="ttdeci">#define PICT_BOTTOM_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00038">mpegutils.h:38</a></div></div>
<div class="ttc" id="tests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="h264__ps_8h_html_ac669a873376311bf057af13000fc64ba"><div class="ttname"><a href="h264__ps_8h.html#ac669a873376311bf057af13000fc64ba">MAX_PPS_COUNT</a></div><div class="ttdeci">#define MAX_PPS_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00038">h264_ps.h:38</a></div></div>
<div class="ttc" id="rtp_8c_html_aa51c0cd81327c3099d0a4d1738c6a45d"><div class="ttname"><a href="rtp_8c.html#aa51c0cd81327c3099d0a4d1738c6a45d">pt</a></div><div class="ttdeci">int pt</div><div class="ttdef"><b>Definition:</b> <a href="rtp_8c_source.html#l00035">rtp.c:35</a></div></div>
<div class="ttc" id="structSPS_html_a4efedf93defec67533cd876b6a03c2cd"><div class="ttname"><a href="structSPS.html#a4efedf93defec67533cd876b6a03c2cd">SPS::transform_bypass</a></div><div class="ttdeci">int transform_bypass</div><div class="ttdoc">qpprime_y_zero_transform_bypass_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00048">h264_ps.h:48</a></div></div>
<div class="ttc" id="tests_2movenc_8c_html_ac36dbec917251f24fb626e4e09e1b056"><div class="ttname"><a href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a></div><div class="ttdeci">static void finish(void)</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00344">movenc.c:344</a></div></div>
<div class="ttc" id="structH264SEIDisplayOrientation_html_abbd7ad10c91b469826ea6ab385da5b03"><div class="ttname"><a href="structH264SEIDisplayOrientation.html#abbd7ad10c91b469826ea6ab385da5b03">H264SEIDisplayOrientation::present</a></div><div class="ttdeci">int present</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00128">h264_sei.h:128</a></div></div>
<div class="ttc" id="get__bits_8h_html_aac3f793480c01f793f2acc9eba031ff5"><div class="ttname"><a href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a></div><div class="ttdeci">static int get_bits_count(const GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00199">get_bits.h:199</a></div></div>
<div class="ttc" id="h264__loopfilter_8c_html_a804e5b441d52a1268fd8e8ba275ce0bc"><div class="ttname"><a href="h264__loopfilter_8c.html#a804e5b441d52a1268fd8e8ba275ce0bc">ff_h264_filter_mb</a></div><div class="ttdeci">void ff_h264_filter_mb(const H264Context *h, H264SliceContext *sl, int mb_x, int mb_y, uint8_t *img_y, uint8_t *img_cb, uint8_t *img_cr, unsigned int linesize, unsigned int uvlinesize)</div><div class="ttdef"><b>Definition:</b> <a href="h264__loopfilter_8c_source.html#l00718">h264_loopfilter.c:718</a></div></div>
<div class="ttc" id="group__lavu__picture_html_gacbf2ea8b2b89924c890ef8ec10a3d922"><div class="ttname"><a href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a></div><div class="ttdeci">char av_get_picture_type_char(enum AVPictureType pict_type)</div><div class="ttdoc">Return a single letter to describe the given picture type pict_type. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00091">utils.c:91</a></div></div>
<div class="ttc" id="group__lavc__core_html_gaff12f286c59b73665a48768204cf866d"><div class="ttname"><a href="group__lavc__core.html#gaff12f286c59b73665a48768204cf866d">AV_CODEC_CAP_HWACCEL_VDPAU</a></div><div class="ttdeci">#define AV_CODEC_CAP_HWACCEL_VDPAU</div><div class="ttdoc">Codec can export data for HW decoding (VDPAU). </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00999">avcodec.h:999</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ab2e2ccfaeec66c0a5f58ffdbe2e850f9"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab2e2ccfaeec66c0a5f58ffdbe2e850f9">AV_PIX_FMT_YUVJ422P</a></div><div class="ttdoc">planar YUV 4:2:2, 16bpp, full scale (JPEG), deprecated in favor of AV_PIX_FMT_YUV422P and setting col...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00075">pixfmt.h:75</a></div></div>
<div class="ttc" id="error__resilience_8h_html_a85f3dd456588d7b4b71f943ecc76ef63"><div class="ttname"><a href="error__resilience_8h.html#a85f3dd456588d7b4b71f943ecc76ef63">ER_MV_END</a></div><div class="ttdeci">#define ER_MV_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00035">error_resilience.h:35</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_a6f234e0cc3f8e214f4934844601ae85c"><div class="ttname"><a href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a></div><div class="ttdeci">int ff_set_sar(AVCodecContext *avctx, AVRational sar)</div><div class="ttdoc">Check that the provided sample aspect ratio is valid and set it on the codec context. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00225">utils.c:225</a></div></div>
<div class="ttc" id="structPPS_html_aa5de9f593c92cb51962b96e4a15af037"><div class="ttname"><a href="structPPS.html#aa5de9f593c92cb51962b96e4a15af037">PPS::redundant_pic_cnt_present</a></div><div class="ttdeci">int redundant_pic_cnt_present</div><div class="ttdoc">redundant_pic_cnt_present_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00122">h264_ps.h:122</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ae9d02484d93c4ca6da9c91d6553773cc"><div class="ttname"><a href="structH264SliceContext.html#ae9d02484d93c4ca6da9c91d6553773cc">H264SliceContext::picture_structure</a></div><div class="ttdeci">int picture_structure</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00244">h264dec.h:244</a></div></div>
<div class="ttc" id="structH264Context_html_a71978724c4e6bcff50ea90e7c8925333"><div class="ttname"><a href="structH264Context.html#a71978724c4e6bcff50ea90e7c8925333">H264Context::chroma_y_shift</a></div><div class="ttdeci">int chroma_y_shift</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00363">h264dec.h:363</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdoc">Detailed information. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00192">log.h:192</a></div></div>
<div class="ttc" id="structAVFrame_html_a7f761518da738c704676c6a5f08eeb8e"><div class="ttname"><a href="structAVFrame.html#a7f761518da738c704676c6a5f08eeb8e">AVFrame::interlaced_frame</a></div><div class="ttdeci">int interlaced_frame</div><div class="ttdoc">The content of the picture is interlaced. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00328">frame.h:328</a></div></div>
<div class="ttc" id="structH264Picture_html_adc3950617a42e8e2b314ba79dc2565c9"><div class="ttname"><a href="structH264Picture.html#adc3950617a42e8e2b314ba79dc2565c9">H264Picture::qscale_table_buf</a></div><div class="ttdeci">AVBufferRef * qscale_table_buf</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00132">h264dec.h:132</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a8191969d0c5c258762c0d8e5bfc7cc85"><div class="ttname"><a href="h264__slice_8c.html#a8191969d0c5c258762c0d8e5bfc7cc85">h264_export_frame_props</a></div><div class="ttdeci">static int h264_export_frame_props(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01131">h264_slice.c:1131</a></div></div>
<div class="ttc" id="group__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdoc">Reduce a fraction. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="mpegutils_8h_html"><div class="ttname"><a href="mpegutils_8h.html">mpegutils.h</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a570adc38d3ba623b3c4e07a6d22abfa8"><div class="ttname"><a href="pixfmt_8h.html#a570adc38d3ba623b3c4e07a6d22abfa8">AV_PIX_FMT_YUV422P12</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV422P12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00356">pixfmt.h:356</a></div></div>
<div class="ttc" id="structH264Ref_html_a67ab390351720b9b89cd77cbb2825e2f"><div class="ttname"><a href="structH264Ref.html#a67ab390351720b9b89cd77cbb2825e2f">H264Ref::parent</a></div><div class="ttdeci">H264Picture * parent</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00178">h264dec.h:178</a></div></div>
<div class="ttc" id="structH264SEIContext_html_a7d2858362aad314feedb98b43c6aba34"><div class="ttname"><a href="structH264SEIContext.html#a7d2858362aad314feedb98b43c6aba34">H264SEIContext::afd</a></div><div class="ttdeci">H264SEIAFD afd</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00148">h264_sei.h:148</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga752fa4b8beeb25c9e8f0014a4aa622b4"><div class="ttname"><a href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a></div><div class="ttdeci">#define AV_CODEC_FLAG_GRAY</div><div class="ttdoc">Only decode/encode grayscale. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00865">avcodec.h:865</a></div></div>
<div class="ttc" id="timer_8h_html"><div class="ttname"><a href="timer_8h.html">timer.h</a></div><div class="ttdoc">high precision timer, useful to profile code </div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6aa23e3e6b40107100e62fa16ea536aa07"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6aa23e3e6b40107100e62fa16ea536aa07">AV_STEREO3D_FRAMESEQUENCE</a></div><div class="ttdoc">Views are alternated temporally. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00066">stereo3d.h:66</a></div></div>
<div class="ttc" id="structH264Picture_html_a3d2476196bfe4c0f3b59967138f366cc"><div class="ttname"><a href="structH264Picture.html#a3d2476196bfe4c0f3b59967138f366cc">H264Picture::recovered</a></div><div class="ttdeci">int recovered</div><div class="ttdoc">picture at IDR or recovery point + recovery count </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00161">h264dec.h:161</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ggae01fa7e427274293aacdf2adc17076bca9aabf5c0b8abc7064bfcc59485e54aea"><div class="ttname"><a href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca9aabf5c0b8abc7064bfcc59485e54aea">AV_FRAME_DATA_AFD</a></div><div class="ttdoc">Active Format Description data consisting of a single byte as specified in ETSI TS 101 154 using AVAc...</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00088">frame.h:88</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a50654c20c1149e9f6f8bb80a335231e7"><div class="ttname"><a href="intreadwrite_8h.html#a50654c20c1149e9f6f8bb80a335231e7">AV_COPY64</a></div><div class="ttdeci">#define AV_COPY64(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00590">intreadwrite.h:590</a></div></div>
<div class="ttc" id="h264__refs_8c_html_a10640d544a6ad123c55adfbf1343a61a"><div class="ttname"><a href="h264__refs_8c.html#a10640d544a6ad123c55adfbf1343a61a">ff_h264_decode_ref_pic_list_reordering</a></div><div class="ttdeci">int ff_h264_decode_ref_pic_list_reordering(H264SliceContext *sl, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="h264__refs_8c_source.html#l00421">h264_refs.c:421</a></div></div>
<div class="ttc" id="macros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ab93d834ee807d2cd4a7d9ca3754a7ca1"><div class="ttname"><a href="structH264SliceContext.html#ab93d834ee807d2cd4a7d9ca3754a7ca1">H264SliceContext::chroma_qp</a></div><div class="ttdeci">int chroma_qp[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00192">h264dec.h:192</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980a2e4b1caf939aa24dcc51f0e0a0211f49"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a2e4b1caf939aa24dcc51f0e0a0211f49">SEI_PIC_STRUCT_FRAME_DOUBLING</a></div><div class="ttdoc">7: frame doubling </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00049">h264_sei.h:49</a></div></div>
<div class="ttc" id="build_2config_8h_html_a5c6fd7a6f40c799a79dffcce7837e2db"><div class="ttname"><a href="build_2config_8h.html#a5c6fd7a6f40c799a79dffcce7837e2db">HAVE_THREADS</a></div><div class="ttdeci">#define HAVE_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="build_2config_8h_source.html#l00386">config.h:386</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="structThreadFrame_html_ab66edf8c145f996dac20596b7f7ab392"><div class="ttname"><a href="structThreadFrame.html#ab66edf8c145f996dac20596b7f7ab392">ThreadFrame::owner</a></div><div class="ttdeci">AVCodecContext * owner</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00037">thread.h:37</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a0a608aaf497fd98608179ac0bd26639c"><div class="ttname"><a href="structH264SliceContext.html#a0a608aaf497fd98608179ac0bd26639c">H264SliceContext::resync_mb_x</a></div><div class="ttdeci">int resync_mb_x</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00236">h264dec.h:236</a></div></div>
<div class="ttc" id="structH264Context_html_a518e81f0fa40b4a34c0c551ab17db3ed"><div class="ttname"><a href="structH264Context.html#a518e81f0fa40b4a34c0c551ab17db3ed">H264Context::last_pocs</a></div><div class="ttdeci">int last_pocs[MAX_DELAYED_PIC_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00468">h264dec.h:468</a></div></div>
<div class="ttc" id="libavcodec_2webvttdec_8c_html_a5d467a63df9ff99d33d6749038f6f421"><div class="ttname"><a href="libavcodec_2webvttdec_8c.html#a5d467a63df9ff99d33d6749038f6f421">to</a></div><div class="ttdeci">const char * to</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2webvttdec_8c_source.html#l00034">webvttdec.c:34</a></div></div>
<div class="ttc" id="h264__direct_8c_html_a0cd0942db98ece2d9390787b87f4fd55"><div class="ttname"><a href="h264__direct_8c.html#a0cd0942db98ece2d9390787b87f4fd55">ff_h264_direct_ref_list_init</a></div><div class="ttdeci">void ff_h264_direct_ref_list_init(const H264Context *const h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00111">h264_direct.c:111</a></div></div>
<div class="ttc" id="structH264SEIFramePacking_html_a402747c52e210b73d7c483a3e28d058e"><div class="ttname"><a href="structH264SEIFramePacking.html#a402747c52e210b73d7c483a3e28d058e">H264SEIFramePacking::frame_packing_arrangement_type</a></div><div class="ttdeci">SEI_FpaType frame_packing_arrangement_type</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00121">h264_sei.h:121</a></div></div>
<div class="ttc" id="structH264Context_html_ad6e8df4cb2c64c45dd46228aafebc8fc"><div class="ttname"><a href="structH264Context.html#ad6e8df4cb2c64c45dd46228aafebc8fc">H264Context::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00362">h264dec.h:362</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a18543104885d8131b4c439c1966161c7"><div class="ttname"><a href="h264__slice_8c.html#a18543104885d8131b4c439c1966161c7">h264_frame_start</a></div><div class="ttdeci">static int h264_frame_start(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00464">h264_slice.c:464</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980a844955f27f856e8fdc98b41947716294"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a844955f27f856e8fdc98b41947716294">SEI_PIC_STRUCT_FRAME</a></div><div class="ttdoc">0: frame </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00042">h264_sei.h:42</a></div></div>
<div class="ttc" id="structH264SEIA53Caption_html_a4367602fa939c09e011bae59c1617ad1"><div class="ttname"><a href="structH264SEIA53Caption.html#a4367602fa939c09e011bae59c1617ad1">H264SEIA53Caption::a53_caption_size</a></div><div class="ttdeci">int a53_caption_size</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00093">h264_sei.h:93</a></div></div>
<div class="ttc" id="h264_8h_html"><div class="ttname"><a href="h264_8h.html">h264.h</a></div><div class="ttdoc">H.264 common definitions. </div></div>
<div class="ttc" id="structH264SliceContext_html_abe75c84ff84e39e1da85f1216088f8fe"><div class="ttname"><a href="structH264SliceContext.html#abe75c84ff84e39e1da85f1216088f8fe">H264SliceContext::slice_num</a></div><div class="ttdeci">int slice_num</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00186">h264dec.h:186</a></div></div>
<div class="ttc" id="libavcodec_2h264dec_8c_html_a60a4f324fda3d7394906cf6a2e422bd5"><div class="ttname"><a href="libavcodec_2h264dec_8c.html#a60a4f324fda3d7394906cf6a2e422bd5">ff_h264_draw_horiz_band</a></div><div class="ttdeci">void ff_h264_draw_horiz_band(const H264Context *h, H264SliceContext *sl, int y, int height)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dec_8c_source.html#l00104">h264dec.c:104</a></div></div>
<div class="ttc" id="arm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a8e25fb6de2602478d1a220135a3264c4"><div class="ttname"><a href="h264__slice_8c.html#a8e25fb6de2602478d1a220135a3264c4">HWACCEL_MAX</a></div><div class="ttdeci">#define HWACCEL_MAX</div></div>
<div class="ttc" id="get__bits_8h_html_a44d39cea027a76211f31e3bf2e3e68a4"><div class="ttname"><a href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a></div><div class="ttdeci">static int get_bits_left(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00573">get_bits.h:573</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_aca591e3b0dafdea902455f4d3177a5c0"><div class="ttname"><a href="structH264PredWeightTable.html#aca591e3b0dafdea902455f4d3177a5c0">H264PredWeightTable::use_weight</a></div><div class="ttdeci">int use_weight</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00031">h264_parse.h:31</a></div></div>
<div class="ttc" id="h264__ps_8h_html"><div class="ttname"><a href="h264__ps_8h.html">h264_ps.h</a></div><div class="ttdoc">H.264 parameter set handling. </div></div>
<div class="ttc" id="structH264Context_html_a79abd4bd31cfe808a34a10d112279650"><div class="ttname"><a href="structH264Context.html#a79abd4bd31cfe808a34a10d112279650">H264Context::DPB</a></div><div class="ttdeci">H264Picture DPB[H264_MAX_PICTURE_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00349">h264dec.h:349</a></div></div>
<div class="ttc" id="structSPS_html_a7f29983ecf3f39d09a00f2d1b5da2257"><div class="ttname"><a href="structSPS.html#a7f29983ecf3f39d09a00f2d1b5da2257">SPS::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00077">h264_ps.h:77</a></div></div>
<div class="ttc" id="structSPS_html_ac003204457c3d9c286de94d063c6b485"><div class="ttname"><a href="structSPS.html#ac003204457c3d9c286de94d063c6b485">SPS::mb_aff</a></div><div class="ttdeci">int mb_aff</div><div class="ttdoc">mb_adaptive_frame_field_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00062">h264_ps.h:62</a></div></div>
<div class="ttc" id="structH264Context_html_ac4236ddc35be793ffa0ec7d613993bef"><div class="ttname"><a href="structH264Context.html#ac4236ddc35be793ffa0ec7d613993bef">H264Context::hpc</a></div><div class="ttdeci">H264PredContext hpc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00391">h264dec.h:391</a></div></div>
<div class="ttc" id="structH264ParamSets_html_a567ffddf9935c941eec9e21b6c2d7a65"><div class="ttname"><a href="structH264ParamSets.html#a567ffddf9935c941eec9e21b6c2d7a65">H264ParamSets::sps_ref</a></div><div class="ttdeci">AVBufferRef * sps_ref</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00142">h264_ps.h:142</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_a076779b8febc5310542e63f0d36d3f2c"><div class="ttname"><a href="structH264PredWeightTable.html#a076779b8febc5310542e63f0d36d3f2c">H264PredWeightTable::chroma_log2_weight_denom</a></div><div class="ttdeci">int chroma_log2_weight_denom</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00034">h264_parse.h:34</a></div></div>
<div class="ttc" id="structAVFrame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">width and height of the video frame </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00242">frame.h:242</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdoc">Something went wrong and cannot losslessly be recovered. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00176">log.h:176</a></div></div>
<div class="ttc" id="regdef_8h_html_ab2c359e6c325062d33a4152752d8a820"><div class="ttname"><a href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a></div><div class="ttdeci">#define td</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00070">regdef.h:70</a></div></div>
<div class="ttc" id="structAVStereo3D_html_a9e74d14d6b5dddcd6126da075558f102"><div class="ttname"><a href="structAVStereo3D.html#a9e74d14d6b5dddcd6126da075558f102">AVStereo3D::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">Additional information about the frame packing. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00132">stereo3d.h:132</a></div></div>
<div class="ttc" id="golomb_8h_html_a9fbef3a4a48ea960374f521702c9c8e0"><div class="ttname"><a href="golomb_8h.html#a9fbef3a4a48ea960374f521702c9c8e0">get_ue_golomb</a></div><div class="ttdeci">static int get_ue_golomb(GetBitContext *gb)</div><div class="ttdoc">Read an unsigned Exp-Golomb code in the range 0 to 8190. </div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00053">golomb.h:53</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a6c6df1b650bca2e5ad20c1f2eb543de3"><div class="ttname"><a href="h264__slice_8c.html#a6c6df1b650bca2e5ad20c1f2eb543de3">alloc_scratch_buffers</a></div><div class="ttdeci">static int alloc_scratch_buffers(H264SliceContext *sl, int linesize)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00128">h264_slice.c:128</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a4dcbf25f47047eca66ffaefb89a69401"><div class="ttname"><a href="structH264SliceContext.html#a4dcbf25f47047eca66ffaefb89a69401">H264SliceContext::mb_x</a></div><div class="ttdeci">int mb_x</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00234">h264dec.h:234</a></div></div>
<div class="ttc" id="structSPS_html_abce31c4863777246fc903dc60a845324"><div class="ttname"><a href="structSPS.html#abce31c4863777246fc903dc60a845324">SPS::poc_type</a></div><div class="ttdeci">int poc_type</div><div class="ttdoc">pic_order_cnt_type </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00050">h264_ps.h:50</a></div></div>
<div class="ttc" id="error__resilience_8c_html_a00b6ab0da3b338afa209792001e707fb"><div class="ttname"><a href="error__resilience_8c.html#a00b6ab0da3b338afa209792001e707fb">ff_er_add_slice</a></div><div class="ttdeci">void ff_er_add_slice(ERContext *s, int startx, int starty, int endx, int endy, int status)</div><div class="ttdoc">Add a slice. </div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00783">error_resilience.c:783</a></div></div>
<div class="ttc" id="structH264Context_html_a45c24ac413b7fbca8cca2734e70847a7"><div class="ttname"><a href="structH264Context.html#a45c24ac413b7fbca8cca2734e70847a7">H264Context::context_initialized</a></div><div class="ttdeci">int context_initialized</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00376">h264dec.h:376</a></div></div>
<div class="ttc" id="libavutil_2internal_8h_html_a5a241f1b73b42f74b4122da23004dc6c"><div class="ttname"><a href="libavutil_2internal_8h.html#a5a241f1b73b42f74b4122da23004dc6c">PTRDIFF_SPECIFIER</a></div><div class="ttdeci">#define PTRDIFF_SPECIFIER</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00251">internal.h:251</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a293ef8ee812c17dfbfaefe026f25411e"><div class="ttname"><a href="structH264SliceContext.html#a293ef8ee812c17dfbfaefe026f25411e">H264SliceContext::er</a></div><div class="ttdeci">ERContext er</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00184">h264dec.h:184</a></div></div>
<div class="ttc" id="structH264Context_html_ad61de9d1617296a603e0dcccb9487d6d"><div class="ttname"><a href="structH264Context.html#ad61de9d1617296a603e0dcccb9487d6d">H264Context::nal_unit_type</a></div><div class="ttdeci">int nal_unit_type</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00447">h264dec.h:447</a></div></div>
<div class="ttc" id="h264__refs_8c_html_a14824fcc81a02c46994bdeb2b086e0ad"><div class="ttname"><a href="h264__refs_8c.html#a14824fcc81a02c46994bdeb2b086e0ad">ff_h264_decode_ref_pic_marking</a></div><div class="ttdeci">int ff_h264_decode_ref_pic_marking(H264SliceContext *sl, GetBitContext *gb, const H2645NAL *nal, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="h264__refs_8c_source.html#l00824">h264_refs.c:824</a></div></div>
<div class="ttc" id="h264__parse_8c_html_a076fb7aed718961e10f2e42b2ace61df"><div class="ttname"><a href="h264__parse_8c.html#a076fb7aed718961e10f2e42b2ace61df">ff_h264_get_profile</a></div><div class="ttdeci">int ff_h264_get_profile(const SPS *sps)</div><div class="ttdoc">Compute profile from profile_idc and constraint_set?_flags. </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8c_source.html#l00489">h264_parse.c:489</a></div></div>
<div class="ttc" id="structH264SEIDisplayOrientation_html"><div class="ttname"><a href="structH264SEIDisplayOrientation.html">H264SEIDisplayOrientation</a></div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00127">h264_sei.h:127</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a776541ad00a4f13c3fdcd363988bffb3"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a776541ad00a4f13c3fdcd363988bffb3">AVDISCARD_BIDIR</a></div><div class="ttdoc">discard all bidirectional frames </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00788">avcodec.h:788</a></div></div>
<div class="ttc" id="group__lavu__error_html_gae4bb6f165973d09584e0ec0f335f69ca"><div class="ttname"><a href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a></div><div class="ttdeci">#define AVERROR(e)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00043">error.h:43</a></div></div>
<div class="ttc" id="structH264Picture_html_a8b67142afab123820381a21f27e19082"><div class="ttname"><a href="structH264Picture.html#a8b67142afab123820381a21f27e19082">H264Picture::hwaccel_picture_private</a></div><div class="ttdeci">void * hwaccel_picture_private</div><div class="ttdoc">hardware accelerator private data </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00142">h264dec.h:142</a></div></div>
<div class="ttc" id="structH264Context_html_a66cb971947c79cba4b68dbc43d81fc77"><div class="ttname"><a href="structH264Context.html#a66cb971947c79cba4b68dbc43d81fc77">H264Context::backup_height</a></div><div class="ttdeci">int backup_height</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00370">h264dec.h:370</a></div></div>
<div class="ttc" id="pixdesc_8c_html_a76e011cf53b51ea14a002a206f6ca05d"><div class="ttname"><a href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a></div><div class="ttdeci">int av_pix_fmt_get_chroma_sub_sample(enum AVPixelFormat pix_fmt, int *h_shift, int *v_shift)</div><div class="ttdoc">Utility function to access log2_chroma_w log2_chroma_h from the pixel format AVPixFmtDescriptor. </div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02360">pixdesc.c:2360</a></div></div>
<div class="ttc" id="display_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a5f4579d94675579e1d46a591340f598f"><div class="ttname"><a href="structAVCodecContext.html#a5f4579d94675579e1d46a591340f598f">AVCodecContext::active_thread_type</a></div><div class="ttdeci">int active_thread_type</div><div class="ttdoc">Which multithreading methods are in use by the codec. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03137">avcodec.h:3137</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a814f769cd6907170152a08cd537ff1dd"><div class="ttname"><a href="h264__slice_8c.html#a814f769cd6907170152a08cd537ff1dd">field_scan8x8</a></div><div class="ttdeci">static const uint8_t field_scan8x8[64+1]</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00057">h264_slice.c:57</a></div></div>
<div class="ttc" id="structH264Context_html_a2962d24a52f1e43cd52f5f4439d226e8"><div class="ttname"><a href="structH264Context.html#a2962d24a52f1e43cd52f5f4439d226e8">H264Context::backup_width</a></div><div class="ttdeci">int backup_width</div><div class="ttdoc">Backup frame properties: needed, because they can be different between returned frame and last decode...</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00369">h264dec.h:369</a></div></div>
<div class="ttc" id="structAVCodec_html_af51f7ff3dac8b730f46b9713e49a2518"><div class="ttname"><a href="structAVCodec.html#af51f7ff3dac8b730f46b9713e49a2518">AVCodec::capabilities</a></div><div class="ttdeci">int capabilities</div><div class="ttdoc">Codec capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03638">avcodec.h:3638</a></div></div>
<div class="ttc" id="mathops_8h_html_ac8a0f0ffe3ce93875d537922ab910b95"><div class="ttname"><a href="mathops_8h.html#ac8a0f0ffe3ce93875d537922ab910b95">ff_zigzag_scan</a></div><div class="ttdeci">const uint8_t ff_zigzag_scan[16+1]</div><div class="ttdef"><b>Definition:</b> <a href="mathtables_8c_source.html#l00109">mathtables.c:109</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5abb09cadf3b2d6b5ce5980401bcf638a8">AV_PIX_FMT_VAAPI</a></div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00130">pixfmt.h:130</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdoc">Stuff which is only useful for libav* developers. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00197">log.h:197</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6"><div class="ttname"><a href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6">AV_FRAME_DATA_A53_CC</a></div><div class="ttdoc">ATSC A53 Part 4 Closed Captions. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00057">frame.h:57</a></div></div>
<div class="ttc" id="structH264SEIDisplayOrientation_html_ad64b59af0be61d1e91b9e1689c412cda"><div class="ttname"><a href="structH264SEIDisplayOrientation.html#ad64b59af0be61d1e91b9e1689c412cda">H264SEIDisplayOrientation::vflip</a></div><div class="ttdeci">int vflip</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00130">h264_sei.h:130</a></div></div>
<div class="ttc" id="h264dec_8h_html_a4c1be7397c3f96d5c7e06bc00d483eea"><div class="ttname"><a href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a></div><div class="ttdeci">#define FIELD_PICTURE(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00074">h264dec.h:74</a></div></div>
<div class="ttc" id="structH264Context_html_aca0f3c5eeeeed8272457957748ed8309"><div class="ttname"><a href="structH264Context.html#aca0f3c5eeeeed8272457957748ed8309">H264Context::picture_idr</a></div><div class="ttdeci">int picture_idr</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00388">h264dec.h:388</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ad2a4f4f26c82a8c7776111eb01085d28"><div class="ttname"><a href="h264__slice_8c.html#ad2a4f4f26c82a8c7776111eb01085d28">init_dimensions</a></div><div class="ttdeci">static int init_dimensions(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00880">h264_slice.c:880</a></div></div>
<div class="ttc" id="libavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a708484813c9b25b50d24c672ed07958a"><div class="ttname"><a href="structH264SliceContext.html#a708484813c9b25b50d24c672ed07958a">H264SliceContext::deblocking_filter</a></div><div class="ttdeci">int deblocking_filter</div><div class="ttdoc">disable_deblocking_filter_idc with 1 &lt;-&gt; 0 </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00197">h264dec.h:197</a></div></div>
<div class="ttc" id="structH264Context_html_a4425adcb1b06580d223381a5e2d68f03"><div class="ttname"><a href="structH264Context.html#a4425adcb1b06580d223381a5e2d68f03">H264Context::mvd_table</a></div><div class="ttdeci">uint8_t(*[2] mvd_table)[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00422">h264dec.h:422</a></div></div>
<div class="ttc" id="structH264Context_html_a8e1d6ca2dc69b9a4cf251c82be17e6e1"><div class="ttname"><a href="structH264Context.html#a8e1d6ca2dc69b9a4cf251c82be17e6e1">H264Context::prev_interlaced_frame</a></div><div class="ttdeci">int prev_interlaced_frame</div><div class="ttdoc">Complement sei_pic_struct SEI_PIC_STRUCT_TOP_BOTTOM and SEI_PIC_STRUCT_BOTTOM_TOP indicate interlaced...</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00514">h264dec.h:514</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a299b2d0eff55a139f51057128e347343"><div class="ttname"><a href="h264__slice_8c.html#a299b2d0eff55a139f51057128e347343">fill_filter_caches</a></div><div class="ttdeci">static int fill_filter_caches(const H264Context *h, H264SliceContext *sl, int mb_type)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02106">h264_slice.c:2106</a></div></div>
<div class="ttc" id="structH264Picture_html_aed9ed3777e3bf21bc55d23793d01c1ef"><div class="ttname"><a href="structH264Picture.html#aed9ed3777e3bf21bc55d23793d01c1ef">H264Picture::tf</a></div><div class="ttdeci">ThreadFrame tf</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00130">h264dec.h:130</a></div></div>
<div class="ttc" id="avassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div><div class="ttdoc">simple assert() macros that are a bit more flexible than ISO C assert(). </div></div>
<div class="ttc" id="structH264SliceContext_html_a80e17e9c1dcd4ee939fbd22defcedcfb"><div class="ttname"><a href="structH264SliceContext.html#a80e17e9c1dcd4ee939fbd22defcedcfb">H264SliceContext::top_borders</a></div><div class="ttdeci">uint8_t(*[2] top_borders)[(16 *3) *2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00289">h264dec.h:289</a></div></div>
<div class="ttc" id="structPPS_html_a6dd553cd2d08e4664d557962ff48783e"><div class="ttname"><a href="structPPS.html#a6dd553cd2d08e4664d557962ff48783e">PPS::weighted_pred</a></div><div class="ttdeci">int weighted_pred</div><div class="ttdoc">weighted_pred_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00115">h264_ps.h:115</a></div></div>
<div class="ttc" id="mpegutils_8h_html_ad0569e9def39e7912f9147d935bd2c64"><div class="ttname"><a href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a></div><div class="ttdeci">#define PICT_TOP_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00037">mpegutils.h:37</a></div></div>
<div class="ttc" id="structH264Context_html_a1be97509b3dfcf351c93289b103a3a88"><div class="ttname"><a href="structH264Context.html#a1be97509b3dfcf351c93289b103a3a88">H264Context::h264qpel</a></div><div class="ttdeci">H264QpelContext h264qpel</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00347">h264dec.h:347</a></div></div>
<div class="ttc" id="pixfmt_8h_html_aff612e03cf2a557ac25e8e2032e37d9a"><div class="ttname"><a href="pixfmt_8h.html#aff612e03cf2a557ac25e8e2032e37d9a">AV_PIX_FMT_YUV444P10</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV444P10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00354">pixfmt.h:354</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a9ad3dcddcd056cd92a0b18bd10339370"><div class="ttname"><a href="structH264SliceContext.html#a9ad3dcddcd056cd92a0b18bd10339370">H264SliceContext::direct_spatial_mv_pred</a></div><div class="ttdeci">int direct_spatial_mv_pred</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00255">h264dec.h:255</a></div></div>
<div class="ttc" id="structH264SEIContext_html_a4527a0423f130fba74975dcb715f4d3e"><div class="ttname"><a href="structH264SEIContext.html#a4527a0423f130fba74975dcb715f4d3e">H264SEIContext::unregistered</a></div><div class="ttdeci">H264SEIUnregistered unregistered</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00150">h264_sei.h:150</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a579c605ac9d8b247dbb43f696f539a17"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a579c605ac9d8b247dbb43f696f539a17">AV_PIX_FMT_VDA</a></div><div class="ttdoc">HW acceleration through VDA, data[3] contains a CVPixelBufferRef. </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00224">pixfmt.h:224</a></div></div>
<div class="ttc" id="structH264Picture_html_a806ce72c8b3846d309941335be5f417a"><div class="ttname"><a href="structH264Picture.html#a806ce72c8b3846d309941335be5f417a">H264Picture::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdoc">frame_num (raw frame_num from slice header) </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00149">h264dec.h:149</a></div></div>
<div class="ttc" id="h264data_8c_html_ae4dd4297f1d85bb11789e535c8941cfe"><div class="ttname"><a href="h264data_8c.html#ae4dd4297f1d85bb11789e535c8941cfe">ff_h264_golomb_to_pict_type</a></div><div class="ttdeci">const uint8_t ff_h264_golomb_to_pict_type[5]</div><div class="ttdef"><b>Definition:</b> <a href="h264data_8c_source.html#l00037">h264data.c:37</a></div></div>
<div class="ttc" id="dxva2__hevc_8c_html_ad826826fe755da59dcff55bf092c9ed8"><div class="ttname"><a href="dxva2__hevc_8c.html#ad826826fe755da59dcff55bf092c9ed8">MAX_SLICES</a></div><div class="ttdeci">#define MAX_SLICES</div><div class="ttdef"><b>Definition:</b> <a href="dxva2__hevc_8c_source.html#l00032">dxva2_hevc.c:32</a></div></div>
<div class="ttc" id="structH264Context_html_a9fc00bf6f7c536ecc4566ff3ba1e2ae6"><div class="ttname"><a href="structH264Context.html#a9fc00bf6f7c536ecc4566ff3ba1e2ae6">H264Context::valid_recovery_point</a></div><div class="ttdeci">int valid_recovery_point</div><div class="ttdoc">Are the SEI recovery points looking valid. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00519">h264dec.h:519</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ab601c1bdf8905c63f4cab5668b462dff"><div class="ttname"><a href="h264__slice_8c.html#ab601c1bdf8905c63f4cab5668b462dff">ff_h264_get_slice_type</a></div><div class="ttdeci">int ff_h264_get_slice_type(const H264SliceContext *sl)</div><div class="ttdoc">Reconstruct bitstream slice_type. </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02004">h264_slice.c:2004</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a82768199e598ff48c7e95a2252c1b5ef"><div class="ttname"><a href="structH264SliceContext.html#a82768199e598ff48c7e95a2252c1b5ef">H264SliceContext::qscale</a></div><div class="ttdeci">int qscale</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00191">h264dec.h:191</a></div></div>
<div class="ttc" id="checkasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00084">checkasm.h:84</a></div></div>
<div class="ttc" id="structH264SEIAFD_html_aa2ccbf0decf5f4d5a5994b938e6bd88c"><div class="ttname"><a href="structH264SEIAFD.html#aa2ccbf0decf5f4d5a5994b938e6bd88c">H264SEIAFD::active_format_description</a></div><div class="ttdeci">uint8_t active_format_description</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00089">h264_sei.h:89</a></div></div>
<div class="ttc" id="structSPS_html_a08f7c9654efe1cffe69c799dbc696ade"><div class="ttname"><a href="structSPS.html#a08f7c9654efe1cffe69c799dbc696ade">SPS::delta_pic_order_always_zero_flag</a></div><div class="ttdeci">int delta_pic_order_always_zero_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00052">h264_ps.h:52</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ga6b5a267e202daadf81cbde6584055d1e"><div class="ttname"><a href="group__lavu__picture.html#ga6b5a267e202daadf81cbde6584055d1e">av_image_copy</a></div><div class="ttdeci">void av_image_copy(uint8_t *dst_data[4], int dst_linesizes[4], const uint8_t *src_data[4], const int src_linesizes[4], enum AVPixelFormat pix_fmt, int width, int height)</div><div class="ttdoc">Copy image in src_data to dst_data. </div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00321">imgutils.c:321</a></div></div>
<div class="ttc" id="structERContext_html_a9f2ecd0d1185887b0be7962ae3614cde"><div class="ttname"><a href="structERContext.html#a9f2ecd0d1185887b0be7962ae3614cde">ERContext::mb_index2xy</a></div><div class="ttdeci">int * mb_index2xy</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00057">error_resilience.h:57</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a7d4edb499bdf58f6a023773eceaa9af7"><div class="ttname"><a href="structH264SliceContext.html#a7d4edb499bdf58f6a023773eceaa9af7">H264SliceContext::slice_type_nos</a></div><div class="ttdeci">int slice_type_nos</div><div class="ttdoc">S free slice type (SI/SP are remapped to I/P) </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00188">h264dec.h:188</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ae23587a6d707e7d63ed3e6718338ba76"><div class="ttname"><a href="structH264SliceContext.html#ae23587a6d707e7d63ed3e6718338ba76">H264SliceContext::mb_skip_run</a></div><div class="ttdeci">int mb_skip_run</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00241">h264dec.h:241</a></div></div>
<div class="ttc" id="structH264Context_html_ac2dbbdd8b9facb3b205f12bd66a764cc"><div class="ttname"><a href="structH264Context.html#ac2dbbdd8b9facb3b205f12bd66a764cc">H264Context::zigzag_scan8x8</a></div><div class="ttdeci">uint8_t zigzag_scan8x8[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00426">h264dec.h:426</a></div></div>
<div class="ttc" id="structH264Picture_html_ab34ba520671ce5d5922f8fff7cd223b2"><div class="ttname"><a href="structH264Picture.html#ab34ba520671ce5d5922f8fff7cd223b2">H264Picture::hwaccel_priv_buf</a></div><div class="ttdeci">AVBufferRef * hwaccel_priv_buf</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00141">h264dec.h:141</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a332444d991855c9667b786f6f7bb6051">AV_PIX_FMT_YUV422P</a></div><div class="ttdoc">planar YUV 4:2:2, 16bpp, (1 Cr &amp; Cb sample per 2x1 Y samples) </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00066">pixfmt.h:66</a></div></div>
<div class="ttc" id="structH264Picture_html_a07dc99f7f517853ae2ea8e2edfc19cc7"><div class="ttname"><a href="structH264Picture.html#a07dc99f7f517853ae2ea8e2edfc19cc7">H264Picture::crop_left</a></div><div class="ttdeci">int crop_left</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00166">h264dec.h:166</a></div></div>
<div class="ttc" id="structSPS_html_a8a0e92ec13aa58774e5f2bc928780397"><div class="ttname"><a href="structSPS.html#a8a0e92ec13aa58774e5f2bc928780397">SPS::crop</a></div><div class="ttdeci">int crop</div><div class="ttdoc">frame_cropping_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00064">h264_ps.h:64</a></div></div>
<div class="ttc" id="structERContext_html_a71d13f17709a29253ade0e23488e7f27"><div class="ttname"><a href="structERContext.html#a71d13f17709a29253ade0e23488e7f27">ERContext::error_status_table</a></div><div class="ttdeci">uint8_t * error_status_table</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00065">error_resilience.h:65</a></div></div>
<div class="ttc" id="group__lavu__mem__funcs_html_ga29d0252b981f157e713a68ffca52f003"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a></div><div class="ttdeci">void av_fast_malloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdoc">Allocate a buffer, reusing the given one if large enough. </div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00499">mem.c:499</a></div></div>
<div class="ttc" id="h264__parse_8c_html_a1f736885e46a4a9a075a03b443f0eaad"><div class="ttname"><a href="h264__parse_8c.html#a1f736885e46a4a9a075a03b443f0eaad">ff_h264_parse_ref_count</a></div><div class="ttdeci">int ff_h264_parse_ref_count(int *plist_count, int ref_count[2], GetBitContext *gb, const PPS *pps, int slice_type_nos, int picture_structure, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8c_source.html#l00201">h264_parse.c:201</a></div></div>
<div class="ttc" id="structH264Context_html_ae2421152de96024a0c56fbb6fe53504b"><div class="ttname"><a href="structH264Context.html#ae2421152de96024a0c56fbb6fe53504b">H264Context::nal_length_size</a></div><div class="ttdeci">int nal_length_size</div><div class="ttdoc">Number of bytes used for nal length (1, 2 or 4) </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00453">h264dec.h:453</a></div></div>
<div class="ttc" id="h264__parse_8c_html_a90a85677af6f6d907c5aab0135410d81"><div class="ttname"><a href="h264__parse_8c.html#a90a85677af6f6d907c5aab0135410d81">ff_h264_pred_weight_table</a></div><div class="ttdeci">int ff_h264_pred_weight_table(GetBitContext *gb, const SPS *sps, const int *ref_count, int slice_type_nos, H264PredWeightTable *pwt, void *logctx)</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8c_source.html#l00027">h264_parse.c:27</a></div></div>
<div class="ttc" id="rectangle_8h_html"><div class="ttname"><a href="rectangle_8h.html">rectangle.h</a></div><div class="ttdoc">useful rectangle filling function </div></div>
<div class="ttc" id="pixfmt_8h_html_a39097263283e4f4448321880d9b28d08"><div class="ttname"><a href="pixfmt_8h.html#a39097263283e4f4448321880d9b28d08">AV_PIX_FMT_YUV422P9</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV422P9</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00349">pixfmt.h:349</a></div></div>
<div class="ttc" id="structAVCodecContext_html_aa0cb7241b4624dba761c8cf58fb2d5f0"><div class="ttname"><a href="structAVCodecContext.html#aa0cb7241b4624dba761c8cf58fb2d5f0">AVCodecContext::refs</a></div><div class="ttdeci">int refs</div><div class="ttdoc">number of reference frames </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02367">avcodec.h:2367</a></div></div>
<div class="ttc" id="structH264POCContext_html_aa6c592fb728917d2be7f4195931b9831"><div class="ttname"><a href="structH264POCContext.html#aa6c592fb728917d2be7f4195931b9831">H264POCContext::prev_poc_msb</a></div><div class="ttdeci">int prev_poc_msb</div><div class="ttdoc">poc_msb of the last reference pic for POC type 0 </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00049">h264_parse.h:49</a></div></div>
<div class="ttc" id="structH264Picture_html_a4a8b8764ff22f8d20f9397f6e1d644af"><div class="ttname"><a href="structH264Picture.html#a4a8b8764ff22f8d20f9397f6e1d644af">H264Picture::motion_val_buf</a></div><div class="ttdeci">AVBufferRef * motion_val_buf[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00135">h264dec.h:135</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a23d62b9a67d4a99d745eb9bebcfd2b3e"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a23d62b9a67d4a99d745eb9bebcfd2b3e">AV_STEREO3D_LINES</a></div><div class="ttdoc">Views are packed per line, as if interlaced. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00097">stereo3d.h:97</a></div></div>
<div class="ttc" id="structSPS_html_a117778cb82b0e129b6265229bcf140db"><div class="ttname"><a href="structSPS.html#a117778cb82b0e129b6265229bcf140db">SPS::ref_frame_count</a></div><div class="ttdeci">int ref_frame_count</div><div class="ttdoc">num_ref_frames </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00056">h264_ps.h:56</a></div></div>
<div class="ttc" id="structAVCodec_html_ac2b97bd3c19686025e1b7d577329c250"><div class="ttname"><a href="structAVCodec.html#ac2b97bd3c19686025e1b7d577329c250">AVCodec::pix_fmts</a></div><div class="ttdeci">enum AVPixelFormat * pix_fmts</div><div class="ttdoc">array of supported pixel formats, or NULL if unknown, array is terminated by -1 </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03640">avcodec.h:3640</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdoc">Intra. </div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="structAVFrame_html_af9920fc3fbfa347b8943ae461b50d18b"><div class="ttname"><a href="structAVFrame.html#af9920fc3fbfa347b8943ae461b50d18b">AVFrame::pict_type</a></div><div class="ttdeci">enum AVPictureType pict_type</div><div class="ttdoc">Picture type of the frame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00264">frame.h:264</a></div></div>
<div class="ttc" id="structAVCodecContext_html_af9978d9bd6ac80a494ef1b78fe1d004f"><div class="ttname"><a href="structAVCodecContext.html#af9978d9bd6ac80a494ef1b78fe1d004f">AVCodecContext::err_recognition</a></div><div class="ttdeci">int err_recognition</div><div class="ttdoc">Error recognition; may misdetect some more or less valid parts as errors. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02975">avcodec.h:2975</a></div></div>
<div class="ttc" id="avassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdoc">assert() equivalent, that does not lie in speed critical code. </div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="structH264SEIPictureTiming_html_a6511084c34e5594c55b0cbbcc26dfd3a"><div class="ttname"><a href="structH264SEIPictureTiming.html#a6511084c34e5594c55b0cbbcc26dfd3a">H264SEIPictureTiming::ct_type</a></div><div class="ttdeci">int ct_type</div><div class="ttdoc">Bit set of clock types for fields/frames in picture timing SEI message. </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00074">h264_sei.h:74</a></div></div>
<div class="ttc" id="group__lavu__mem__funcs_html_ga0bfda4adf7f9e943f9eb1a08eeda3791"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga0bfda4adf7f9e943f9eb1a08eeda3791">av_fast_mallocz</a></div><div class="ttdeci">void av_fast_mallocz(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdoc">Allocate and clear a buffer, reusing the given one if large enough. </div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00504">mem.c:504</a></div></div>
<div class="ttc" id="common_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="structH264Context_html_a4814a5a9bcedc467c9efb23ad36d9169"><div class="ttname"><a href="structH264Context.html#a4814a5a9bcedc467c9efb23ad36d9169">H264Context::slice_table</a></div><div class="ttdeci">uint16_t * slice_table</div><div class="ttdoc">slice_table_base + 2*mb_stride + 1 </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00408">h264dec.h:408</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a5aeff8b736aa556315562cdbee36e46d"><div class="ttname"><a href="h264__slice_8c.html#a5aeff8b736aa556315562cdbee36e46d">copy_picture_range</a></div><div class="ttdeci">static void copy_picture_range(H264Picture **to, H264Picture **from, int count, H264Context *new_base, H264Context *old_base)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00285">h264_slice.c:285</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a4dca8c64006f039f3fa04cbeb02cab0a"><div class="ttname"><a href="h264__slice_8c.html#a4dca8c64006f039f3fa04cbeb02cab0a">h264_field_start</a></div><div class="ttdeci">static int h264_field_start(H264Context *h, const H264SliceContext *sl, const H2645NAL *nal, int first_slice)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01290">h264_slice.c:1290</a></div></div>
<div class="ttc" id="structH264Context_html_a6b3fe16f9c7e2e644e22546ae73a8008"><div class="ttname"><a href="structH264Context.html#a6b3fe16f9c7e2e644e22546ae73a8008">H264Context::field_scan8x8_cavlc</a></div><div class="ttdeci">uint8_t field_scan8x8_cavlc[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00430">h264dec.h:430</a></div></div>
<div class="ttc" id="mpegutils_8h_html_a65d69c01f8024fceba5f12a0a7cf0968"><div class="ttname"><a href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a></div><div class="ttdeci">#define IS_DIRECT(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00086">mpegutils.h:86</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a5829dfe19361bc1d7dd97f8e00ddccd2"><div class="ttname"><a href="structH264SliceContext.html#a5829dfe19361bc1d7dd97f8e00ddccd2">H264SliceContext::cabac</a></div><div class="ttdeci">CABACContext cabac</div><div class="ttdoc">Cabac. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00322">h264dec.h:322</a></div></div>
<div class="ttc" id="structSPS_html_ac785c2f7eece0ea1cd5424fb2efa6060"><div class="ttname"><a href="structSPS.html#ac785c2f7eece0ea1cd5424fb2efa6060">SPS::colour_description_present_flag</a></div><div class="ttdeci">int colour_description_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00075">h264_ps.h:75</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a3528b775b8825d9c2c154d292669c328"><div class="ttname"><a href="structH264SliceContext.html#a3528b775b8825d9c2c154d292669c328">H264SliceContext::first_mb_addr</a></div><div class="ttdeci">unsigned int first_mb_addr</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00238">h264dec.h:238</a></div></div>
<div class="ttc" id="structH264Picture_html_a6766bde8ce7671bcd5efefb305d33ffb"><div class="ttname"><a href="structH264Picture.html#a6766bde8ce7671bcd5efefb305d33ffb">H264Picture::reference</a></div><div class="ttdeci">int reference</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00160">h264dec.h:160</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a335b9ee5132ef200a59ea4c375901936"><div class="ttname"><a href="h264__slice_8c.html#a335b9ee5132ef200a59ea4c375901936">er_add_slice</a></div><div class="ttdeci">static void er_add_slice(H264SliceContext *sl, int startx, int starty, int endx, int endy, int status)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02362">h264_slice.c:2362</a></div></div>
<div class="ttc" id="h264dec_8h_html_a888d981e3f12d4c8650fc34130eda33e"><div class="ttname"><a href="h264dec_8h.html#a888d981e3f12d4c8650fc34130eda33e">LEFT_MBS</a></div><div class="ttdeci">#define LEFT_MBS</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00075">h264dec.h:75</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5aef61d7a65003ef618420f618294107b0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5aef61d7a65003ef618420f618294107b0">AV_PIX_FMT_YUVJ420P</a></div><div class="ttdoc">planar YUV 4:2:0, 12bpp, full scale (JPEG), deprecated in favor of AV_PIX_FMT_YUV420P and setting col...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00074">pixfmt.h:74</a></div></div>
<div class="ttc" id="structSPS_html_a399115cc91b5f8d9c14611b88b8e6c88"><div class="ttname"><a href="structSPS.html#a399115cc91b5f8d9c14611b88b8e6c88">SPS::sar</a></div><div class="ttdeci">AVRational sar</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00072">h264_ps.h:72</a></div></div>
<div class="ttc" id="tests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="structH264SEIDisplayOrientation_html_afab4e060440e8d5cf9e1b1878a001a32"><div class="ttname"><a href="structH264SEIDisplayOrientation.html#afab4e060440e8d5cf9e1b1878a001a32">H264SEIDisplayOrientation::hflip</a></div><div class="ttdeci">int hflip</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00130">h264_sei.h:130</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">picture width / height. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01873">avcodec.h:1873</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a61f91cf8000dc68ea6245bcdbd775e07"><div class="ttname"><a href="structH264SliceContext.html#a61f91cf8000dc68ea6245bcdbd775e07">H264SliceContext::redundant_pic_count</a></div><div class="ttdeci">int redundant_pic_count</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00248">h264dec.h:248</a></div></div>
<div class="ttc" id="structH264Context_html_a05f9c096dcd78bb73e20e53b207624a4"><div class="ttname"><a href="structH264Context.html#a05f9c096dcd78bb73e20e53b207624a4">H264Context::nb_slice_ctx</a></div><div class="ttdeci">int nb_slice_ctx</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00355">h264dec.h:355</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a2d67609848e9b9a3ec81a02e02297781"><div class="ttname"><a href="structH264SliceContext.html#a2d67609848e9b9a3ec81a02e02297781">H264SliceContext::pwt</a></div><div class="ttdeci">H264PredWeightTable pwt</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00201">h264dec.h:201</a></div></div>
<div class="ttc" id="mathops_8h_html"><div class="ttname"><a href="mathops_8h.html">mathops.h</a></div></div>
<div class="ttc" id="structH264Context_html_a7150642cabd4140a87643d7ae81fa592"><div class="ttname"><a href="structH264Context.html#a7150642cabd4140a87643d7ae81fa592">H264Context::long_ref_count</a></div><div class="ttdeci">int long_ref_count</div><div class="ttdoc">number of actual long term references </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00480">h264dec.h:480</a></div></div>
<div class="ttc" id="error__resilience_8h_html_a94880c618424e4733e4a166fc0c80341"><div class="ttname"><a href="error__resilience_8h.html#a94880c618424e4733e4a166fc0c80341">ER_DC_END</a></div><div class="ttdeci">#define ER_DC_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00034">error_resilience.h:34</a></div></div>
<div class="ttc" id="structH264Picture_html_a2ec4aefad57e61e001ee485aabc79576"><div class="ttname"><a href="structH264Picture.html#a2ec4aefad57e61e001ee485aabc79576">H264Picture::mb_type</a></div><div class="ttdeci">uint32_t * mb_type</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00139">h264dec.h:139</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aa43e8dceaab262d59e16478bea82e163"><div class="ttname"><a href="structH264SliceContext.html#aa43e8dceaab262d59e16478bea82e163">H264SliceContext::top_mb_xy</a></div><div class="ttdeci">int top_mb_xy</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00213">h264dec.h:213</a></div></div>
<div class="ttc" id="pthread__frame_8c_html_a1c689544e66e3dd516af1d6e6f045367"><div class="ttname"><a href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a></div><div class="ttdeci">void ff_thread_report_progress(ThreadFrame *f, int n, int field)</div><div class="ttdoc">Notify later decoding threads when part of their reference picture is ready. </div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00471">pthread_frame.c:471</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a998c1323db67bde61cee62037b76569f"><div class="ttname"><a href="h264__slice_8c.html#a998c1323db67bde61cee62037b76569f">h264_init_ps</a></div><div class="ttdeci">static int h264_init_ps(H264Context *h, const H264SliceContext *sl, int first_slice)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01012">h264_slice.c:1012</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_a26a36b7542db3af34c16985b22e9828f"><div class="ttname"><a href="structH264PredWeightTable.html#a26a36b7542db3af34c16985b22e9828f">H264PredWeightTable::luma_log2_weight_denom</a></div><div class="ttdeci">int luma_log2_weight_denom</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00033">h264_parse.h:33</a></div></div>
<div class="ttc" id="structGetBitContext_html_adacaccb7e1e29f7d0e669659f17a9bfd"><div class="ttname"><a href="structGetBitContext.html#adacaccb7e1e29f7d0e669659f17a9bfd">GetBitContext::size_in_bits</a></div><div class="ttdeci">int size_in_bits</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00058">get_bits.h:58</a></div></div>
<div class="ttc" id="audio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="structH264SEIUnregistered_html_a95980486ba910c1f780228f0bdf617fd"><div class="ttname"><a href="structH264SEIUnregistered.html#a95980486ba910c1f780228f0bdf617fd">H264SEIUnregistered::x264_build</a></div><div class="ttdeci">int x264_build</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00098">h264_sei.h:98</a></div></div>
<div class="ttc" id="cabac_8c_html_a222d3304683cf997beb1b955febaa9b8"><div class="ttname"><a href="cabac_8c.html#a222d3304683cf997beb1b955febaa9b8">ff_init_cabac_decoder</a></div><div class="ttdeci">int ff_init_cabac_decoder(CABACContext *c, const uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="cabac_8c_source.html#l00177">cabac.c:177</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="structAVCodecContext.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdoc">Chromaticity coordinates of the source primaries. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02402">avcodec.h:2402</a></div></div>
<div class="ttc" id="h264_8h_html_a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973"><div class="ttname"><a href="h264_8h.html#a531c35e38ede3ea4e5ba5afb24b29493afecaaa64bb1dfd9df3d21e7253ecb973">H264_NAL_IDR_SLICE</a></div><div class="ttdef"><b>Definition:</b> <a href="h264_8h_source.html#l00035">h264.h:35</a></div></div>
<div class="ttc" id="common_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdoc">Absolute value, Note, INT_MIN / INT64_MIN result in undefined behavior as they are not representable ...</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a4c5292905142d0ed5627e4158b2381d8"><div class="ttname"><a href="structH264SliceContext.html#a4c5292905142d0ed5627e4158b2381d8">H264SliceContext::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00330">h264dec.h:330</a></div></div>
<div class="ttc" id="avcodec_8h_html_a91bc1a1c1c4a3cc6db54d59705fded0b"><div class="ttname"><a href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a></div><div class="ttdeci">#define FF_THREAD_SLICE</div><div class="ttdoc">Decode more than one part of a single frame at once. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03130">avcodec.h:3130</a></div></div>
<div class="ttc" id="cabac__functions_8h_html"><div class="ttname"><a href="cabac__functions_8h.html">cabac_functions.h</a></div><div class="ttdoc">Context Adaptive Binary Arithmetic Coder inline functions. </div></div>
<div class="ttc" id="structAVCodecContext_html_a6927dc652ae6241f1dfdbad4e12d3a40"><div class="ttname"><a href="structAVCodecContext.html#a6927dc652ae6241f1dfdbad4e12d3a40">AVCodecContext::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">level </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03290">avcodec.h:3290</a></div></div>
<div class="ttc" id="structPPS_html_a5629d24334617c9d043a6714d6f8d126"><div class="ttname"><a href="structPPS.html#a5629d24334617c9d043a6714d6f8d126">PPS::init_qp</a></div><div class="ttdeci">int init_qp</div><div class="ttdoc">pic_init_qp_minus26 + 26 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00117">h264_ps.h:117</a></div></div>
<div class="ttc" id="h264dec_8h_html"><div class="ttname"><a href="h264dec_8h.html">h264dec.h</a></div><div class="ttdoc">H.264 / AVC / MPEG-4 part10 codec. </div></div>
<div class="ttc" id="structH264Context_html_a0881a5ed88c46eb8180701365f48d772"><div class="ttname"><a href="structH264Context.html#a0881a5ed88c46eb8180701365f48d772">H264Context::mmco_reset</a></div><div class="ttdeci">int mmco_reset</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00477">h264dec.h:477</a></div></div>
<div class="ttc" id="structH264Context_html_afdb6dbe908dce078c47d5485c08ed0c1"><div class="ttname"><a href="structH264Context.html#afdb6dbe908dce078c47d5485c08ed0c1">H264Context::slice_ctx</a></div><div class="ttdeci">H264SliceContext * slice_ctx</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00354">h264dec.h:354</a></div></div>
<div class="ttc" id="structSPS_html_a2d522ab7c981c5869a24a99d9bbdcd28"><div class="ttname"><a href="structSPS.html#a2d522ab7c981c5869a24a99d9bbdcd28">SPS::direct_8x8_inference_flag</a></div><div class="ttdeci">int direct_8x8_inference_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00063">h264_ps.h:63</a></div></div>
<div class="ttc" id="avcodec_8h_html_a6101c3b2a02c61ea41f3c97e88b64d39"><div class="ttname"><a href="avcodec_8h.html#a6101c3b2a02c61ea41f3c97e88b64d39">AV_EF_EXPLODE</a></div><div class="ttdeci">#define AV_EF_EXPLODE</div><div class="ttdoc">abort decoding on minor error detection </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02986">avcodec.h:2986</a></div></div>
<div class="ttc" id="structH264Ref_html_ac5e10b4e70623d55e5ab972331869786"><div class="ttname"><a href="structH264Ref.html#ac5e10b4e70623d55e5ab972331869786">H264Ref::reference</a></div><div class="ttdeci">int reference</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00174">h264dec.h:174</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a5c62b9c1528a272923ea2a4b86dea31a"><div class="ttname"><a href="structAVCodecContext.html#a5c62b9c1528a272923ea2a4b86dea31a">AVCodecContext::ticks_per_frame</a></div><div class="ttdeci">int ticks_per_frame</div><div class="ttdoc">For some codecs, the time base is closer to the field rate than the frame rate. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01832">avcodec.h:1832</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a70d1d0d049925c935855503135b8181d"><div class="ttname"><a href="structH264SliceContext.html#a70d1d0d049925c935855503135b8181d">H264SliceContext::top_borders_allocated</a></div><div class="ttdeci">int top_borders_allocated[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00292">h264dec.h:292</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a6f8c2bd9b4ad9f856c922bd68aad0487"><div class="ttname"><a href="h264__slice_8c.html#a6f8c2bd9b4ad9f856c922bd68aad0487">pic_is_unused</a></div><div class="ttdeci">static int pic_is_unused(H264Context *h, H264Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00256">h264_slice.c:256</a></div></div>
<div class="ttc" id="ffplay_8c_html_a5418f9bead37938691fa4c3d3ab21e5e"><div class="ttname"><a href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a></div><div class="ttdeci">static void fill_rectangle(int x, int y, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00790">ffplay.c:790</a></div></div>
<div class="ttc" id="h264dec_8h_html_a005ab8cecd178a9871bc58661d06692e"><div class="ttname"><a href="h264dec_8h.html#a005ab8cecd178a9871bc58661d06692e">FIELD_OR_MBAFF_PICTURE</a></div><div class="ttdeci">#define FIELD_OR_MBAFF_PICTURE(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00091">h264dec.h:91</a></div></div>
<div class="ttc" id="structH264SEIA53Caption_html_a8ac17ce2b7d3547504d0b967d1e3614d"><div class="ttname"><a href="structH264SEIA53Caption.html#a8ac17ce2b7d3547504d0b967d1e3614d">H264SEIA53Caption::a53_caption</a></div><div class="ttdeci">uint8_t * a53_caption</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00094">h264_sei.h:94</a></div></div>
<div class="ttc" id="structH2645NAL_html_a5d0ad2beb99e26935c34dc944d61c741"><div class="ttname"><a href="structH2645NAL.html#a5d0ad2beb99e26935c34dc944d61c741">H2645NAL::ref_idc</a></div><div class="ttdeci">int ref_idc</div><div class="ttdoc">H.264 only, nal_ref_idc. </div><div class="ttdef"><b>Definition:</b> <a href="h2645__parse_8h_source.html#l00065">h2645_parse.h:65</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a27b9bae7c36430b2cc94a91805a7cf7f"><div class="ttname"><a href="h264__slice_8c.html#a27b9bae7c36430b2cc94a91805a7cf7f">init_scan_tables</a></div><div class="ttdeci">static void init_scan_tables(H264Context *h)</div><div class="ttdoc">initialize scan tables </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00733">h264_slice.c:733</a></div></div>
<div class="ttc" id="cabac__functions_8h_html_afcc6359f0421928ee881270e37cee8e6"><div class="ttname"><a href="cabac__functions_8h.html#afcc6359f0421928ee881270e37cee8e6">get_cabac_terminate</a></div><div class="ttdeci">static int av_unused get_cabac_terminate(CABACContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="cabac__functions_8h_source.html#l00178">cabac_functions.h:178</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01873">avcodec.h:1873</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aa86aa0d0bd703b70648f66e6163c2f5f"><div class="ttname"><a href="structH264SliceContext.html#aa86aa0d0bd703b70648f66e6163c2f5f">H264SliceContext::mb_y</a></div><div class="ttdeci">int mb_y</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00234">h264dec.h:234</a></div></div>
<div class="ttc" id="structH264SEIFramePacking_html_acc259fa1fc862d183a9c3336020c55e5"><div class="ttname"><a href="structH264SEIFramePacking.html#acc259fa1fc862d183a9c3336020c55e5">H264SEIFramePacking::quincunx_sampling_flag</a></div><div class="ttdeci">int quincunx_sampling_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00124">h264_sei.h:124</a></div></div>
<div class="ttc" id="vf__mcdeint_8c_html_a22dd5e4b362bda39fe025467d2d1ecf5"><div class="ttname"><a href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a></div><div class="ttdeci">if(ret&lt; 0)</div><div class="ttdef"><b>Definition:</b> <a href="vf__mcdeint_8c_source.html#l00282">vf_mcdeint.c:282</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a1455e5fb4ec9fc402e3fa8a65211bacd"><div class="ttname"><a href="pixfmt_8h.html#a1455e5fb4ec9fc402e3fa8a65211bacd">AV_PIX_FMT_YUV444P9</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV444P9</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00350">pixfmt.h:350</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a5cca86880e9be72c89bca1c7a41eec99"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a5cca86880e9be72c89bca1c7a41eec99">AV_STEREO3D_FLAG_INVERT</a></div><div class="ttdeci">#define AV_STEREO3D_FLAG_INVERT</div><div class="ttdoc">Inverted views, Right/Bottom represents the left view. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00114">stereo3d.h:114</a></div></div>
<div class="ttc" id="pixfmt_8h_html_ae081a48741bb30a5028a1745a5ade38e"><div class="ttname"><a href="pixfmt_8h.html#ae081a48741bb30a5028a1745a5ade38e">AV_PIX_FMT_GBRP14</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP14</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00369">pixfmt.h:369</a></div></div>
<div class="ttc" id="structH2645NAL_html_a8108039d7b4892881dfd0f2a7f55619b"><div class="ttname"><a href="structH2645NAL.html#a8108039d7b4892881dfd0f2a7f55619b">H2645NAL::type</a></div><div class="ttdeci">int type</div><div class="ttdoc">NAL unit type. </div><div class="ttdef"><b>Definition:</b> <a href="h2645__parse_8h_source.html#l00052">h2645_parse.h:52</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980aa46dd1294d9ce2711d098a7553eb3655"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980aa46dd1294d9ce2711d098a7553eb3655">SEI_PIC_STRUCT_BOTTOM_FIELD</a></div><div class="ttdoc">2: bottom field </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00044">h264_sei.h:44</a></div></div>
<div class="ttc" id="display_8c_html_a5964303bfe085ad33683bc2454768d4a"><div class="ttname"><a href="display_8c.html#a5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a></div><div class="ttdeci">void av_display_rotation_set(int32_t matrix[9], double angle)</div><div class="ttdoc">Initialize a transformation matrix describing a pure counterclockwise rotation by the specified angle...</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00050">display.c:50</a></div></div>
<div class="ttc" id="sinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00036">sinewin_tablegen_template.c:36</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aafce51dfb8b012df5cbbf59918c410f29">AVCOL_RANGE_JPEG</a></div><div class="ttdoc">the normal 2^n-1 &quot;JPEG&quot; YUV ranges </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00474">pixfmt.h:474</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ab6c605a4f84ed6cfda07cbabd98f708f"><div class="ttname"><a href="h264__slice_8c.html#ab6c605a4f84ed6cfda07cbabd98f708f">init_table_pools</a></div><div class="ttdeci">static int init_table_pools(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00160">h264_slice.c:160</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a599e4b9d4fc650cef865b765f98aff7d"><div class="ttname"><a href="structH264SliceContext.html#a599e4b9d4fc650cef865b765f98aff7d">H264SliceContext::edge_emu_buffer</a></div><div class="ttdeci">uint8_t * edge_emu_buffer</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00288">h264dec.h:288</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a1ea7966fe2696b13348a3cf0544e3caa"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a1ea7966fe2696b13348a3cf0544e3caa">AV_STEREO3D_COLUMNS</a></div><div class="ttdoc">Views are packed per column. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00107">stereo3d.h:107</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a999fe74dbf0606daebe9691d6c489864"><div class="ttname"><a href="structH264SliceContext.html#a999fe74dbf0606daebe9691d6c489864">H264SliceContext::top_type</a></div><div class="ttdeci">int top_type</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00218">h264dec.h:218</a></div></div>
<div class="ttc" id="golomb_8h_html_af09ebe1db4301aaa62f22ec381c89bd2"><div class="ttname"><a href="golomb_8h.html#af09ebe1db4301aaa62f22ec381c89bd2">get_ue_golomb_long</a></div><div class="ttdeci">static unsigned get_ue_golomb_long(GetBitContext *gb)</div><div class="ttdoc">Read an unsigned Exp-Golomb code in the range 0 to UINT32_MAX-1. </div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00085">golomb.h:85</a></div></div>
<div class="ttc" id="group__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="structPPS_html_aa5e560485030a6b329142ebcfcfb0ff0"><div class="ttname"><a href="structPPS.html#aa5e560485030a6b329142ebcfcfb0ff0">PPS::pic_order_present</a></div><div class="ttdeci">int pic_order_present</div><div class="ttdoc">pic_order_present_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00111">h264_ps.h:111</a></div></div>
<div class="ttc" id="structH264Context_html_ae8a6151f1996c0335542d95e3173df03"><div class="ttname"><a href="structH264Context.html#ae8a6151f1996c0335542d95e3173df03">H264Context::zigzag_scan_q0</a></div><div class="ttdeci">uint8_t zigzag_scan_q0[16]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00431">h264dec.h:431</a></div></div>
<div class="ttc" id="structAVFrame_html_aed14fa772ce46881020fd1545c86432c"><div class="ttname"><a href="structAVFrame.html#aed14fa772ce46881020fd1545c86432c">AVFrame::format</a></div><div class="ttdeci">int format</div><div class="ttdoc">format of the frame, -1 if unknown or unset Values correspond to enum AVPixelFormat for video frames...</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00254">frame.h:254</a></div></div>
<div class="ttc" id="structH264Context_html_a8af49eba92ae68b5d53b07da94361c3c"><div class="ttname"><a href="structH264Context.html#a8af49eba92ae68b5d53b07da94361c3c">H264Context::bit_depth_luma</a></div><div class="ttdeci">int bit_depth_luma</div><div class="ttdoc">luma bit depth from sps to detect changes </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00455">h264dec.h:455</a></div></div>
<div class="ttc" id="structH264Context_html_a8f1e24c748e2746f4574d75242819090"><div class="ttname"><a href="structH264Context.html#a8f1e24c748e2746f4574d75242819090">H264Context::chroma_format_idc</a></div><div class="ttdeci">int chroma_format_idc</div><div class="ttdoc">chroma format from sps to detect changes </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00456">h264dec.h:456</a></div></div>
<div class="ttc" id="structH264Context_html_a6adaf2e2e936aec1f0004aa1d51fcb09"><div class="ttname"><a href="structH264Context.html#a6adaf2e2e936aec1f0004aa1d51fcb09">H264Context::vdsp</a></div><div class="ttdeci">VideoDSPContext vdsp</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00344">h264dec.h:344</a></div></div>
<div class="ttc" id="structSPS_html_ab21bf601e5fa957560646bdfc73956e9"><div class="ttname"><a href="structSPS.html#ab21bf601e5fa957560646bdfc73956e9">SPS::timing_info_present_flag</a></div><div class="ttdeci">int timing_info_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00079">h264_ps.h:79</a></div></div>
<div class="ttc" id="structAVFrame_html_a02ca9bb7f500d3d850f8736f3cb29c6c"><div class="ttname"><a href="structAVFrame.html#a02ca9bb7f500d3d850f8736f3cb29c6c">AVFrame::coded_picture_number</a></div><div class="ttdeci">int coded_picture_number</div><div class="ttdoc">picture number in bitstream order </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00295">frame.h:295</a></div></div>
<div class="ttc" id="structAVStereo3D_html_a052514d0376a94e58e3eb9db3db2a7ce"><div class="ttname"><a href="structAVStereo3D.html#a052514d0376a94e58e3eb9db3db2a7ce">AVStereo3D::type</a></div><div class="ttdeci">enum AVStereo3DType type</div><div class="ttdoc">How views are packed within the video. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00127">stereo3d.h:127</a></div></div>
<div class="ttc" id="structH264Context_html_a2e41c5a975bc4f64ebf30b1e61c233d0"><div class="ttname"><a href="structH264Context.html#a2e41c5a975bc4f64ebf30b1e61c233d0">H264Context::mb_stride</a></div><div class="ttdeci">int mb_stride</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00440">h264dec.h:440</a></div></div>
<div class="ttc" id="structH264Context_html_ac329bcb2a2469947d750513ed310e889"><div class="ttname"><a href="structH264Context.html#ac329bcb2a2469947d750513ed310e889">H264Context::postpone_filter</a></div><div class="ttdeci">int postpone_filter</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00383">h264dec.h:383</a></div></div>
<div class="ttc" id="mpegutils_8h_html_a60ada078b2b0f8fd6504484a68df92e4"><div class="ttname"><a href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a></div><div class="ttdeci">#define IS_INTERLACED(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00085">mpegutils.h:85</a></div></div>
<div class="ttc" id="structH264Context_html_a4ffe05fa45bcaf7998889085ebce941a"><div class="ttname"><a href="structH264Context.html#a4ffe05fa45bcaf7998889085ebce941a">H264Context::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00343">h264dec.h:343</a></div></div>
<div class="ttc" id="structH264Context_html_a4715363c28118c1b52ab78582ad83442"><div class="ttname"><a href="structH264Context.html#a4715363c28118c1b52ab78582ad83442">H264Context::zigzag_scan8x8_q0</a></div><div class="ttdeci">uint8_t zigzag_scan8x8_q0[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00432">h264dec.h:432</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a98d0b74e6ef1318f91629879f59d2dab"><div class="ttname"><a href="pixfmt_8h.html#a98d0b74e6ef1318f91629879f59d2dab">AV_PIX_FMT_YUV420P14</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV420P14</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00359">pixfmt.h:359</a></div></div>
<div class="ttc" id="avcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div><div class="ttdoc">Libavcodec external API header. </div></div>
<div class="ttc" id="h264data_8h_html"><div class="ttname"><a href="h264data_8h.html">h264data.h</a></div></div>
<div class="ttc" id="h264dec_8h_html_a8a553d2528997041b79fa929a4583614"><div class="ttname"><a href="h264dec_8h.html#a8a553d2528997041b79fa929a4583614">MAX_DELAYED_PIC_COUNT</a></div><div class="ttdeci">#define MAX_DELAYED_PIC_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00056">h264dec.h:56</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a31a22c8f7deafe008953aabadc8ef3fe"><div class="ttname"><a href="structH264SliceContext.html#a31a22c8f7deafe008953aabadc8ef3fe">H264SliceContext::last_qscale_diff</a></div><div class="ttdeci">int last_qscale_diff</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00194">h264dec.h:194</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ggae01fa7e427274293aacdf2adc17076bca3e01b882b6fa04724076067d6d9f8b69"><div class="ttname"><a href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca3e01b882b6fa04724076067d6d9f8b69">AV_FRAME_DATA_DISPLAYMATRIX</a></div><div class="ttdoc">This side data contains a 3x3 transformation matrix describing an affine transformation that needs to...</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00083">frame.h:83</a></div></div>
<div class="ttc" id="structH264ParamSets_html_af889ad6cddffc2917f9f1dd4d4e06dd0"><div class="ttname"><a href="structH264ParamSets.html#af889ad6cddffc2917f9f1dd4d4e06dd0">H264ParamSets::pps_list</a></div><div class="ttdeci">AVBufferRef * pps_list[MAX_PPS_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00139">h264_ps.h:139</a></div></div>
<div class="ttc" id="structAVCodecContext_html_adc5f65d6099fd8339c1580c091777223"><div class="ttname"><a href="structAVCodecContext.html#adc5f65d6099fd8339c1580c091777223">AVCodecContext::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01703">avcodec.h:1703</a></div></div>
<div class="ttc" id="golomb_8h_html_a7c893c9caa7bdb3efd220cb524df7df1"><div class="ttname"><a href="golomb_8h.html#a7c893c9caa7bdb3efd220cb524df7df1">get_ue_golomb_31</a></div><div class="ttdeci">static int get_ue_golomb_31(GetBitContext *gb)</div><div class="ttdoc">read unsigned exp golomb code, constraint to a max of 31. </div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00100">golomb.h:100</a></div></div>
<div class="ttc" id="structAVHWAccel_html"><div class="ttname"><a href="structAVHWAccel.html">AVHWAccel</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03739">avcodec.h:3739</a></div></div>
<div class="ttc" id="structH264POCContext_html_a640fc14ce6f7f9d3ac8aa0e103115170"><div class="ttname"><a href="structH264POCContext.html#a640fc14ce6f7f9d3ac8aa0e103115170">H264POCContext::delta_poc_bottom</a></div><div class="ttdeci">int delta_poc_bottom</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00046">h264_parse.h:46</a></div></div>
<div class="ttc" id="structERContext_html_a27b3944c5dfb8f8135bcf2b1f3b00417"><div class="ttname"><a href="structERContext.html#a27b3944c5dfb8f8135bcf2b1f3b00417">ERContext::next_pic</a></div><div class="ttdeci">ERPicture next_pic</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00074">error_resilience.h:74</a></div></div>
<div class="ttc" id="structAVFrame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdoc">For video, size in bytes of each picture line. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00221">frame.h:221</a></div></div>
<div class="ttc" id="structH264Context_html_aa744692c56b90c1cb57afea40f9f14d2"><div class="ttname"><a href="structH264Context.html#aa744692c56b90c1cb57afea40f9f14d2">H264Context::short_ref</a></div><div class="ttdeci">H264Picture * short_ref[32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00465">h264dec.h:465</a></div></div>
<div class="ttc" id="structH264Context_html_afd86434037ab7a0d2df99a024f46ecf4"><div class="ttname"><a href="structH264Context.html#afd86434037ab7a0d2df99a024f46ecf4">H264Context::next_outputed_poc</a></div><div class="ttdeci">int next_outputed_poc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00470">h264dec.h:470</a></div></div>
<div class="ttc" id="h264__cabac_8c_html_aacb6c6e44ab941f9a05d0cf897def003"><div class="ttname"><a href="h264__cabac_8c.html#aacb6c6e44ab941f9a05d0cf897def003">ff_h264_decode_mb_cabac</a></div><div class="ttdeci">int ff_h264_decode_mb_cabac(const H264Context *h, H264SliceContext *sl)</div><div class="ttdoc">Decode a macroblock. </div><div class="ttdef"><b>Definition:</b> <a href="h264__cabac_8c_source.html#l01914">h264_cabac.c:1914</a></div></div>
<div class="ttc" id="structH264Context_html_aa407392c074d869de73748cc036870ee"><div class="ttname"><a href="structH264Context.html#aa407392c074d869de73748cc036870ee">H264Context::explicit_ref_marking</a></div><div class="ttdeci">int explicit_ref_marking</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00478">h264dec.h:478</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a6176782f4b7b21776faf6738baa520e2"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a6176782f4b7b21776faf6738baa520e2">AV_STEREO3D_SIDEBYSIDE_QUINCUNX</a></div><div class="ttdoc">Views are next to each other, but when upscaling apply a checkerboard pattern. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00087">stereo3d.h:87</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga1a6a486e686ab6c581ffffcb88cb31b3"><div class="ttname"><a href="group__lavc__core.html#ga1a6a486e686ab6c581ffffcb88cb31b3">AV_CODEC_FLAG2_FAST</a></div><div class="ttdeci">#define AV_CODEC_FLAG2_FAST</div><div class="ttdoc">Allow non spec compliant speedup tricks. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="structH264Picture_html_aaa21cecff3d0b95715b2f173859997e2"><div class="ttname"><a href="structH264Picture.html#aaa21cecff3d0b95715b2f173859997e2">H264Picture::field_poc</a></div><div class="ttdeci">int field_poc[2]</div><div class="ttdoc">top/bottom POC </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00147">h264dec.h:147</a></div></div>
<div class="ttc" id="structH264SEIPictureTiming_html_a9edd57d8cf631178246b59160ad4110c"><div class="ttname"><a href="structH264SEIPictureTiming.html#a9edd57d8cf631178246b59160ad4110c">H264SEIPictureTiming::pic_struct</a></div><div class="ttdeci">SEI_PicStructType pic_struct</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00067">h264_sei.h:67</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a1c52e4da25b608b2b9a80af21bb86d58"><div class="ttname"><a href="structAVCodecContext.html#a1c52e4da25b608b2b9a80af21bb86d58">AVCodecContext::debug</a></div><div class="ttdeci">int debug</div><div class="ttdoc">debug </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02927">avcodec.h:2927</a></div></div>
<div class="ttc" id="pthread__frame_8c_html_a175c018f02630ddf4e3824b2c8b9184f"><div class="ttname"><a href="pthread__frame_8c.html#a175c018f02630ddf4e3824b2c8b9184f">ff_thread_get_buffer</a></div><div class="ttdeci">int ff_thread_get_buffer(AVCodecContext *avctx, ThreadFrame *f, int flags)</div><div class="ttdoc">Wrapper around get_buffer() for frame-multithreaded codecs. </div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00841">pthread_frame.c:841</a></div></div>
<div class="ttc" id="error__resilience_8h_html"><div class="ttname"><a href="error__resilience_8h.html">error_resilience.h</a></div></div>
<div class="ttc" id="structH264Context_html_a4f5a42e1149a1de0eb3b626a83efd3a3"><div class="ttname"><a href="structH264Context.html#a4f5a42e1149a1de0eb3b626a83efd3a3">H264Context::max_contexts</a></div><div class="ttdeci">int max_contexts</div><div class="ttdoc">Max number of threads / contexts. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00498">h264dec.h:498</a></div></div>
<div class="ttc" id="structH264Context_html_a82fbe1bd8f2f0ad8f3f90ae3d5a98264"><div class="ttname"><a href="structH264Context.html#a82fbe1bd8f2f0ad8f3f90ae3d5a98264">H264Context::recovery_frame</a></div><div class="ttdeci">int recovery_frame</div><div class="ttdoc">recovery_frame is the frame_num at which the next frame should be fully constructed. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00527">h264dec.h:527</a></div></div>
<div class="ttc" id="structAVCodecContext_html"><div class="ttname"><a href="structAVCodecContext.html">AVCodecContext</a></div><div class="ttdoc">main external API structure. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01686">avcodec.h:1686</a></div></div>
<div class="ttc" id="display_8c_html_add236b7ced34637aa9f0a9bceaeac5c3"><div class="ttname"><a href="display_8c.html#add236b7ced34637aa9f0a9bceaeac5c3">av_display_matrix_flip</a></div><div class="ttdeci">void av_display_matrix_flip(int32_t matrix[9], int hflip, int vflip)</div><div class="ttdoc">Flip the input matrix horizontally and/or vertically. </div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00065">display.c:65</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a7acc1e9cb7de31c1fe13bac51dab8d6c"><div class="ttname"><a href="structH264SliceContext.html#a7acc1e9cb7de31c1fe13bac51dab8d6c">H264SliceContext::qp_thresh</a></div><div class="ttdeci">int qp_thresh</div><div class="ttdoc">QP threshold to skip loopfilter. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00193">h264dec.h:193</a></div></div>
<div class="ttc" id="structH264SliceContext_html_acb22821480b4c72ca917d5941828a59e"><div class="ttname"><a href="structH264SliceContext.html#acb22821480b4c72ca917d5941828a59e">H264SliceContext::explicit_ref_marking</a></div><div class="ttdeci">int explicit_ref_marking</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00328">h264dec.h:328</a></div></div>
<div class="ttc" id="structAVBufferRef_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="structAVBufferRef.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdoc">The data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="structH2645NAL_html"><div class="ttname"><a href="structH2645NAL.html">H2645NAL</a></div><div class="ttdef"><b>Definition:</b> <a href="h2645__parse_8h_source.html#l00031">h2645_parse.h:31</a></div></div>
<div class="ttc" id="regdef_8h_html_ae771351dd440a8640270282362e338d0"><div class="ttname"><a href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a></div><div class="ttdeci">#define fp</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00044">regdef.h:44</a></div></div>
<div class="ttc" id="structAVFrameSideData_html_a76937ad48652a5a0cc4bff65fc6c886e"><div class="ttname"><a href="structAVFrameSideData.html#a76937ad48652a5a0cc4bff65fc6c886e">AVFrameSideData::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00151">frame.h:151</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a79a71eb50219252f898f53fc0e23ab09"><div class="ttname"><a href="h264__slice_8c.html#a79a71eb50219252f898f53fc0e23ab09">h264_slice_header_parse</a></div><div class="ttdeci">static int h264_slice_header_parse(const H264Context *h, H264SliceContext *sl, const H2645NAL *nal)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l01549">h264_slice.c:1549</a></div></div>
<div class="ttc" id="structH264SEIContext_html_a8f5d97b6a0a4ec462efdebaa0c41a013"><div class="ttname"><a href="structH264SEIContext.html#a8f5d97b6a0a4ec462efdebaa0c41a013">H264SEIContext::a53_caption</a></div><div class="ttdeci">H264SEIA53Caption a53_caption</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00149">h264_sei.h:149</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_a5bc5fa69bee375df074734a2c4858604"><div class="ttname"><a href="avisynth__c_8h.html#a5bc5fa69bee375df074734a2c4858604">buf</a></div><div class="ttdeci">void * buf</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00690">avisynth_c.h:690</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a573424080ad5d83439a139776a1646aa"><div class="ttname"><a href="structH264SliceContext.html#a573424080ad5d83439a139776a1646aa">H264SliceContext::resync_mb_y</a></div><div class="ttdeci">int resync_mb_y</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00237">h264dec.h:237</a></div></div>
<div class="ttc" id="structH264PredWeightTable_html_a64b49108b9663a7408874580f7df8562"><div class="ttname"><a href="structH264PredWeightTable.html#a64b49108b9663a7408874580f7df8562">H264PredWeightTable::implicit_weight</a></div><div class="ttdeci">int implicit_weight[48][48][2]</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00040">h264_parse.h:40</a></div></div>
<div class="ttc" id="structH264Picture_html_a707472788434e68c8a89219b61b4f386"><div class="ttname"><a href="structH264Picture.html#a707472788434e68c8a89219b61b4f386">H264Picture::qscale_table</a></div><div class="ttdeci">int8_t * qscale_table</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00133">h264dec.h:133</a></div></div>
<div class="ttc" id="h264dec_8h_html_a21d6ce2d107485821da2cf01ce14b3b3"><div class="ttname"><a href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a></div><div class="ttdeci">static const uint8_t scan8[16 *3+3]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00656">h264dec.h:656</a></div></div>
<div class="ttc" id="h264__cabac_8c_html_a4542b0e4de6c4c58f9bd4cfa90d1d462"><div class="ttname"><a href="h264__cabac_8c.html#a4542b0e4de6c4c58f9bd4cfa90d1d462">CABAC</a></div><div class="ttdeci">#define CABAC(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__cabac_8c_source.html#l00028">h264_cabac.c:28</a></div></div>
<div class="ttc" id="group__lavu__buffer_html_ga27f37cc004f768b00442b6cb08091686"><div class="ttname"><a href="group__lavu__buffer.html#ga27f37cc004f768b00442b6cb08091686">av_buffer_allocz</a></div><div class="ttdeci">AVBufferRef * av_buffer_allocz(int size)</div><div class="ttdoc">Same as av_buffer_alloc(), except the returned buffer will be initialized to zero. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00082">buffer.c:82</a></div></div>
<div class="ttc" id="structAVBufferRef_html_a3c692274c56720d7903bbd35bcaec3a2"><div class="ttname"><a href="structAVBufferRef.html#a3c692274c56720d7903bbd35bcaec3a2">AVBufferRef::buffer</a></div><div class="ttdeci">AVBuffer * buffer</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00082">buffer.h:82</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a8484c6fa0ed16cb11b33fa44fe11c504"><div class="ttname"><a href="h264__slice_8c.html#a8484c6fa0ed16cb11b33fa44fe11c504">field_scan8x8_cavlc</a></div><div class="ttdeci">static const uint8_t field_scan8x8_cavlc[64+1]</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00076">h264_slice.c:76</a></div></div>
<div class="ttc" id="get__bits_8h_html_a505086b48eb34d53e47f60ac777204b9"><div class="ttname"><a href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a></div><div class="ttdeci">static unsigned int get_bits1(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00299">get_bits.h:299</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a2095c546851496e10160077ab89c845c"><div class="ttname"><a href="pixfmt_8h.html#a2095c546851496e10160077ab89c845c">AV_PIX_FMT_YUV420P10</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV420P10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00351">pixfmt.h:351</a></div></div>
<div class="ttc" id="structH264SEIPictureTiming_html"><div class="ttname"><a href="structH264SEIPictureTiming.html">H264SEIPictureTiming</a></div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00066">h264_sei.h:66</a></div></div>
<div class="ttc" id="structAVCodecContext_html_ab2ebb76836ef4cd9822b5077c17b33d0"><div class="ttname"><a href="structAVCodecContext.html#ab2ebb76836ef4cd9822b5077c17b33d0">AVCodecContext::coded_height</a></div><div class="ttdeci">int coded_height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01888">avcodec.h:1888</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea83789bae2515a1ce384a88f074244e4e"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea83789bae2515a1ce384a88f074244e4e">AV_PICTURE_TYPE_SP</a></div><div class="ttdoc">Switching Predicted. </div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00279">avutil.h:279</a></div></div>
<div class="ttc" id="structH264POCContext_html_a41404d1711628d9819e031047ef30cee"><div class="ttname"><a href="structH264POCContext.html#a41404d1711628d9819e031047ef30cee">H264POCContext::prev_frame_num</a></div><div class="ttdeci">int prev_frame_num</div><div class="ttdoc">frame_num of the last pic for POC type 1/2 </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00053">h264_parse.h:53</a></div></div>
<div class="ttc" id="avcodec_8h_html_a03b58ae91087dc342ceca69f67ee4512"><div class="ttname"><a href="avcodec_8h.html#a03b58ae91087dc342ceca69f67ee4512">FF_CODEC_PROPERTY_CLOSED_CAPTIONS</a></div><div class="ttdeci">#define FF_CODEC_PROPERTY_CLOSED_CAPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03521">avcodec.h:3521</a></div></div>
<div class="ttc" id="group__lavu__frame_html_gab4caf9361b00f9b2ab57c222dce3fec4"><div class="ttname"><a href="group__lavu__frame.html#gab4caf9361b00f9b2ab57c222dce3fec4">av_frame_new_side_data</a></div><div class="ttdeci">AVFrameSideData * av_frame_new_side_data(AVFrame *frame, enum AVFrameSideDataType type, int size)</div><div class="ttdoc">Add a new side data to a frame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00627">frame.c:627</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ae02b07f823f7ff8170d226ca01a53088"><div class="ttname"><a href="structH264SliceContext.html#ae02b07f823f7ff8170d226ca01a53088">H264SliceContext::non_zero_count_cache</a></div><div class="ttdeci">uint8_t non_zero_count_cache[15 *8]</div><div class="ttdoc">non zero coeff count cache. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00298">h264dec.h:298</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980a0fb580d3929741f4c0ed5111fdd00e7e"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980a0fb580d3929741f4c0ed5111fdd00e7e">SEI_PIC_STRUCT_TOP_BOTTOM_TOP</a></div><div class="ttdoc">5: top field, bottom field, top field repeated, in that order </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00047">h264_sei.h:47</a></div></div>
<div class="ttc" id="group__lavu__bufferpool_html_ga7b76781c5944b3bb59b2e3b1a8994e4a"><div class="ttname"><a href="group__lavu__bufferpool.html#ga7b76781c5944b3bb59b2e3b1a8994e4a">av_buffer_pool_uninit</a></div><div class="ttdeci">void av_buffer_pool_uninit(AVBufferPool **ppool)</div><div class="ttdoc">Mark the pool as being available for freeing. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00274">buffer.c:274</a></div></div>
<div class="ttc" id="h264dec_8h_html_ac849bdce122304e45cd342a1ac227aed"><div class="ttname"><a href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a></div><div class="ttdeci">#define FRAME_MBAFF(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00073">h264dec.h:73</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdoc">YUV colorspace type. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02416">avcodec.h:2416</a></div></div>
<div class="ttc" id="structAVCodecContext_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="structAVCodecContext.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdoc">Color Transfer Characteristic. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02409">avcodec.h:2409</a></div></div>
<div class="ttc" id="h264dec_8h_html_a250e49ca0074313affcaf196149d88ae"><div class="ttname"><a href="h264dec_8h.html#a250e49ca0074313affcaf196149d88ae">LBOT</a></div><div class="ttdeci">#define LBOT</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00077">h264dec.h:77</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5affe7961ec99ad3559ab175e557bf908e"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5affe7961ec99ad3559ab175e557bf908e">AV_PIX_FMT_VDPAU</a></div><div class="ttdoc">HW acceleration through VDPAU, Picture.data[3] contains a VdpVideoSurface. </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00209">pixfmt.h:209</a></div></div>
<div class="ttc" id="h264dec_8h_html_a745c1af59149cbb5eacc9b99a86610f9"><div class="ttname"><a href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a></div><div class="ttdeci">static av_always_inline uint32_t pack16to32(unsigned a, unsigned b)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00672">h264dec.h:672</a></div></div>
<div class="ttc" id="structH264Picture_html_a5ba249769b6822015a3119eaf630b911"><div class="ttname"><a href="structH264Picture.html#a5ba249769b6822015a3119eaf630b911">H264Picture::ref_index</a></div><div class="ttdeci">int8_t * ref_index[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00145">h264dec.h:145</a></div></div>
<div class="ttc" id="h264__picture_8c_html_af2fc1e22bb4ced1cd420710fd2340017"><div class="ttname"><a href="h264__picture_8c.html#af2fc1e22bb4ced1cd420710fd2340017">ff_h264_ref_picture</a></div><div class="ttdeci">int ff_h264_ref_picture(H264Context *h, H264Picture *dst, H264Picture *src)</div><div class="ttdef"><b>Definition:</b> <a href="h264__picture_8c_source.html#l00067">h264_picture.c:67</a></div></div>
<div class="ttc" id="structAVBuffer_html"><div class="ttname"><a href="structAVBuffer.html">AVBuffer</a></div><div class="ttdoc">A reference counted buffer type. </div><div class="ttdef"><b>Definition:</b> <a href="buffer__internal_8h_source.html#l00036">buffer_internal.h:36</a></div></div>
<div class="ttc" id="structH264Context_html_a364d111c7bc8c6595d8764fad495a314"><div class="ttname"><a href="structH264Context.html#a364d111c7bc8c6595d8764fad495a314">H264Context::pixel_shift</a></div><div class="ttdeci">int pixel_shift</div><div class="ttdoc">0 for 8-bit H.264, 1 for high-bit-depth H.264 </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00359">h264dec.h:359</a></div></div>
<div class="ttc" id="structH264Picture_html_a9ac8879154d0c1f31b0e884dd6e98137"><div class="ttname"><a href="structH264Picture.html#a9ac8879154d0c1f31b0e884dd6e98137">H264Picture::mmco_reset</a></div><div class="ttdeci">int mmco_reset</div><div class="ttdoc">MMCO_RESET set this 1. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00150">h264dec.h:150</a></div></div>
<div class="ttc" id="structH264SEIFramePacking_html_a344d8ea80c22a7290362f1c1717720d6"><div class="ttname"><a href="structH264SEIFramePacking.html#a344d8ea80c22a7290362f1c1717720d6">H264SEIFramePacking::content_interpretation_type</a></div><div class="ttdeci">int content_interpretation_type</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00123">h264_sei.h:123</a></div></div>
<div class="ttc" id="structH264Context_html_a42f0e45aad1425374a238dd7f16740b0"><div class="ttname"><a href="structH264Context.html#a42f0e45aad1425374a238dd7f16740b0">H264Context::cur_pic_ptr</a></div><div class="ttdeci">H264Picture * cur_pic_ptr</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00350">h264dec.h:350</a></div></div>
<div class="ttc" id="h264dec_8h_html_a607ad7d3723486a7a0237f07a0206da1"><div class="ttname"><a href="h264dec_8h.html#a607ad7d3723486a7a0237f07a0206da1">LIST_NOT_USED</a></div><div class="ttdeci">#define LIST_NOT_USED</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00395">h264dec.h:395</a></div></div>
<div class="ttc" id="mathops_8h_html_a0729a02967b7934643d747721ecdccbb"><div class="ttname"><a href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a></div><div class="ttdeci">const uint8_t ff_zigzag_direct[64]</div><div class="ttdef"><b>Definition:</b> <a href="mathtables_8c_source.html#l00098">mathtables.c:98</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a42cd44c2819560905709065d0b696868"><div class="ttname"><a href="structH264SliceContext.html#a42cd44c2819560905709065d0b696868">H264SliceContext::mb_uvlinesize</a></div><div class="ttdeci">ptrdiff_t mb_uvlinesize</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00232">h264dec.h:232</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a900125d92abadef7225df0aaf818c9c6"><div class="ttname"><a href="h264__slice_8c.html#a900125d92abadef7225df0aaf818c9c6">h264_slice_header_init</a></div><div class="ttdeci">static int h264_slice_header_init(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00906">h264_slice.c:906</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a9b58576ddc0a23be9f80ee86a2b15a20"><div class="ttname"><a href="structH264SliceContext.html#a9b58576ddc0a23be9f80ee86a2b15a20">H264SliceContext::mb_mbaff</a></div><div class="ttdeci">int mb_mbaff</div><div class="ttdoc">mb_aff_frame &amp;&amp; mb_field_decoding_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00246">h264dec.h:246</a></div></div>
<div class="ttc" id="pthread__frame_8c_html_ab72df5e427afa9ab4020584e33a37b70"><div class="ttname"><a href="pthread__frame_8c.html#ab72df5e427afa9ab4020584e33a37b70">ff_thread_get_format</a></div><div class="ttdeci">enum AVPixelFormat ff_thread_get_format(AVCodecContext *avctx, const enum AVPixelFormat *fmt)</div><div class="ttdoc">Wrapper around get_format() for frame-multithreaded codecs. </div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00815">pthread_frame.c:815</a></div></div>
<div class="ttc" id="structH264Context_html_ac92881ef5e4b0211a34246d45cb6a545"><div class="ttname"><a href="structH264Context.html#ac92881ef5e4b0211a34246d45cb6a545">H264Context::enable_er</a></div><div class="ttdeci">int enable_er</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00556">h264dec.h:556</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a87065facbceef6fc4aa6d1b00042d7cd"><div class="ttname"><a href="pixfmt_8h.html#a87065facbceef6fc4aa6d1b00042d7cd">AV_PIX_FMT_YUV420P9</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV420P9</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00348">pixfmt.h:348</a></div></div>
<div class="ttc" id="mpegutils_8h_html_a69ee557358fd6cd78c0d051e2532c89f"><div class="ttname"><a href="mpegutils_8h.html#a69ee557358fd6cd78c0d051e2532c89f">IS_INTER</a></div><div class="ttdeci">#define IS_INTER(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00081">mpegutils.h:81</a></div></div>
<div class="ttc" id="structH264ParamSets_html_a59f042f452c0d1a745c0dc0a80b17b9c"><div class="ttname"><a href="structH264ParamSets.html#a59f042f452c0d1a745c0dc0a80b17b9c">H264ParamSets::sps</a></div><div class="ttdeci">const SPS * sps</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00145">h264_ps.h:145</a></div></div>
<div class="ttc" id="structPPS_html_a4d3e09e6ac8e04a427cef0b750df74f0"><div class="ttname"><a href="structPPS.html#a4d3e09e6ac8e04a427cef0b750df74f0">PPS::sps_id</a></div><div class="ttdeci">unsigned int sps_id</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00109">h264_ps.h:109</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ae2ed997a4625fdc631efcf809804b254"><div class="ttname"><a href="h264__slice_8c.html#ae2ed997a4625fdc631efcf809804b254">TRANSPOSE</a></div><div class="ttdeci">#define TRANSPOSE(x)</div></div>
<div class="ttc" id="structH264SEIContext_html_afd596ddb9ec0aa85ec1b1973631c965b"><div class="ttname"><a href="structH264SEIContext.html#afd596ddb9ec0aa85ec1b1973631c965b">H264SEIContext::picture_timing</a></div><div class="ttdeci">H264SEIPictureTiming picture_timing</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00147">h264_sei.h:147</a></div></div>
<div class="ttc" id="structSPS_html_a1683e6d71ff227b12a3ffeb1241808b0"><div class="ttname"><a href="structSPS.html#a1683e6d71ff227b12a3ffeb1241808b0">SPS::log2_max_poc_lsb</a></div><div class="ttdeci">int log2_max_poc_lsb</div><div class="ttdoc">log2_max_pic_order_cnt_lsb_minus4 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00051">h264_ps.h:51</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a2fa23639b0154c5bc87a97ddbbbae9ee"><div class="ttname"><a href="structH264SliceContext.html#a2fa23639b0154c5bc87a97ddbbbae9ee">H264SliceContext::poc_lsb</a></div><div class="ttdeci">int poc_lsb</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00331">h264dec.h:331</a></div></div>
<div class="ttc" id="structH264SEIContext_html_abf4373e2101a4f740a584179a9f98c5a"><div class="ttname"><a href="structH264SEIContext.html#abf4373e2101a4f740a584179a9f98c5a">H264SEIContext::recovery_point</a></div><div class="ttdeci">H264SEIRecoveryPoint recovery_point</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00151">h264_sei.h:151</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a0472c459734b9637afe44cd490e429d8"><div class="ttname"><a href="structH264SliceContext.html#a0472c459734b9637afe44cd490e429d8">H264SliceContext::mb_linesize</a></div><div class="ttdeci">ptrdiff_t mb_linesize</div><div class="ttdoc">may be equal to s-&gt;linesize or s-&gt;linesize * 2, for mbaff </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00231">h264dec.h:231</a></div></div>
<div class="ttc" id="structH264SliceContext_html_af77b5bf5b06aa4c6bdca4fa10b3131e7"><div class="ttname"><a href="structH264SliceContext.html#af77b5bf5b06aa4c6bdca4fa10b3131e7">H264SliceContext::cbp</a></div><div class="ttdeci">int cbp</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00259">h264dec.h:259</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a35e418d6581792c6daa3c0aaba601cb1"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a35e418d6581792c6daa3c0aaba601cb1">AV_PIX_FMT_DXVA2_VLD</a></div><div class="ttdoc">HW decoding through DXVA2, Picture.data[3] contains a LPDIRECT3DSURFACE9 pointer. ...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00148">pixfmt.h:148</a></div></div>
<div class="ttc" id="structH264Context_html_afb16e049eec2446151bfa6065eaece2a"><div class="ttname"><a href="structH264Context.html#afb16e049eec2446151bfa6065eaece2a">H264Context::slice_row</a></div><div class="ttdeci">int16_t slice_row[MAX_SLICES]</div><div class="ttdoc">to detect when MAX_SLICES is too low </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00554">h264dec.h:554</a></div></div>
<div class="ttc" id="libkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00262">libkvazaar.c:262</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a8463f747babbd5fff2ba959dadd006cc"><div class="ttname"><a href="h264__slice_8c.html#a8463f747babbd5fff2ba959dadd006cc">alloc_picture</a></div><div class="ttdeci">static int alloc_picture(H264Context *h, H264Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00187">h264_slice.c:187</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a3fea2fe878ae46131e9010505642b39d"><div class="ttname"><a href="structH264SliceContext.html#a3fea2fe878ae46131e9010505642b39d">H264SliceContext::linesize</a></div><div class="ttdeci">ptrdiff_t linesize</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00230">h264dec.h:230</a></div></div>
<div class="ttc" id="structH264Context_html_aa6dd1c47db3c3451289568fcb37eaaf0"><div class="ttname"><a href="structH264Context.html#aa6dd1c47db3c3451289568fcb37eaaf0">H264Context::block_offset</a></div><div class="ttdeci">int block_offset[2 *(16 *3)]</div><div class="ttdoc">block_offset[ 0..23] for frame macroblocks block_offset[24..47] for field macroblocks ...</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00402">h264dec.h:402</a></div></div>
<div class="ttc" id="structSPS_html_a9f898c38f001b83f5c7321972ab4a1a6"><div class="ttname"><a href="structSPS.html#a9f898c38f001b83f5c7321972ab4a1a6">SPS::time_scale</a></div><div class="ttdeci">uint32_t time_scale</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00081">h264_ps.h:81</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9d7af54227476bc448d263b395d8df35"><div class="ttname"><a href="pixfmt_8h.html#a9d7af54227476bc448d263b395d8df35">AV_PIX_FMT_YUV422P14</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV422P14</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00360">pixfmt.h:360</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a7de060139e9fd1ba12510b9e14e1e259"><div class="ttname"><a href="pixfmt_8h.html#a7de060139e9fd1ba12510b9e14e1e259">AV_PIX_FMT_GBRP12</a></div><div class="ttdeci">#define AV_PIX_FMT_GBRP12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00368">pixfmt.h:368</a></div></div>
<div class="ttc" id="structPPS_html_ade523751b7233a72d6ebdd666398f063"><div class="ttname"><a href="structPPS.html#ade523751b7233a72d6ebdd666398f063">PPS::transform_8x8_mode</a></div><div class="ttdeci">int transform_8x8_mode</div><div class="ttdoc">transform_8x8_mode_flag </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00123">h264_ps.h:123</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a0618bab62fbee63f7dcace3df93c82ce"><div class="ttname"><a href="structH264SliceContext.html#a0618bab62fbee63f7dcace3df93c82ce">H264SliceContext::uvlinesize</a></div><div class="ttdeci">ptrdiff_t uvlinesize</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00230">h264dec.h:230</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a66e08cc645d119c6383c994529f5dff4"><div class="ttname"><a href="pixfmt_8h.html#a66e08cc645d119c6383c994529f5dff4">AV_PIX_FMT_YUV422P10</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV422P10</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00352">pixfmt.h:352</a></div></div>
<div class="ttc" id="structSPS_html_a9865c7e9e1b3cb4021448bc8c7e8f322"><div class="ttname"><a href="structSPS.html#a9865c7e9e1b3cb4021448bc8c7e8f322">SPS::pic_struct_present_flag</a></div><div class="ttdeci">int pic_struct_present_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00091">h264_ps.h:91</a></div></div>
<div class="ttc" id="h264dec_8h_html_a2cde263065fc480ef90778aa2c826b16"><div class="ttname"><a href="h264dec_8h.html#a2cde263065fc480ef90778aa2c826b16">CHROMA444</a></div><div class="ttdeci">#define CHROMA444(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00099">h264dec.h:99</a></div></div>
<div class="ttc" id="stereo3d_8c_html_a9401b2d2cbd0c0988b1cdde6c88f6e6b"><div class="ttname"><a href="stereo3d_8c.html#a9401b2d2cbd0c0988b1cdde6c88f6e6b">av_stereo3d_create_side_data</a></div><div class="ttdeci">AVStereo3D * av_stereo3d_create_side_data(AVFrame *frame)</div><div class="ttdoc">Allocate a complete AVFrameSideData and add it to the frame. </div><div class="ttdef"><b>Definition:</b> <a href="stereo3d_8c_source.html#l00033">stereo3d.c:33</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a0c7c424a1526d27d6d359719c0bea391"><div class="ttname"><a href="structH264SliceContext.html#a0c7c424a1526d27d6d359719c0bea391">H264SliceContext::list_count</a></div><div class="ttdeci">unsigned int list_count</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00272">h264dec.h:272</a></div></div>
<div class="ttc" id="structH264Context_html_aefa4dd77744f5a738d02cd1c342de9c9"><div class="ttname"><a href="structH264Context.html#aefa4dd77744f5a738d02cd1c342de9c9">H264Context::zigzag_scan</a></div><div class="ttdeci">uint8_t zigzag_scan[16]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00425">h264dec.h:425</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a143cd27f91e2f9f4517781dfbf5c6bc1"><div class="ttname"><a href="pixfmt_8h.html#a143cd27f91e2f9f4517781dfbf5c6bc1">AV_PIX_FMT_YUV444P12</a></div><div class="ttdeci">#define AV_PIX_FMT_YUV444P12</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00358">pixfmt.h:358</a></div></div>
<div class="ttc" id="structAVFrame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdoc">pointer to the picture/channel planes. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00204">frame.h:204</a></div></div>
<div class="ttc" id="structH264POCContext_html_ae971208eb58b9e3a14f990a8831fbe8d"><div class="ttname"><a href="structH264POCContext.html#ae971208eb58b9e3a14f990a8831fbe8d">H264POCContext::prev_poc_lsb</a></div><div class="ttdeci">int prev_poc_lsb</div><div class="ttdoc">poc_lsb of the last reference pic for POC type 0 </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00050">h264_parse.h:50</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a8aa4245e89614c37b985310da7f1c6f5"><div class="ttname"><a href="h264__slice_8c.html#a8aa4245e89614c37b985310da7f1c6f5">release_unused_pictures</a></div><div class="ttdeci">static void release_unused_pictures(H264Context *h, int remove_current)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00115">h264_slice.c:115</a></div></div>
<div class="ttc" id="libavcodec_2h264dec_8c_html_a2fd02f06bf7ca6119b6b8f7c7ebfbdba"><div class="ttname"><a href="libavcodec_2h264dec_8c.html#a2fd02f06bf7ca6119b6b8f7c7ebfbdba">ff_h264_alloc_tables</a></div><div class="ttdeci">int ff_h264_alloc_tables(H264Context *h)</div><div class="ttdoc">Allocate tables. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dec_8c_source.html#l00182">h264dec.c:182</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a7c3f497db4f11e02df33b15dddbe5fed"><div class="ttname"><a href="intreadwrite_8h.html#a7c3f497db4f11e02df33b15dddbe5fed">AV_ZERO128</a></div><div class="ttdeci">#define AV_ZERO128(d)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00622">intreadwrite.h:622</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b"><div class="ttname"><a href="pixfmt_8h.html#a3da0bf691418bc22c4bcbe6583ad589aa00fd8f9315f17e8a0eda86c87da63c0b">AVCOL_RANGE_MPEG</a></div><div class="ttdoc">the normal 219*2^(n-8) &quot;MPEG&quot; YUV ranges </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00473">pixfmt.h:473</a></div></div>
<div class="ttc" id="structH264Picture_html"><div class="ttname"><a href="structH264Picture.html">H264Picture</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00128">h264dec.h:128</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a2eb5c17dfb2b780cac69462cb324604e"><div class="ttname"><a href="structH264SliceContext.html#a2eb5c17dfb2b780cac69462cb324604e">H264SliceContext::left_type</a></div><div class="ttdeci">int left_type[LEFT_MBS]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00220">h264dec.h:220</a></div></div>
<div class="ttc" id="group__lavu__math__rational_html_gaa440bf42ede128219a571ae4ce0f90b8"><div class="ttname"><a href="group__lavu__math__rational.html#gaa440bf42ede128219a571ae4ce0f90b8">av_cmp_q</a></div><div class="ttdeci">static int av_cmp_q(AVRational a, AVRational b)</div><div class="ttdoc">Compare two rationals. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00089">rational.h:89</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a511c9130f7e271adc6dcd2d70d4fb238"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a511c9130f7e271adc6dcd2d70d4fb238">AV_PIX_FMT_VDA_VLD</a></div><div class="ttdoc">hardware decoding through VDA </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00179">pixfmt.h:179</a></div></div>
<div class="ttc" id="group__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8">AVDISCARD_NONREF</a></div><div class="ttdoc">discard all non reference </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00787">avcodec.h:787</a></div></div>
<div class="ttc" id="structH264SEIDisplayOrientation_html_a4be27e6fc057ce51d36f123d50dcdbf5"><div class="ttname"><a href="structH264SEIDisplayOrientation.html#a4be27e6fc057ce51d36f123d50dcdbf5">H264SEIDisplayOrientation::anticlockwise_rotation</a></div><div class="ttdeci">int anticlockwise_rotation</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00129">h264_sei.h:129</a></div></div>
<div class="ttc" id="h264__picture_8c_html_ade5cb5aa08b2bddd1989a08e80bb5420"><div class="ttname"><a href="h264__picture_8c.html#ade5cb5aa08b2bddd1989a08e80bb5420">ff_h264_field_end</a></div><div class="ttdeci">int ff_h264_field_end(H264Context *h, H264SliceContext *sl, int in_setup)</div><div class="ttdef"><b>Definition:</b> <a href="h264__picture_8c_source.html#l00153">h264_picture.c:153</a></div></div>
<div class="ttc" id="structH264Context_html_aea5a0af050b5ef7b7280d2bc4ee36a2d"><div class="ttname"><a href="structH264Context.html#aea5a0af050b5ef7b7280d2bc4ee36a2d">H264Context::qscale_table_pool</a></div><div class="ttdeci">AVBufferPool * qscale_table_pool</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00560">h264dec.h:560</a></div></div>
<div class="ttc" id="structH264SEIA53Caption_html"><div class="ttname"><a href="structH264SEIA53Caption.html">H264SEIA53Caption</a></div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00092">h264_sei.h:92</a></div></div>
<div class="ttc" id="structH264Context_html_a3d25f4757cc624eef70cd43679fcd345"><div class="ttname"><a href="structH264Context.html#a3d25f4757cc624eef70cd43679fcd345">H264Context::next_output_pic</a></div><div class="ttdeci">H264Picture * next_output_pic</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00469">h264dec.h:469</a></div></div>
<div class="ttc" id="structERContext_html_a2913aee806fe806ffc0c0902d23a3782"><div class="ttname"><a href="structERContext.html#a2913aee806fe806ffc0c0902d23a3782">ERContext::error_count</a></div><div class="ttdeci">volatile int error_count</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00063">error_resilience.h:63</a></div></div>
<div class="ttc" id="structSPS_html_a678b68e048b54ddf3e3f1ef26a00a5f5"><div class="ttname"><a href="structSPS.html#a678b68e048b54ddf3e3f1ef26a00a5f5">SPS::mb_height</a></div><div class="ttdeci">int mb_height</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00060">h264_ps.h:60</a></div></div>
<div class="ttc" id="structH264Context_html_afc12b6d1e8abdb2e8b231b8fbf4a5ce2"><div class="ttname"><a href="structH264Context.html#afc12b6d1e8abdb2e8b231b8fbf4a5ce2">H264Context::motion_val_pool</a></div><div class="ttdeci">AVBufferPool * motion_val_pool</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00562">h264dec.h:562</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a1aa7677092740d8def31655b5d7f0cc2">AV_PIX_FMT_YUV420P</a></div><div class="ttdoc">planar YUV 4:2:0, 12bpp, (1 Cr &amp; Cb sample per 2x2 Y samples) </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00062">pixfmt.h:62</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a6810bce2e584e56a42aa7c73afa49427"><div class="ttname"><a href="structH264SliceContext.html#a6810bce2e584e56a42aa7c73afa49427">H264SliceContext::delta_poc_bottom</a></div><div class="ttdeci">int delta_poc_bottom</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00332">h264dec.h:332</a></div></div>
<div class="ttc" id="h264dec_8h_html_a4afa967e732c1bc49d1eef91eb2bb29e"><div class="ttname"><a href="h264dec_8h.html#a4afa967e732c1bc49d1eef91eb2bb29e">IS_8x8DCT</a></div><div class="ttdeci">#define IS_8x8DCT(a)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00104">h264dec.h:104</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html"><div class="ttname"><a href="libavcodec_2internal_8h.html">internal.h</a></div><div class="ttdoc">common internal api header. </div></div>
<div class="ttc" id="group__lavu__bufferpool_html_ga26af9b07c08bc7fd2cfc62767e490b93"><div class="ttname"><a href="group__lavu__bufferpool.html#ga26af9b07c08bc7fd2cfc62767e490b93">av_buffer_pool_init</a></div><div class="ttdeci">AVBufferPool * av_buffer_pool_init(int size, AVBufferRef *(*alloc)(int size))</div><div class="ttdoc">Allocate and initialize a buffer pool. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00237">buffer.c:237</a></div></div>
<div class="ttc" id="tests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a2bff2b6e75bc7a0df5c6edb8bfb814c3"><div class="ttname"><a href="intreadwrite_8h.html#a2bff2b6e75bc7a0df5c6edb8bfb814c3">AV_COPY128</a></div><div class="ttdeci">#define AV_COPY128(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00594">intreadwrite.h:594</a></div></div>
<div class="ttc" id="h264__slice_8c_html_aab87336eef35f1203881a73b60622223"><div class="ttname"><a href="h264__slice_8c.html#aab87336eef35f1203881a73b60622223">get_pixel_format</a></div><div class="ttdeci">static enum AVPixelFormat get_pixel_format(H264Context *h, int force_callback)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00767">h264_slice.c:767</a></div></div>
<div class="ttc" id="structH264ParamSets_html_a9a20da8176df48f6a9354b3b91eed1a0"><div class="ttname"><a href="structH264ParamSets.html#a9a20da8176df48f6a9354b3b91eed1a0">H264ParamSets::pps_ref</a></div><div class="ttdeci">AVBufferRef * pps_ref</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00141">h264_ps.h:141</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a276701c16077443c9526dd28da8001a7">AV_STEREO3D_2D</a></div><div class="ttdoc">Video is not stereoscopic (and metadata has to be there). </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00035">stereo3d.h:35</a></div></div>
<div class="ttc" id="structSPS_html_aad69db35df4c80af89cae4f2a37939d5"><div class="ttname"><a href="structSPS.html#aad69db35df4c80af89cae4f2a37939d5">SPS::log2_max_frame_num</a></div><div class="ttdeci">int log2_max_frame_num</div><div class="ttdoc">log2_max_frame_num_minus4 + 4 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00049">h264_ps.h:49</a></div></div>
<div class="ttc" id="structH264Context_html_a030592020ae404851d2a39a2c6a61a6f"><div class="ttname"><a href="structH264Context.html#a030592020ae404851d2a39a2c6a61a6f">H264Context::missing_fields</a></div><div class="ttdeci">int missing_fields</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00544">h264dec.h:544</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a29a4a89f56c46999741e394e2019b221"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a29a4a89f56c46999741e394e2019b221">AV_STEREO3D_CHECKERBOARD</a></div><div class="ttdoc">Views are packed in a checkerboard-like structure per pixel. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00076">stereo3d.h:76</a></div></div>
<div class="ttc" id="structH264Context_html_aa06b4f1025eec02206303cf37d47edf8"><div class="ttname"><a href="structH264Context.html#aa06b4f1025eec02206303cf37d47edf8">H264Context::ps</a></div><div class="ttdeci">H264ParamSets ps</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00458">h264dec.h:458</a></div></div>
<div class="ttc" id="structH264SEIContext_html_a2357487e74e14c7c7c179fdeb6cedca6"><div class="ttname"><a href="structH264SEIContext.html#a2357487e74e14c7c7c179fdeb6cedca6">H264SEIContext::frame_packing</a></div><div class="ttdeci">H264SEIFramePacking frame_packing</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00153">h264_sei.h:153</a></div></div>
<div class="ttc" id="h264__mvpred_8h_html"><div class="ttname"><a href="h264__mvpred_8h.html">h264_mvpred.h</a></div><div class="ttdoc">H.264 / AVC / MPEG-4 part10 motion vector prediction. </div></div>
<div class="ttc" id="group__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdoc">Create a new reference to an AVBuffer. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00092">buffer.c:92</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a></div><div class="ttdoc">Bi-dir predicted. </div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00276">avutil.h:276</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ae21031dcb2dd7bc75c83ec1ac2c26157"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ae21031dcb2dd7bc75c83ec1ac2c26157">AV_PIX_FMT_YUVJ444P</a></div><div class="ttdoc">planar YUV 4:4:4, 24bpp, full scale (JPEG), deprecated in favor of AV_PIX_FMT_YUV444P and setting col...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00076">pixfmt.h:76</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html"><div class="ttname"><a href="libavutil_2stereo3d_8h.html">stereo3d.h</a></div></div>
<div class="ttc" id="structH264Context_html_a61601f3569128cf01f733b38d21dac68"><div class="ttname"><a href="structH264Context.html#a61601f3569128cf01f733b38d21dac68">H264Context::cur_chroma_format_idc</a></div><div class="ttdeci">int cur_chroma_format_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00552">h264dec.h:552</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aba31a41242e77bfcb88068d9898b03a0"><div class="ttname"><a href="structH264SliceContext.html#aba31a41242e77bfcb88068d9898b03a0">H264SliceContext::intra4x4_pred_mode</a></div><div class="ttdeci">int8_t * intra4x4_pred_mode</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00210">h264dec.h:210</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a7b1cd65e6136d656808269f1b22f49b4"><div class="ttname"><a href="structAVCodecContext.html#a7b1cd65e6136d656808269f1b22f49b4">AVCodecContext::properties</a></div><div class="ttdeci">unsigned properties</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03519">avcodec.h:3519</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a6be328131743a97103b89e028e62e771"><div class="ttname"><a href="structAVCodecContext.html#a6be328131743a97103b89e028e62e771">AVCodecContext::skip_loop_filter</a></div><div class="ttdeci">enum AVDiscard skip_loop_filter</div><div class="ttdoc">Skip loop filtering for selected frames. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03298">avcodec.h:3298</a></div></div>
<div class="ttc" id="structAVRational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a3e11f4d75a3107359a15a94c3613cac8"><div class="ttname"><a href="h264__slice_8c.html#a3e11f4d75a3107359a15a94c3613cac8">predict_field_decoding_flag</a></div><div class="ttdeci">static void predict_field_decoding_flag(const H264Context *h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02318">h264_slice.c:2318</a></div></div>
<div class="ttc" id="h264__cavlc_8c_html_a3caf7495c02d839df8b3729291df23fd"><div class="ttname"><a href="h264__cavlc_8c.html#a3caf7495c02d839df8b3729291df23fd">ff_h264_decode_mb_cavlc</a></div><div class="ttdeci">int ff_h264_decode_mb_cavlc(const H264Context *h, H264SliceContext *sl)</div><div class="ttdoc">Decode a macroblock. </div><div class="ttdef"><b>Definition:</b> <a href="h264__cavlc_8c_source.html#l00702">h264_cavlc.c:702</a></div></div>
<div class="ttc" id="structSPS_html_aa6b53a71b6302252c43d53eb94590614"><div class="ttname"><a href="structSPS.html#aa6b53a71b6302252c43d53eb94590614">SPS::bit_depth_luma</a></div><div class="ttdeci">int bit_depth_luma</div><div class="ttdoc">bit_depth_luma_minus8 + 8 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00097">h264_ps.h:97</a></div></div>
<div class="ttc" id="structH264POCContext_html_a03a56a3215db7b385ce28edd4732efb5"><div class="ttname"><a href="structH264POCContext.html#a03a56a3215db7b385ce28edd4732efb5">H264POCContext::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00048">h264_parse.h:48</a></div></div>
<div class="ttc" id="hevcpred__template_8c_html_ad0133753510e9949508f0bb5af9c70d4"><div class="ttname"><a href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a></div><div class="ttdeci">#define IS_INTRA(x, y)</div></div>
<div class="ttc" id="structH264SEIAFD_html_a3f55fc55761e61b697b256c53a7f19a8"><div class="ttname"><a href="structH264SEIAFD.html#a3f55fc55761e61b697b256c53a7f19a8">H264SEIAFD::present</a></div><div class="ttdeci">int present</div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00088">h264_sei.h:88</a></div></div>
<div class="ttc" id="structH264POCContext_html_ab4c293367c96258913ff322fbb1711f6"><div class="ttname"><a href="structH264POCContext.html#ab4c293367c96258913ff322fbb1711f6">H264POCContext::delta_poc</a></div><div class="ttdeci">int delta_poc[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00047">h264_parse.h:47</a></div></div>
<div class="ttc" id="structERContext_html_a8607db4a68758e6bd12bdc7b1a5518e5"><div class="ttname"><a href="structERContext.html#a8607db4a68758e6bd12bdc7b1a5518e5">ERContext::error_occurred</a></div><div class="ttdeci">int error_occurred</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00064">error_resilience.h:64</a></div></div>
<div class="ttc" id="libavcodec_2h264dec_8c_html_a488e8b0923fddc82c07e2996257da500"><div class="ttname"><a href="libavcodec_2h264dec_8c.html#a488e8b0923fddc82c07e2996257da500">ff_h264_free_tables</a></div><div class="ttdeci">void ff_h264_free_tables(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dec_8c_source.html#l00139">h264dec.c:139</a></div></div>
<div class="ttc" id="structAVCodecContext_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01728">avcodec.h:1728</a></div></div>
<div class="ttc" id="h264dec_8h_html_ae7b88f7f3bf6df3d8fc7971055b99bba"><div class="ttname"><a href="h264dec_8h.html#ae7b88f7f3bf6df3d8fc7971055b99bba">LTOP</a></div><div class="ttdeci">#define LTOP</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00076">h264dec.h:76</a></div></div>
<div class="ttc" id="mpegutils_8h_html_afe9c6afe4f63cea62651c83a65644ba3"><div class="ttname"><a href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a></div><div class="ttdeci">#define PICT_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00039">mpegutils.h:39</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ac85c2dff7d125ee1b908d41cb42d46ef"><div class="ttname"><a href="h264__slice_8c.html#ac85c2dff7d125ee1b908d41cb42d46ef">ff_h264_execute_decode_slices</a></div><div class="ttdeci">int ff_h264_execute_decode_slices(H264Context *h, unsigned context_count)</div><div class="ttdoc">Call decode_slice() for each context. </div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02591">h264_slice.c:2591</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980aae7491f604c8a911a3cca45167c55025"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980aae7491f604c8a911a3cca45167c55025">SEI_PIC_STRUCT_BOTTOM_TOP</a></div><div class="ttdoc">4: bottom field, top field, in that order </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00046">h264_sei.h:46</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a68d9e2cb4f88a831ff1c5c01b18cb714"><div class="ttname"><a href="h264__slice_8c.html#a68d9e2cb4f88a831ff1c5c01b18cb714">backup_mb_border</a></div><div class="ttdeci">static av_always_inline void backup_mb_border(const H264Context *h, H264SliceContext *sl, uint8_t *src_y, uint8_t *src_cb, uint8_t *src_cr, int linesize, int uvlinesize, int simple)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00567">h264_slice.c:567</a></div></div>
<div class="ttc" id="structH264Context_html_a299c3f718fade86805b04eb3ed5b0b80"><div class="ttname"><a href="structH264Context.html#a299c3f718fade86805b04eb3ed5b0b80">H264Context::zigzag_scan8x8_cavlc_q0</a></div><div class="ttdeci">uint8_t zigzag_scan8x8_cavlc_q0[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00433">h264dec.h:433</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a108395326528ede67d08c0a6c52dc46b"><div class="ttname"><a href="structH264SliceContext.html#a108395326528ede67d08c0a6c52dc46b">H264SliceContext::ref_cache</a></div><div class="ttdeci">int8_t ref_cache[2][5 *8]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00304">h264dec.h:304</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a31da3168b1746e0a1237ea257524261c"><div class="ttname"><a href="structH264SliceContext.html#a31da3168b1746e0a1237ea257524261c">H264SliceContext::pps_id</a></div><div class="ttdeci">unsigned int pps_id</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00282">h264dec.h:282</a></div></div>
<div class="ttc" id="structAVFrame_html_a6f3ee0596312c90a2ef2ad160c991188"><div class="ttname"><a href="structAVFrame.html#a6f3ee0596312c90a2ef2ad160c991188">AVFrame::top_field_first</a></div><div class="ttdeci">int top_field_first</div><div class="ttdoc">If the content is interlaced, is top field displayed first. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00333">frame.h:333</a></div></div>
<div class="ttc" id="structAVHWAccel_html_aecd7bfd22ce294f1ae5073164bb90d65"><div class="ttname"><a href="structAVHWAccel.html#aecd7bfd22ce294f1ae5073164bb90d65">AVHWAccel::frame_priv_data_size</a></div><div class="ttdeci">int frame_priv_data_size</div><div class="ttdoc">Size of per-frame hardware accelerator private data. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03836">avcodec.h:3836</a></div></div>
<div class="ttc" id="h264dec_8h_html_a8124194ab499e49ff32255a648f46488"><div class="ttname"><a href="h264dec_8h.html#a8124194ab499e49ff32255a648f46488">CHROMA422</a></div><div class="ttdeci">#define CHROMA422(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00098">h264dec.h:98</a></div></div>
<div class="ttc" id="avcodec_8h_html_a9cc7522439883f6ff0787386119678b7"><div class="ttname"><a href="avcodec_8h.html#a9cc7522439883f6ff0787386119678b7">FF_BUG_TRUNCATED</a></div><div class="ttdeci">#define FF_BUG_TRUNCATED</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02890">avcodec.h:2890</a></div></div>
<div class="ttc" id="tests_2des_8c_html_ae9a986282b2908caa6e018751ead8ade"><div class="ttname"><a href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a></div><div class="ttdeci">static uint8_t tmp[8]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2des_8c_source.html#l00038">des.c:38</a></div></div>
<div class="ttc" id="build_2config_8h_html_aebbf91ade74a2253f0b7b791b0ad35ca"><div class="ttname"><a href="build_2config_8h.html#aebbf91ade74a2253f0b7b791b0ad35ca">CONFIG_ERROR_RESILIENCE</a></div><div class="ttdeci">#define CONFIG_ERROR_RESILIENCE</div><div class="ttdef"><b>Definition:</b> <a href="build_2config_8h_source.html#l00553">config.h:553</a></div></div>
<div class="ttc" id="structH264Context_html_aee44465997b316f98bfd83125fa153bb"><div class="ttname"><a href="structH264Context.html#aee44465997b316f98bfd83125fa153bb">H264Context::cur_pic</a></div><div class="ttdeci">H264Picture cur_pic</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00351">h264dec.h:351</a></div></div>
<div class="ttc" id="libavutil_2stereo3d_8h_html_a12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9"><div class="ttname"><a href="libavutil_2stereo3d_8h.html#a12fe9672eeaeb8980960faa96d2fcee6a4cf21029b6e5aa28bf53fbd9740443c9">AV_STEREO3D_TOPBOTTOM</a></div><div class="ttdoc">Views are on top of each other. </div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2stereo3d_8h_source.html#l00055">stereo3d.h:55</a></div></div>
<div class="ttc" id="structAVFrame_html_a3649a81e8414a193d685a6eee06ce902"><div class="ttname"><a href="structAVFrame.html#a3649a81e8414a193d685a6eee06ce902">AVFrame::key_frame</a></div><div class="ttdeci">int key_frame</div><div class="ttdoc">1 -&gt; keyframe, 0-&gt; not </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00259">frame.h:259</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a0bba4ee59e0894465c7aaa11c73bcbd5"><div class="ttname"><a href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a></div><div class="ttdeci">#define AV_ZERO32(d)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00614">intreadwrite.h:614</a></div></div>
<div class="ttc" id="structH264Context_html_a4893d3dd01a1278b103166ab244df294"><div class="ttname"><a href="structH264Context.html#a4893d3dd01a1278b103166ab244df294">H264Context::mb_width</a></div><div class="ttdeci">int mb_width</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00439">h264dec.h:439</a></div></div>
<div class="ttc" id="decoder__targeted_8c_html_acfe27e61edea06412363421f1a013e81"><div class="ttname"><a href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a></div><div class="ttdeci">static AVCodec * c</div><div class="ttdef"><b>Definition:</b> <a href="decoder__targeted_8c_source.html#l00059">decoder_targeted.c:59</a></div></div>
<div class="ttc" id="h264__slice_8c_html_afd01b8373b02eb3456286a824a12f017"><div class="ttname"><a href="h264__slice_8c.html#afd01b8373b02eb3456286a824a12f017">find_unused_picture</a></div><div class="ttdeci">static int find_unused_picture(H264Context *h)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l00263">h264_slice.c:263</a></div></div>
<div class="ttc" id="structH264Context_html_a8c22bc628eaa2d7db527fa76f47866c7"><div class="ttname"><a href="structH264Context.html#a8c22bc628eaa2d7db527fa76f47866c7">H264Context::current_slice</a></div><div class="ttdeci">int current_slice</div><div class="ttdoc">current slice number, used to initialize slice_num of each thread/context </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00490">h264dec.h:490</a></div></div>
<div class="ttc" id="h264__refs_8c_html_a861f272e73a68147cb73cd589ed7f927"><div class="ttname"><a href="h264__refs_8c.html#a861f272e73a68147cb73cd589ed7f927">ff_h264_execute_ref_pic_marking</a></div><div class="ttdeci">int ff_h264_execute_ref_pic_marking(H264Context *h)</div><div class="ttdoc">Execute the reference picture marking (memory management control operations). </div><div class="ttdef"><b>Definition:</b> <a href="h264__refs_8c_source.html#l00609">h264_refs.c:609</a></div></div>
<div class="ttc" id="get__bits_8h_html_ade604fdf49709e1ae3e4781d4b878f6d"><div class="ttname"><a href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a></div><div class="ttdeci">static const uint8_t * align_get_bits(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00450">get_bits.h:450</a></div></div>
<div class="ttc" id="structSPS_html_abbb1845fcda79fa20df8fc0db62a0904"><div class="ttname"><a href="structSPS.html#abbb1845fcda79fa20df8fc0db62a0904">SPS::mb_width</a></div><div class="ttdeci">int mb_width</div><div class="ttdoc">pic_width_in_mbs_minus1 + 1 </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00058">h264_ps.h:58</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a1944f9a4f8f2e123c087e1fe7613d571"><div class="ttname"><a href="structAVCodecContext.html#a1944f9a4f8f2e123c087e1fe7613d571">AVCodecContext::flags2</a></div><div class="ttdeci">int flags2</div><div class="ttdoc">AV_CODEC_FLAG2_*. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01788">avcodec.h:1788</a></div></div>
<div class="ttc" id="structH264Context_html_adbdc4e84a627d6deeda47bd0b336e664"><div class="ttname"><a href="structH264Context.html#adbdc4e84a627d6deeda47bd0b336e664">H264Context::mb2b_xy</a></div><div class="ttdeci">uint32_t * mb2b_xy</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00404">h264dec.h:404</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a903012300e01b131c6980a8e55752b4c"><div class="ttname"><a href="structH264SliceContext.html#a903012300e01b131c6980a8e55752b4c">H264SliceContext::ref_list</a></div><div class="ttdeci">H264Ref ref_list[2][48]</div><div class="ttdoc">0..15: frame refs, 16..47: mbaff field refs. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00273">h264dec.h:273</a></div></div>
<div class="ttc" id="structH264Context_html_aa4e40ba18c7689b09b0aae23825d5a6d"><div class="ttname"><a href="structH264Context.html#aa4e40ba18c7689b09b0aae23825d5a6d">H264Context::field_scan8x8_cavlc_q0</a></div><div class="ttdeci">uint8_t field_scan8x8_cavlc_q0[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00436">h264dec.h:436</a></div></div>
<div class="ttc" id="structH264SliceContext_html_adeb83fcfd7e47a9eaa50ebbc5a25e524"><div class="ttname"><a href="structH264SliceContext.html#adeb83fcfd7e47a9eaa50ebbc5a25e524">H264SliceContext::max_pic_num</a></div><div class="ttdeci">int max_pic_num</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00335">h264dec.h:335</a></div></div>
<div class="ttc" id="structH264Context_html_ada5f0d7164345be2b94ddcbcc4f8c25c"><div class="ttname"><a href="structH264Context.html#ada5f0d7164345be2b94ddcbcc4f8c25c">H264Context::cur_bit_depth_luma</a></div><div class="ttdeci">int cur_bit_depth_luma</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00553">h264dec.h:553</a></div></div>
<div class="ttc" id="structH264Picture_html_a95931854067cfeb06c8f11018bae5460"><div class="ttname"><a href="structH264Picture.html#a95931854067cfeb06c8f11018bae5460">H264Picture::ref_index_buf</a></div><div class="ttdeci">AVBufferRef * ref_index_buf[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00144">h264dec.h:144</a></div></div>
<div class="ttc" id="libavcodec_2h264dsp_8c_html_a51e816243be07609dc2707f7fece2747"><div class="ttname"><a href="libavcodec_2h264dsp_8c.html#a51e816243be07609dc2707f7fece2747">ff_h264dsp_init</a></div><div class="ttdeci">av_cold void ff_h264dsp_init(H264DSPContext *c, const int bit_depth, const int chroma_format_idc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dsp_8c_source.html#l00067">h264dsp.c:67</a></div></div>
<div class="ttc" id="structH264Context_html_aa21e235b8cd7c397023d0c1b632b4f94"><div class="ttname"><a href="structH264Context.html#aa21e235b8cd7c397023d0c1b632b4f94">H264Context::h264dsp</a></div><div class="ttdeci">H264DSPContext h264dsp</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00345">h264dec.h:345</a></div></div>
<div class="ttc" id="error__resilience_8c_html_ae8d70ac72d47676353321483847593e7"><div class="ttname"><a href="error__resilience_8c.html#ae8d70ac72d47676353321483847593e7">ff_er_frame_start</a></div><div class="ttdeci">void ff_er_frame_start(ERContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8c_source.html#l00747">error_resilience.c:747</a></div></div>
<div class="ttc" id="structAVFrame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00242">frame.h:242</a></div></div>
<div class="ttc" id="structH264Picture_html_ac619082a693f3540738ce5c1fb60100c"><div class="ttname"><a href="structH264Picture.html#ac619082a693f3540738ce5c1fb60100c">H264Picture::crop_top</a></div><div class="ttdeci">int crop_top</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00167">h264dec.h:167</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980ab4fba940b1593d6115828af4f5651aa7"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980ab4fba940b1593d6115828af4f5651aa7">SEI_PIC_STRUCT_TOP_FIELD</a></div><div class="ttdoc">1: top field </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00043">h264_sei.h:43</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aa114667882e7d54ce595ac53e2b12fea"><div class="ttname"><a href="structH264SliceContext.html#aa114667882e7d54ce595ac53e2b12fea">H264SliceContext::mvd_table</a></div><div class="ttdeci">uint8_t(*[2] mvd_table)[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00317">h264dec.h:317</a></div></div>
<div class="ttc" id="structH264Context_html_a3e8152eb8de0d2fe11a77e7b20fbe9e4"><div class="ttname"><a href="structH264Context.html#a3e8152eb8de0d2fe11a77e7b20fbe9e4">H264Context::field_scan8x8</a></div><div class="ttdeci">uint8_t field_scan8x8[64]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00429">h264dec.h:429</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a2eaae684a5973f13a492781551733b17"><div class="ttname"><a href="structH264SliceContext.html#a2eaae684a5973f13a492781551733b17">H264SliceContext::slice_type_fixed</a></div><div class="ttdeci">int slice_type_fixed</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00189">h264dec.h:189</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a5d157b6580d010b39acfab476257aedb"><div class="ttname"><a href="h264__slice_8c.html#a5d157b6580d010b39acfab476257aedb">fill_filter_caches_inter</a></div><div class="ttdeci">static av_always_inline void fill_filter_caches_inter(const H264Context *h, H264SliceContext *sl, int mb_type, int top_xy, int left_xy[LEFT_MBS], int top_type, int left_type[LEFT_MBS], int mb_xy, int list)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02022">h264_slice.c:2022</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_aaa746f43957975c7273cc08bf006f747"><div class="ttname"><a href="avisynth__c_8h.html#aaa746f43957975c7273cc08bf006f747">count</a></div><div class="ttdeci">void INT64 INT64 count</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00690">avisynth_c.h:690</a></div></div>
<div class="ttc" id="structH264POCContext_html_a16d18e46d7774d45510dd895563d9384"><div class="ttname"><a href="structH264POCContext.html#a16d18e46d7774d45510dd895563d9384">H264POCContext::prev_frame_num_offset</a></div><div class="ttdeci">int prev_frame_num_offset</div><div class="ttdoc">for POC type 2 </div><div class="ttdef"><b>Definition:</b> <a href="h264__parse_8h_source.html#l00052">h264_parse.h:52</a></div></div>
<div class="ttc" id="attributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00039">attributes.h:39</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a9e5137ae10c8b3e1051dc3159c4799a7"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a9e5137ae10c8b3e1051dc3159c4799a7">AV_PIX_FMT_D3D11VA_VLD</a></div><div class="ttdoc">HW decoding through Direct3D11, Picture.data[3] contains a ID3D11VideoDecoderOutputView pointer...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00243">pixfmt.h:243</a></div></div>
<div class="ttc" id="structH264SliceContext_html_ae08d05164b590b662bdf7ea18a59a9e1"><div class="ttname"><a href="structH264SliceContext.html#ae08d05164b590b662bdf7ea18a59a9e1">H264SliceContext::slice_beta_offset</a></div><div class="ttdeci">int slice_beta_offset</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00199">h264dec.h:199</a></div></div>
<div class="ttc" id="structH264Context_html_a663cd14f67b774b9a003d859e139e5c7"><div class="ttname"><a href="structH264Context.html#a663cd14f67b774b9a003d859e139e5c7">H264Context::intra4x4_pred_mode</a></div><div class="ttdeci">int8_t * intra4x4_pred_mode</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00390">h264dec.h:390</a></div></div>
<div class="ttc" id="group__lavu__bufferpool_html_ga2c745ecb4001452423e775b06b20fb7c"><div class="ttname"><a href="group__lavu__bufferpool.html#ga2c745ecb4001452423e775b06b20fb7c">av_buffer_pool_get</a></div><div class="ttdeci">AVBufferRef * av_buffer_pool_get(AVBufferPool *pool)</div><div class="ttdoc">Allocate a new AVBuffer, reusing an old buffer from the pool when available. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00380">buffer.c:380</a></div></div>
<div class="ttc" id="error__resilience_8h_html_a88006d7542a25c0412e6f6952f96b410"><div class="ttname"><a href="error__resilience_8h.html#a88006d7542a25c0412e6f6952f96b410">ER_AC_END</a></div><div class="ttdeci">#define ER_AC_END</div><div class="ttdef"><b>Definition:</b> <a href="error__resilience_8h_source.html#l00033">error_resilience.h:33</a></div></div>
<div class="ttc" id="h264__slice_8c_html_ab4c172264d72e44fe906d9dcfaca86ef"><div class="ttname"><a href="h264__slice_8c.html#ab4c172264d72e44fe906d9dcfaca86ef">decode_slice</a></div><div class="ttdeci">static int decode_slice(struct AVCodecContext *avctx, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02376">h264_slice.c:2376</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a6cb93d0b66d23451ab3b5b67c81e584f"><div class="ttname"><a href="structH264SliceContext.html#a6cb93d0b66d23451ab3b5b67c81e584f">H264SliceContext::delta_poc</a></div><div class="ttdeci">int delta_poc[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00333">h264dec.h:333</a></div></div>
<div class="ttc" id="h264__direct_8c_html_a8212d9afa9c7cdb1d19923b6627c6a6f"><div class="ttname"><a href="h264__direct_8c.html#a8212d9afa9c7cdb1d19923b6627c6a6f">ff_h264_direct_dist_scale_factor</a></div><div class="ttdeci">void ff_h264_direct_dist_scale_factor(const H264Context *const h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00052">h264_direct.c:52</a></div></div>
<div class="ttc" id="pixdesc_8c_html_ab92e2a8a9b58c982560c49df9f01e47e"><div class="ttname"><a href="pixdesc_8c.html#ab92e2a8a9b58c982560c49df9f01e47e">av_get_pix_fmt_name</a></div><div class="ttdeci">const char * av_get_pix_fmt_name(enum AVPixelFormat pix_fmt)</div><div class="ttdoc">Return the short name for a pixel format, NULL in case pix_fmt is unknown. </div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02248">pixdesc.c:2248</a></div></div>
<div class="ttc" id="libavcodec_2h264dec_8c_html_a361a33ac36f58ca3c05d593aa549fe50"><div class="ttname"><a href="libavcodec_2h264dec_8c.html#a361a33ac36f58ca3c05d593aa549fe50">ff_h264_slice_context_init</a></div><div class="ttdeci">int ff_h264_slice_context_init(H264Context *h, H264SliceContext *sl)</div><div class="ttdoc">Init context Allocate buffers which are not shared amongst multiple threads. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264dec_8c_source.html#l00240">h264dec.c:240</a></div></div>
<div class="ttc" id="structH264Context_html_a1579591f0f1723ea5d0b861a5bb6259c"><div class="ttname"><a href="structH264Context.html#a1579591f0f1723ea5d0b861a5bb6259c">H264Context::field_scan_q0</a></div><div class="ttdeci">uint8_t field_scan_q0[16]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00434">h264dec.h:434</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a0ad2defd854cd1c753ad204883a442e8"><div class="ttname"><a href="structH264SliceContext.html#a0ad2defd854cd1c753ad204883a442e8">H264SliceContext::mb_field_decoding_flag</a></div><div class="ttdeci">int mb_field_decoding_flag</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00245">h264dec.h:245</a></div></div>
<div class="ttc" id="structH264Context_html_a740cd9ac8b22ca6c83ae20586a0d4413"><div class="ttname"><a href="structH264Context.html#a740cd9ac8b22ca6c83ae20586a0d4413">H264Context::non_zero_count</a></div><div class="ttdeci">uint8_t(* non_zero_count)[48]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00393">h264dec.h:393</a></div></div>
<div class="ttc" id="h264__slice_8c_html_a641f3cb0955896238df6ec26c4f54ec3"><div class="ttname"><a href="h264__slice_8c.html#a641f3cb0955896238df6ec26c4f54ec3">loop_filter</a></div><div class="ttdeci">static void loop_filter(const H264Context *h, H264SliceContext *sl, int start_x, int end_x)</div><div class="ttdef"><b>Definition:</b> <a href="h264__slice_8c_source.html#l02248">h264_slice.c:2248</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a83b625bf9454b63ee8c04ac4f8ef648c"><div class="ttname"><a href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">AVCodecContext::execute</a></div><div class="ttdeci">int(* execute)(struct AVCodecContext *c, int(*func)(struct AVCodecContext *c2, void *arg), void *arg2, int *ret, int count, int size)</div><div class="ttdoc">The codec may call this to execute several independent things. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03158">avcodec.h:3158</a></div></div>
<div class="ttc" id="structSPS_html_a42dcaf80edd8d13036b9f26cd869b3ba"><div class="ttname"><a href="structSPS.html#a42dcaf80edd8d13036b9f26cd869b3ba">SPS::crop_bottom</a></div><div class="ttdeci">unsigned int crop_bottom</div><div class="ttdoc">frame_cropping_rect_bottom_offset </div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00070">h264_ps.h:70</a></div></div>
<div class="ttc" id="golomb_8h_html"><div class="ttname"><a href="golomb_8h.html">golomb.h</a></div><div class="ttdoc">exp golomb vlc stuff  </div></div>
<div class="ttc" id="structH264SliceContext_html_a7573cf72aed66e7334dcbca0fea4fbdb"><div class="ttname"><a href="structH264SliceContext.html#a7573cf72aed66e7334dcbca0fea4fbdb">H264SliceContext::bipred_scratchpad</a></div><div class="ttdeci">uint8_t * bipred_scratchpad</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00287">h264dec.h:287</a></div></div>
<div class="ttc" id="h264__picture_8c_html_ae0184361312cbd8ff3a977e1b6d432d0"><div class="ttname"><a href="h264__picture_8c.html#ae0184361312cbd8ff3a977e1b6d432d0">ff_h264_unref_picture</a></div><div class="ttdeci">void ff_h264_unref_picture(H264Context *h, H264Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="h264__picture_8c_source.html#l00046">h264_picture.c:46</a></div></div>
<div class="ttc" id="pixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdoc">Pixel format. </div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00060">pixfmt.h:60</a></div></div>
<div class="ttc" id="libavcodec_2h264qpel_8c_html_a35f46ef87d865025f9a66182391c76d7"><div class="ttname"><a href="libavcodec_2h264qpel_8c.html#a35f46ef87d865025f9a66182391c76d7">ff_h264qpel_init</a></div><div class="ttdeci">av_cold void ff_h264qpel_init(H264QpelContext *c, int bit_depth)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2h264qpel_8c_source.html#l00049">h264qpel.c:49</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga6b4950dd3320e524f648799927f256a7"><div class="ttname"><a href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a></div><div class="ttdeci">#define AV_GET_BUFFER_FLAG_REF</div><div class="ttdoc">The decoder will keep a reference to the frame and may reuse it later. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01358">avcodec.h:1358</a></div></div>
<div class="ttc" id="structH264Context_html_aa54131e5b98404c12a52fb805a27853d"><div class="ttname"><a href="structH264Context.html#aa54131e5b98404c12a52fb805a27853d">H264Context::droppable</a></div><div class="ttdeci">int droppable</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00373">h264dec.h:373</a></div></div>
<div class="ttc" id="structSPS_html_a5ea90e73e9044a02840f902e3be8c432"><div class="ttname"><a href="structSPS.html#a5ea90e73e9044a02840f902e3be8c432">SPS::level_idc</a></div><div class="ttdeci">int level_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00046">h264_ps.h:46</a></div></div>
<div class="ttc" id="h264__loopfilter_8c_html_aee8102bd3b04183491b032c40ab82867"><div class="ttname"><a href="h264__loopfilter_8c.html#aee8102bd3b04183491b032c40ab82867">ff_h264_filter_mb_fast</a></div><div class="ttdeci">void ff_h264_filter_mb_fast(const H264Context *h, H264SliceContext *sl, int mb_x, int mb_y, uint8_t *img_y, uint8_t *img_cb, uint8_t *img_cr, unsigned int linesize, unsigned int uvlinesize)</div><div class="ttdef"><b>Definition:</b> <a href="h264__loopfilter_8c_source.html#l00418">h264_loopfilter.c:418</a></div></div>
<div class="ttc" id="structH264Context_html_a7e242fcd0985055ecf49848537051418"><div class="ttname"><a href="structH264Context.html#a7e242fcd0985055ecf49848537051418">H264Context::nal_ref_idc</a></div><div class="ttdeci">int nal_ref_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00446">h264dec.h:446</a></div></div>
<div class="ttc" id="structH264SliceContext_html_aadaffea7f7556eb459df52bd2e2fb326"><div class="ttname"><a href="structH264SliceContext.html#aadaffea7f7556eb459df52bd2e2fb326">H264SliceContext::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00183">h264dec.h:183</a></div></div>
<div class="ttc" id="structH264Context_html_a46104f217cbc3bb4757de114340bf2f2"><div class="ttname"><a href="structH264Context.html#a46104f217cbc3bb4757de114340bf2f2">H264Context::field_scan</a></div><div class="ttdeci">uint8_t field_scan[16]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00428">h264dec.h:428</a></div></div>
<div class="ttc" id="structH264SliceContext_html_a02b26f1e924d99afb172f6fd0a89d849"><div class="ttname"><a href="structH264SliceContext.html#a02b26f1e924d99afb172f6fd0a89d849">H264SliceContext::cabac_init_idc</a></div><div class="ttdeci">int cabac_init_idc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00324">h264dec.h:324</a></div></div>
<div class="ttc" id="h264dec_8h_html_a148b410eeaa7a343459ef912843a232a"><div class="ttname"><a href="h264dec_8h.html#a148b410eeaa7a343459ef912843a232a">FRAME_RECOVERED_IDR</a></div><div class="ttdeci">#define FRAME_RECOVERED_IDR</div><div class="ttdoc">We have seen an IDR, so all the following frames in coded order are correctly decodable. </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00533">h264dec.h:533</a></div></div>
<div class="ttc" id="h264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="common_8h_html_a013fdaa079045ec5632fe121e211e516"><div class="ttname"><a href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a></div><div class="ttdeci">#define FFMAX3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00095">common.h:95</a></div></div>
<div class="ttc" id="structH264Context_html_af1072d18d4a2c415b03010aa108a46e4"><div class="ttname"><a href="structH264Context.html#af1072d18d4a2c415b03010aa108a46e4">H264Context::b_stride</a></div><div class="ttdeci">int b_stride</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00406">h264dec.h:406</a></div></div>
<div class="ttc" id="h264__sei_8h_html_a90d49c2d41962ed95b572d862f83c980ae3b7183ce436ffd0634012449b1a1ee4"><div class="ttname"><a href="h264__sei_8h.html#a90d49c2d41962ed95b572d862f83c980ae3b7183ce436ffd0634012449b1a1ee4">SEI_PIC_STRUCT_BOTTOM_TOP_BOTTOM</a></div><div class="ttdoc">6: bottom field, top field, bottom field repeated, in that order </div><div class="ttdef"><b>Definition:</b> <a href="h264__sei_8h_source.html#l00048">h264_sei.h:48</a></div></div>
<div class="ttc" id="group__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a></div><div class="ttdoc">Predicted. </div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00275">avutil.h:275</a></div></div>
<div class="ttc" id="regdef_8h_html_a70597aa9a5baaa4676f9f8cbe306dae0"><div class="ttname"><a href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a></div><div class="ttdeci">#define tb</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00068">regdef.h:68</a></div></div>
<div class="ttc" id="cabac_8h_html"><div class="ttname"><a href="cabac_8h.html">cabac.h</a></div><div class="ttdoc">Context Adaptive Binary Arithmetic Coder. </div></div>
<div class="ttc" id="build_2config_8h_html_a9a535d5c874618a1b06ef3808069e834"><div class="ttname"><a href="build_2config_8h.html#a9a535d5c874618a1b06ef3808069e834">CONFIG_GRAY</a></div><div class="ttdeci">#define CONFIG_GRAY</div><div class="ttdef"><b>Definition:</b> <a href="build_2config_8h_source.html#l00526">config.h:526</a></div></div>
<div class="ttc" id="h264dec_8h_html_a3d79954dd0655090e5371f876023fa7c"><div class="ttname"><a href="h264dec_8h.html#a3d79954dd0655090e5371f876023fa7c">H264_MAX_PICTURE_COUNT</a></div><div class="ttdeci">#define H264_MAX_PICTURE_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00052">h264dec.h:52</a></div></div>
<div class="ttc" id="h264pred__template_8c_html_a4124bc0a9335c27f086f24ba207a4912"><div class="ttname"><a href="h264pred__template_8c.html#a4124bc0a9335c27f086f24ba207a4912">a</a></div><div class="ttdeci">a</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00468">h264pred_template.c:468</a></div></div>
<div class="ttc" id="common_8h_html_a5d13452b0fac0d41b08ea2e49ea6eaa5"><div class="ttname"><a href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a></div><div class="ttdeci">#define AV_CEIL_RSHIFT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00058">common.h:58</a></div></div>
<div class="ttc" id="h264__cabac_8c_html_ae2cd68fe6384805b65ed5a8bb3d650bf"><div class="ttname"><a href="h264__cabac_8c.html#ae2cd68fe6384805b65ed5a8bb3d650bf">ff_h264_init_cabac_states</a></div><div class="ttdeci">void ff_h264_init_cabac_states(const H264Context *h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__cabac_8c_source.html#l01263">h264_cabac.c:1263</a></div></div>
<div class="ttc" id="structH264Context_html_a0f8740a8ce9bf98796ce8ab8b8d34d3b"><div class="ttname"><a href="structH264Context.html#a0f8740a8ce9bf98796ce8ab8b8d34d3b">H264Context::short_ref_count</a></div><div class="ttdeci">int short_ref_count</div><div class="ttdoc">number of actual short term references </div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00481">h264dec.h:481</a></div></div>
<div class="ttc" id="structSPS_html_ac8e79ef69181ffdb8a2c7726c880a78a"><div class="ttname"><a href="structSPS.html#ac8e79ef69181ffdb8a2c7726c880a78a">SPS::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="h264__ps_8h_source.html#l00078">h264_ps.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:46:58 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
