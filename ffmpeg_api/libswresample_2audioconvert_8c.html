<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libswresample/audioconvert.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8378ad75de5813c28e5ac2eccf11e5e1.html">libswresample</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">audioconvert.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>audio conversion  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="avstring_8h_source.html">libavutil/avstring.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="avassert_8h_source.html">libavutil/avassert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libm_8h_source.html">libavutil/libm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="samplefmt_8h_source.html">libavutil/samplefmt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libswresample_2audioconvert_8h_source.html">audioconvert.h</a>&quot;</code><br />
</div>
<p><a href="libswresample_2audioconvert_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abdd950ffb1c63f5b51c4294a984a6d5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#abdd950ffb1c63f5b51c4294a984a6d5b">CONV_FUNC_NAME</a>(dst_fmt,  src_fmt)&#160;&#160;&#160;conv_ ## src_fmt ## _to_ ## dst_fmt</td></tr>
<tr class="separator:abdd950ffb1c63f5b51c4294a984a6d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6cfb4f01a81fc257bf8863d71f6710a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#ac6cfb4f01a81fc257bf8863d71f6710a">CONV_FUNC</a>(ofmt,  otype,  ifmt,  expr)</td></tr>
<tr class="separator:ac6cfb4f01a81fc257bf8863d71f6710a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02137ef7880dae632bb4a21baf151697"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#a02137ef7880dae632bb4a21baf151697">FMT_PAIR_FUNC</a>(<a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>,  <a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)&#160;&#160;&#160;[(<a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>) + <a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a8c2ef4962274b33e2828fb9629c104fd">AV_SAMPLE_FMT_NB</a>*(<a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)] = <a class="el" href="libswresample_2audioconvert_8c.html#abdd950ffb1c63f5b51c4294a984a6d5b">CONV_FUNC_NAME</a>(<a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>, <a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</td></tr>
<tr class="separator:a02137ef7880dae632bb4a21baf151697"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a040a1a837ab300e421379e80b5b82a14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#a040a1a837ab300e421379e80b5b82a14">CONV_FUNC</a> (<a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>, int16_t, <a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a>,(*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) pi - 0x80U)&lt;&lt; 8) CONV_FUNC(AV_SAMPLE_FMT_S32</td></tr>
<tr class="separator:a040a1a837ab300e421379e80b5b82a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399cece626adcffd619948d47f2d975a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#a399cece626adcffd619948d47f2d975a">if</a> (off==<a class="el" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</td></tr>
<tr class="separator:a399cece626adcffd619948d47f2d975a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afd12020da5a235dfcf0c3c748fb5baed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></td></tr>
<tr class="separator:afd12020da5a235dfcf0c3c748fb5baed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3f2f20e8b592fea3bf924182793cc8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a></td></tr>
<tr class="separator:ada3f2f20e8b592fea3bf924182793cc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe016636a492e676374eb55cb06824e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> pi&lt;&lt; 24) <a class="el" href="libswresample_2audioconvert_8c.html#a040a1a837ab300e421379e80b5b82a14">CONV_FUNC</a>(<a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a59a56ed0ec7b70ecda41c5ae943f256e">AV_SAMPLE_FMT_S64</a>, int64_t, <a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a>,(uint64_t)((*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) pi - 0x80U))&lt;&lt; 56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16,(*(const int16_t *) pi &gt;&gt;8)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16,(uint64_t)(*(const int16_t *) pi)&lt;&lt; 48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32,(*(const int32_t *) pi &gt;&gt;24)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32,(uint64_t)(*(const int32_t *) pi)&lt;&lt; 32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S64,(*(const int64_t *) pi &gt;&gt;56)+0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0f/(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0/(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float *) pi *(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double *) pi *(INT64_C(1)&lt;&lt; 63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type *const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB *AV_SAMPLE_FMT_NB]={ FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), };static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len);} static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2 *len);} static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4 *len);} static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8 *len);} AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx;conv_func_type *f=fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt)+AV_SAMPLE_FMT_NB *av_get_packed_sample_fmt(in_fmt)];if(!f) return NULL;ctx=av_mallocz(sizeof(*ctx));if(!ctx) return NULL;if(channels==1){ in_fmt=av_get_planar_sample_fmt(in_fmt);out_fmt=av_get_planar_sample_fmt(out_fmt);} ctx-&gt;channels=channels;ctx-&gt;conv_f=f;ctx-&gt;ch_map=ch_map;if(in_fmt==AV_SAMPLE_FMT_U8||in_fmt==AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence));if(out_fmt==in_fmt &amp;&amp;!ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f=cpy1;break;case 2:ctx-&gt;simd_f=cpy2;break;case 4:ctx-&gt;simd_f=cpy4;break;case 8:ctx-&gt;simd_f=cpy8;break;} } if(HAVE_YASM &amp;&amp;HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels);if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels);if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels);return ctx;} void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx);} int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch;int off=0;const int os=(out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps;unsigned misaligned=0;av_assert0(ctx-&gt;channels==out-&gt;ch_count);if(ctx-&gt;in_simd_align_mask) { int planes=in-&gt;planar ? in-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) in-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;in_simd_align_mask;} if(ctx-&gt;out_simd_align_mask) { int planes=out-&gt;planar ? out-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) out-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;out_simd_align_mask;} if(ctx-&gt;simd_f &amp;&amp;!ctx-&gt;ch_map &amp;&amp;!misaligned){ off=len &amp;~15;av_assert1(off &gt;=0);av_assert1(off&lt;=len);av_assert2(ctx-&gt;channels==SWR_CH_MAX||!in-&gt;ch[ctx-&gt;channels]);if(off &gt;0){ if(out-&gt;planar==in-&gt;planar){ int planes=out-&gt;planar ? out-&gt;ch_count :1;for(ch=0;ch&lt; planes;ch++){ ctx-&gt;simd_f(out-&gt; ch&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#abe016636a492e676374eb55cb06824e0">ch</a></td></tr>
<tr class="separator:abe016636a492e676374eb55cb06824e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc82e8d1dfe05e0165555f57fda7b5b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> pi&lt;&lt; 24) <a class="el" href="libswresample_2audioconvert_8c.html#a040a1a837ab300e421379e80b5b82a14">CONV_FUNC</a>(<a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a59a56ed0ec7b70ecda41c5ae943f256e">AV_SAMPLE_FMT_S64</a>, int64_t, <a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a>,(uint64_t)((*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) pi - 0x80U))&lt;&lt; 56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16,(*(const int16_t *) pi &gt;&gt;8)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16,(uint64_t)(*(const int16_t *) pi)&lt;&lt; 48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32,(*(const int32_t *) pi &gt;&gt;24)+0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32,(uint64_t)(*(const int32_t *) pi)&lt;&lt; 32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S64,(*(const int64_t *) pi &gt;&gt;56)+0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0f/(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S64, *(const int64_t *) pi *(1.0/(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float *) pi *(INT64_C(1)&lt;&lt; 63))) CONV_FUNC(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double *) pi *(INT64_C(1)&lt;&lt; 63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type *const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB *AV_SAMPLE_FMT_NB]={ FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), };static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len);} static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2 *len);} static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4 *len);} static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8 *len);} AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx;conv_func_type *f=fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt)+AV_SAMPLE_FMT_NB *av_get_packed_sample_fmt(in_fmt)];if(!f) return NULL;ctx=av_mallocz(sizeof(*ctx));if(!ctx) return NULL;if(channels==1){ in_fmt=av_get_planar_sample_fmt(in_fmt);out_fmt=av_get_planar_sample_fmt(out_fmt);} ctx-&gt;channels=channels;ctx-&gt;conv_f=f;ctx-&gt;ch_map=ch_map;if(in_fmt==AV_SAMPLE_FMT_U8||in_fmt==AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence));if(out_fmt==in_fmt &amp;&amp;!ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f=cpy1;break;case 2:ctx-&gt;simd_f=cpy2;break;case 4:ctx-&gt;simd_f=cpy4;break;case 8:ctx-&gt;simd_f=cpy8;break;} } if(HAVE_YASM &amp;&amp;HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels);if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels);if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels);return ctx;} void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx);} int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch;int off=0;const int os=(out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps;unsigned misaligned=0;av_assert0(ctx-&gt;channels==out-&gt;ch_count);if(ctx-&gt;in_simd_align_mask) { int planes=in-&gt;planar ? in-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) in-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;in_simd_align_mask;} if(ctx-&gt;out_simd_align_mask) { int planes=out-&gt;planar ? out-&gt;ch_count :1;unsigned m=0;for(ch=0;ch&lt; planes;ch++) m|=(intptr_t) out-&gt;ch[ch];misaligned|=m &amp;ctx-&gt;out_simd_align_mask;} if(ctx-&gt;simd_f &amp;&amp;!ctx-&gt;ch_map &amp;&amp;!misaligned){ off=len &amp;~15;av_assert1(off &gt;=0);av_assert1(off&lt;=len);av_assert2(ctx-&gt;channels==SWR_CH_MAX||!in-&gt;ch[ctx-&gt;channels]);if(off &gt;0){ if(out-&gt;planar==in-&gt;planar){ int planes=out-&gt;planar ? out-&gt;ch_count :1;for(ch=0;ch&lt; planes;ch++){ ctx-&gt;simd_f(out-&gt; ch const uint8_t **in ch off *out&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#acc82e8d1dfe05e0165555f57fda7b5b0">planar</a></td></tr>
<tr class="separator:acc82e8d1dfe05e0165555f57fda7b5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0544c3fe466e421738dae463968b70ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#a0544c3fe466e421738dae463968b70ba">else</a></td></tr>
<tr class="separator:a0544c3fe466e421738dae463968b70ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9717e7bbecb906637e86cef6da3d83c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libswresample_2audioconvert_8c.html#a9717e7bbecb906637e86cef6da3d83c2">return</a></td></tr>
<tr class="separator:a9717e7bbecb906637e86cef6da3d83c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>audio conversion </p>
<dl class="section author"><dt>Author</dt><dd>Michael Niedermayer <a href="#" onclick="location.href='mai'+'lto:'+'mic'+'ha'+'eln'+'i@'+'gmx'+'.a'+'t'; return false;">micha<span style="display: none;">.nosp@m.</span>elni<span style="display: none;">.nosp@m.</span>@gmx.<span style="display: none;">.nosp@m.</span>at</a> </dd></dl>

<p>Definition in file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abdd950ffb1c63f5b51c4294a984a6d5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd950ffb1c63f5b51c4294a984a6d5b">&sect;&nbsp;</a></span>CONV_FUNC_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONV_FUNC_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dst_fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">src_fmt&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;conv_ ## src_fmt ## _to_ ## dst_fmt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00035">35</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

</div>
</div>
<a id="ac6cfb4f01a81fc257bf8863d71f6710a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6cfb4f01a81fc257bf8863d71f6710a">&sect;&nbsp;</a></span>CONV_FUNC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONV_FUNC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ofmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">otype, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ifmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libswresample_2audioconvert_8c.html#abdd950ffb1c63f5b51c4294a984a6d5b">CONV_FUNC_NAME</a>(ofmt, ifmt)(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *po, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *pi, <span class="keywordtype">int</span> is, <span class="keywordtype">int</span> os, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>)\</div><div class="line">{\</div><div class="line">    uint8_t *end2 = <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> - 3*os;\</div><div class="line">    while(po &lt; end2){\</div><div class="line">        *(otype*)po = expr; pi += is; po += os;\</div><div class="line">        *(otype*)po = expr; pi += is; po += os;\</div><div class="line">        *(otype*)po = expr; pi += is; po += os;\</div><div class="line">        *(otype*)po = expr; pi += is; po += os;\</div><div class="line">    }\</div><div class="line">    while(po &lt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>){\</div><div class="line">        *(otype*)po = expr; pi += is; po += os;\</div><div class="line">    }\</div><div class="line">}</div><div class="ttc" id="libswresample_2audioconvert_8c_html_abdd950ffb1c63f5b51c4294a984a6d5b"><div class="ttname"><a href="libswresample_2audioconvert_8c.html#abdd950ffb1c63f5b51c4294a984a6d5b">CONV_FUNC_NAME</a></div><div class="ttdeci">#define CONV_FUNC_NAME(dst_fmt, src_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="libswresample_2audioconvert_8c_source.html#l00035">audioconvert.c:35</a></div></div>
<div class="ttc" id="audio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="avrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00090">avrndec.c:90</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00038">38</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

</div>
</div>
<a id="a02137ef7880dae632bb4a21baf151697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02137ef7880dae632bb4a21baf151697">&sect;&nbsp;</a></span>FMT_PAIR_FUNC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_PAIR_FUNC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;[(<a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>) + <a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a8c2ef4962274b33e2828fb9629c104fd">AV_SAMPLE_FMT_NB</a>*(<a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)] = <a class="el" href="libswresample_2audioconvert_8c.html#abdd950ffb1c63f5b51c4294a984a6d5b">CONV_FUNC_NAME</a>(<a class="el" href="audio__convert_8c.html#af3acf4f5d59e8dda267d0d31ae9a8c67">out</a>, <a class="el" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a040a1a837ab300e421379e80b5b82a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a040a1a837ab300e421379e80b5b82a14">&sect;&nbsp;</a></span>CONV_FUNC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONV_FUNC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) pi - 0x80U)&lt;&lt;&#160;</td>
          <td class="paramname"><em>8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a399cece626adcffd619948d47f2d975a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a399cece626adcffd619948d47f2d975a">&sect;&nbsp;</a></span>if()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">off&#160;</td>
          <td class="paramname"> = <code>=&#160;<a class="el" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00232">232</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afd12020da5a235dfcf0c3c748fb5baed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd12020da5a235dfcf0c3c748fb5baed">&sect;&nbsp;</a></span>int32_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00056">56</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2audioconvert_8c_source.html#l00063">av_audio_convert()</a>.</p>

</div>
</div>
<a id="ada3f2f20e8b592fea3bf924182793cc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada3f2f20e8b592fea3bf924182793cc8">&sect;&nbsp;</a></span>AV_SAMPLE_FMT_U8</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AV_SAMPLE_FMT_U8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00056">56</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2audioconvert_8c_source.html#l00063">av_audio_convert()</a>.</p>

</div>
</div>
<a id="abe016636a492e676374eb55cb06824e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe016636a492e676374eb55cb06824e0">&sect;&nbsp;</a></span>ch</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> pi&lt;&lt;24) <a class="el" href="libswresample_2audioconvert_8c.html#a040a1a837ab300e421379e80b5b82a14">CONV_FUNC</a>(<a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a59a56ed0ec7b70ecda41c5ae943f256e">AV_SAMPLE_FMT_S64</a>, int64_t, <a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a> , (uint64_t)((*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)pi - 0x80U))&lt;&lt;56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_U8 , (*(const uint8_t*)pi - 0x80)*(1.0f/ (1&lt;&lt;7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_U8 , (*(const uint8_t*)pi - 0x80)*(1.0 / (1&lt;&lt;7))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S16, (*(const int16_t*)pi&gt;&gt;8) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16, (uint64_t)(*(const int16_t*)pi)&lt;&lt;48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S16, *(const int16_t*)pi*(1.0f/ (1&lt;&lt;15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S16, *(const int16_t*)pi*(1.0 / (1&lt;&lt;15))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S32, (*(const int32_t*)pi&gt;&gt;24) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32, (uint64_t)(*(const int32_t*)pi)&lt;&lt;32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S32, *(const int32_t*)pi*(1.0f/ (1U&lt;&lt;31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S32, *(const int32_t*)pi*(1.0 / (1U&lt;&lt;31))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S64, (*(const int64_t*)pi&gt;&gt;56) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S64, *(const int64_t*)pi*(1.0f/ (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S64, *(const int64_t*)pi*(1.0 / (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8( lrintf(*(const float*)pi * (1&lt;&lt;7)) + 0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16( lrintf(*(const float*)pi * (1&lt;&lt;15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float*)pi * (1U&lt;&lt;31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float*)pi * (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8( lrint(*(const double*)pi * (1&lt;&lt;7)) + 0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16( lrint(*(const double*)pi * (1&lt;&lt;15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double*)pi * (1U&lt;&lt;31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double*)pi * (INT64_C(1)&lt;&lt;63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type * const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB*AV_SAMPLE_FMT_NB] = { FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), }; static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len); } static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2*len); } static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4*len); } static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8*len); } AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx; conv_func_type *f = fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt) + AV_SAMPLE_FMT_NB*av_get_packed_sample_fmt(in_fmt)]; if (!f) return NULL; ctx = av_mallocz(sizeof(*ctx)); if (!ctx) return NULL; if(channels == 1){ in_fmt = av_get_planar_sample_fmt( in_fmt); out_fmt = av_get_planar_sample_fmt(out_fmt); } ctx-&gt;channels = channels; ctx-&gt;conv_f = f; ctx-&gt;ch_map = ch_map; if (in_fmt == AV_SAMPLE_FMT_U8 || in_fmt == AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence)); if(out_fmt == in_fmt &amp;&amp; !ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f = cpy1; break; case 2:ctx-&gt;simd_f = cpy2; break; case 4:ctx-&gt;simd_f = cpy4; break; case 8:ctx-&gt;simd_f = cpy8; break; } } if(HAVE_YASM &amp;&amp; HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels); if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels); if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels); return ctx; } void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx); } int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch; int off=0; const int os= (out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps; unsigned misaligned = 0; av_assert0(ctx-&gt;channels == out-&gt;ch_count); if (ctx-&gt;in_simd_align_mask) { int planes = in-&gt;planar ? in-&gt;ch_count : 1; unsigned m = 0; for (ch = 0; ch &lt; planes; ch++) m |= (intptr_t)in-&gt;ch[ch]; misaligned |= m &amp; ctx-&gt;in_simd_align_mask; } if (ctx-&gt;out_simd_align_mask) { int planes = out-&gt;planar ? out-&gt;ch_count : 1; unsigned m = 0; for (ch = 0; ch &lt; planes; ch++) m |= (intptr_t)out-&gt;ch[ch]; misaligned |= m &amp; ctx-&gt;out_simd_align_mask; } if(ctx-&gt;simd_f &amp;&amp; !ctx-&gt;ch_map &amp;&amp; !misaligned){ off = len&amp;~15; av_assert1(off&gt;=0); av_assert1(off&lt;=len); av_assert2(ctx-&gt;channels == SWR_CH_MAX || !in-&gt;ch[ctx-&gt;channels]); if(off&gt;0){ if(out-&gt;planar == in-&gt;planar){ int planes = out-&gt;planar ? out-&gt;ch_count : 1; for(ch=0; ch&lt;planes; ch++){ ctx-&gt;simd_f(out-&gt; ch const uint8_t** in ch ch</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="decoding_encoding_8c-example.html#a57">decoding_encoding.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00056">56</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

<p>Referenced by <a class="el" href="aacenc_8c_source.html#l00509">aac_encode_frame()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l01407">ac3_decode_frame()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00519">acalc_magnitudes()</a>, <a class="el" href="aacenc_8c_source.html#l00209">adjust_frame_information()</a>, <a class="el" href="adpcm_8c_source.html#l00708">adpcm_decode_frame()</a>, <a class="el" href="adpcmenc_8c_source.html#l00471">adpcm_encode_frame()</a>, <a class="el" href="libavcodec_2adxdec_8c_source.html#l00065">adx_decode()</a>, <a class="el" href="libavcodec_2adxdec_8c_source.html#l00095">adx_decode_frame()</a>, <a class="el" href="adxenc_8c_source.html#l00140">adx_encode_frame()</a>, <a class="el" href="aea_8c_source.html#l00030">aea_read_probe()</a>, <a class="el" href="alac_8c_source.html#l00470">alac_decode_close()</a>, <a class="el" href="alac_8c_source.html#l00411">alac_decode_frame()</a>, <a class="el" href="alacenc_8c_source.html#l00321">alac_entropy_coder()</a>, <a class="el" href="alacenc_8c_source.html#l00257">alac_linear_predictor()</a>, <a class="el" href="aacenc_8c_source.html#l00893">alloc_buffers()</a>, <a class="el" href="dca__core_8c_source.html#l00877">alloc_sample_buffer()</a>, <a class="el" href="dca__core_8c_source.html#l01386">alloc_x96_sample_buffer()</a>, <a class="el" href="ac3enc_8c_source.html#l02323">allocate_buffers()</a>, <a class="el" href="ac3enc__template_8c_source.html#l00054">allocate_sample_buffers()</a>, <a class="el" href="apedec_8c_source.html#l01404">ape_decode_frame()</a>, <a class="el" href="libavcodec_2alacdsp_8c_source.html#l00045">append_extra_bits()</a>, <a class="el" href="ac3enc__template_8c_source.html#l00131">apply_channel_coupling()</a>, <a class="el" href="ralf_8c_source.html#l00314">apply_lpc()</a>, <a class="el" href="ac3enc__template_8c_source.html#l00101">apply_mdct()</a>, <a class="el" href="wmaenc_8c_source.html#l00103">apply_window_and_mdct()</a>, <a class="el" href="asfdec__o_8c_source.html#l00620">asf_read_content_desc()</a>, <a class="el" href="atrac1_8c_source.html#l00272">atrac1_decode_frame()</a>, <a class="el" href="atrac3plusdec_8c_source.html#l00147">atrac3p_decode_init()</a>, <a class="el" href="decoding__encoding_8c_source.html#l00242">audio_decode_example()</a>, <a class="el" href="avresample_8c_source.html#l00082">audiogen()</a>, <a class="el" href="libavcodec_2audioconvert_8c_source.html#l00063">av_audio_convert()</a>, <a class="el" href="channel__layout_8c_source.html#l00155">av_bprint_channel_layout()</a>, <a class="el" href="dump_8c_source.html#l00541">av_dump_format()</a>, <a class="el" href="frame_8c_source.html#l00385">av_frame_ref()</a>, <a class="el" href="samplefmt_8c_source.html#l00151">av_samples_fill_arrays()</a>, <a class="el" href="libavcodec_2utils_8c_source.html#l00470">avcodec_fill_audio_frame()</a>, <a class="el" href="qdm2_8c_source.html#l00313">average_quantized_coeffs()</a>, <a class="el" href="aacadtsdec_8c_source.html#l00029">avpriv_aac_parse_header()</a>, <a class="el" href="libavresample_2utils_8c_source.html#l00036">avresample_open()</a>, <a class="el" href="libavresample_2utils_8c_source.html#l00697">avresample_set_channel_mapping()</a>, <a class="el" href="ac3enc_8c_source.html#l01064">bit_alloc()</a>, <a class="el" href="ac3enc_8c_source.html#l00759">bit_alloc_init()</a>, <a class="el" href="ac3enc_8c_source.html#l00941">bit_alloc_masking()</a>, <a class="el" href="swresample_8c_source.html#l00465">buf_set()</a>, <a class="el" href="qdm2_8c_source.html#l00342">build_sb_samples_from_noise()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00490">calc_channel_magnitudes()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00505">calc_channel_phases()</a>, <a class="el" href="dcaenc_8c_source.html#l00505">calc_masking()</a>, <a class="el" href="alacenc_8c_source.html#l00153">calc_predictor_params()</a>, <a class="el" href="dcaenc_8c_source.html#l00701">calc_scales()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00461">calc_transform_coeffs_cpl()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00218">calculate_sign_huff()</a>, <a class="el" href="ac3enc_8c_source.html#l01095">cbr_bit_allocation()</a>, <a class="el" href="af__channelmap_8c_source.html#l00314">channelmap_filter_frame()</a>, <a class="el" href="tests_2checkasm_2alacdsp_8c_source.html#l00084">check_append_extra_bits()</a>, <a class="el" href="dca__xll_8c_source.html#l00729">chs_assemble_freq_bands()</a>, <a class="el" href="dca__xll_8c_source.html#l00707">chs_assemble_msbs_lsbs()</a>, <a class="el" href="dca__xll_8c_source.html#l00692">chs_get_lsb_width()</a>, <a class="el" href="dca__xll_8c_source.html#l01254">combine_residual_frame()</a>, <a class="el" href="mlpenc_8c_source.html#l00285">compare_decoding_params()</a>, <a class="el" href="mpegaudioenc__template_8c_source.html#l00509">compute_bit_allocation()</a>, <a class="el" href="libavformat_2utils_8c_source.html#l03142">compute_chapters_end()</a>, <a class="el" href="ac3enc_8c_source.html#l00358">compute_exp_strategy()</a>, <a class="el" href="af__aemphasis_8c_source.html#l00201">config_input()</a>, <a class="el" href="avf__showvolume_8c_source.html#l00142">config_output()</a>, <a class="el" href="libavresample_2dither_8c_source.html#l00211">convert_samples()</a>, <a class="el" href="swresample_8c_source.html#l00425">copy()</a>, <a class="el" href="aacenc_8c_source.html#l00487">copy_input_samples()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l00515">copy_samples()</a>, <a class="el" href="ac3enc_8c_source.html#l00547">count_exponent_bits()</a>, <a class="el" href="ac3enc_8c_source.html#l00795">count_frame_bits()</a>, <a class="el" href="ac3enc_8c_source.html#l01038">count_mantissa_bits()</a>, <a class="el" href="metasound_8c_source.html#l00115">dec_bark_env()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00807">decode_audio_block()</a>, <a class="el" href="vmdaudio_8c_source.html#l00103">decode_audio_s16()</a>, <a class="el" href="binkaudio_8c_source.html#l00164">decode_block()</a>, <a class="el" href="ralf_8c_source.html#l00227">decode_channel()</a>, <a class="el" href="wmalosslessdec_8c_source.html#l00512">decode_channel_residues()</a>, <a class="el" href="alac_8c_source.html#l00236">decode_element()</a>, <a class="el" href="wmadec_8c_source.html#l00318">decode_exp_vlc()</a>, <a class="el" href="dstdec_8c_source.html#l00224">decode_frame()</a>, <a class="el" href="dca__lbr_8c_source.html#l01385">decode_grid()</a>, <a class="el" href="wmalosslessdec_8c_source.html#l00568">decode_lpc()</a>, <a class="el" href="dca__lbr_8c_source.html#l01577">decode_part_stereo()</a>, <a class="el" href="atrac3plusdec_8c_source.html#l00201">decode_residual_spectrum()</a>, <a class="el" href="id3v2_8c_source.html#l00241">decode_str()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00616">decode_transform_coeffs()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00596">decode_transform_coeffs_ch()</a>, <a class="el" href="vf__deshake_8c_source.html#l00316">deshake_transform_c()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00676">do_imdct()</a>, <a class="el" href="dpcm_8c_source.html#l00176">dpcm_decode_frame()</a>, <a class="el" href="af__anequalizer_8c_source.html#l00094">draw_curves()</a>, <a class="el" href="8svx_8c_source.html#l00086">eightsvx_decode_frame()</a>, <a class="el" href="wmaenc_8c_source.html#l00182">encode_block()</a>, <a class="el" href="wmaenc_8c_source.html#l00154">encode_exp_vlc()</a>, <a class="el" href="ac3enc_8c_source.html#l00497">encode_exponents()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l01057">encode_frame()</a>, <a class="el" href="mpegvideo__enc_8c_source.html#l02219">encode_mb_internal()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l00822">encode_residual_ch()</a>, <a class="el" href="dca__core_8c_source.html#l00864">erase_adpcm_history()</a>, <a class="el" href="dca__core_8c_source.html#l01373">erase_x96_adpcm_history()</a>, <a class="el" href="dca__core_8c_source.html#l00654">extract_audio()</a>, <a class="el" href="ac3enc_8c_source.html#l00328">extract_exponents()</a>, <a class="el" href="aacenc__ltp_8c_source.html#l00053">ff_aac_ltp_insert_new_frame()</a>, <a class="el" href="ac3enc_8c_source.html#l00201">ff_ac3_compute_coupling_strategy()</a>, <a class="el" href="ac3enc_8c_source.html#l02017">ff_ac3_encode_close()</a>, <a class="el" href="ac3enc_8c_source.html#l00579">ff_ac3_group_exponents()</a>, <a class="el" href="ac3enc_8c_source.html#l01300">ff_ac3_quantize_mantissas()</a>, <a class="el" href="libavresample_2resample_8c_source.html#l00334">ff_audio_resample()</a>, <a class="el" href="dca__core_8c_source.html#l02063">ff_dca_core_filter_fixed()</a>, <a class="el" href="dca__lbr_8c_source.html#l01775">ff_dca_lbr_flush()</a>, <a class="el" href="dca__lbr_8c_source.html#l01148">ff_dca_lbr_parse()</a>, <a class="el" href="libavresample_2dither_8c_source.html#l00345">ff_dither_alloc()</a>, <a class="el" href="libavresample_2dither_8c_source.html#l00312">ff_dither_free()</a>, <a class="el" href="eac3dec_8c_source.html#l00066">ff_eac3_apply_spectral_extension()</a>, <a class="el" href="eac3dec_8c_source.html#l00203">ff_eac3_decode_transform_coeffs_aht_ch()</a>, <a class="el" href="eac3enc_8c_source.html#l00068">ff_eac3_get_frame_exp_strategy()</a>, <a class="el" href="eac3enc_8c_source.html#l00128">ff_eac3_output_frame_header()</a>, <a class="el" href="eac3dec_8c_source.html#l00296">ff_eac3_parse_header()</a>, <a class="el" href="eac3enc_8c_source.html#l00095">ff_eac3_set_cpl_states()</a>, <a class="el" href="libavcodec_2mpc_8c_source.html#l00061">ff_mpc_dequantize_and_synth()</a>, <a class="el" href="unsharp__opencl_8c_source.html#l00163">ff_opencl_apply_unsharp()</a>, <a class="el" href="unsharp__opencl_8c_source.html#l00383">ff_opencl_unsharp_process_inout_buf()</a>, <a class="el" href="psymodel_8c_source.html#l00073">ff_psy_find_group()</a>, <a class="el" href="psymodel_8c_source.html#l00139">ff_psy_preprocess()</a>, <a class="el" href="rtsp_8c_source.html#l00796">ff_rtsp_open_transport_ctx()</a>, <a class="el" href="aacsbr__template_8c_source.html#l01467">ff_sbr_apply()</a>, <a class="el" href="qdm2_8c_source.html#l00524">fill_coding_method_array()</a>, <a class="el" href="qdm2_8c_source.html#l00435">fill_tone_level_array()</a>, <a class="el" href="mpegaudioenc__template_8c_source.html#l00323">filter()</a>, <a class="el" href="af__afftfilt_8c_source.html#l00188">filter_frame()</a>, <a class="el" href="dca__core_8c_source.html#l02167">filter_frame_fixed()</a>, <a class="el" href="dca__core_8c_source.html#l02264">filter_frame_float()</a>, <a class="el" href="dca__lbr_8c_source.html#l01492">filter_ts()</a>, <a class="el" href="dcaenc_8c_source.html#l00540">find_peaks()</a>, <a class="el" href="qdm2_8c_source.html#l00369">fix_coding_method_array()</a>, <a class="el" href="mpegaudiodec__template_8c_source.html#l01724">flush()</a>, <a class="el" href="dca__xll_8c_source.html#l01237">force_lossy_output()</a>, <a class="el" href="aacdec__template_8c_source.html#l00158">frame_configure_elements()</a>, <a class="el" href="fsb_8c_source.html#l00165">fsb_read_packet()</a>, <a class="el" href="ftp_8c_source.html#l00110">ftp_get_line()</a>, <a class="el" href="af__firequalizer_8c_source.html#l00490">generate_kernel()</a>, <a class="el" href="genh_8c_source.html#l00041">genh_read_header()</a>, <a class="el" href="genh_8c_source.html#l00153">genh_read_packet()</a>, <a class="el" href="tests_2swresample_8c_source.html#l00039">get()</a>, <a class="el" href="asfdec__o_8c_source.html#l00203">get_asf_string()</a>, <a class="el" href="libavcodec_2utils_8c_source.html#l03557">get_audio_frame_duration()</a>, <a class="el" href="adpcm_8c_source.html#l00507">get_nb_samples()</a>, <a class="el" href="af__sofalizer_8c_source.html#l00434">get_speaker_pos()</a>, <a class="el" href="http_8c_source.html#l00559">http_get_line()</a>, <a class="el" href="http_8c_source.html#l00414">http_handshake()</a>, <a class="el" href="vp8_8c_source.html#l01978">idct_mb()</a>, <a class="el" href="libswresample_2audioconvert_8c_source.html#l00232">if()</a>, <a class="el" href="imc_8c_source.html#l00864">imc_decode_block()</a>, <a class="el" href="twinvq_8c_source.html#l00327">imdct_and_window()</a>, <a class="el" href="wmaenc_8c_source.html#l00132">init_exp()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l00470">init_frame()</a>, <a class="el" href="dcaenc_8c_source.html#l00573">init_quantization_noise()</a>, <a class="el" href="alacenc_8c_source.html#l00084">init_sample_buffers()</a>, <a class="el" href="qdm2_8c_source.html#l00908">init_tone_level_dequantization()</a>, <a class="el" href="wmaprodec_8c_source.html#l01053">inverse_channel_transform()</a>, <a class="el" href="libswresample_2resample_8c_source.html#l00581">invert_initial_buffer()</a>, <a class="el" href="af__join_8c_source.html#l00316">join_config_output()</a>, <a class="el" href="libopusdec_8c_source.html#l00044">libopus_decode_init()</a>, <a class="el" href="tests_2swresample_8c_source.html#l00225">main()</a>, <a class="el" href="dca__core_8c_source.html#l02012">map_prm_ch_to_spkr()</a>, <a class="el" href="matroskaenc_8c_source.html#l01481">mkv_write_tags()</a>, <a class="el" href="mov_8c_source.html#l05406">mov_read_chapters()</a>, <a class="el" href="libmp3lame_8c_source.html#l00188">mp3lame_encode_frame()</a>, <a class="el" href="libmp3lame_8c_source.html#l00091">mp3lame_encode_init()</a>, <a class="el" href="mpegaudiodec__template_8c_source.html#l01558">mp_decode_frame()</a>, <a class="el" href="mpegaudiodec__template_8c_source.html#l00502">mp_decode_layer1()</a>, <a class="el" href="mpegaudiodec__template_8c_source.html#l00567">mp_decode_layer2()</a>, <a class="el" href="mpegaudiodec__template_8c_source.html#l01304">mp_decode_layer3()</a>, <a class="el" href="mpc7_8c_source.html#l00192">mpc7_decode_frame()</a>, <a class="el" href="libavcodec_2mpc8_8c_source.html#l00239">mpc8_decode_frame()</a>, <a class="el" href="libavcodec_2mpc_8c_source.html#l00045">mpc_synth()</a>, <a class="el" href="mxfenc_8c_source.html#l00662">mxf_utf16len()</a>, <a class="el" href="nutenc_8c_source.html#l00700">nut_write_header()</a>, <a class="el" href="on2avc_8c_source.html#l00253">on2avc_read_channel_data()</a>, <a class="el" href="on2avc_8c_source.html#l00688">on2avc_reconstruct_channel_ext()</a>, <a class="el" href="texturedspenc_8c_source.html#l00237">optimize_colors()</a>, <a class="el" href="ac3enc_8c_source.html#l01385">output_audio_block()</a>, <a class="el" href="dca__lbr_8c_source.html#l00623">parse_ch()</a>, <a class="el" href="dca__core_8c_source.html#l00232">parse_coding_header()</a>, <a class="el" href="dca__core_8c_source.html#l00905">parse_frame_data()</a>, <a class="el" href="dca__lbr_8c_source.html#l00504">parse_grid_1_chunk()</a>, <a class="el" href="dca__lbr_8c_source.html#l00856">parse_grid_2()</a>, <a class="el" href="dca__lbr_8c_source.html#l00592">parse_grid_3()</a>, <a class="el" href="dca__lbr_8c_source.html#l00797">parse_high_res_grid()</a>, <a class="el" href="dca__lbr_8c_source.html#l00776">parse_lpc()</a>, <a class="el" href="dca__core_8c_source.html#l00727">parse_subframe_audio()</a>, <a class="el" href="dca__core_8c_source.html#l00480">parse_subframe_header()</a>, <a class="el" href="dca__lbr_8c_source.html#l00282">parse_tonal()</a>, <a class="el" href="dca__core_8c_source.html#l01496">parse_x96_coding_header()</a>, <a class="el" href="dca__core_8c_source.html#l01583">parse_x96_frame_data()</a>, <a class="el" href="dca__core_8c_source.html#l01265">parse_x96_subframe_audio()</a>, <a class="el" href="dca__core_8c_source.html#l01412">parse_x96_subframe_header()</a>, <a class="el" href="dca__core_8c_source.html#l01041">parse_xbr_subframe()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00656">plot_channel()</a>, <a class="el" href="avf__showfreqs_8c_source.html#l00286">plot_freq()</a>, <a class="el" href="avf__showfreqs_8c_source.html#l00369">plot_freqs()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00718">plot_spectrum_column()</a>, <a class="el" href="sonic_8c_source.html#l00465">predictor_calc_error()</a>, <a class="el" href="qdm2_8c_source.html#l00971">process_subpacket_9()</a>, <a class="el" href="aacpsy_8c_source.html#l00845">psy_3gpp_analyze()</a>, <a class="el" href="avf__showwaves_8c_source.html#l00474">push_single_pic()</a>, <a class="el" href="dcaenc_8c_source.html#l00808">put_primary_audio_header()</a>, <a class="el" href="aviobuf_8c_source.html#l00373">put_str16()</a>, <a class="el" href="dcaenc_8c_source.html#l00876">put_subframe()</a>, <a class="el" href="dcaenc_8c_source.html#l00854">put_subframe_samples()</a>, <a class="el" href="qdm2_8c_source.html#l01789">qdm2_decode()</a>, <a class="el" href="qdm2_8c_source.html#l01458">qdm2_fft_tone_synthesizer()</a>, <a class="el" href="qdm2_8c_source.html#l01549">qdm2_synthesis_filter()</a>, <a class="el" href="dcaenc_8c_source.html#l00715">quantize_all()</a>, <a class="el" href="dca__lbr_8c_source.html#l01422">random_ts()</a>, <a class="el" href="vaf__spectrumsynth_8c_source.html#l00244">read16_fft_bin()</a>, <a class="el" href="vaf__spectrumsynth_8c_source.html#l00269">read8_fft_bin()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00922">read_block_data()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00776">read_channel_params()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00835">read_decoding_params()</a>, <a class="el" href="vaf__spectrumsynth_8c_source.html#l00294">read_fft_data()</a>, <a class="el" href="brstm_8c_source.html#l00088">read_header()</a>, <a class="el" href="ffmpeg_8c_source.html#l00407">read_key()</a>, <a class="el" href="dstdec_8c_source.html#l00098">read_map()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00713">read_matrix_params()</a>, <a class="el" href="libavcodec_2mlpdec_8c_source.html#l00468">read_restart_header()</a>, <a class="el" href="atrac3plusdec_8c_source.html#l00265">reconstruct_frame()</a>, <a class="el" href="libavcodec_2ac3dec_8c_source.html#l00583">remove_dithering()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l01077">remove_wasted_bits()</a>, <a class="el" href="vsrc__mptestsrc_8c_source.html#l00300">request_frame()</a>, <a class="el" href="ac3enc_8c_source.html#l00971">reset_block_bap()</a>, <a class="el" href="alsdec_8c_source.html#l01259">revert_channel_correlation()</a>, <a class="el" href="rsd_8c_source.html#l00172">rsd_read_packet()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00462">run_channel_fft()</a>, <a class="el" href="aacsbr_8c_source.html#l00073">sbr_dequant()</a>, <a class="el" href="ac3enc__fixed_8c_source.html#l00092">scale_coefficients()</a>, <a class="el" href="avf__showspectrum_8c_source.html#l00533">scale_magnitudes()</a>, <a class="el" href="ffplay_8c_source.html#l03242">seek_chapter()</a>, <a class="el" href="tests_2swresample_8c_source.html#l00059">set()</a>, <a class="el" href="ac3enc_8c_source.html#l02253">set_bandwidth()</a>, <a class="el" href="tests_2swresample_8c_source.html#l00078">shift()</a>, <a class="el" href="dcaenc_8c_source.html#l00648">shift_history()</a>, <a class="el" href="http_8c_source.html#l01347">store_icy()</a>, <a class="el" href="dcaenc_8c_source.html#l00252">subband_transform()</a>, <a class="el" href="swresample_8c_source.html#l00575">swr_convert_internal()</a>, <a class="el" href="dither__template_8c_source.html#l00043">swri_noise_shaping()</a>, <a class="el" href="dca__lbr_8c_source.html#l01470">synth_lpc()</a>, <a class="el" href="dca__lbr_8c_source.html#l01603">synth_tones()</a>, <a class="el" href="vaf__spectrumsynth_8c_source.html#l00340">synth_window()</a>, <a class="el" href="qdm2_8c_source.html#l00651">synthfilt_build_sb_samples()</a>, <a class="el" href="dca__lbr_8c_source.html#l01681">transform_channel()</a>, <a class="el" href="af__join_8c_source.html#l00413">try_push_frame()</a>, <a class="el" href="libavcodec_2utils_8c_source.html#l00506">update_frame_pool()</a>, <a class="el" href="ffplay_8c_source.html#l00991">video_audio_display()</a>, <a class="el" href="vorbisdec_8c_source.html#l01738">vorbis_decode_frame()</a>, <a class="el" href="vorbisdec_8c_source.html#l01575">vorbis_parse_audio_packet()</a>, <a class="el" href="vorbisdec_8c_source.html#l01374">vorbis_residue_decode_internal()</a>, <a class="el" href="wmadec_8c_source.html#l00431">wma_decode_block()</a>, <a class="el" href="wmadec_8c_source.html#l00769">wma_decode_frame()</a>, <a class="el" href="mlpenc_8c_source.html#l01001">write_block_data()</a>, <a class="el" href="id3v2enc_8c_source.html#l00198">write_chapter()</a>, <a class="el" href="ccaption__dec_8c_source.html#l00317">write_char()</a>, <a class="el" href="mlpenc_8c_source.html#l00903">write_decoding_params()</a>, <a class="el" href="alacenc_8c_source.html#l00460">write_frame()</a>, <a class="el" href="mlpenc_8c_source.html#l00807">write_restart_header()</a>, <a class="el" href="libavcodec_2flacenc_8c_source.html#l01242">write_subframes()</a>, and <a class="el" href="ffmetaenc_8c_source.html#l00061">write_trailer()</a>.</p>

</div>
</div>
<a id="acc82e8d1dfe05e0165555f57fda7b5b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc82e8d1dfe05e0165555f57fda7b5b0">&sect;&nbsp;</a></span>planar</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> pi&lt;&lt;24) <a class="el" href="libswresample_2audioconvert_8c.html#a040a1a837ab300e421379e80b5b82a14">CONV_FUNC</a>(<a class="el" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a59a56ed0ec7b70ecda41c5ae943f256e">AV_SAMPLE_FMT_S64</a>, int64_t, <a class="el" href="libswresample_2audioconvert_8c.html#ada3f2f20e8b592fea3bf924182793cc8">AV_SAMPLE_FMT_U8</a> , (uint64_t)((*(const <a class="el" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>*)pi - 0x80U))&lt;&lt;56) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_U8 , (*(const uint8_t*)pi - 0x80)*(1.0f/ (1&lt;&lt;7))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_U8 , (*(const uint8_t*)pi - 0x80)*(1.0 / (1&lt;&lt;7))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S16, (*(const int16_t*)pi&gt;&gt;8) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S16, (uint64_t)(*(const int16_t*)pi)&lt;&lt;48) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S16, *(const int16_t*)pi*(1.0f/ (1&lt;&lt;15))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S16, *(const int16_t*)pi*(1.0 / (1&lt;&lt;15))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S32, (*(const int32_t*)pi&gt;&gt;24) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_S32, (uint64_t)(*(const int32_t*)pi)&lt;&lt;32) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S32, *(const int32_t*)pi*(1.0f/ (1U&lt;&lt;31))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S32, *(const int32_t*)pi*(1.0 / (1U&lt;&lt;31))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_S64, (*(const int64_t*)pi&gt;&gt;56) + 0x80) CONV_FUNC(AV_SAMPLE_FMT_FLT, float , AV_SAMPLE_FMT_S64, *(const int64_t*)pi*(1.0f/ (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_DBL, double , AV_SAMPLE_FMT_S64, *(const int64_t*)pi*(1.0 / (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_FLT, av_clip_uint8( lrintf(*(const float*)pi * (1&lt;&lt;7)) + 0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, av_clip_int16( lrintf(*(const float*)pi * (1&lt;&lt;15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, av_clipl_int32(llrintf(*(const float*)pi * (1U&lt;&lt;31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_FLT, llrintf(*(const float*)pi * (INT64_C(1)&lt;&lt;63))) CONV_FUNC(AV_SAMPLE_FMT_U8 , uint8_t, AV_SAMPLE_FMT_DBL, av_clip_uint8( lrint(*(const double*)pi * (1&lt;&lt;7)) + 0x80)) CONV_FUNC(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, av_clip_int16( lrint(*(const double*)pi * (1&lt;&lt;15)))) CONV_FUNC(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, av_clipl_int32(llrint(*(const double*)pi * (1U&lt;&lt;31)))) CONV_FUNC(AV_SAMPLE_FMT_S64, int64_t, AV_SAMPLE_FMT_DBL, llrint(*(const double*)pi * (INT64_C(1)&lt;&lt;63))) #define FMT_PAIR_FUNC(out, in) static conv_func_type * const fmt_pair_to_conv_functions[AV_SAMPLE_FMT_NB*AV_SAMPLE_FMT_NB] = { FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_U8 ), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S16), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S32), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_FLT), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_DBL), FMT_PAIR_FUNC(AV_SAMPLE_FMT_U8 , AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_DBL, AV_SAMPLE_FMT_S64), FMT_PAIR_FUNC(AV_SAMPLE_FMT_S64, AV_SAMPLE_FMT_S64), }; static void cpy1(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, len); } static void cpy2(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 2*len); } static void cpy4(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 4*len); } static void cpy8(uint8_t **dst, const uint8_t **src, int len){ memcpy(*dst, *src, 8*len); } AudioConvert *swri_audio_convert_alloc(enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, const int *ch_map, int flags) { AudioConvert *ctx; conv_func_type *f = fmt_pair_to_conv_functions[av_get_packed_sample_fmt(out_fmt) + AV_SAMPLE_FMT_NB*av_get_packed_sample_fmt(in_fmt)]; if (!f) return NULL; ctx = av_mallocz(sizeof(*ctx)); if (!ctx) return NULL; if(channels == 1){ in_fmt = av_get_planar_sample_fmt( in_fmt); out_fmt = av_get_planar_sample_fmt(out_fmt); } ctx-&gt;channels = channels; ctx-&gt;conv_f = f; ctx-&gt;ch_map = ch_map; if (in_fmt == AV_SAMPLE_FMT_U8 || in_fmt == AV_SAMPLE_FMT_U8P) memset(ctx-&gt;silence, 0x80, sizeof(ctx-&gt;silence)); if(out_fmt == in_fmt &amp;&amp; !ch_map) { switch(av_get_bytes_per_sample(in_fmt)){ case 1:ctx-&gt;simd_f = cpy1; break; case 2:ctx-&gt;simd_f = cpy2; break; case 4:ctx-&gt;simd_f = cpy4; break; case 8:ctx-&gt;simd_f = cpy8; break; } } if(HAVE_YASM &amp;&amp; HAVE_MMX) swri_audio_convert_init_x86(ctx, out_fmt, in_fmt, channels); if(ARCH_ARM) swri_audio_convert_init_arm(ctx, out_fmt, in_fmt, channels); if(ARCH_AARCH64) swri_audio_convert_init_aarch64(ctx, out_fmt, in_fmt, channels); return ctx; } void swri_audio_convert_free(AudioConvert **ctx) { av_freep(ctx); } int swri_audio_convert(AudioConvert *ctx, AudioData *out, AudioData *in, int len) { int ch; int off=0; const int os= (out-&gt;planar ? 1 :out-&gt;ch_count) *out-&gt;bps; unsigned misaligned = 0; av_assert0(ctx-&gt;channels == out-&gt;ch_count); if (ctx-&gt;in_simd_align_mask) { int planes = in-&gt;planar ? in-&gt;ch_count : 1; unsigned m = 0; for (ch = 0; ch &lt; planes; ch++) m |= (intptr_t)in-&gt;ch[ch]; misaligned |= m &amp; ctx-&gt;in_simd_align_mask; } if (ctx-&gt;out_simd_align_mask) { int planes = out-&gt;planar ? out-&gt;ch_count : 1; unsigned m = 0; for (ch = 0; ch &lt; planes; ch++) m |= (intptr_t)out-&gt;ch[ch]; misaligned |= m &amp; ctx-&gt;out_simd_align_mask; } if(ctx-&gt;simd_f &amp;&amp; !ctx-&gt;ch_map &amp;&amp; !misaligned){ off = len&amp;~15; av_assert1(off&gt;=0); av_assert1(off&lt;=len); av_assert2(ctx-&gt;channels == SWR_CH_MAX || !in-&gt;ch[ctx-&gt;channels]); if(off&gt;0){ if(out-&gt;planar == in-&gt;planar){ int planes = out-&gt;planar ? out-&gt;ch_count : 1; for(ch=0; ch&lt;planes; ch++){ ctx-&gt;simd_f(out-&gt; ch const uint8_t** in ch off* out planar</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="filter_audio_8c-example.html#a42">filter_audio.c</a>.</dd>
</dl>
<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00056">56</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

<p>Referenced by <a class="el" href="libavcodec_2utils_8c_source.html#l00470">avcodec_fill_audio_frame()</a>, <a class="el" href="avisynth_8c_source.html#l00230">avisynth_create_stream_video()</a>, <a class="el" href="libavfilter_2fifo_8c_source.html#l00104">buffer_offset()</a>, <a class="el" href="af__ashowinfo_8c_source.html#l00176">filter_frame()</a>, <a class="el" href="libavcodec_2flacdec_8c_source.html#l00073">flac_set_bps()</a>, <a class="el" href="frame_8c_source.html#l00697">frame_copy_audio()</a>, <a class="el" href="frame_8c_source.html#l00219">get_audio_buffer()</a>, <a class="el" href="filter__audio_8c_source.html#l00215">process_output()</a>, and <a class="el" href="libavcodec_2utils_8c_source.html#l00506">update_frame_pool()</a>.</p>

</div>
</div>
<a id="a0544c3fe466e421738dae463968b70ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0544c3fe466e421738dae463968b70ba">&sect;&nbsp;</a></span>else</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;simd_f(<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>-&gt;ch, (<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **)<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>-&gt;ch, off)</div><div class="ttc" id="audio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="tests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="audio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="tests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00228">228</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

</div>
</div>
<a id="a9717e7bbecb906637e86cef6da3d83c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9717e7bbecb906637e86cef6da3d83c2">&sect;&nbsp;</a></span>return</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">return</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="libswresample_2audioconvert_8c_source.html#l00246">246</a> of file <a class="el" href="libswresample_2audioconvert_8c_source.html">audioconvert.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:48:19 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
