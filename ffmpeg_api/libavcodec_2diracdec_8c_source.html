<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpeg: libavcodec/diracdec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpeg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1f69f89eda39a44baf4887988d54a7.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">diracdec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="libavcodec_2diracdec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2007 Marco Gerards &lt;marco@gnu.org&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2009 David Conrad</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2011 Jordi Ortiz</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * @file</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * Dirac Decoder</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * @author Marco Gerards &lt;marco@gnu.org&gt;, David Conrad, Jordi Ortiz &lt;nenjordi@gmail.com&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">get_bits.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bytestream_8h.html">bytestream.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavcodec_2internal_8h.html">internal.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="golomb_8h.html">golomb.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dirac__arith_8h.html">dirac_arith.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dirac__vlc_8h.html">dirac_vlc.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpeg12data_8h.html">mpeg12data.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideo_8h.html">libavcodec/mpegvideo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideoencdsp_8h.html">mpegvideoencdsp.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dirac__dwt_8h.html">dirac_dwt.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dirac_8h.html">dirac.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="diractab_8h.html">diractab.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="diracdsp_8h.html">diracdsp.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="videodsp_8h.html">videodsp.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * The spec limits this to 3 for frame coding, but in practice can be as high as 6</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a1f99d0554a99a0d366962c6d0a764032">   48</a></span>&#160;<span class="preprocessor">#define MAX_REFERENCE_FRAMES 8</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a16027d8acc5301e440cefa086eb9db2a">   49</a></span>&#160;<span class="preprocessor">#define MAX_DELAY 5         </span><span class="comment">/* limit for main profile for frame coding (TODO: field coding) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">   50</a></span>&#160;<span class="preprocessor">#define MAX_FRAMES (MAX_REFERENCE_FRAMES + MAX_DELAY + 1)</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a4661702e637fb46008f42db389c83e04">   51</a></span>&#160;<span class="preprocessor">#define MAX_QUANT 255        </span><span class="comment">/* max quant for VC-2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">   52</a></span>&#160;<span class="preprocessor">#define MAX_BLOCKSIZE 32    </span><span class="comment">/* maximum xblen/yblen we support */</span><span class="preprocessor"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> * DiracBlock-&gt;ref flags, if set then the block does MC from the given ref</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#af6722c56143b81bddeb805e3980858d2">   57</a></span>&#160;<span class="preprocessor">#define DIRAC_REF_MASK_REF1   1</span></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a6a8a90dc55d56812575aa92ea7a98366">   58</a></span>&#160;<span class="preprocessor">#define DIRAC_REF_MASK_REF2   2</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a6b50a2dbf44abfc3c360c271ff2aeed6">   59</a></span>&#160;<span class="preprocessor">#define DIRAC_REF_MASK_GLOBAL 4</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * Value of Picture.reference when Picture is not a reference picture, but</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> * is held for delayed output.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">   65</a></span>&#160;<span class="preprocessor">#define DELAYED_PIC_REF 4</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">   67</a></span>&#160;<span class="preprocessor">#define CALC_PADDING(size, depth)                       \</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">    (((size + (1 &lt;&lt; depth) - 1) &gt;&gt; depth) &lt;&lt; depth)</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">   70</a></span>&#160;<span class="preprocessor">#define DIVRNDUP(a, b) (((a) + (b) - 1) / (b))</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structDiracFrame.html">   72</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">   73</a></span>&#160;    <a class="code" href="structAVFrame.html">AVFrame</a> *<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">   74</a></span>&#160;    <span class="keywordtype">int</span> interpolated[3];    <span class="comment">/* 1 if hpel[] is valid */</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">   75</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *hpel[3][4];</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">   76</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *hpel_base[3][4];</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">   77</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;} <a class="code" href="structDiracFrame.html">DiracFrame</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structDiracBlock.html">   80</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">   82</a></span>&#160;        int16_t <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[2][2];</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">   83</a></span>&#160;        int16_t <a class="code" href="audio__convert_8c.html#a431c7653c1fc679a567aaabfc1101b3a">dc</a>[3];</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    } <a class="code" href="vaapi__encode__h26x_8h.html#a5349d1cad2e486e8c30d8cde8b783b0d">u</a>; <span class="comment">/* anonymous unions aren&#39;t in C99 :( */</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">   85</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;} <a class="code" href="structDiracBlock.html">DiracBlock</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structSubBand.html">SubBand</a> {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>; <span class="comment">/* in bytes */</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a690d20481bd1095d6319f0655d50ba10">pshift</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a>;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structSubBand.html#a7605c5274cf09bbf4c99c10fb2143e89">   97</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="structSubBand.html#a7605c5274cf09bbf4c99c10fb2143e89">parent</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* for low delay */</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">  100</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a>;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="structSubBand.html#a7d26b80a067abdd83cbb991281f83273">  101</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a7d26b80a067abdd83cbb991281f83273">coeff_data</a>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;} <a class="code" href="structSubBand.html">SubBand</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structPlane.html">Plane</a> {</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">  105</a></span>&#160;    <a class="code" href="structDWTPlane.html">DWTPlane</a> <a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    ptrdiff_t <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">/* block length */</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">  112</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">  113</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">/* block separation (block n+1 starts after this many pixels in block n) */</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">  115</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="structPlane.html#a7006305741a6427adea00c841eedf195">  116</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">/* amount of overspill on each edge (half of the overlap between blocks) */</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structPlane.html#aa10c31d713459362abf953b21b212cba">  118</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a>;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">  119</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="structSubBand.html">SubBand</a> <a class="code" href="af__biquads_8c.html#a7ef0ab496f57e183b484e62e2053c94fa3f92cf4d12d060d0589478f932a871b9">band</a>[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>][4];</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;} <a class="code" href="structPlane.html">Plane</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/* Used by Low Delay and High Quality profiles */</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structDiracSlice.html">  125</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structDiracSlice.html">DiracSlice</a> {</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="structDiracSlice.html#a6ad63b9f783a32781ea6cef571d47ce5">  126</a></span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> <a class="code" href="structDiracSlice.html#a6ad63b9f783a32781ea6cef571d47ce5">gb</a>;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">  127</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a>;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">  128</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a>;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">  129</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">bytes</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;} <a class="code" href="structDiracSlice.html">DiracSlice</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="structDiracContext.html">  132</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structDiracContext.html">DiracContext</a> {</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">  133</a></span>&#160;    <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">  134</a></span>&#160;    <a class="code" href="structMpegvideoEncDSPContext.html">MpegvideoEncDSPContext</a> <a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>;</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structDiracContext.html#ab486ac0ab57ae25eda3ef0c37a370e1e">  135</a></span>&#160;    <a class="code" href="structVideoDSPContext.html">VideoDSPContext</a> <a class="code" href="structDiracContext.html#ab486ac0ab57ae25eda3ef0c37a370e1e">vdsp</a>;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">  136</a></span>&#160;    <a class="code" href="structDiracDSPContext.html">DiracDSPContext</a> <a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">  137</a></span>&#160;    <a class="code" href="structDiracGolombLUT.html">DiracGolombLUT</a> *<a class="code" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">reader_ctx</a>;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">  138</a></span>&#160;    <a class="code" href="structDiracVersionInfo.html">DiracVersionInfo</a> <a class="code" href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">version</a>;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structDiracContext.html#a72039586798c14aef655a63082a88824">  139</a></span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> <a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">  140</a></span>&#160;    <a class="code" href="structAVDiracSeqHeader.html">AVDiracSeqHeader</a> <a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">  141</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a>;</div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">  142</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a>;           <span class="comment">/* number of the next frame to display       */</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">  143</a></span>&#160;    <a class="code" href="structPlane.html">Plane</a> <a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>[3];</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">  144</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>;</div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">  145</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">  147</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">bit_depth</a>;              <span class="comment">/* bit depth                                 */</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">  148</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>;                 <span class="comment">/* pixel shift = bit_depth &gt; 8               */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa105bb809553714c19833121309bef33">  150</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#aa105bb809553714c19833121309bef33">zero_res</a>;               <span class="comment">/* zero residue flag                         */</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">  151</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">is_arith</a>;               <span class="comment">/* whether coeffs use arith or golomb coding */</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structDiracContext.html#abf37c2e9350d519b1233c013f448392c">  152</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#abf37c2e9350d519b1233c013f448392c">core_syntax</a>;            <span class="comment">/* use core syntax only                      */</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">  153</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a>;              <span class="comment">/* use the low delay syntax                  */</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">  154</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>;             <span class="comment">/* high quality picture, enables low_delay   */</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">  155</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">ld_picture</a>;             <span class="comment">/* use low delay picture, turns on low_delay */</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structDiracContext.html#a922580ca410cb6a8e5b8e0910fae7470">  156</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a922580ca410cb6a8e5b8e0910fae7470">dc_prediction</a>;          <span class="comment">/* has dc prediction                         */</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">  157</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">globalmc_flag</a>;          <span class="comment">/* use global motion compensation            */</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">  158</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>;               <span class="comment">/* number of reference pictures              */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">/* wavelet decoding */</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">  161</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>;     <span class="comment">/* depth of the IDWT                         */</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">  162</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">wavelet_idx</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">     * schroedinger older than 1.0.8 doesn&#39;t store</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">     * quant delta if only one codebook exists in a band</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structDiracContext.html#ab341c8bb377ea50ac1521fc90d5b58e0">  168</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#ab341c8bb377ea50ac1521fc90d5b58e0">old_delta_quant</a>;</div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structDiracContext.html#a32784728a1f40e518bae3ac550525625">  169</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a32784728a1f40e518bae3ac550525625">codeblock_mode</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">  171</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>;              <span class="comment">/* number of horizontal slices               */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">  172</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>;              <span class="comment">/* number of vertical slices                 */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">  174</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>;         <span class="comment">/* Per-thread buffer for coefficient storage */</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">  175</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">threads_num_buf</a>;         <span class="comment">/* Current # of buffers allocated            */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">  176</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a>;         <span class="comment">/* Each thread has a buffer this size        */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa61000341312314ebda05774c456becf">  178</a></span>&#160;    <a class="code" href="structDiracSlice.html">DiracSlice</a> *<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a>;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">  179</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">slice_params_num_buf</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="structDiracContext.html#a154a7381e96665dc8bd9f371ebd7630b">  182</a></span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a154a7381e96665dc8bd9f371ebd7630b">width</a>;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="structDiracContext.html#a7c22b76cea516d78a4382223e400616e">  183</a></span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a7c22b76cea516d78a4382223e400616e">height</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    } <a class="code" href="libavcodec_2diracdec_8c.html#ab93432f6ba2fe52c6ecac07933cd96ba">codeblock</a>[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>+1];</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">  187</a></span>&#160;        <a class="code" href="structAVRational.html">AVRational</a> <a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>;       <span class="comment">/* average bytes per slice                   */</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">  188</a></span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>][4]; <span class="comment">/* [DIRAC_STD] E.1 */</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    } lowdelay;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">  192</a></span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">prefix_bytes</a>;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">  193</a></span>&#160;        uint64_t <a class="code" href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">size_scaler</a>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    } highquality;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="structDiracContext.html#aacd74f76852929d9b9fa0fce0a1e4700">  197</a></span>&#160;        <span class="keywordtype">int</span> pan_tilt[2];        <span class="comment">/* pan/tilt vector                           */</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">  198</a></span>&#160;        <span class="keywordtype">int</span> zrs[2][2];          <span class="comment">/* zoom/rotate/shear matrix                  */</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa44d39d5d5b9f719c5abd10ac22ee022">  199</a></span>&#160;        <span class="keywordtype">int</span> perspective[2];     <span class="comment">/* perspective vector                        */</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structDiracContext.html#ab60ed28b2e25a73b5a7e4d6f232f7e49">  200</a></span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#ab60ed28b2e25a73b5a7e4d6f232f7e49">zrs_exp</a>;</div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structDiracContext.html#a54d794a44c552cf8ada575b1b504cd00">  201</a></span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a54d794a44c552cf8ada575b1b504cd00">perspective_exp</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    } globalmc[2];</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">/* motion compensation */</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">  205</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>;       <span class="comment">/* [DIRAC_STD] REFS_WT_PRECISION             */</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">  206</a></span>&#160;    int16_t <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>[2];          <span class="comment">/* [DIRAC_STD] REF1_WT and REF2_WT           */</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">  207</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a>;  <span class="comment">/* [DIRAC_STD] REFS_WT_PRECISION             */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">  209</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>;                <span class="comment">/* number of blocks (horizontally)           */</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">  210</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">blheight</a>;               <span class="comment">/* number of blocks (vertically)             */</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">  211</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>;                <span class="comment">/* number of superblocks (horizontally)      */</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">  212</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">sbheight</a>;               <span class="comment">/* number of superblocks (vertically)        */</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">  214</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">  215</a></span>&#160;    <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">  217</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *edge_emu_buffer[4];</div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">  218</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">  220</a></span>&#160;    uint16_t *<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>;            <span class="comment">/* buffer holding the MC data multiplied by OBMC weights */</span></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">  221</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>;</div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">  222</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">buffer_stride</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">  224</a></span>&#160;    <a class="code" href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a>(16, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>, obmc_weight)[3][<a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>*<a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>];</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">  226</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*put_pixels_tab[4])(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>[5], <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structDiracContext.html#aec5d771ad7ae9049bec174c775fb0ec7">  227</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*avg_pixels_tab[4])(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *src[5], <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structDiracContext.html#a9390e4a0238e3f79551ed440131542aa">  228</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*add_obmc)(uint16_t *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *obmc_weight, <span class="keywordtype">int</span> yblen);</div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">  229</a></span>&#160;    <a class="code" href="diracdsp_8h.html#a9589285010e26bb2e4228eec18d9e598">dirac_weight_func</a> <a class="code" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">weight_func</a>;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">  230</a></span>&#160;    <a class="code" href="diracdsp_8h.html#a523f1f5a5d222eb2622c398decc50158">dirac_biweight_func</a> <a class="code" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">biweight_func</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">  232</a></span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">  233</a></span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *ref_pics[2];</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">  235</a></span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="vp3_8c.html#a86527b2169eb693a23405feae80d5242">ref_frames</a>[<a class="code" href="libavcodec_2diracdec_8c.html#a1f99d0554a99a0d366962c6d0a764032">MAX_REFERENCE_FRAMES</a>+1];</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">  236</a></span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *delay_frames[<a class="code" href="libavcodec_2diracdec_8c.html#a16027d8acc5301e440cefa086eb9db2a">MAX_DELAY</a>+1];</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">  237</a></span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> all_frames[<a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>];</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;} <a class="code" href="structDiracContext.html">DiracContext</a>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2e">  240</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2e">dirac_subband</a> {</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">  241</a></span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">subband_ll</a> = 0,</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea7fb53e3e62736af3f6fc986153bb25dc">  242</a></span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea7fb53e3e62736af3f6fc986153bb25dc">subband_hl</a> = 1,</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eafb6f3eb638035c0def4783b164d81b06">  243</a></span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eafb6f3eb638035c0def4783b164d81b06">subband_lh</a> = 2,</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eadc43a2a062d874c99aee4fe8a43d223f">  244</a></span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eadc43a2a062d874c99aee4fe8a43d223f">subband_hh</a> = 3,</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eaee3bdeeb1a1e080a61e25c53aa941391">  245</a></span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eaee3bdeeb1a1e080a61e25c53aa941391">subband_nb</a>,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;};</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">/* magic number division by 3 from schroedinger */</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a9e59bf9049ce8b4c97b683b85a34ea9f">  249</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a9e59bf9049ce8b4c97b683b85a34ea9f">divide3</a>(<span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> ((x+1)*21845 + 10922) &gt;&gt; 16;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">  254</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a>(<a class="code" href="structDiracFrame.html">DiracFrame</a> *framelist[], <span class="keywordtype">int</span> picnum)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *remove_pic = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">int</span> i, remove_idx = -1;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (i = 0; framelist[i]; i++)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (framelist[i]-&gt;avframe-&gt;display_picture_number == picnum) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            remove_pic = framelist[i];</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            remove_idx = i;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (remove_pic)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (i = remove_idx; framelist[i]; i++)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            framelist[i] = framelist[i+1];</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> remove_pic;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">  272</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">add_frame</a>(<a class="code" href="structDiracFrame.html">DiracFrame</a> *framelist[], <span class="keywordtype">int</span> maxframes, <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="demuxing__decoding_8c.html#ad7d33d579a8d4241a5e643e39287a209">frame</a>)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; maxframes; i++)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (!framelist[i]) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            framelist[i] = <a class="code" href="demuxing__decoding_8c.html#ad7d33d579a8d4241a5e643e39287a209">frame</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a45dd7a5b11e0b78ffffb5485bc3bc521">  283</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a45dd7a5b11e0b78ffffb5485bc3bc521">alloc_sequence_buffers</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">int</span> sbwidth  = <a class="code" href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">DIVRNDUP</a>(s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>,  4);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">int</span> sbheight = <a class="code" href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">DIVRNDUP</a>(s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a>, 4);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">int</span> i, w, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, top_padding;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">/* todo: think more about this / use or set Plane here */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordtype">int</span> max_xblen = <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a> &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a> : 0);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordtype">int</span> max_yblen = <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a> &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a> : 0);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        w = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>  &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a> : 0);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        h = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a> &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a> : 0);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">/* we allocate the max we support here since num decompositions can</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">         * change from frame to frame. Stride is aligned to 16 for SIMD, and</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">         * 1&lt;&lt;MAX_DWT_LEVELS top padding to avoid if(y&gt;0) in arith decoding</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">         * MAX_BLOCKSIZE padding for MC: blocks can spill up to half of that</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">         * on each side */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        top_padding = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(1&lt;&lt;<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>, max_yblen/2);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        w = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">CALC_PADDING</a>(w, <a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>), 8); <span class="comment">/* FIXME: Should this be 16 for SSE??? */</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        h = top_padding + <a class="code" href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">CALC_PADDING</a>(h, <a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>) + max_yblen/2;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#af748ef61e94228256375abbe519c9959">buf_base</a> = <a class="code" href="group__lavu__mem__funcs.html#gae0443f550815c80af42c5ae967351433">av_mallocz_array</a>((w+max_xblen), h * (2 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>));</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#acfc7dda66feb9a80b01fe3793d70d139">tmp</a>      = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>((w+16), 2 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a>      = s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#af748ef61e94228256375abbe519c9959">buf_base</a> + (top_padding*w)*(2 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#af748ef61e94228256375abbe519c9959">buf_base</a> || !s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#acfc7dda66feb9a80b01fe3793d70d139">tmp</a>)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">/* fixme: allocate using real stride here */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>  = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>(sbwidth, sbheight);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a> = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>(sbwidth, sbheight * 16 * <span class="keyword">sizeof</span>(*s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a>));</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a> || !s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a>)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a958e84421650b1d9a6d4d2eb51c9a7f2">  321</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a958e84421650b1d9a6d4d2eb51c9a7f2">alloc_buffers</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">int</span> w = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(stride &gt;= w);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    stride += 64;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">buffer_stride</a> &gt;= stride)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">buffer_stride</a> = 0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    memset(s-&gt;<a class="code" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">edge_emu_buffer</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">edge_emu_buffer</a>));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a> = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>(stride, <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>     = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>((stride+<a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>), (h+<a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>) * <span class="keyword">sizeof</span>(*s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>));</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a> = <a class="code" href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a>(stride, <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a> || !s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a> || !s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">buffer_stride</a> = <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a249638f79537ac44180aaba75952424c">  350</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a249638f79537ac44180aaba75952424c">free_sequence_buffers</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span> i, j, k;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; i++) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0]) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            memset(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>));</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">for</span> (k = 1; k &lt; 4; k++)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">hpel_base</a>[j][k]);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    memset(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>));</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    memset(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>));</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#af748ef61e94228256375abbe519c9959">buf_base</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#acfc7dda66feb9a80b01fe3793d70d139">tmp</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">buffer_stride</a> = 0;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a640af427e4187904b9ba4b76d762c477">  382</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a640af427e4187904b9ba4b76d762c477">dirac_decode_init</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a> = avctx;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a> = -1;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">threads_num_buf</a> = -1;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a> = -1;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="dirac__vlc_8c.html#a18e47040fe054724eb334d0f517b6314">ff_dirac_golomb_reader_init</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">reader_ctx</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="diracdsp_8c.html#a98f655e8b5255e71a4272b7720a4fa10">ff_diracdsp_init</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="mpegvideoencdsp_8c.html#a5541c64c94768b55c658e4e88ab60103">ff_mpegvideoencdsp_init</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>, avctx);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ab486ac0ab57ae25eda3ef0c37a370e1e">vdsp</a>, 8);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; i++) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">while</span> (i &gt; 0)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[--i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a09d1421348adb8d166f4f1e644d270bc">  411</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a09d1421348adb8d166f4f1e644d270bc">dirac_decode_flush</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a249638f79537ac44180aaba75952424c">free_sequence_buffers</a>(s);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a> = 0;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a> = -1;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#afe23b76533446ffd389067d03eb9b360">  419</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#afe23b76533446ffd389067d03eb9b360">dirac_decode_end</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx)</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="dirac__vlc_8c.html#a5542d1beee398aee627b4c85f555149c">ff_dirac_golomb_reader_end</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">reader_ctx</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a09d1421348adb8d166f4f1e644d270bc">dirac_decode_flush</a>(avctx);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; i++)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#af02e8ce387eebdcc403a767f4be45d06">  436</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#af02e8ce387eebdcc403a767f4be45d06">coeff_unpack_golomb</a>(<a class="code" href="structGetBitContext.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> qfactor, <span class="keywordtype">int</span> qoffset)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> sign = <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(coeff);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (coeff)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        coeff = sign*((sign * coeff * qfactor + qoffset) &gt;&gt; 2);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a27e136c56317589437a2121f3dbc57bd">  445</a></span>&#160;<span class="preprocessor">#define SIGN_CTX(x) (CTX_SIGN_ZERO + ((x) &gt; 0) - ((x) &lt; 0))</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#acf70ff632502e37da7dbaa761df1a90a">  447</a></span>&#160;<span class="preprocessor">#define UNPACK_ARITH(n, type) \</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">    static inline void coeff_unpack_arith_##n(DiracArith *c, int qfactor, int qoffset, \</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">                                              SubBand *b, type *buf, int x, int y) \</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">    { \</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">        int coeff, sign, sign_pred = 0, pred_ctx = CTX_ZPZN_F1; \</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">        const int mstride = -(b-&gt;stride &gt;&gt; (1+b-&gt;pshift)); \</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">        if (b-&gt;parent) { \</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">            const type *pbuf = (type *)b-&gt;parent-&gt;ibuf; \</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">            const int stride = b-&gt;parent-&gt;stride &gt;&gt; (1+b-&gt;parent-&gt;pshift); \</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">            pred_ctx += !!pbuf[stride * (y&gt;&gt;1) + (x&gt;&gt;1)] &lt;&lt; 1; \</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">        if (b-&gt;orientation == subband_hl) \</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">            sign_pred = buf[mstride]; \</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">        if (x) { \</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">            pred_ctx += !(buf[-1] | buf[mstride] | buf[-1 + mstride]); \</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">            if (b-&gt;orientation == subband_lh) \</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">                sign_pred = buf[-1]; \</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">        } else { \</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">            pred_ctx += !buf[mstride]; \</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">        coeff = dirac_get_arith_uint(c, pred_ctx, CTX_COEFF_DATA); \</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">        if (coeff) { \</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">            coeff = (coeff * qfactor + qoffset) &gt;&gt; 2; \</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">            sign  = dirac_get_arith_bit(c, SIGN_CTX(sign_pred)); \</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">            coeff = (coeff ^ -sign) + sign; \</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">        *buf = coeff; \</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<a class="code" href="libavcodec_2diracdec_8c.html#acf70ff632502e37da7dbaa761df1a90a">UNPACK_ARITH</a>(8, int16_t)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<a class="code" href="libavcodec_2diracdec_8c.html#acf70ff632502e37da7dbaa761df1a90a">UNPACK_ARITH</a>(10, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> * Decode the coeffs in the rectangle defined by left, right, top, bottom</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"> * [DIRAC_STD] 13.4.3.2 Codeblock unpacking loop. codeblock()</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ab93432f6ba2fe52c6ecac07933cd96ba">  483</a></span>&#160;static inline <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#ab93432f6ba2fe52c6ecac07933cd96ba">codeblock</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>,</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                             <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb, <a class="code" href="structDiracArith.html">DiracArith</a> *<a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                             <span class="keywordtype">int</span> left, <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> top, <span class="keywordtype">int</span> bottom,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                             <span class="keywordtype">int</span> blockcnt_one, <span class="keywordtype">int</span> is_arith)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, zero_block;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">int</span> qoffset, qfactor;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">/* check for any coded coefficients in this codeblock */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (!blockcnt_one) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> (is_arith)</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            zero_block = <a class="code" href="dirac__arith_8h.html#a9939ad07037837c5a2961833447f7502">dirac_get_arith_bit</a>(c, <a class="code" href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77caaa50901372a72a20b137bb67121c8f2e">CTX_ZERO_BLOCK</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            zero_block = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">if</span> (zero_block)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (s-&gt;codeblock_mode &amp;&amp; !(s-&gt;old_delta_quant &amp;&amp; blockcnt_one)) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a> = b-&gt;quant;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (is_arith)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            quant += <a class="code" href="dirac__arith_8h.html#ad401fd831ab833f58c4688e3b4afa03d">dirac_get_arith_int</a>(c, <a class="code" href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77ca9a8bce407a0a53e46989819f6e849a47">CTX_DELTA_Q_F</a>, <a class="code" href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77ca0256b6a1974595b2ac5e1765172d002c">CTX_DELTA_Q_DATA</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            quant += <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> (quant &lt; 0) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid quant\n&quot;</span>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        b-&gt;quant = <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (b-&gt;quant &gt; (<a class="code" href="diractab_8h.html#a961d731075d3d8ad9f0bfc7dc6a6498d">DIRAC_MAX_QUANT_INDEX</a> - 1)) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported quant %d\n&quot;</span>, b-&gt;quant);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        b-&gt;quant = 0;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    qfactor = <a class="code" href="diractab_8c.html#a6c1efd4b2aa29923632f8b17cbe03802">ff_dirac_qscale_tab</a>[b-&gt;quant];</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">/* TODO: context pointer? */</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;num_refs)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        qoffset = <a class="code" href="diractab_8c.html#a572434af0ce97f3cb1be2e7fa1d05824">ff_dirac_qoffset_intra_tab</a>[b-&gt;quant] + 2;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        qoffset = <a class="code" href="diractab_8c.html#a65f2a2058bc653f8e6280027ebad78f2">ff_dirac_qoffset_inter_tab</a>[b-&gt;quant] + 2;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    buf = b-&gt;ibuf + top * b-&gt;stride;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (is_arith) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">for</span> (y = top; y &lt; bottom; y++) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">for</span> (x = left; x &lt; right; x++) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="keywordflow">if</span> (b-&gt;pshift) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    coeff_unpack_arith_10(c, qfactor, qoffset, b, (<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>*)(buf)+x, x, y);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                    coeff_unpack_arith_8(c, qfactor, qoffset, b, (int16_t*)(buf)+x, x, y);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            buf += b-&gt;stride;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">for</span> (y = top; y &lt; bottom; y++) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">for</span> (x = left; x &lt; right; x++) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#ad823be0325cd396723f2c37c16b3aaa2">val</a> = <a class="code" href="libavcodec_2diracdec_8c.html#af02e8ce387eebdcc403a767f4be45d06">coeff_unpack_golomb</a>(gb, qfactor, qoffset);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span> (b-&gt;pshift) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    <a class="code" href="intreadwrite_8h.html#a1b5acc160c4752ec37479a1d36989717">AV_WN32</a>(&amp;buf[4*x], val);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    <a class="code" href="intreadwrite_8h.html#ab57091b00cb68a113d18ab0d79f62823">AV_WN16</a>(&amp;buf[2*x], val);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            buf += b-&gt;stride;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;         }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;     }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"> * 13.3 intra_dc_prediction(band)</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ad005d55a3a640f22b8ed513fd4aa96f2">  560</a></span>&#160;<span class="preprocessor">#define INTRA_DC_PRED(n, type) \</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">    static inline void intra_dc_prediction_##n(SubBand *b) \</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">    { \</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">        type *buf = (type*)b-&gt;ibuf; \</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">        int x, y; \</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">        \</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">        for (x = 1; x &lt; b-&gt;width; x++) \</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">            buf[x] += buf[x-1]; \</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">        buf += (b-&gt;stride &gt;&gt; (1+b-&gt;pshift)); \</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">        \</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="preprocessor">        for (y = 1; y &lt; b-&gt;height; y++) { \</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">            buf[0] += buf[-(b-&gt;stride &gt;&gt; (1+b-&gt;pshift))]; \</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">            \</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">            for (x = 1; x &lt; b-&gt;width; x++) { \</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">                int pred = buf[x - 1] + buf[x - (b-&gt;stride &gt;&gt; (1+b-&gt;pshift))] + buf[x - (b-&gt;stride &gt;&gt; (1+b-&gt;pshift))-1]; \</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="preprocessor">                buf[x]  += divide3(pred); \</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="preprocessor">            } \</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">            buf += (b-&gt;stride &gt;&gt; (1+b-&gt;pshift)); \</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">        } \</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<a class="code" href="libavcodec_2diracdec_8c.html#ad005d55a3a640f22b8ed513fd4aa96f2">INTRA_DC_PRED</a>(8, int16_t)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<a class="code" href="libavcodec_2diracdec_8c.html#ad005d55a3a640f22b8ed513fd4aa96f2">INTRA_DC_PRED</a>(10, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> * 13.4.2 Non-skipped subbands.  subband_coeffs()</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a617fcaeec059a1ae66652eeae047eac9">  588</a></span>&#160;static <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a617fcaeec059a1ae66652eeae047eac9">decode_subband_internal</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>, <span class="keywordtype">int</span> is_arith)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">int</span> cb_x, cb_y, left, right, top, bottom;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="structDiracArith.html">DiracArith</a> <a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> gb;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordtype">int</span> cb_width  = s-&gt;codeblock[b-&gt;level + (b-&gt;orientation != <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">subband_ll</a>)].<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">int</span> cb_height = s-&gt;codeblock[b-&gt;level + (b-&gt;orientation != <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">subband_ll</a>)].<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">int</span> blockcnt_one = (cb_width + cb_height) == 2;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (!b-&gt;length)</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;gb, b-&gt;coeff_data, b-&gt;length);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (is_arith)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(&amp;c, &amp;gb, b-&gt;length);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    top = 0;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">for</span> (cb_y = 0; cb_y &lt; cb_height; cb_y++) {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        bottom = (b-&gt;height * (cb_y+1<a class="code" href="ff__glob_8c.html#a4bbb2f081a64bd1133aa6ba6f29525ab">LL</a>)) / cb_height;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        left = 0;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">for</span> (cb_x = 0; cb_x &lt; cb_width; cb_x++) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            right = (b-&gt;width * (cb_x+1<a class="code" href="ff__glob_8c.html#a4bbb2f081a64bd1133aa6ba6f29525ab">LL</a>)) / cb_width;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#ab93432f6ba2fe52c6ecac07933cd96ba">codeblock</a>(s, b, &amp;gb, &amp;c, left, right, top, bottom, blockcnt_one, is_arith);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            left = right;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        top = bottom;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (b-&gt;orientation == <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">subband_ll</a> &amp;&amp; s-&gt;num_refs == 0) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span> (s-&gt;pshift) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            intra_dc_prediction_10(b);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            intra_dc_prediction_8(b);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a428f9b4f3f20f3402fb8481285cb9949">  626</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a428f9b4f3f20f3402fb8481285cb9949">decode_subband_arith</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a617fcaeec059a1ae66652eeae047eac9">decode_subband_internal</a>(s, b, 1);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a435263d23ef652273d9c8f9407a23ae9">  633</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a435263d23ef652273d9c8f9407a23ae9">decode_subband_golomb</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;{</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="structSubBand.html">SubBand</a> **<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>     = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a617fcaeec059a1ae66652eeae047eac9">decode_subband_internal</a>(s, *b, 0);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"> * [DIRAC_STD] 13.4.1 core_transform_data()</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a943332759c7410358a0336f22374b8c5">  645</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a943332759c7410358a0336f22374b8c5">decode_component</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <span class="keywordtype">int</span> <a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;{</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx = s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="structSubBand.html">SubBand</a> *bands[3*<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>+1];</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keyword">enum</span> <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2e">dirac_subband</a> <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>, num_bands = 0;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">/* Unpack all subbands at all levels. */</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a> = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>];</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            bands[num_bands++] = <a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="comment">/* [DIRAC_STD] 13.4.2 subband() */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            b-&gt;<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">if</span> (b-&gt;<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a7d26b80a067abdd83cbb991281f83273">coeff_data</a> = s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>.<a class="code" href="structGetBitContext.html#ad3bbe8f5d0b9e28a1070396fac5725d8">buffer</a> + <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>)/8;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(b-&gt;<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a>, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>)/8, 0));</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>, b-&gt;<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a>*8);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">/* arithmetic coding has inter-level dependencies, so we can only execute one level at a time */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">is_arith</a>)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            avctx-&gt;<a class="code" href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">execute</a>(avctx, <a class="code" href="libavcodec_2diracdec_8c.html#a428f9b4f3f20f3402fb8481285cb9949">decode_subband_arith</a>, &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[comp].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[level][!!level],</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                           <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 4-!!level, <span class="keyword">sizeof</span>(<a class="code" href="structSubBand.html">SubBand</a>));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">/* golomb coding has no inter-level dependencies, so we can execute all subbands in parallel */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">is_arith</a>)</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">execute</a>(avctx, <a class="code" href="libavcodec_2diracdec_8c.html#a435263d23ef652273d9c8f9407a23ae9">decode_subband_golomb</a>, bands, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, num_bands, <span class="keyword">sizeof</span>(<a class="code" href="structSubBand.html">SubBand</a>*));</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a98c43c8a62a3288e97809e7c752fca33">  679</a></span>&#160;<span class="preprocessor">#define PARSE_VALUES(type, x, gb, ebits, buf1, buf2) \</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="preprocessor">    type *buf = (type *)buf1; \</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="preprocessor">    buf[x] = coeff_unpack_golomb(gb, qfactor, qoffset); \</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="preprocessor">    if (get_bits_count(gb) &gt;= ebits) \</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">        return; \</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="preprocessor">    if (buf2) { \</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">        buf = (type *)buf2; \</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">        buf[x] = coeff_unpack_golomb(gb, qfactor, qoffset); \</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">        if (get_bits_count(gb) &gt;= ebits) \</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="preprocessor">            return; \</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">    } \</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor"></span></div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a60ab0ea212ec6b8cf479736b02c609b0">  691</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a60ab0ea212ec6b8cf479736b02c609b0">decode_subband</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>,</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                           <span class="keywordtype">int</span> slice_x, <span class="keywordtype">int</span> slice_y, <span class="keywordtype">int</span> bits_end,</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                           <a class="code" href="structSubBand.html">SubBand</a> *b1, <a class="code" href="structSubBand.html">SubBand</a> *b2)</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordtype">int</span> left   = b1-&gt;<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>  * slice_x    / s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">int</span> right  = b1-&gt;<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>  *(slice_x+1) / s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">int</span> top    = b1-&gt;<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a> * slice_y    / s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordtype">int</span> bottom = b1-&gt;<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a> *(slice_y+1) / s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">int</span> qfactor, qoffset;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf1 =      b1-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a> + top * b1-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf2 = b2 ? b2-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a> + top * b2-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>: <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (quant &gt; (<a class="code" href="diractab_8h.html#a961d731075d3d8ad9f0bfc7dc6a6498d">DIRAC_MAX_QUANT_INDEX</a> - 1)) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported quant %d\n&quot;</span>, quant);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    qfactor = <a class="code" href="diractab_8c.html#a6c1efd4b2aa29923632f8b17cbe03802">ff_dirac_qscale_tab</a>[<a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>];</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    qoffset = <a class="code" href="diractab_8c.html#a572434af0ce97f3cb1be2e7fa1d05824">ff_dirac_qoffset_intra_tab</a>[<a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>] + 2;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">/* we have to constantly check for overread since the spec explicitly</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">       requires this, with the meaning that all remaining coeffs are set to 0 */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb) &gt;= bits_end)</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">for</span> (y = top; y &lt; bottom; y++) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">for</span> (x = left; x &lt; right; x++) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#a98c43c8a62a3288e97809e7c752fca33">PARSE_VALUES</a>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>, x, gb, bits_end, buf1, buf2);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            buf1 += b1-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">if</span> (buf2)</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                buf2 += b2-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">for</span> (y = top; y &lt; bottom; y++) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordflow">for</span> (x = left; x &lt; right; x++) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#a98c43c8a62a3288e97809e7c752fca33">PARSE_VALUES</a>(int16_t, x, gb, bits_end, buf1, buf2);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            buf1 += b1-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="keywordflow">if</span> (buf2)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                buf2 += b2-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"> * 13.5.2 Slices. slice(sx,sy)</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a833539c7d54fbc72c01ff24762fa8bf0">  743</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a833539c7d54fbc72c01ff24762fa8bf0">decode_lowdelay_slice</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="structDiracSlice.html">DiracSlice</a> *slice = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;slice-&gt;<a class="code" href="structDiracSlice.html#a6ad63b9f783a32781ea6cef571d47ce5">gb</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">enum</span> <a class="code" href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2e">dirac_subband</a> <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>, <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>, chroma_bits, chroma_end;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">int</span> quant_base  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7); <span class="comment">/*[DIRAC_STD] qindex */</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordtype">int</span> length_bits = <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(8 * slice-&gt;<a class="code" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">bytes</a>)+1;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordtype">int</span> luma_bits   = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(gb, length_bits);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordtype">int</span> luma_end    = <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb) + <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(luma_bits, <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb));</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">/* [DIRAC_STD] 13.5.5.2 luma_slice_band */</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++)</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            quant = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(quant_base - s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[level][orientation], 0);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#a60ab0ea212ec6b8cf479736b02c609b0">decode_subband</a>(s, gb, quant, slice-&gt;<a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a>, slice-&gt;<a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a>, luma_end,</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                           &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[level][orientation], <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">/* consume any unused bits from luma */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(gb, <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb) - luma_end);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    chroma_bits = 8*slice-&gt;<a class="code" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">bytes</a> - 7 - length_bits - luma_bits;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    chroma_end  = <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb) + <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(chroma_bits, <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb));</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">/* [DIRAC_STD] 13.5.5.3 chroma_slice_band */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            quant = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(quant_base - s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[level][orientation], 0);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#a60ab0ea212ec6b8cf479736b02c609b0">decode_subband</a>(s, gb, quant, slice-&gt;<a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a>, slice-&gt;<a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a>, chroma_end,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                           &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[1].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[level][orientation],</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                           &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[2].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[level][orientation]);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html">  781</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> {</div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">  782</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">left</a>;</div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">  783</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">top</a>;</div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">  784</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">tot_h</a>;</div><div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">  785</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">tot_v</a>;</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">  786</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">tot</a>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;} <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a2a355f5367fbe98356741995c3143e4e">  789</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a2a355f5367fbe98356741995c3143e4e">subband_coeffs</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, <span class="keywordtype">int</span> p,</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                          <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> <a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>])</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;{</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>, coef = 0;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> *o = &amp;<a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>];</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a> = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[p].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][3]; <span class="comment">/* orientation doens&#39;t matter */</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        o-&gt;<a class="code" href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">top</a>   = b-&gt;<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a> * y / s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        o-&gt;<a class="code" href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">left</a>  = b-&gt;<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>  * x / s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        o-&gt;<a class="code" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">tot_h</a> = ((b-&gt;<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>  * (x + 1)) / s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>) - o-&gt;<a class="code" href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">left</a>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        o-&gt;<a class="code" href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">tot_v</a> = ((b-&gt;<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a> * (y + 1)) / s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>) - o-&gt;<a class="code" href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">top</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        o-&gt;<a class="code" href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">tot</a>   = o-&gt;<a class="code" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">tot_h</a>*o-&gt;<a class="code" href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">tot_v</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        coef    += o-&gt;<a class="code" href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">tot</a> * (4 - !!<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> coef;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"> * VC-2 Specification -&gt;</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"> * 13.5.3 hq_slice(sx,sy)</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a8ee8ce1514289c50611c804156b30aa0">  810</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a8ee8ce1514289c50611c804156b30aa0">decode_hq_slice</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracSlice.html">DiracSlice</a> *slice, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *tmp_buf)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordtype">int</span> i, <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>, <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>, quant_idx;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordtype">int</span> qfactor[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>][4], qoffset[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>][4];</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;slice-&gt;<a class="code" href="structDiracSlice.html#a6ad63b9f783a32781ea6cef571d47ce5">gb</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> coeffs_num[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>];</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(gb, 8*s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">prefix_bytes</a>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    quant_idx = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (quant_idx &gt; <a class="code" href="diractab_8h.html#a961d731075d3d8ad9f0bfc7dc6a6498d">DIRAC_MAX_QUANT_INDEX</a>) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid quantization index - %i\n&quot;</span>, quant_idx);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">/* Slice quantization (slice_quantizers() in the specs) */</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++) {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(quant_idx - s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[level][orientation], 0);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            qfactor[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>] = <a class="code" href="diractab_8c.html#a6c1efd4b2aa29923632f8b17cbe03802">ff_dirac_qscale_tab</a>[<a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>];</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            qoffset[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>] = <a class="code" href="diractab_8c.html#a572434af0ce97f3cb1be2e7fa1d05824">ff_dirac_qoffset_intra_tab</a>[<a class="code" href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">quant</a>] + 2;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">/* Luma + 2 Chroma planes */</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordtype">int</span> coef_num, coef_par, off = 0;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        int64_t <a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a> = s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">size_scaler</a>*<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        int64_t bits_end = <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb) + 8*<a class="code" href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">length</a>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *addr = <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(gb);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">if</span> (length*8 &gt; <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb)) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;end too far away\n&quot;</span>);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        coef_num = <a class="code" href="libavcodec_2diracdec_8c.html#a2a355f5367fbe98356741995c3143e4e">subband_coeffs</a>(s, slice-&gt;<a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a>, slice-&gt;<a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a>, i, coeffs_num);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            coef_par = <a class="code" href="dirac__vlc_8c.html#a3be963d9308da7183922724753023f9f">ff_dirac_golomb_read_32bit</a>(s-&gt;<a class="code" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">reader_ctx</a>, addr,</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                                                  length, tmp_buf, coef_num);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            coef_par = <a class="code" href="dirac__vlc_8c.html#a0b2835dc7dcc5382d57364f397930b41">ff_dirac_golomb_read_16bit</a>(s-&gt;<a class="code" href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">reader_ctx</a>, addr,</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                  length, tmp_buf, coef_num);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span> (coef_num &gt; coef_par) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> start_b = coef_par * (1 &lt;&lt; (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> + 1));</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> end_b   = coef_num * (1 &lt;&lt; (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> + 1));</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            memset(&amp;tmp_buf[start_b], 0, end_b - start_b);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keyword">const</span> <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> *<a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a> = &amp;coeffs_num[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>];</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                <span class="keyword">const</span> <a class="code" href="structSubBand.html">SubBand</a> *b1 = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>];</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a> = b1-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a> + c-&gt;<a class="code" href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">top</a> * b1-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a> + (c-&gt;<a class="code" href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">left</a> &lt;&lt; (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> + 1));</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="comment">/* Change to c-&gt;tot_h &lt;= 4 for AVX2 dequantization */</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> qfunc = s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> + 2*(c-&gt;<a class="code" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">tot_h</a> &lt;= 2);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#af9ccdea5260eb791a21377eb68a30475">dequant_subband</a>[qfunc](&amp;tmp_buf[off], <a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a>, b1-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>,</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                                                   qfactor[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>],</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                                   qoffset[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>],</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                                   c-&gt;<a class="code" href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">tot_v</a>, c-&gt;<a class="code" href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">tot_h</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                off += c-&gt;<a class="code" href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">tot</a> &lt;&lt; (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> + 1);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(gb, bits_end - <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb));</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a059764fc4134ff43cba8844e74fc9dfa">  884</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a059764fc4134ff43cba8844e74fc9dfa">decode_hq_slice_row</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, <span class="keywordtype">int</span> jobnr, <span class="keywordtype">int</span> threadnr)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;{</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="structDiracSlice.html">DiracSlice</a> *slices = ((<a class="code" href="structDiracSlice.html">DiracSlice</a> *)arg) + s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>*jobnr;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *thread_buf = &amp;s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>[s-&gt;<a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a>*threadnr];</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>; i++)</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a8ee8ce1514289c50611c804156b30aa0">decode_hq_slice</a>(s, &amp;slices[i], thread_buf);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"> * 13.5.1 low_delay_transform_data()</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#aaa9d00f5deecef8ae7dfe289b25469d0">  899</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#aaa9d00f5deecef8ae7dfe289b25469d0">decode_lowdelay</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx = s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordtype">int</span> slice_x, slice_y, bufsize;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    int64_t coef_buf_size, bytes = 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="structDiracSlice.html">DiracSlice</a> *slices;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="structSliceCoeffs.html">SliceCoeffs</a> <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>[<a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a>];</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordtype">int</span> slice_num = 0;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">slice_params_num_buf</a> != (s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> * s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>)) {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a> = <a class="code" href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a>(s-&gt;<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a>, s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> * s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>, <span class="keyword">sizeof</span>(<a class="code" href="structDiracSlice.html">DiracSlice</a>));</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a>) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;slice params buffer allocation failure\n&quot;</span>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">slice_params_num_buf</a> = 0;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">slice_params_num_buf</a> = s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> * s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    slices = s-&gt;<a class="code" href="structDiracContext.html#aa61000341312314ebda05774c456becf">slice_params_buf</a>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">/* 8 becacuse that&#39;s how much the golomb reader could overread junk data</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">     * from another plane/slice at most, and 512 because SIMD */</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    coef_buf_size = <a class="code" href="libavcodec_2diracdec_8c.html#a2a355f5367fbe98356741995c3143e4e">subband_coeffs</a>(s, s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> - 1, s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a> - 1, 0, tmp) + 8;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    coef_buf_size = (coef_buf_size &lt;&lt; (1 + s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>)) + 512;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">threads_num_buf</a> != avctx-&gt;<a class="code" href="structAVCodecContext.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a> ||</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a> != coef_buf_size) {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">threads_num_buf</a>  = avctx-&gt;<a class="code" href="structAVCodecContext.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a>  = coef_buf_size;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>       = <a class="code" href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a>(s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>, avctx-&gt;<a class="code" href="structAVCodecContext.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>, s-&gt;<a class="code" href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">thread_buf_size</a>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">thread_buf</a>) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;thread buffer allocation failure\n&quot;</span>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">/*[DIRAC_STD] 13.5.2 Slices. slice(sx,sy) */</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    buf = s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>.<a class="code" href="structGetBitContext.html#ad3bbe8f5d0b9e28a1070396fac5725d8">buffer</a> + <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>)/8;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    bufsize = <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">for</span> (slice_y = 0; bufsize &gt; 0 &amp;&amp; slice_y &lt; s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>; slice_y++) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">for</span> (slice_x = 0; bufsize &gt; 0 &amp;&amp; slice_x &lt; s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>; slice_x++) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                bytes = s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">prefix_bytes</a> + 1;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                    <span class="keywordflow">if</span> (bytes &lt;= bufsize/8)</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        bytes += buf[bytes] * s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">size_scaler</a> + 1;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                <span class="keywordflow">if</span> (bytes &gt;= INT_MAX || bytes*8 &gt; bufsize) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;too many bytes\n&quot;</span>);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">bytes</a>   = bytes;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a> = slice_x;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a> = slice_y;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;slices[slice_num].gb, buf, bufsize);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                slice_num++;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                buf     += bytes;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                <span class="keywordflow">if</span> (bufsize/8 &gt;= bytes)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                    bufsize -= bytes*8;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    bufsize = 0;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>*s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a> != slice_num) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;too few slices\n&quot;</span>);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#acacf593700a5cf7d121196e53bd94ad2">execute2</a>(avctx, <a class="code" href="libavcodec_2diracdec_8c.html#a059764fc4134ff43cba8844e74fc9dfa">decode_hq_slice_row</a>, slices, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">for</span> (slice_y = 0; bufsize &gt; 0 &amp;&amp; slice_y &lt; s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>; slice_y++) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keywordflow">for</span> (slice_x = 0; bufsize &gt; 0 &amp;&amp; slice_x &lt; s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>; slice_x++) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                bytes = (slice_num+1) * (int64_t)s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">den</a></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                       - slice_num    * (int64_t)s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">bytes</a>   = bytes;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">slice_x</a> = slice_x;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                slices[slice_num].<a class="code" href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">slice_y</a> = slice_y;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;slices[slice_num].gb, buf, bufsize);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                slice_num++;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                buf     += bytes;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordflow">if</span> (bufsize/8 &gt;= bytes)</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    bufsize -= bytes*8;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    bufsize = 0;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">execute</a>(avctx, <a class="code" href="libavcodec_2diracdec_8c.html#a833539c7d54fbc72c01ff24762fa8bf0">decode_lowdelay_slice</a>, slices, <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, slice_num,</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                       <span class="keyword">sizeof</span>(<a class="code" href="structDiracSlice.html">DiracSlice</a>)); <span class="comment">/* [DIRAC_STD] 13.5.2 Slices */</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a922580ca410cb6a8e5b8e0910fae7470">dc_prediction</a>) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            intra_dc_prediction_10(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]); <span class="comment">/* [DIRAC_STD] 13.3 intra_dc_prediction() */</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            intra_dc_prediction_10(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[1].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]); <span class="comment">/* [DIRAC_STD] 13.3 intra_dc_prediction() */</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            intra_dc_prediction_10(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[2].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]); <span class="comment">/* [DIRAC_STD] 13.3 intra_dc_prediction() */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            intra_dc_prediction_8(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            intra_dc_prediction_8(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[1].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            intra_dc_prediction_8(&amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[2].<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[0][0]);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a1c0c591dd6b330b0c7ba2f3dd3bffb45"> 1013</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a1c0c591dd6b330b0c7ba2f3dd3bffb45">init_planes</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;{</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">int</span> i, w, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>, <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="structPlane.html">Plane</a> *p = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[i];</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>       = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>  &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a> : 0);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>      = s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a> &gt;&gt; (i ? s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a> : 0);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a4b526c3f99e729cec931c17d15b6e7ee">width</a>  = w = <a class="code" href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">CALC_PADDING</a>(p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a> , s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ac3e96024c1a7d09e57f60b3ca0d117dd">height</a> = h = <a class="code" href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">CALC_PADDING</a>(p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>, s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a4b526c3f99e729cec931c17d15b6e7ee">width</a>, 8) &lt;&lt; (1 + s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">for</span> (level = s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>-1; level &gt;= 0; level--) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            w = w&gt;&gt;1;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            h = h&gt;&gt;1;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="keywordflow">for</span> (orientation = !!level; orientation &lt; 4; orientation++) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                <a class="code" href="structSubBand.html">SubBand</a> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a> = &amp;p-&gt;<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>];</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a690d20481bd1095d6319f0655d50ba10">pshift</a> = s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a>   = p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>  = <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a> = p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> &lt;&lt; (s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a> - <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>  = w;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a> = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                b-&gt;<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a> = <a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                <span class="keywordflow">if</span> (orientation &amp; 1)</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    b-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a> += w &lt;&lt; (1+b-&gt;<a class="code" href="structSubBand.html#a690d20481bd1095d6319f0655d50ba10">pshift</a>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <span class="keywordflow">if</span> (orientation &gt; 1)</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    b-&gt;<a class="code" href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">ibuf</a> += (b-&gt;<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>&gt;&gt;1);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <span class="keywordflow">if</span> (level)</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    b-&gt;<a class="code" href="structSubBand.html#a7605c5274cf09bbf4c99c10fb2143e89">parent</a> = &amp;p-&gt;<a class="code" href="structPlane.html#a62cba26f8e6a778847ed423e956212df">band</a>[level-1][<a class="code" href="structSubBand.html#a891287b5b41082feff064eede0406061">orientation</a>];</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span> (i &gt; 0) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> = s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> &gt;&gt; s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> = s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> &gt;&gt; s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> = s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> &gt;&gt; s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> = s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> &gt;&gt; s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        p-&gt;<a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a> = (p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> - p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>)/2;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        p-&gt;<a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a> = (p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> - p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a>)/2;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"> * Unpack the motion compensation parameters</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"> * 11.2 Picture prediction data. picture_prediction()</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a223983da3d9e9529b6fae368a4139437"> 1067</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a223983da3d9e9529b6fae368a4139437">dirac_unpack_prediction_parameters</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;{</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> default_blen[] = { 4, 12, 16, 24 };</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordtype">unsigned</span> idx, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(gb);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="comment">/* [DIRAC_STD] 11.2.2 Block parameters. block_parameters() */</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">/* Luma and Chroma are equal. 11.2.3 */</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    idx = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb); <span class="comment">/* [DIRAC_STD] index */</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> (idx &gt; 4) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Block prediction index too high\n&quot;</span>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (idx == 0) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="comment">/*[DIRAC_STD] preset_block_params(index). Table 11.1 */</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> = default_blen[idx-1];</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> = default_blen[idx-1];</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> = 4 * idx;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> = 4 * idx;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">/*[DIRAC_STD] 11.2.4 motion_data_dimensions()</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">      Calculated in function dirac_unpack_block_motion_data */</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> % (1 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>) != 0 ||</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> % (1 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>) != 0 ||</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        !s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> || !s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;               <span class="stringliteral">&quot;invalid x/y block length (%d/%d) for x/y chroma shift (%d/%d)\n&quot;</span>,</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;               s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>, s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>, s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> || !s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> || s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> &lt; s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>/2 || s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> &lt; s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>/2) {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Block separation too small\n&quot;</span>);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> &gt; s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> || s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> &gt; s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Block separation greater than size\n&quot;</span>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>) &gt; <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported large block size\n&quot;</span>);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">/*[DIRAC_STD] 11.2.5 Motion vector precision. motion_vector_precision()</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">      Read motion vector precision */</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a> &gt; 3) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;MV precision finer than eighth-pel\n&quot;</span>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">/*[DIRAC_STD] 11.2.6 Global motion. global_motion()</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">      Read the global motion compensation parameters */</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">globalmc_flag</a> = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">globalmc_flag</a>) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        memset(s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>));</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="comment">/* [DIRAC_STD] pan_tilt(gparams) */</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keywordflow">for</span> (ref = 0; ref &lt; s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>; ref++) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aacd74f76852929d9b9fa0fce0a1e4700">pan_tilt</a>[0] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aacd74f76852929d9b9fa0fce0a1e4700">pan_tilt</a>[1] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <span class="comment">/* [DIRAC_STD] zoom_rotate_shear(gparams)</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">               zoom/rotation/shear parameters */</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#ab60ed28b2e25a73b5a7e4d6f232f7e49">zrs_exp</a>   = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[0][0] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[0][1] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[1][0] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[1][1] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[0][0] = 1;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>[1][1] = 1;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <span class="comment">/* [DIRAC_STD] perspective(gparams) */</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a54d794a44c552cf8ada575b1b504cd00">perspective_exp</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aa44d39d5d5b9f719c5abd10ac22ee022">perspective</a>[0]  = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aa44d39d5d5b9f719c5abd10ac22ee022">perspective</a>[1]  = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">/*[DIRAC_STD] 11.2.7 Picture prediction mode. prediction_mode()</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">      Picture prediction mode, not currently used. */</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb)) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown picture prediction mode\n&quot;</span>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="comment">/* [DIRAC_STD] 11.2.8 Reference picture weight. reference_picture_weights()</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">       just data read, weight calculation will be done later on. */</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a> = 1;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[0]        = 1;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[1]        = 1;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[0] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a> == 2)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[1] = <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"> * 11.3 Wavelet transform data. wavelet_transform()</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae2b880ae9d01cf1897d8d15b2c7de610"> 1186</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#ae2b880ae9d01cf1897d8d15b2c7de610">dirac_unpack_idwt_params</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;{</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordtype">int</span> i, <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="preprocessor">#define CHECKEDREAD(dst, cond, errmsg) \</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="preprocessor">    tmp = get_interleaved_ue_golomb(gb); \</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="preprocessor">    if (cond) { \</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="preprocessor">        av_log(s-&gt;avctx, AV_LOG_ERROR, errmsg); \</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="preprocessor">        return AVERROR_INVALIDDATA; \</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="preprocessor">    }\</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor">    dst = tmp;</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(gb);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#aa105bb809553714c19833121309bef33">zero_res</a> = s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a> ? <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) : 0;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#aa105bb809553714c19833121309bef33">zero_res</a>)</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">/*[DIRAC_STD] 11.3.1 Transform parameters. transform_parameters() */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a>(s-&gt;<a class="code" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">wavelet_idx</a>, tmp &gt; 6, <span class="stringliteral">&quot;wavelet_idx is too big\n&quot;</span>)</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a>(s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>, tmp &gt; <a class="code" href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a> || tmp &lt; 1, <span class="stringliteral">&quot;invalid number of DWT decompositions\n&quot;</span>)</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a>) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="comment">/* Codeblock parameters (core syntax only) */</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt;= s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; i++) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a>(s-&gt;<a class="code" href="structDiracContext.html#afb93db90f53b06061bc3ab909c1b0fb9">codeblock</a>[i].<a class="code" href="structDiracContext.html#a154a7381e96665dc8bd9f371ebd7630b">width</a> , tmp &lt; 1 || tmp &gt; (s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a> &gt;&gt;s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>-i), <span class="stringliteral">&quot;codeblock width invalid\n&quot;</span>)</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a>(s-&gt;<a class="code" href="structDiracContext.html#afb93db90f53b06061bc3ab909c1b0fb9">codeblock</a>[i].<a class="code" href="structDiracContext.html#a7c22b76cea516d78a4382223e400616e">height</a>, tmp &lt; 1 || tmp &gt; (s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>&gt;&gt;s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>-i), <span class="stringliteral">&quot;codeblock height invalid\n&quot;</span>)</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a>(s-&gt;<a class="code" href="structDiracContext.html#a32784728a1f40e518bae3ac550525625">codeblock_mode</a>, tmp &gt; 1, <span class="stringliteral">&quot;unknown codeblock mode\n&quot;</span>)</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt;= s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; i++)</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#afb93db90f53b06061bc3ab909c1b0fb9">codeblock</a>[i].<a class="code" href="structDiracContext.html#a154a7381e96665dc8bd9f371ebd7630b">width</a> = s-&gt;<a class="code" href="structDiracContext.html#afb93db90f53b06061bc3ab909c1b0fb9">codeblock</a>[i].<a class="code" href="structDiracContext.html#a7c22b76cea516d78a4382223e400616e">height</a> = 1;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a>        = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a>        = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> * s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a> == 0 || s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> * (uint64_t)s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a> &gt; INT_MAX) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,<span class="stringliteral">&quot;Invalid numx/y\n&quot;</span>);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">num_x</a> = s-&gt;<a class="code" href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">num_y</a> = 0;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">ld_picture</a>) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">bytes</a>.<a class="code" href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt;= 0) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,<span class="stringliteral">&quot;Invalid lowdelay.bytes.den\n&quot;</span>);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">prefix_bytes</a> = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">size_scaler</a>  = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">highquality</a>.<a class="code" href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">prefix_bytes</a> &gt;= INT_MAX / 8) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,<span class="stringliteral">&quot;too many prefix bytes\n&quot;</span>);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="comment">/* [DIRAC_STD] 11.3.5 Quantisation matrices (low-delay syntax). quant_matrix() */</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,<span class="stringliteral">&quot;Low Delay: Has Custom Quantization Matrix!\n&quot;</span>);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="comment">/* custom quantization matrix */</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[0][0] = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][1] = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][2] = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][3] = <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a> &gt; 4) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,<span class="stringliteral">&quot;Mandatory custom low delay matrix missing for depth %d\n&quot;</span>, s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="comment">/* default quantization matrix */</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="keywordflow">for</span> (level = 0; level &lt; s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>; level++)</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][i] = <a class="code" href="diractab_8c.html#a9b3301e2b136d251223e00c89bdb0053">ff_dirac_default_qmat</a>[s-&gt;<a class="code" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">wavelet_idx</a>][<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][i];</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                    <span class="comment">/* haar with no shift differs for different depths */</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">wavelet_idx</a> == 3)</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                        s-&gt;<a class="code" href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">lowdelay</a>.<a class="code" href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">quant</a>[<a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>][i] += 4*(s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>-1 - <a class="code" href="structSubBand.html#ab021471270550f6936840d8f2536b923">level</a>);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ad270c0f600ca74f45292a1436d36a90c"> 1278</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#ad270c0f600ca74f45292a1436d36a90c">pred_sbsplit</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *sbsplit, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>)</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> avgsplit[7] = { 0, 0, 1, 1, 1, 2, 2 };</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (!(x|y))</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!y)</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">return</span> sbsplit[-1];</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!x)</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">return</span> sbsplit[-<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>];</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">return</span> avgsplit[sbsplit[-1] + sbsplit[-<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>] + sbsplit[-stride-1]];</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692"> 1292</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692">pred_block_mode</a>(<a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, <span class="keywordtype">int</span> refmask)</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;{</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="siprdata_8h.html#a3cce87604695942e930d8853d9cad953">pred</a>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (!(x|y))</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!y)</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">return</span> block[-1].<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; refmask;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!x)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keywordflow">return</span> block[-<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>].<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; refmask;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="comment">/* return the majority */</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    pred = (block[-1].<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; refmask) + (block[-stride].<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> &amp; refmask) + (block[-stride-1].<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; refmask);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">return</span> (pred &gt;&gt; 1) &amp; refmask;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a0c0b6c78463768276c6dc19b0af5826e"> 1308</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a0c0b6c78463768276c6dc19b0af5826e">pred_block_dc</a>(<a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>)</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordtype">int</span> i, <a class="code" href="avisynth__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = 0;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    memset(block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>, 0, <span class="keyword">sizeof</span>(block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>));</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (x &amp;&amp; !(block[-1].<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> &amp; 3)) {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] += block[-1].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i];</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        n++;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">if</span> (y &amp;&amp; !(block[-stride].<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> &amp; 3)) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] += block[-stride].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i];</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        n++;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (x &amp;&amp; y &amp;&amp; !(block[-1-stride].ref &amp; 3)) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] += block[-1-stride].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i];</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        n++;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">if</span> (n == 2) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] = (block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i]+1)&gt;&gt;1;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n == 3) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] = <a class="code" href="libavcodec_2diracdec_8c.html#a9e59bf9049ce8b4c97b683b85a34ea9f">divide3</a>(block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i]);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;}</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a9d79c772142036cdc3ee3c5c64d433b2"> 1341</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a9d79c772142036cdc3ee3c5c64d433b2">pred_mv</a>(<a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>)</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;{</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    int16_t *<a class="code" href="siprdata_8h.html#a3cce87604695942e930d8853d9cad953">pred</a>[3];</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordtype">int</span> refmask = ref+1;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = refmask | <a class="code" href="libavcodec_2diracdec_8c.html#a6b50a2dbf44abfc3c360c271ff2aeed6">DIRAC_REF_MASK_GLOBAL</a>; <span class="comment">/*  exclude gmc blocks */</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = 0;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">if</span> (x &amp;&amp; (block[-1].ref &amp; mask) == refmask)</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        pred[n++] = block[-1].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>];</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">if</span> (y &amp;&amp; (block[-stride].ref &amp; mask) == refmask)</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        pred[n++] = block[-<a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>];</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (x &amp;&amp; y &amp;&amp; (block[-stride-1].ref &amp; mask) == refmask)</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        pred[n++] = block[-stride-1].<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>];</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">switch</span> (n) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0] = 0;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1] = 0;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0] = pred[0][0];</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1] = pred[0][1];</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0] = (pred[0][0] + pred[1][0] + 1) &gt;&gt; 1;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1] = (pred[0][1] + pred[1][1] + 1) &gt;&gt; 1;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0] = <a class="code" href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a>(pred[0][0], pred[1][0], pred[2][0]);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1] = <a class="code" href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a>(pred[0][1], pred[1][1], pred[2][1]);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;}</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#acf8a6abcedf89f4ea050b6c12596b5e3"> 1377</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#acf8a6abcedf89f4ea050b6c12596b5e3">global_mv</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>)</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;{</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordtype">int</span> ez      = s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#ab60ed28b2e25a73b5a7e4d6f232f7e49">zrs_exp</a>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordtype">int</span> ep      = s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a54d794a44c552cf8ada575b1b504cd00">perspective_exp</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> (*<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>)[2] = s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">zrs</a>;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a>      = s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aacd74f76852929d9b9fa0fce0a1e4700">pan_tilt</a>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a>      = s-&gt;<a class="code" href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">globalmc</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>].<a class="code" href="structDiracContext.html#aa44d39d5d5b9f719c5abd10ac22ee022">perspective</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordtype">int</span> m       = (1&lt;&lt;ep) - (c[0]*x + c[1]*y);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordtype">int</span> mx      = m * ((<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[0][0] * x + <a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[0][1]*<a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>) + (1&lt;&lt;ez) * b[0]);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordtype">int</span> my      = m * ((<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[1][0] * x + <a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[1][1]*<a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>) + (1&lt;&lt;ez) * b[1]);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0] = (mx + (1&lt;&lt;(ez+ep))) &gt;&gt; (ez+ep);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1] = (my + (1&lt;&lt;(ez+ep))) &gt;&gt; (ez+ep);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;}</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a67244182b20868420d63a7b7b797ac4c"> 1393</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a67244182b20868420d63a7b7b797ac4c">decode_block_params</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracArith.html">DiracArith</a> arith[8], <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>,</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                                <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>)</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a>  = <a class="code" href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692">pred_block_mode</a>(block, stride, x, y, <a class="code" href="libavcodec_2diracdec_8c.html#af6722c56143b81bddeb805e3980858d2">DIRAC_REF_MASK_REF1</a>);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> ^= <a class="code" href="dirac__arith_8h.html#a9939ad07037837c5a2961833447f7502">dirac_get_arith_bit</a>(arith, <a class="code" href="dirac__arith_8h.html#a620d78258fe895152eb18369b299338f">CTX_PMODE_REF1</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a> == 2) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> |= <a class="code" href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692">pred_block_mode</a>(block, stride, x, y, <a class="code" href="libavcodec_2diracdec_8c.html#a6a8a90dc55d56812575aa92ea7a98366">DIRAC_REF_MASK_REF2</a>);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> ^= <a class="code" href="dirac__arith_8h.html#a9939ad07037837c5a2961833447f7502">dirac_get_arith_bit</a>(arith, <a class="code" href="dirac__arith_8h.html#a1a0d425f34b7d23a03d10d36e7096a5a">CTX_PMODE_REF2</a>) &lt;&lt; 1;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">if</span> (!block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a>) {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a0c0b6c78463768276c6dc19b0af5826e">pred_block_dc</a>(block, stride, x, y);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[i] += <a class="code" href="dirac__arith_8h.html#ad401fd831ab833f58c4688e3b4afa03d">dirac_get_arith_int</a>(arith+1+i, <a class="code" href="dirac__arith_8h.html#aae6b0930e12985a20faaeb473ec5a959">CTX_DC_F1</a>, <a class="code" href="dirac__arith_8h.html#ae4c4d4ed99eda3c70df92e5d7a903045">CTX_DC_DATA</a>);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">globalmc_flag</a>) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> |= <a class="code" href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692">pred_block_mode</a>(block, stride, x, y, <a class="code" href="libavcodec_2diracdec_8c.html#a6b50a2dbf44abfc3c360c271ff2aeed6">DIRAC_REF_MASK_GLOBAL</a>);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> ^= <a class="code" href="dirac__arith_8h.html#a9939ad07037837c5a2961833447f7502">dirac_get_arith_bit</a>(arith, <a class="code" href="dirac__arith_8h.html#a13dd5bea4d14edb76f29ac0541922632">CTX_GLOBAL_BLOCK</a>) &lt;&lt; 2;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>; i++)</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">if</span> (block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; (i+1)) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="keywordflow">if</span> (block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a> &amp; <a class="code" href="libavcodec_2diracdec_8c.html#a6b50a2dbf44abfc3c360c271ff2aeed6">DIRAC_REF_MASK_GLOBAL</a>) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#acf8a6abcedf89f4ea050b6c12596b5e3">global_mv</a>(s, block, x, y, i);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#a9d79c772142036cdc3ee3c5c64d433b2">pred_mv</a>(block, stride, x, y, i);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[i][0] += <a class="code" href="dirac__arith_8h.html#ad401fd831ab833f58c4688e3b4afa03d">dirac_get_arith_int</a>(arith + 4 + 2 * i, <a class="code" href="dirac__arith_8h.html#a287010569db8ec56c2f452bf8d2f377d">CTX_MV_F1</a>, <a class="code" href="dirac__arith_8h.html#a4abdd95fab839e95cd9143b033bfd2ed">CTX_MV_DATA</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[i][1] += <a class="code" href="dirac__arith_8h.html#ad401fd831ab833f58c4688e3b4afa03d">dirac_get_arith_int</a>(arith + 5 + 2 * i, <a class="code" href="dirac__arith_8h.html#a287010569db8ec56c2f452bf8d2f377d">CTX_MV_F1</a>, <a class="code" href="dirac__arith_8h.html#a4abdd95fab839e95cd9143b033bfd2ed">CTX_MV_DATA</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;}</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment"> * Copies the current block to the other blocks covered by the current superblock split mode</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01433"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ab0e9b6ae757b815bf44a7c0656e1129f"> 1433</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#ab0e9b6ae757b815bf44a7c0656e1129f">propagate_block_data</a>(<a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">size</a>)</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;{</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="structDiracBlock.html">DiracBlock</a> *dst = <a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">for</span> (x = 1; x &lt; <a class="code" href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">size</a>; x++)</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        dst[x] = *block;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">for</span> (y = 1; y &lt; <a class="code" href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">size</a>; y++) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        dst += <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">size</a>; x++)</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            dst[x] = *block;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;}</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment"> * 12. Block motion data syntax</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01452"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a0ec1f7b39c5f06c062b600b159c97d60"> 1452</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a0ec1f7b39c5f06c062b600b159c97d60">dirac_unpack_block_motion_data</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;{</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *sbsplit = s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordtype">int</span> i, <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, q, p;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="structDiracArith.html">DiracArith</a> arith[8];</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <a class="code" href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a>(gb);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">/* [DIRAC_STD] 11.2.4 and 12.2.1 Number of blocks and superblocks */</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>  = <a class="code" href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">DIVRNDUP</a>(s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>,  4*s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">sbheight</a> = <a class="code" href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">DIVRNDUP</a>(s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>.<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a>, 4*s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a>);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>  = 4 * s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">blheight</a> = 4 * s-&gt;<a class="code" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">sbheight</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">/* [DIRAC_STD] 12.3.1 Superblock splitting modes. superblock_split_modes()</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">       decode superblock split modes */</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(arith, gb, <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb));     <span class="comment">/* get_interleaved_ue_golomb(gb) is the length */</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; s-&gt;<a class="code" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">sbheight</a>; y++) {</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>; x++) {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a>  = <a class="code" href="dirac__arith_8h.html#a255cca7c7eb77c80feb7c6b4ac1097a8">dirac_get_arith_uint</a>(arith, <a class="code" href="dirac__arith_8h.html#afc3dfdc62c27609053d7dd95467b8663">CTX_SB_F1</a>, <a class="code" href="dirac__arith_8h.html#a36a0f8890eee1fd4660aa8af8c46364d">CTX_SB_DATA</a>);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <span class="keywordflow">if</span> (split &gt; 2)</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            sbsplit[<a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>] = (split + <a class="code" href="libavcodec_2diracdec_8c.html#ad270c0f600ca74f45292a1436d36a90c">pred_sbsplit</a>(sbsplit+x, s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>, x, y)) % 3;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        sbsplit += s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">/* setup arith decoding */</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(arith, gb, <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb));</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>; i++) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(arith + 4 + 2 * i, gb, <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb));</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(arith + 5 + 2 * i, gb, <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb));</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++)</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a>(arith+1+i, gb, <a class="code" href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a>(gb));</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; s-&gt;<a class="code" href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">sbheight</a>; y++)</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a>; x++) {</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            <span class="keywordtype">int</span> blkcnt = 1 &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>[y * s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a> + <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>];</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            <span class="keywordtype">int</span> step   = 4 &gt;&gt; s-&gt;<a class="code" href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">sbsplit</a>[y * s-&gt;<a class="code" href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">sbwidth</a> + <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>];</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            <span class="keywordflow">for</span> (q = 0; q &lt; blkcnt; q++)</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                <span class="keywordflow">for</span> (p = 0; p &lt; blkcnt; p++) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                    <span class="keywordtype">int</span> bx = 4 * x + p*step;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                    <span class="keywordtype">int</span> by = 4 * y + q*step;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                    <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a> = &amp;s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a>[by*s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a> + bx];</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                    <a class="code" href="libavcodec_2diracdec_8c.html#a67244182b20868420d63a7b7b797ac4c">decode_block_params</a>(s, arith, block, s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>, bx, by);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                    <a class="code" href="libavcodec_2diracdec_8c.html#ab0e9b6ae757b815bf44a7c0656e1129f">propagate_block_data</a>(block, s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>, step);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;}</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e"> 1507</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> blen, <span class="keywordtype">int</span> <a class="code" href="vf__spp_8c.html#a3ac533abdb7fafba276c70740502e406">offset</a>)</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;{</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="preprocessor">#define ROLLOFF(i) offset == 1 ? ((i) ? 5 : 3) :        \</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="preprocessor">    (1 + (6*(i) + offset - 1) / (2*offset - 1))</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span> (i &lt; 2*offset)</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libavcodec_2diracdec_8c.html#a33ce2c8148de5c9f68b8c140ccf619eb">ROLLOFF</a>(i);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt; blen-1 - 2*offset)</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libavcodec_2diracdec_8c.html#a33ce2c8148de5c9f68b8c140ccf619eb">ROLLOFF</a>(blen-1 - i);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">return</span> 8;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123"> 1519</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123">init_obmc_weight_row</a>(<a class="code" href="structPlane.html">Plane</a> *p, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *obmc_weight, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>,</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                                 <span class="keywordtype">int</span> left, <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> wy)</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;{</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">for</span> (x = 0; left &amp;&amp; x &lt; p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> &gt;&gt; 1; x++)</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        obmc_weight[x] = wy*8;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">for</span> (; x &lt; p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> &gt;&gt; right; x++)</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        obmc_weight[x] = wy*<a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>(x, p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, p-&gt;<a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a>);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">for</span> (; x &lt; p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>; x++)</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        obmc_weight[x] = wy*8;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">for</span> (; x &lt; <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>; x++)</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        obmc_weight[x] = 0;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11"> 1533</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11">init_obmc_weight</a>(<a class="code" href="structPlane.html">Plane</a> *p, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *obmc_weight, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>,</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                             <span class="keywordtype">int</span> left, <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> top, <span class="keywordtype">int</span> bottom)</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;{</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">for</span> (y = 0; top &amp;&amp; y &lt; p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> &gt;&gt; 1; y++) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123">init_obmc_weight_row</a>(p, obmc_weight, stride, left, right, 8);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        obmc_weight += <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">for</span> (; y &lt; p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> &gt;&gt; bottom; y++) {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordtype">int</span> wy = <a class="code" href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a>(y, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>, p-&gt;<a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a>);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123">init_obmc_weight_row</a>(p, obmc_weight, stride, left, right, wy);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        obmc_weight += <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">for</span> (; y &lt; p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>; y++) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123">init_obmc_weight_row</a>(p, obmc_weight, stride, left, right, 8);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        obmc_weight += <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;}</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#acca130ad3f5763df7e0dbefae9630ae8"> 1552</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#acca130ad3f5763df7e0dbefae9630ae8">init_obmc_weights</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structPlane.html">Plane</a> *p, <span class="keywordtype">int</span> by)</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;{</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordtype">int</span> top = !by;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordtype">int</span> bottom = by == s-&gt;<a class="code" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">blheight</a>-1;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">/* don&#39;t bother re-initing for rows 2 to blheight-2, the weights don&#39;t change */</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">if</span> (top || bottom || by == 1) {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11">init_obmc_weight</a>(p, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[0], <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>, 1, 0, top, bottom);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11">init_obmc_weight</a>(p, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[1], <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>, 0, 0, top, bottom);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11">init_obmc_weight</a>(p, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[2], <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>, 0, 1, top, bottom);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a29635eba891ab70f6f89b4e02dbbdb60"> 1565</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="libavcodec_2diracdec_8c.html#a29635eba891ab70f6f89b4e02dbbdb60">epel_weights</a>[4][4][4] = {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    {{ 16,  0,  0,  0 },</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;     { 12,  4,  0,  0 },</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;     {  8,  8,  0,  0 },</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;     {  4, 12,  0,  0 }},</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    {{ 12,  0,  4,  0 },</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;     {  9,  3,  3,  1 },</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;     {  6,  6,  2,  2 },</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;     {  3,  9,  1,  3 }},</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    {{  8,  0,  8,  0 },</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;     {  6,  2,  6,  2 },</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;     {  4,  4,  4,  4 },</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;     {  2,  6,  2,  6 }},</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    {{  4,  0, 12,  0 },</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;     {  3,  1,  9,  3 },</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;     {  2,  2,  6,  6 },</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;     {  1,  3,  3,  9 }}</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;};</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment"> * For block x,y, determine which of the hpel planes to do bilinear</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment"> * interpolation from and set src[] to the location in each hpel plane</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment"> * to MC from.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment"> * @return the index of the put_dirac_pixels_tab function to use</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment"> *  0 for 1 plane (fpel,hpel), 1 for 2 planes (qpel), 2 for 4 planes (qpel), and 3 for epel</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01592"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924"> 1592</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924">mc_subpel</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>[5],</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                     <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>)</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;{</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="structPlane.html">Plane</a> *p = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>];</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **ref_hpel = s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>]-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>];</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordtype">int</span> motion_x = block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][0];</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">int</span> motion_y = block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">mv</a>[<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>][1];</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordtype">int</span> mx, my, i, epel, nplanes = 0;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span> (plane) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        motion_x &gt;&gt;= s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        motion_y &gt;&gt;= s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    mx         = motion_x &amp; ~(-1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    my         = motion_y &amp; ~(-1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> &lt;&lt; s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    motion_x &gt;&gt;= s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    motion_y &gt;&gt;= s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="comment">/* normalize subpel coordinates to epel */</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="comment">/* TODO: template this function? */</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    mx      &lt;&lt;= 3 - s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    my      &lt;&lt;= 3 - s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    x += motion_x;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    y += motion_y;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    epel = (mx|my)&amp;1;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">/* hpel position */</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">if</span> (!((mx|my)&amp;3)) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        nplanes = 1;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        src[0] = ref_hpel[(my&gt;&gt;1)+(mx&gt;&gt;2)] + y*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> + <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="comment">/* qpel or epel */</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        nplanes = 4;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            src[i] = ref_hpel[i] + y*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> + x;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="comment">/* if we&#39;re interpolating in the right/bottom halves, adjust the planes as needed</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">           we increment x/y because the edge changes for half of the pixels */</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (mx &gt; 4) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            src[0] += 1;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            src[2] += 1;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            x++;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="keywordflow">if</span> (my &gt; 4) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            src[0] += p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            src[1] += p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            y++;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="comment">/* hpel planes are:</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">           [0]: F  [1]: H</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">           [2]: V  [3]: C */</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">if</span> (!epel) {</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;            <span class="comment">/* check if we really only need 2 planes since either mx or my is</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">               a hpel position. (epel weights of 0 handle this there) */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            <span class="keywordflow">if</span> (!(mx&amp;3)) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                <span class="comment">/* mx == 0: average [0] and [2]</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">                   mx == 4: average [1] and [3] */</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                src[!mx] = src[2 + !!mx];</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                nplanes = 2;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(my&amp;3)) {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                src[0] = src[(my&gt;&gt;1)  ];</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                src[1] = src[(my&gt;&gt;1)+1];</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                nplanes = 2;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            }</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            <span class="comment">/* adjust the ordering if needed so the weights work */</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <span class="keywordflow">if</span> (mx &gt; 4) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *, src[0], src[1]);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *, src[2], src[3]);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            <span class="keywordflow">if</span> (my &gt; 4) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *, src[0], src[2]);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *, src[1], src[3]);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            }</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            src[4] = <a class="code" href="libavcodec_2diracdec_8c.html#a29635eba891ab70f6f89b4e02dbbdb60">epel_weights</a>[my&amp;3][mx&amp;3];</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        }</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    }</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="comment">/* fixme: v/h _edge_pos */</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keywordflow">if</span> (x + p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a> &gt; p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a> +<a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>/2 ||</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        y + p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a> &gt; p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>+<a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>/2 ||</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        x &lt; 0 || y &lt; 0) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; nplanes; i++) {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#ab486ac0ab57ae25eda3ef0c37a370e1e">vdsp</a>.<a class="code" href="structVideoDSPContext.html#a69febc8b6d61dec0aa81a1ddd6660b5a">emulated_edge_mc</a>(s-&gt;<a class="code" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">edge_emu_buffer</a>[i], src[i],</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                                     p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>,</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                                     p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>, x, y,</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                                     p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>+<a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>/2, p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>+<a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>/2);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            src[i] = s-&gt;<a class="code" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">edge_emu_buffer</a>[i];</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    }</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span> (nplanes&gt;&gt;1) + epel;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;}</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div><div class="line"><a name="l01687"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a86ff0479548c1e5804bd6964ffbc705c"> 1687</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#a86ff0479548c1e5804bd6964ffbc705c">add_dc</a>(uint16_t *dst, <span class="keywordtype">int</span> <a class="code" href="audio__convert_8c.html#a431c7653c1fc679a567aaabfc1101b3a">dc</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>,</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                   <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *obmc_weight, <span class="keywordtype">int</span> xblen, <span class="keywordtype">int</span> yblen)</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;{</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    dc += 128;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; yblen; y++) {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; xblen; x += 2) {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            dst[<a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>  ] += dc * obmc_weight[<a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>  ];</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            dst[x+1] += dc * obmc_weight[x+1];</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        dst          += <a class="code" href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">stride</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        obmc_weight  += <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;}</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;</div><div class="line"><a name="l01703"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34"> 1703</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34">block_mc</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>,</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                     uint16_t *mctmp, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *obmc_weight,</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                     <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>, <span class="keywordtype">int</span> dstx, <span class="keywordtype">int</span> dsty)</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;{</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="structPlane.html">Plane</a> *p = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>];</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>[5];</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">switch</span> (block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a>&amp;3) {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">case</span> 0: <span class="comment">/* DC */</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a86ff0479548c1e5804bd6964ffbc705c">add_dc</a>(mctmp, block-&gt;<a class="code" href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">u</a>.<a class="code" href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">dc</a>[plane], p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, obmc_weight, p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        idx = <a class="code" href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924">mc_subpel</a>(s, block, src, dstx, dsty, (block-&gt;<a class="code" href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">ref</a>&amp;3)-1, plane);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">put_pixels_tab</a>[idx](s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">weight_func</a>)</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">weight_func</a>(s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, s-&gt;<a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a>,</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                           s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[0] + s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[1], p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        idx = <a class="code" href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924">mc_subpel</a>(s, block, src, dstx, dsty, 0, plane);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">put_pixels_tab</a>[idx](s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        idx = <a class="code" href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924">mc_subpel</a>(s, block, src, dstx, dsty, 1, plane);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">biweight_func</a>) {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <span class="comment">/* fixme: +32 is a quick hack */</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">put_pixels_tab</a>[idx](s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a> + 32, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">biweight_func</a>(s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>+32, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, s-&gt;<a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a>,</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                             s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[0], s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[1], p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#aec5d771ad7ae9049bec174c775fb0ec7">avg_pixels_tab</a>[idx](s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a9390e4a0238e3f79551ed440131542aa">add_obmc</a>(mctmp, s-&gt;<a class="code" href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">mcscratch</a>, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, obmc_weight, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;}</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ac458c479568c30049fe415e8e33716c9"> 1739</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#ac458c479568c30049fe415e8e33716c9">mc_row</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracBlock.html">DiracBlock</a> *<a class="code" href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a>, uint16_t *mctmp, <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>, <span class="keywordtype">int</span> dsty)</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;{</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <a class="code" href="structPlane.html">Plane</a> *p = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>];</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">x</a>, dstx = p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a> - p-&gt;<a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34">block_mc</a>(s, block, mctmp, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[0], plane, -p-&gt;<a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a>, dsty);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    mctmp += p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">for</span> (x = 1; x &lt; s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>-1; x++) {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34">block_mc</a>(s, block+x, mctmp, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[1], plane, dstx, dsty);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        dstx  += p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        mctmp += p-&gt;<a class="code" href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">xbsep</a>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34">block_mc</a>(s, block+x, mctmp, s-&gt;<a class="code" href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">obmc_weight</a>[2], plane, dstx, dsty);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ae9cedc0f04787a8e1c18133ca843198b"> 1755</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavcodec_2diracdec_8c.html#ae9cedc0f04787a8e1c18133ca843198b">select_dsp_funcs</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a>, <span class="keywordtype">int</span> xblen, <span class="keywordtype">int</span> yblen)</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;{</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (xblen &gt; 8)</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        idx = 1;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">if</span> (xblen &gt; 16)</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        idx = 2;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    memcpy(s-&gt;<a class="code" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">put_pixels_tab</a>, s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#a36ae3c1a6a2d52c4b299fe809695c1a2">put_dirac_pixels_tab</a>[idx], <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">put_pixels_tab</a>));</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    memcpy(s-&gt;<a class="code" href="structDiracContext.html#aec5d771ad7ae9049bec174c775fb0ec7">avg_pixels_tab</a>, s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#a9c9053cd66f650f494f324c90e9db0ce">avg_dirac_pixels_tab</a>[idx], <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#aec5d771ad7ae9049bec174c775fb0ec7">avg_pixels_tab</a>));</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a9390e4a0238e3f79551ed440131542aa">add_obmc</a> = s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#a312385f19d3fa6eec05bf8fa58ea66a3">add_dirac_obmc</a>[idx];</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">weight_log2denom</a> &gt; 1 || s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[0] != 1 || s-&gt;<a class="code" href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">weight</a>[1] != 1) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">weight_func</a>   = s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#ad9a7f29189c0b63b35d58c55f67d9ca5">weight_dirac_pixels_tab</a>[idx];</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">biweight_func</a> = s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#aa32677263ff407ac4cb5274a799fc8ac">biweight_dirac_pixels_tab</a>[idx];</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">weight_func</a>   = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">biweight_func</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;}</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a8b56e2073d7228ff2c1bd7e1de878cab"> 1775</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a8b56e2073d7228ff2c1bd7e1de878cab">interpolate_refplane</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, <span class="keywordtype">int</span> <a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">width</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">height</a>)</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;{</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="comment">/* chroma allocates an edge of 8 when subsampled</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">       which for 4:2:2 means an h edge of 16 and v edge of 8</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">       just use 8 for everything for the moment */</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordtype">int</span> i, edge = <a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>/2;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>][0] = ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>];</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>.<a class="code" href="structMpegvideoEncDSPContext.html#aa6ccdd7d6c6533482d923a00977a3731">draw_edges</a>(ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][0], ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane], width, height, edge, edge, <a class="code" href="mpegvideoencdsp_8h.html#af46caacfee275cd40a56910285aa1ea5">EDGE_TOP</a> | <a class="code" href="mpegvideoencdsp_8h.html#a625ea9100e2f1b3611afe7495a68c594">EDGE_BOTTOM</a>); <span class="comment">/* EDGE_TOP | EDGE_BOTTOM values just copied to make it build, this needs to be ensured */</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="comment">/* no need for hpel if we only have fpel vectors */</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">mv_precision</a>)</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; 4; i++) {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">if</span> (!ref-&gt;<a class="code" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">hpel_base</a>[plane][i])</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            ref-&gt;<a class="code" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">hpel_base</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>][i] = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>((height+2*edge) * ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane] + 32);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="keywordflow">if</span> (!ref-&gt;<a class="code" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">hpel_base</a>[plane][i]) {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="comment">/* we need to be 16-byte aligned even for chroma */</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>][i] = ref-&gt;<a class="code" href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">hpel_base</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>][i] + edge*ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>] + 16;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span> (!ref-&gt;<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>[plane]) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#ac8fed5e42dbc6a119308b0b20457ce65">dirac_hpel_filter</a>(ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][1], ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][2],</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                                      ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][3], ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][0],</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                                      ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane], width, height);</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>.<a class="code" href="structMpegvideoEncDSPContext.html#aa6ccdd7d6c6533482d923a00977a3731">draw_edges</a>(ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][1], ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane], width, height, edge, edge, <a class="code" href="mpegvideoencdsp_8h.html#af46caacfee275cd40a56910285aa1ea5">EDGE_TOP</a> | <a class="code" href="mpegvideoencdsp_8h.html#a625ea9100e2f1b3611afe7495a68c594">EDGE_BOTTOM</a>);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>.<a class="code" href="structMpegvideoEncDSPContext.html#aa6ccdd7d6c6533482d923a00977a3731">draw_edges</a>(ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][2], ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane], width, height, edge, edge, <a class="code" href="mpegvideoencdsp_8h.html#af46caacfee275cd40a56910285aa1ea5">EDGE_TOP</a> | <a class="code" href="mpegvideoencdsp_8h.html#a625ea9100e2f1b3611afe7495a68c594">EDGE_BOTTOM</a>);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">mpvencdsp</a>.<a class="code" href="structMpegvideoEncDSPContext.html#aa6ccdd7d6c6533482d923a00977a3731">draw_edges</a>(ref-&gt;<a class="code" href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">hpel</a>[plane][3], ref-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[plane], width, height, edge, edge, <a class="code" href="mpegvideoencdsp_8h.html#af46caacfee275cd40a56910285aa1ea5">EDGE_TOP</a> | <a class="code" href="mpegvideoencdsp_8h.html#a625ea9100e2f1b3611afe7495a68c594">EDGE_BOTTOM</a>);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    ref-&gt;<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>[<a class="code" href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a>] = 1;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;}</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment"> * 13.0 Transform data syntax. transform_data()</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01816"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a8f1b4f7e12ca4abfc4df0b0c93ac1b22"> 1816</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a8f1b4f7e12ca4abfc4df0b0c93ac1b22">dirac_decode_frame_internal</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="structDWTContext.html">DWTContext</a> d;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">y</a>, i, <a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>, dsty;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a>) {</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="comment">/* [DIRAC_STD] 13.5.1 low_delay_transform_data() */</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>) {</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <span class="keywordflow">for</span> (comp = 0; comp &lt; 3; comp++) {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                <a class="code" href="structPlane.html">Plane</a> *p = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>];</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                memset(p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a>, 0, p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> * p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ac3e96024c1a7d09e57f60b3ca0d117dd">height</a>);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            }</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#aa105bb809553714c19833121309bef33">zero_res</a>) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            <span class="keywordflow">if</span> ((ret = <a class="code" href="libavcodec_2diracdec_8c.html#aaa9d00f5deecef8ae7dfe289b25469d0">decode_lowdelay</a>(s)) &lt; 0)</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    }</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">for</span> (comp = 0; comp &lt; 3; comp++) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="structPlane.html">Plane</a> *p       = &amp;s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[<a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>];</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="demuxing__decoding_8c.html#ad7d33d579a8d4241a5e643e39287a209">frame</a> = s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[<a class="code" href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a>];</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="comment">/* FIXME: small resolutions */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">edge_emu_buffer</a>[i] = s-&gt;<a class="code" href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">edge_emu_buffer_base</a> + i*<a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>, 16);</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#aa105bb809553714c19833121309bef33">zero_res</a> &amp;&amp; !s-&gt;<a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a>)</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            memset(p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a>, 0, p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> * p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ac3e96024c1a7d09e57f60b3ca0d117dd">height</a>);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#a943332759c7410358a0336f22374b8c5">decode_component</a>(s, comp); <span class="comment">/* [DIRAC_STD] 13.4.1 core_transform_data() */</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        ret = <a class="code" href="dirac__dwt_8c.html#a6ef08fde94d043c7fda69bb348a46433">ff_spatial_idwt_init</a>(&amp;d, &amp;p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>, s-&gt;<a class="code" href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">wavelet_idx</a>+2,</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                                   s-&gt;<a class="code" href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">wavelet_depth</a>, s-&gt;<a class="code" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">bit_depth</a>);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>) { <span class="comment">/* intra */</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">for</span> (y = 0; y &lt; p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>; y += 16) {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keywordtype">int</span> idx = (s-&gt;<a class="code" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">bit_depth</a> - 8) &gt;&gt; 1;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                <a class="code" href="dirac__dwt_8c.html#a579773279770cace6973bea5ac861587">ff_spatial_idwt_slice2</a>(&amp;d, y+16); <span class="comment">/* decode */</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#ac0e05723d368df493cd40bee04f74e5c">put_signed_rect_clamped</a>[idx](frame + y*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>,</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                                                         p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>,</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                                                         p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a> + y*p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a>,</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                                                         p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a>, p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>, 16);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/* inter */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="keywordtype">int</span> rowheight = p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a>*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#ae9cedc0f04787a8e1c18133ca843198b">select_dsp_funcs</a>(s, p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>, p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>, p-&gt;<a class="code" href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">xblen</a>, p-&gt;<a class="code" href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">yblen</a>);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>; i++) {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <span class="keywordtype">int</span> ret = <a class="code" href="libavcodec_2diracdec_8c.html#a8b56e2073d7228ff2c1bd7e1de878cab">interpolate_refplane</a>(s, s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i], comp, p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>, p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            }</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            memset(s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a>, 0, 4*p-&gt;<a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a>*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            dsty = -p-&gt;<a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a>;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">for</span> (y = 0; y &lt; s-&gt;<a class="code" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">blheight</a>; y++) {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>     = 0,</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                    <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(dsty, 0);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                uint16_t *mctmp    = s-&gt;<a class="code" href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">mctmp</a> + y*rowheight;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                <a class="code" href="structDiracBlock.html">DiracBlock</a> *blocks = s-&gt;<a class="code" href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">blmotion</a> + y*s-&gt;<a class="code" href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">blwidth</a>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#acca130ad3f5763df7e0dbefae9630ae8">init_obmc_weights</a>(s, p, y);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                <span class="keywordflow">if</span> (y == s-&gt;<a class="code" href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">blheight</a>-1 || <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>+p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> &gt; p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a>)</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                    h = p-&gt;<a class="code" href="structPlane.html#a775728bf1541de167e3358f9e73ab406">height</a> - <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                    h = p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a> - (<a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a> - dsty);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                <span class="keywordflow">if</span> (h &lt; 0)</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                memset(mctmp+2*p-&gt;<a class="code" href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">yoffset</a>*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, 0, 2*rowheight);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                <a class="code" href="libavcodec_2diracdec_8c.html#ac458c479568c30049fe415e8e33716c9">mc_row</a>(s, blocks, mctmp, comp, dsty);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                mctmp += (<a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a> - dsty)*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> + p-&gt;<a class="code" href="structPlane.html#aa10c31d713459362abf953b21b212cba">xoffset</a>;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                <a class="code" href="dirac__dwt_8c.html#a579773279770cace6973bea5ac861587">ff_spatial_idwt_slice2</a>(&amp;d, <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a> + h); <span class="comment">/* decode */</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                <span class="comment">/* NOTE: add_rect_clamped hasn&#39;t been templated hence the shifts.</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">                 * idwt.stride is passed as pixels, not in bytes as in the rest of the decoder */</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">diracdsp</a>.<a class="code" href="structDiracDSPContext.html#a8d0c54bf356c5d9d5c3d874c6e564b87">add_rect_clamped</a>(frame + <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>*p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>, mctmp, p-&gt;<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>,</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                                             (int16_t*)(p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">buf</a>) + <a class="code" href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a>*(p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> &gt;&gt; 1), (p-&gt;<a class="code" href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">idwt</a>.<a class="code" href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">stride</a> &gt;&gt; 1), p-&gt;<a class="code" href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">width</a>, h);</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                dsty += p-&gt;<a class="code" href="structPlane.html#a7006305741a6427adea00c841eedf195">ybsep</a>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        }</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;}</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#af8dd60a672baa233d43bb7595c2f5c8b"> 1911</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#af8dd60a672baa233d43bb7595c2f5c8b">get_buffer_with_edge</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <a class="code" href="structAVFrame.html">AVFrame</a> *f, <span class="keywordtype">int</span> <a class="code" href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;{</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordtype">int</span> ret, i;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordtype">int</span> chroma_x_shift, chroma_y_shift;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="group__lavc__misc__pixfmt.html#ga8734c0195b87efe1a060ca101505c7b8">avcodec_get_chroma_sub_sample</a>(avctx-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>, &amp;chroma_x_shift, &amp;chroma_y_shift);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    f-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>  = avctx-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  + 2 * <a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a>;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    f-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> + 2 * <a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a> + 2;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    ret = <a class="code" href="libavcodec_2internal_8h.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, f, flags);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">for</span> (i = 0; f-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[i]; i++) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="vf__spp_8c.html#a3ac533abdb7fafba276c70740502e406">offset</a> = (<a class="code" href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a> &gt;&gt; (i &amp;&amp; i&lt;3 ? chroma_y_shift : 0)) *</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                     f-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[i] + 32;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        f-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[i] += <a class="code" href="vf__spp_8c.html#a3ac533abdb7fafba276c70740502e406">offset</a>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    f-&gt;<a class="code" href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>  = avctx-&gt;<a class="code" href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">width</a>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    f-&gt;<a class="code" href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> = avctx-&gt;<a class="code" href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment"> * 11.1.1 Picture Header. picture_header()</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01938"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a24c235e0661b9539ada7a404c0b5304a"> 1938</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a24c235e0661b9539ada7a404c0b5304a">dirac_decode_picture_header</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;{</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordtype">unsigned</span> retire, picnum;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordtype">int</span> i, j, ret;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    int64_t refdist, refnum;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="structGetBitContext.html">GetBitContext</a> *gb = &amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="comment">/* [DIRAC_STD] 11.1.1 Picture Header. picture_header() PICTURE_NUM */</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    picnum = s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> = <a class="code" href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a>(gb, 32);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>,<a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,<span class="stringliteral">&quot;PICTURE_NUM: %d\n&quot;</span>,picnum);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="comment">/* if this is the first keyframe after a sequence header, start our</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">       reordering from here */</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a> &lt; 0)</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a> = picnum;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[0] = s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[1] = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>; i++) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        refnum = (picnum + <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb)) &amp; 0xFFFFFFFF;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        refdist = INT64_MAX;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="comment">/* find the closest reference to the one we want */</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="comment">/* Jordi: this is needed if the referenced picture hasn&#39;t yet arrived */</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a1f99d0554a99a0d366962c6d0a764032">MAX_REFERENCE_FRAMES</a> &amp;&amp; refdist; j++)</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>[j]</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                &amp;&amp; <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>[j]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> - refnum) &lt; refdist) {</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i] = s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>[j];</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                refdist = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>[j]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> - refnum);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i] || refdist)</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Reference not found\n&quot;</span>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="comment">/* if there were no references at all, allocate one */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i])</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; j++)</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[j].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0]) {</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                    s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i] = &amp;s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[j];</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                    ret = <a class="code" href="libavcodec_2diracdec_8c.html#af8dd60a672baa233d43bb7595c2f5c8b">get_buffer_with_edge</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>, <a class="code" href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a>);</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">ref_pics</a>[i]) {</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Reference could not be allocated\n&quot;</span>);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    }</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="comment">/* retire the reference frames that are not used anymore */</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a>) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        retire = (picnum + <a class="code" href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a>(gb)) &amp; 0xFFFFFFFF;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">if</span> (retire != picnum) {</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            <a class="code" href="structDiracFrame.html">DiracFrame</a> *retire_pic = <a class="code" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>, retire);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            <span class="keywordflow">if</span> (retire_pic)</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                retire_pic-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a> &amp;= <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Frame to retire not found\n&quot;</span>);</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="comment">/* if reference array is full, remove the oldest as per the spec */</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">add_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>, <a class="code" href="libavcodec_2diracdec_8c.html#a1f99d0554a99a0d366962c6d0a764032">MAX_REFERENCE_FRAMES</a>, s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>)) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Reference frame overflow\n&quot;</span>);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>, s-&gt;<a class="code" href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">ref_frames</a>[0]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a>)-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a> &amp;= <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    }</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>) {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a223983da3d9e9529b6fae368a4139437">dirac_unpack_prediction_parameters</a>(s);  <span class="comment">/* [DIRAC_STD] 11.2 Picture Prediction Data. picture_prediction() */</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a0ec1f7b39c5f06c062b600b159c97d60">dirac_unpack_block_motion_data</a>(s);      <span class="comment">/* [DIRAC_STD] 12. Block motion data syntax                       */</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    ret = <a class="code" href="libavcodec_2diracdec_8c.html#ae2b880ae9d01cf1897d8d15b2c7de610">dirac_unpack_idwt_params</a>(s);                <span class="comment">/* [DIRAC_STD] 11.3 Wavelet transform data                        */</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="libavcodec_2diracdec_8c.html#a1c0c591dd6b330b0c7ba2f3dd3bffb45">init_planes</a>(s);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;}</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;</div><div class="line"><a name="l02026"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#aa1d8e8e2298a4cc9fcf9bfd937bab766"> 2026</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#aa1d8e8e2298a4cc9fcf9bfd937bab766">get_delayed_pic</a>(<a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>, <a class="code" href="structAVFrame.html">AVFrame</a> *picture, <span class="keywordtype">int</span> *got_frame)</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;{</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[0];</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordtype">int</span> i, out_idx  = 0;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="comment">/* find frame with lowest picture number */</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">for</span> (i = 1; s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]; i++)</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> &lt; out-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a>) {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            out     = s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i];</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            out_idx = i;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        }</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">for</span> (i = out_idx; s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]; i++)</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i] = s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i+1];</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a> (out) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        out-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a> ^= <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        *got_frame = 1;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">if</span>((ret = <a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(picture, out-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>)) &lt; 0)</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    }</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;}</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment"> * Dirac Specification -&gt;</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment"> * 9.6 Parse Info Header Syntax. parse_info()</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="comment"> * 4 byte start code + byte parse code + 4 byte size + 4 byte previous size</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02057"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43"> 2057</a></span>&#160;<span class="preprocessor">#define DATA_UNIT_HEADER_SIZE 13</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">/* [DIRAC_STD] dirac_decode_data_unit makes reference to the while defined in 9.3</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">   inside the function parse_sequence() */</span></div><div class="line"><a name="l02061"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a8c75a595ac2ac48bfd1213bd90f1ceeb"> 2061</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a8c75a595ac2ac48bfd1213bd90f1ceeb">dirac_decode_data_unit</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a>, <span class="keywordtype">int</span> <a class="code" href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">size</a>)</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;{</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>   = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <a class="code" href="structDiracFrame.html">DiracFrame</a> *pic   = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <a class="code" href="structAVDiracSeqHeader.html">AVDiracSeqHeader</a> *dsh;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="keywordtype">int</span> ret, i;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> parse_code;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="keywordflow">if</span> (size &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a>)</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    parse_code = buf[4];</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;s-&gt;<a class="code" href="structDiracContext.html#a72039586798c14aef655a63082a88824">gb</a>, &amp;buf[13], 8*(size - <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a>));</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordflow">if</span> (parse_code == <a class="code" href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05ae2560b5b918710234ea901d7470d24b0">DIRAC_PCODE_SEQ_HEADER</a>) {</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a>)</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="comment">/* [DIRAC_STD] 10. Sequence header */</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        ret = <a class="code" href="dirac_8c.html#a2ca2f93b4a07bc945c700a11adf1b390">av_dirac_parse_sequence_header</a>(&amp;dsh, buf + <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a>, size - <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a>, avctx);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;error parsing sequence header&quot;</span>);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        }</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        ret = <a class="code" href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a>(avctx, dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">width</a>, dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">height</a>);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;dsh);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <a class="code" href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a>(avctx, dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a4c350080fef358c117fd97eb622b9b90">sample_aspect_ratio</a>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>         = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#aab64f10d00a1bce12bf0b5e343f50003">pix_fmt</a>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a>     = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a47fb9e5bc1c66eef628701ddd1764784">color_range</a>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>       = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#aa8a72f57f35ea0f883a2da702118ba82">color_trc</a>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a> = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a2afbd8f459983463062fe456086bc86a">color_primaries</a>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>      = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a9bfdfd50600595cc6eb2766593b2ca7c">colorspace</a>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a>         = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#afca3badbccd3f12f363332423e530149">profile</a>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a>           = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a520f2976462247629ce2fa94a4a2e29f">level</a>;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        avctx-&gt;<a class="code" href="structAVCodecContext.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>       = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#ad1f22b68576a9f2d155ffff49d6b45f6">framerate</a>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">bit_depth</a>           = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a0989b0c2b9830b9c428fa9a80fd82e02">bit_depth</a>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">version</a>.<a class="code" href="structDiracVersionInfo.html#a3556ff64a55e6ed39c7176a0164035e5">major</a>       = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a0a5359c227bf3ab7044486c0064f9d31">version</a>.<a class="code" href="structDiracVersionInfo.html#a3556ff64a55e6ed39c7176a0164035e5">major</a>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">version</a>.<a class="code" href="structDiracVersionInfo.html#ac643456f88bbcbb3e723c1ca7d102be2">minor</a>       = dsh-&gt;<a class="code" href="structAVDiracSeqHeader.html#a0a5359c227bf3ab7044486c0064f9d31">version</a>.<a class="code" href="structDiracVersionInfo.html#ac643456f88bbcbb3e723c1ca7d102be2">minor</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">seq</a>                 = *dsh;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;dsh);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">pshift</a> = s-&gt;<a class="code" href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">bit_depth</a> &gt; 8;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <a class="code" href="group__lavc__misc__pixfmt.html#ga8734c0195b87efe1a060ca101505c7b8">avcodec_get_chroma_sub_sample</a>(avctx-&gt;<a class="code" href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>, &amp;s-&gt;<a class="code" href="structDiracContext.html#ae029692452063be87f56173e4251fc52">chroma_x_shift</a>, &amp;s-&gt;<a class="code" href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">chroma_y_shift</a>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a45dd7a5b11e0b78ffffb5485bc3bc521">alloc_sequence_buffers</a>(s);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a> = 1;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parse_code == <a class="code" href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05a7c8ae247b20b57e5ac2b9a801a40dec6">DIRAC_PCODE_END_SEQ</a>) { <span class="comment">/* [DIRAC_STD] End of Sequence */</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <a class="code" href="libavcodec_2diracdec_8c.html#a249638f79537ac44180aaba75952424c">free_sequence_buffers</a>(s);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a> = 0;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parse_code == <a class="code" href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05a0b2ff004f3f63170fe5bfdc71eefa582">DIRAC_PCODE_AUX</a>) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">if</span> (buf[13] == 1) {     <span class="comment">/* encoder implementation/version */</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            <span class="keywordtype">int</span> ver[3];</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            <span class="comment">/* versions older than 1.0.8 don&#39;t store quant delta for</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment">               subbands with only one codeblock */</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <span class="keywordflow">if</span> (sscanf(buf+14, <span class="stringliteral">&quot;Schroedinger %d.%d.%d&quot;</span>, ver, ver+1, ver+2) == 3)</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                <span class="keywordflow">if</span> (ver[0] == 1 &amp;&amp; ver[1] == 0 &amp;&amp; ver[2] &lt;= 7)</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                    s-&gt;<a class="code" href="structDiracContext.html#ab341c8bb377ea50ac1521fc90d5b58e0">old_delta_quant</a> = 1;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parse_code &amp; 0x8) {  <span class="comment">/* picture data unit */</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">seen_sequence_header</a>) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Dropping frame without sequence header\n&quot;</span>);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="comment">/* find an unused frame */</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; i++)</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0] == <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                pic = &amp;s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i];</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <span class="keywordflow">if</span> (!pic) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;framelist full\n&quot;</span>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="comment">/* [DIRAC_STD] Defined in 9.6.1 ... */</span></div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        tmp            =  parse_code &amp; 0x03;                   <span class="comment">/* [DIRAC_STD] num_refs()      */</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">if</span> (tmp &gt; 2) {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;num_refs of 3\n&quot;</span>);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        }</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a>      = <a class="code" href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a>;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">is_arith</a>      = (parse_code &amp; 0x48) == 0x08;          <span class="comment">/* [DIRAC_STD] using_ac()            */</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a>     = (parse_code &amp; 0x88) == 0x88;          <span class="comment">/* [DIRAC_STD] is_low_delay()        */</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#abf37c2e9350d519b1233c013f448392c">core_syntax</a>   = (parse_code &amp; 0x88) == 0x08;          <span class="comment">/* [DIRAC_STD] is_core_syntax()      */</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">ld_picture</a>    = (parse_code &amp; 0xF8) == 0xC8;          <span class="comment">/* [DIRAC_STD] is_ld_picture()       */</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>    = (parse_code &amp; 0xF8) == 0xE8;          <span class="comment">/* [DIRAC_STD] is_hq_picture()       */</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a922580ca410cb6a8e5b8e0910fae7470">dc_prediction</a> = (parse_code &amp; 0x28) == 0x08;          <span class="comment">/* [DIRAC_STD] using_dc_prediction() */</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        pic-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a>   = (parse_code &amp; 0x0C) == 0x0C;          <span class="comment">/* [DIRAC_STD] is_reference()        */</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a3649a81e8414a193d685a6eee06ce902">key_frame</a> = s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a> == 0;              <span class="comment">/* [DIRAC_STD] is_intra()            */</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a> = s-&gt;<a class="code" href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">num_refs</a> + 1;               <span class="comment">/* Definition of AVPictureType in avutil.h */</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <span class="comment">/* VC-2 Low Delay has a different parse code than the Dirac Low Delay */</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">version</a>.<a class="code" href="structDiracVersionInfo.html#ac643456f88bbcbb3e723c1ca7d102be2">minor</a> == 2 &amp;&amp; parse_code == 0x88)</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            s-&gt;<a class="code" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">ld_picture</a> = 1;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">low_delay</a> &amp;&amp; !(s-&gt;<a class="code" href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">ld_picture</a> || s-&gt;<a class="code" href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">hq_picture</a>) ) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid low delay flag\n&quot;</span>);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        }</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">if</span> ((ret = <a class="code" href="libavcodec_2diracdec_8c.html#af8dd60a672baa233d43bb7595c2f5c8b">get_buffer_with_edge</a>(avctx, pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>, (parse_code &amp; 0x0C) == 0x0C ? <a class="code" href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a> : 0)) &lt; 0)</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a> = pic;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> = pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[0];</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[1].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> = pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[1];</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[2].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a> = pic-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[2];</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2diracdec_8c.html#a958e84421650b1d9a6d4d2eb51c9a7f2">alloc_buffers</a>(s, <a class="code" href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[0].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>), <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[1].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>), <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(s-&gt;<a class="code" href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">plane</a>[2].<a class="code" href="structPlane.html#a414124869d45b556fd23262ad3122a5f">stride</a>))) &lt; 0)</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a>(ENOMEM);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <span class="comment">/* [DIRAC_STD] 11.1 Picture parse. picture_parse() */</span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a24c235e0661b9539ada7a404c0b5304a">dirac_decode_picture_header</a>(s);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        <span class="comment">/* [DIRAC_STD] 13.0 Transform data syntax. transform_data() */</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a8f1b4f7e12ca4abfc4df0b0c93ac1b22">dirac_decode_frame_internal</a>(s);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;}</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#a855a60718fee8fc93d70fb598b2d0053"> 2196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavcodec_2diracdec_8c.html#a855a60718fee8fc93d70fb598b2d0053">dirac_decode_frame</a>(<a class="code" href="structAVCodecContext.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> *got_frame, <a class="code" href="structAVPacket.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;{</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <a class="code" href="structDiracContext.html">DiracContext</a> *<a class="code" href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a>     = avctx-&gt;<a class="code" href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <a class="code" href="structAVFrame.html">AVFrame</a> *picture    = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">buf</a>        = pkt-&gt;<a class="code" href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordtype">int</span> buf_size        = pkt-&gt;<a class="code" href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordtype">int</span> i, buf_idx      = 0;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordtype">unsigned</span> data_unit_size;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="comment">/* release unused frames */</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>; i++)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">data</a>[0] &amp;&amp; !s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a>) {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            memset(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>, 0, <span class="keyword">sizeof</span>(s-&gt;<a class="code" href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">all_frames</a>[i].<a class="code" href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">interpolated</a>));</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a> = <a class="code" href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    *got_frame = 0;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment">/* end of stream, so flush delayed pics */</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">if</span> (buf_size == 0)</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libavcodec_2diracdec_8c.html#aa1d8e8e2298a4cc9fcf9bfd937bab766">get_delayed_pic</a>(s, (<a class="code" href="structAVFrame.html">AVFrame</a> *)data, got_frame);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        <span class="comment">/*[DIRAC_STD] Here starts the code from parse_info() defined in 9.6</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">          [DIRAC_STD] PARSE_INFO_PREFIX = &quot;BBCD&quot; as defined in ISO/IEC 646</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">          BBCD start code search */</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        <span class="keywordflow">for</span> (; buf_idx + <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a> &lt; buf_size; buf_idx++) {</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            <span class="keywordflow">if</span> (buf[buf_idx  ] == <span class="charliteral">&#39;B&#39;</span> &amp;&amp; buf[buf_idx+1] == <span class="charliteral">&#39;B&#39;</span> &amp;&amp;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                buf[buf_idx+2] == <span class="charliteral">&#39;C&#39;</span> &amp;&amp; buf[buf_idx+3] == <span class="charliteral">&#39;D&#39;</span>)</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        }</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;        <span class="comment">/* BBCD found or end of data */</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        <span class="keywordflow">if</span> (buf_idx + <a class="code" href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a> &gt;= buf_size)</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        data_unit_size = <a class="code" href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a>(buf+buf_idx+5);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <span class="keywordflow">if</span> (data_unit_size &gt; buf_size - buf_idx || !data_unit_size) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            <span class="keywordflow">if</span>(data_unit_size &gt; buf_size - buf_idx)</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                   <span class="stringliteral">&quot;Data unit with size %d is larger than input buffer, discarding\n&quot;</span>,</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                   data_unit_size);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            buf_idx += 4;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        }</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="comment">/* [DIRAC_STD] dirac_decode_data_unit makes reference to the while defined in 9.3 inside the function parse_sequence() */</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        ret = <a class="code" href="libavcodec_2diracdec_8c.html#a8c75a595ac2ac48bfd1213bd90f1ceeb">dirac_decode_data_unit</a>(avctx, buf+buf_idx, data_unit_size);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(s-&gt;<a class="code" href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,<span class="stringliteral">&quot;Error in dirac_decode_data_unit\n&quot;</span>);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        }</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        buf_idx += data_unit_size;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="keywordflow">if</span> (!s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>)</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        <span class="keywordflow">return</span> buf_size;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> &gt; s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a>) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <a class="code" href="structDiracFrame.html">DiracFrame</a> *delayed_frame = <a class="code" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>, s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a>);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a> |= <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">add_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>, <a class="code" href="libavcodec_2diracdec_8c.html#a16027d8acc5301e440cefa086eb9db2a">MAX_DELAY</a>, s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>)) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            <span class="keywordtype">int</span> min_num = s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[0]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;            <span class="comment">/* Too many delayed frames, so we display the frame with the lowest pts */</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Delay frame overflow\n&quot;</span>);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="keywordflow">for</span> (i = 1; s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]; i++)</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> &lt; min_num)</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                    min_num = s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>[i]-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a>;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            delayed_frame = <a class="code" href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>, min_num);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            <a class="code" href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">add_frame</a>(s-&gt;<a class="code" href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">delay_frames</a>, <a class="code" href="libavcodec_2diracdec_8c.html#a16027d8acc5301e440cefa086eb9db2a">MAX_DELAY</a>, s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        <span class="keywordflow">if</span> (delayed_frame) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            delayed_frame-&gt;<a class="code" href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">reference</a> ^= <a class="code" href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a>;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            <span class="keywordflow">if</span>((ret=<a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(data, delayed_frame-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>)) &lt; 0)</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            *got_frame = 1;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        }</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> == s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a>) {</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <span class="comment">/* The right frame at the right time :-) */</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        <span class="keywordflow">if</span>((ret=<a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(data, s-&gt;<a class="code" href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">current_picture</a>-&gt;<a class="code" href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">avframe</a>)) &lt; 0)</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        *got_frame = 1;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">if</span> (*got_frame)</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        s-&gt;<a class="code" href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">frame_number</a> = picture-&gt;<a class="code" href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">display_picture_number</a> + 1;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">return</span> buf_idx;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;}</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"><a class="line" href="libavcodec_2diracdec_8c.html#ad3853523e5bc3894949cde5b4be1a6d6"> 2292</a></span>&#160;<a class="code" href="structAVCodec.html">AVCodec</a> <a class="code" href="libavcodec_2diracdec_8c.html#ad3853523e5bc3894949cde5b4be1a6d6">ff_dirac_decoder</a> = {</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    .<a class="code" href="structAVCodec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;dirac&quot;</span>,</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;BBC Dirac VC-2&quot;</span>),</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>,</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea00d5e8ca007d62fe704bb22b2be7b556">AV_CODEC_ID_DIRAC</a>,</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="structDiracContext.html">DiracContext</a>),</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>           = <a class="code" href="libavcodec_2diracdec_8c.html#a640af427e4187904b9ba4b76d762c477">dirac_decode_init</a>,</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    .close          = <a class="code" href="libavcodec_2diracdec_8c.html#afe23b76533446ffd389067d03eb9b360">dirac_decode_end</a>,</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    .<a class="code" href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a>         = <a class="code" href="libavcodec_2diracdec_8c.html#a855a60718fee8fc93d70fb598b2d0053">dirac_decode_frame</a>,</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a> | <a class="code" href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a> | <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a>,</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    .<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>          = <a class="code" href="libavcodec_2diracdec_8c.html#a09d1421348adb8d166f4f1e644d270bc">dirac_decode_flush</a>,</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;};</div><div class="ttc" id="libavcodec_2diracdec_8c_html_a15e63c7b7e6f394a9cce228929bad44e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a15e63c7b7e6f394a9cce228929bad44e">CHECKEDREAD</a></div><div class="ttdeci">#define CHECKEDREAD(dst, cond, errmsg)</div></div>
<div class="ttc" id="dirac__vlc_8c_html_a3be963d9308da7183922724753023f9f"><div class="ttname"><a href="dirac__vlc_8c.html#a3be963d9308da7183922724753023f9f">ff_dirac_golomb_read_32bit</a></div><div class="ttdeci">int ff_dirac_golomb_read_32bit(DiracGolombLUT *lut_ctx, const uint8_t *buf, int bytes, uint8_t *_dst, int coeffs)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__vlc_8c_source.html#l00042">dirac_vlc.c:42</a></div></div>
<div class="ttc" id="structSubBand_html_a853d27cb16d16ebf53816e0525ee7888"><div class="ttname"><a href="structSubBand.html#a853d27cb16d16ebf53816e0525ee7888">SubBand::quant</a></div><div class="ttdeci">int quant</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00052">cfhd.h:52</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_a331df3ad3da3df2efdb58c21eedfe6a0"><div class="ttname"><a href="avisynth__c_8h.html#a331df3ad3da3df2efdb58c21eedfe6a0">plane</a></div><div class="ttdeci">int plane</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00422">avisynth_c.h:422</a></div></div>
<div class="ttc" id="structVideoDSPContext_html"><div class="ttname"><a href="structVideoDSPContext.html">VideoDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="videodsp_8h_source.html#l00041">videodsp.h:41</a></div></div>
<div class="ttc" id="structDiracContext_html_aa79dc700d3b28433558412d5622a657b"><div class="ttname"><a href="structDiracContext.html#aa79dc700d3b28433558412d5622a657b">DiracContext::thread_buf</a></div><div class="ttdeci">uint8_t * thread_buf</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00174">diracdec.c:174</a></div></div>
<div class="ttc" id="libavcodec_2videodsp_8c_html_a9f55abcd843195bcf47dae7689bcf894"><div class="ttname"><a href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a></div><div class="ttdeci">av_cold void ff_videodsp_init(VideoDSPContext *ctx, int bpc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2videodsp_8c_source.html#l00038">videodsp.c:38</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_acf70ff632502e37da7dbaa761df1a90a"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#acf70ff632502e37da7dbaa761df1a90a">UNPACK_ARITH</a></div><div class="ttdeci">#define UNPACK_ARITH(n, type)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00447">diracdec.c:447</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="structAVCodecContext.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03386">avcodec.h:3386</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_ad823be0325cd396723f2c37c16b3aaa2"><div class="ttname"><a href="avisynth__c_8h.html#ad823be0325cd396723f2c37c16b3aaa2">val</a></div><div class="ttdeci">const char const char void * val</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00771">avisynth_c.h:771</a></div></div>
<div class="ttc" id="diractab_8c_html_a6c1efd4b2aa29923632f8b17cbe03802"><div class="ttname"><a href="diractab_8c.html#a6c1efd4b2aa29923632f8b17cbe03802">ff_dirac_qscale_tab</a></div><div class="ttdeci">const int32_t ff_dirac_qscale_tab[116]</div><div class="ttdef"><b>Definition:</b> <a href="diractab_8c_source.html#l00034">diractab.c:34</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a98c43c8a62a3288e97809e7c752fca33"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a98c43c8a62a3288e97809e7c752fca33">PARSE_VALUES</a></div><div class="ttdeci">#define PARSE_VALUES(type, x, gb, ebits, buf1, buf2)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00679">diracdec.c:679</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_ab87f55bd0280d90925050a4188c14ab5"><div class="ttname"><a href="avisynth__c_8h.html#ab87f55bd0280d90925050a4188c14ab5">s</a></div><div class="ttdeci">const char * s</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00768">avisynth_c.h:768</a></div></div>
<div class="ttc" id="group__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="structDiracContext_html_a9f3c6f4020f7e876678d82a2392fec88"><div class="ttname"><a href="structDiracContext.html#a9f3c6f4020f7e876678d82a2392fec88">DiracContext::blheight</a></div><div class="ttdeci">int blheight</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00210">diracdec.c:210</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_afe23b76533446ffd389067d03eb9b360"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#afe23b76533446ffd389067d03eb9b360">dirac_decode_end</a></div><div class="ttdeci">static av_cold int dirac_decode_end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00419">diracdec.c:419</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ab93432f6ba2fe52c6ecac07933cd96ba"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ab93432f6ba2fe52c6ecac07933cd96ba">codeblock</a></div><div class="ttdeci">static void codeblock(DiracContext *s, SubBand *b, GetBitContext *gb, DiracArith *c, int left, int right, int top, int bottom, int blockcnt_one, int is_arith)</div><div class="ttdoc">Decode the coeffs in the rectangle defined by left, right, top, bottom [DIRAC_STD] 13...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00483">diracdec.c:483</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a47fb9e5bc1c66eef628701ddd1764784"><div class="ttname"><a href="structAVDiracSeqHeader.html#a47fb9e5bc1c66eef628701ddd1764784">AVDiracSeqHeader::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00107">dirac.h:107</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_a91ede117e78922c63c5fbd0c5793449f"><div class="ttname"><a href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a></div><div class="ttdeci">#define av_realloc_f(p, o, n)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00033">tableprint_vlc.h:33</a></div></div>
<div class="ttc" id="structAVFrame_html"><div class="ttname"><a href="structAVFrame.html">AVFrame</a></div><div class="ttdoc">This structure describes decoded (raw) audio or video data. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00190">frame.h:190</a></div></div>
<div class="ttc" id="structDiracContext_html_aa49f05317c6b01b4a82744f30b33d808"><div class="ttname"><a href="structDiracContext.html#aa49f05317c6b01b4a82744f30b33d808">DiracContext::weight_func</a></div><div class="ttdeci">dirac_weight_func weight_func</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00229">diracdec.c:229</a></div></div>
<div class="ttc" id="vp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="aacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00496">aacdec_template.c:496</a></div></div>
<div class="ttc" id="structDiracContext_html_a3493be4d4948cad0b28d5b8ac11f36c9"><div class="ttname"><a href="structDiracContext.html#a3493be4d4948cad0b28d5b8ac11f36c9">DiracContext::sbsplit</a></div><div class="ttdeci">uint8_t * sbsplit</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00214">diracdec.c:214</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a36a0f8890eee1fd4660aa8af8c46364d"><div class="ttname"><a href="dirac__arith_8h.html#a36a0f8890eee1fd4660aa8af8c46364d">CTX_SB_DATA</a></div><div class="ttdeci">#define CTX_SB_DATA</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00066">dirac_arith.h:66</a></div></div>
<div class="ttc" id="structDWTPlane_html"><div class="ttname"><a href="structDWTPlane.html">DWTPlane</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00037">dirac_dwt.h:37</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a1a0d425f34b7d23a03d10d36e7096a5a"><div class="ttname"><a href="dirac__arith_8h.html#a1a0d425f34b7d23a03d10d36e7096a5a">CTX_PMODE_REF2</a></div><div class="ttdeci">#define CTX_PMODE_REF2</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00068">dirac_arith.h:68</a></div></div>
<div class="ttc" id="get__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdoc">Read 1-25 bits. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00247">get_bits.h:247</a></div></div>
<div class="ttc" id="structDiracDSPContext_html"><div class="ttname"><a href="structDiracDSPContext.html">DiracDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00030">diracdsp.h:30</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_aa8a72f57f35ea0f883a2da702118ba82"><div class="ttname"><a href="structAVDiracSeqHeader.html#aa8a72f57f35ea0f883a2da702118ba82">AVDiracSeqHeader::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00109">dirac.h:109</a></div></div>
<div class="ttc" id="structDiracContext_html_a7ec9962380867852f225deab0b1ebb1a"><div class="ttname"><a href="structDiracContext.html#a7ec9962380867852f225deab0b1ebb1a">DiracContext::ref_frames</a></div><div class="ttdeci">DiracFrame * ref_frames[MAX_REFERENCE_FRAMES+1]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00235">diracdec.c:235</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a9e59bf9049ce8b4c97b683b85a34ea9f"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a9e59bf9049ce8b4c97b683b85a34ea9f">divide3</a></div><div class="ttdeci">static int divide3(int x)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00249">diracdec.c:249</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a8f1b4f7e12ca4abfc4df0b0c93ac1b22"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a8f1b4f7e12ca4abfc4df0b0c93ac1b22">dirac_decode_frame_internal</a></div><div class="ttdeci">static int dirac_decode_frame_internal(DiracContext *s)</div><div class="ttdoc">Dirac Specification -&gt; 13.0 Transform data syntax. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01816">diracdec.c:1816</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_ac8b736a8223c5348ad85ffff597401ff"><div class="ttname"><a href="libavcodec_2internal_8h.html#ac8b736a8223c5348ad85ffff597401ff">ff_set_dimensions</a></div><div class="ttdeci">int ff_set_dimensions(AVCodecContext *s, int width, int height)</div><div class="ttdoc">Check that the provided frame dimensions are valid and set them on the codec context. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00210">utils.c:210</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a0a5359c227bf3ab7044486c0064f9d31"><div class="ttname"><a href="structAVDiracSeqHeader.html#a0a5359c227bf3ab7044486c0064f9d31">AVDiracSeqHeader::version</a></div><div class="ttdeci">DiracVersionInfo version</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00112">dirac.h:112</a></div></div>
<div class="ttc" id="structDiracContext_html_a90788c40dbce731eabec31b47aedff81"><div class="ttname"><a href="structDiracContext.html#a90788c40dbce731eabec31b47aedff81">DiracContext::ld_picture</a></div><div class="ttdeci">int ld_picture</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00155">diracdec.c:155</a></div></div>
<div class="ttc" id="get__bits_8h_html_a47c3a35ba8dece0168d84181f224b55d"><div class="ttname"><a href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a></div><div class="ttdeci">static void skip_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00204">get_bits.h:204</a></div></div>
<div class="ttc" id="avrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="dirac_8h_html_a2359aa6142dd80d61213be6aa1e78f05a7c8ae247b20b57e5ac2b9a801a40dec6"><div class="ttname"><a href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05a7c8ae247b20b57e5ac2b9a801a40dec6">DIRAC_PCODE_END_SEQ</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00059">dirac.h:59</a></div></div>
<div class="ttc" id="ff__glob_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="ff__glob_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="ff__glob_8c_source.html#l00222">ff_glob.c:222</a></div></div>
<div class="ttc" id="structDiracContext_html_a492688e852e6a09fb00392e9b0487ca4"><div class="ttname"><a href="structDiracContext.html#a492688e852e6a09fb00392e9b0487ca4">DiracContext::bit_depth</a></div><div class="ttdeci">int bit_depth</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00147">diracdec.c:147</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ab0e9b6ae757b815bf44a7c0656e1129f"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ab0e9b6ae757b815bf44a7c0656e1129f">propagate_block_data</a></div><div class="ttdeci">static void propagate_block_data(DiracBlock *block, int stride, int size)</div><div class="ttdoc">Copies the current block to the other blocks covered by the current superblock split mode...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01433">diracdec.c:1433</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="structAVCodecContext.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdoc">MPEG vs JPEG YUV range. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02423">avcodec.h:2423</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_ad9a7f29189c0b63b35d58c55f67d9ca5"><div class="ttname"><a href="structDiracDSPContext.html#ad9a7f29189c0b63b35d58c55f67d9ca5">DiracDSPContext::weight_dirac_pixels_tab</a></div><div class="ttdeci">dirac_weight_func weight_dirac_pixels_tab[3]</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00053">diracdsp.h:53</a></div></div>
<div class="ttc" id="structAVRational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="structAVRational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="structAVPacket_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="structAVPacket.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01612">avcodec.h:1612</a></div></div>
<div class="ttc" id="vf__curves_8c_html_a0a667482238bcca3ac201c1cd09c5072"><div class="ttname"><a href="vf__curves_8c.html#a0a667482238bcca3ac201c1cd09c5072">b</a></div><div class="ttdeci">const char * b</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00113">vf_curves.c:113</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aba7dedd7a7e2912556069b84f6b08e16"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aba7dedd7a7e2912556069b84f6b08e16">DELAYED_PIC_REF</a></div><div class="ttdeci">#define DELAYED_PIC_REF</div><div class="ttdoc">Value of Picture.reference when Picture is not a reference picture, but is held for delayed output...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00065">diracdec.c:65</a></div></div>
<div class="ttc" id="dirac__arith_8c_html_a638c424e7f949569f6e5b17b8d472e5b"><div class="ttname"><a href="dirac__arith_8c.html#a638c424e7f949569f6e5b17b8d472e5b">ff_dirac_init_arith_decoder</a></div><div class="ttdeci">void ff_dirac_init_arith_decoder(DiracArith *c, GetBitContext *gb, int length)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8c_source.html#l00086">dirac_arith.c:86</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a2a355f5367fbe98356741995c3143e4e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a2a355f5367fbe98356741995c3143e4e">subband_coeffs</a></div><div class="ttdeci">static int subband_coeffs(DiracContext *s, int x, int y, int p, SliceCoeffs c[MAX_DWT_LEVELS])</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00789">diracdec.c:789</a></div></div>
<div class="ttc" id="structDiracContext_html_a154a7381e96665dc8bd9f371ebd7630b"><div class="ttname"><a href="structDiracContext.html#a154a7381e96665dc8bd9f371ebd7630b">DiracContext::width</a></div><div class="ttdeci">unsigned width</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00182">diracdec.c:182</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a085346cba8b4c4c964b5eb64101a7b43"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a085346cba8b4c4c964b5eb64101a7b43">DATA_UNIT_HEADER_SIZE</a></div><div class="ttdeci">#define DATA_UNIT_HEADER_SIZE</div><div class="ttdoc">Dirac Specification -&gt; 9.6 Parse Info Header Syntax. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l02057">diracdec.c:2057</a></div></div>
<div class="ttc" id="structGetBitContext_html_ad3bbe8f5d0b9e28a1070396fac5725d8"><div class="ttname"><a href="structGetBitContext.html#ad3bbe8f5d0b9e28a1070396fac5725d8">GetBitContext::buffer</a></div><div class="ttdeci">const uint8_t * buffer</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00056">get_bits.h:56</a></div></div>
<div class="ttc" id="structDWTPlane_html_a73a42a295516809d446d89b2c3bbf259"><div class="ttname"><a href="structDWTPlane.html#a73a42a295516809d446d89b2c3bbf259">DWTPlane::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00041">dirac_dwt.h:41</a></div></div>
<div class="ttc" id="structPlane_html_a1a85291a4b34b9d060d417ba48c36a11"><div class="ttname"><a href="structPlane.html#a1a85291a4b34b9d060d417ba48c36a11">Plane::yoffset</a></div><div class="ttdeci">uint8_t yoffset</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00119">diracdec.c:119</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_a8d0c54bf356c5d9d5c3d874c6e564b87"><div class="ttname"><a href="structDiracDSPContext.html#a8d0c54bf356c5d9d5c3d874c6e564b87">DiracDSPContext::add_rect_clamped</a></div><div class="ttdeci">void(* add_rect_clamped)(uint8_t *dst, const uint16_t *src, int stride, const int16_t *idwt, int idwt_stride, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00047">diracdsp.h:47</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_acf8a6abcedf89f4ea050b6c12596b5e3"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#acf8a6abcedf89f4ea050b6c12596b5e3">global_mv</a></div><div class="ttdeci">static void global_mv(DiracContext *s, DiracBlock *block, int x, int y, int ref)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01377">diracdec.c:1377</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="structAVCodecContext.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdoc">Pixel format, see AV_PIX_FMT_xxx. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01914">avcodec.h:1914</a></div></div>
<div class="ttc" id="structDiracSlice_html_a6ad63b9f783a32781ea6cef571d47ce5"><div class="ttname"><a href="structDiracSlice.html#a6ad63b9f783a32781ea6cef571d47ce5">DiracSlice::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00126">diracdec.c:126</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a255cca7c7eb77c80feb7c6b4ac1097a8"><div class="ttname"><a href="dirac__arith_8h.html#a255cca7c7eb77c80feb7c6b4ac1097a8">dirac_get_arith_uint</a></div><div class="ttdeci">static int dirac_get_arith_uint(DiracArith *c, int follow_ctx, int data_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00170">dirac_arith.h:170</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a958e84421650b1d9a6d4d2eb51c9a7f2"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a958e84421650b1d9a6d4d2eb51c9a7f2">alloc_buffers</a></div><div class="ttdeci">static int alloc_buffers(DiracContext *s, int stride)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00321">diracdec.c:321</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html"><div class="ttname"><a href="structAVDiracSeqHeader.html">AVDiracSeqHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00081">dirac.h:81</a></div></div>
<div class="ttc" id="dirac_8h_html_a2359aa6142dd80d61213be6aa1e78f05a0b2ff004f3f63170fe5bfdc71eefa582"><div class="ttname"><a href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05a0b2ff004f3f63170fe5bfdc71eefa582">DIRAC_PCODE_AUX</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00060">dirac.h:60</a></div></div>
<div class="ttc" id="dirac__vlc_8c_html_a0b2835dc7dcc5382d57364f397930b41"><div class="ttname"><a href="dirac__vlc_8c.html#a0b2835dc7dcc5382d57364f397930b41">ff_dirac_golomb_read_16bit</a></div><div class="ttdeci">int ff_dirac_golomb_read_16bit(DiracGolombLUT *lut_ctx, const uint8_t *buf, int bytes, uint8_t *_dst, int coeffs)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__vlc_8c_source.html#l00082">dirac_vlc.c:82</a></div></div>
<div class="ttc" id="mpegvideo_8h_html"><div class="ttname"><a href="mpegvideo_8h.html">mpegvideo.h</a></div><div class="ttdoc">mpegvideo header. </div></div>
<div class="ttc" id="structDiracContext_html_a361c8c52a7a9d74f4fac7a67de77706c"><div class="ttname"><a href="structDiracContext.html#a361c8c52a7a9d74f4fac7a67de77706c">DiracContext::lowdelay</a></div><div class="ttdeci">struct DiracContext::@57 lowdelay</div></div>
<div class="ttc" id="structDiracContext_html_ab4260324b343b93b029c0cfa25306b55"><div class="ttname"><a href="structDiracContext.html#ab4260324b343b93b029c0cfa25306b55">DiracContext::version</a></div><div class="ttdeci">DiracVersionInfo version</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00138">diracdec.c:138</a></div></div>
<div class="ttc" id="structDiracContext_html_a7c22b76cea516d78a4382223e400616e"><div class="ttname"><a href="structDiracContext.html#a7c22b76cea516d78a4382223e400616e">DiracContext::height</a></div><div class="ttdeci">unsigned height</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00183">diracdec.c:183</a></div></div>
<div class="ttc" id="demuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="mpegvideoencdsp_8h_html_af46caacfee275cd40a56910285aa1ea5"><div class="ttname"><a href="mpegvideoencdsp_8h.html#af46caacfee275cd40a56910285aa1ea5">EDGE_TOP</a></div><div class="ttdeci">#define EDGE_TOP</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideoencdsp_8h_source.html#l00029">mpegvideoencdsp.h:29</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a09d1421348adb8d166f4f1e644d270bc"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a09d1421348adb8d166f4f1e644d270bc">dirac_decode_flush</a></div><div class="ttdeci">static void dirac_decode_flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00411">diracdec.c:411</a></div></div>
<div class="ttc" id="structSubBand_html_a7d26b80a067abdd83cbb991281f83273"><div class="ttname"><a href="structSubBand.html#a7d26b80a067abdd83cbb991281f83273">SubBand::coeff_data</a></div><div class="ttdeci">const uint8_t * coeff_data</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00101">diracdec.c:101</a></div></div>
<div class="ttc" id="tests_2checkasm_2vp8dsp_8c_html_a522f8e5cb2658746479ebd5b805263cf"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a522f8e5cb2658746479ebd5b805263cf">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aa1d8e8e2298a4cc9fcf9bfd937bab766"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aa1d8e8e2298a4cc9fcf9bfd937bab766">get_delayed_pic</a></div><div class="ttdeci">static int get_delayed_pic(DiracContext *s, AVFrame *picture, int *got_frame)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l02026">diracdec.c:2026</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae2b880ae9d01cf1897d8d15b2c7de610"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae2b880ae9d01cf1897d8d15b2c7de610">dirac_unpack_idwt_params</a></div><div class="ttdeci">static int dirac_unpack_idwt_params(DiracContext *s)</div><div class="ttdoc">Dirac Specification -&gt; 11.3 Wavelet transform data. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01186">diracdec.c:1186</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a7abe7095de73df98df4895bf9e25fc6b"><div class="ttname"><a href="structAVCodecContext.html#a7abe7095de73df98df4895bf9e25fc6b">AVCodecContext::profile</a></div><div class="ttdeci">int profile</div><div class="ttdoc">profile </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03192">avcodec.h:3192</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a6a8a90dc55d56812575aa92ea7a98366"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a6a8a90dc55d56812575aa92ea7a98366">DIRAC_REF_MASK_REF2</a></div><div class="ttdeci">#define DIRAC_REF_MASK_REF2</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00058">diracdec.c:58</a></div></div>
<div class="ttc" id="structAVCodec_html"><div class="ttname"><a href="structAVCodec.html">AVCodec</a></div><div class="ttdoc">AVCodec. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03619">avcodec.h:3619</a></div></div>
<div class="ttc" id="structDiracContext_html_a46e7df05d361a64f8ff0e16aaa2a329d"><div class="ttname"><a href="structDiracContext.html#a46e7df05d361a64f8ff0e16aaa2a329d">DiracContext::zrs</a></div><div class="ttdeci">int zrs[2][2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00198">diracdec.c:198</a></div></div>
<div class="ttc" id="mpegvideoencdsp_8h_html"><div class="ttname"><a href="mpegvideoencdsp_8h.html">mpegvideoencdsp.h</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a8ee8ce1514289c50611c804156b30aa0"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a8ee8ce1514289c50611c804156b30aa0">decode_hq_slice</a></div><div class="ttdeci">static int decode_hq_slice(DiracContext *s, DiracSlice *slice, uint8_t *tmp_buf)</div><div class="ttdoc">VC-2 Specification -&gt; 13.5.3 hq_slice(sx,sy) </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00810">diracdec.c:810</a></div></div>
<div class="ttc" id="structDiracContext_html_a32784728a1f40e518bae3ac550525625"><div class="ttname"><a href="structDiracContext.html#a32784728a1f40e518bae3ac550525625">DiracContext::codeblock_mode</a></div><div class="ttdeci">unsigned codeblock_mode</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00169">diracdec.c:169</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a520f2976462247629ce2fa94a4a2e29f"><div class="ttname"><a href="structAVDiracSeqHeader.html#a520f2976462247629ce2fa94a4a2e29f">AVDiracSeqHeader::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00101">dirac.h:101</a></div></div>
<div class="ttc" id="structDiracContext_html_a850310c4fbab74305d28ad7fabcd48e5"><div class="ttname"><a href="structDiracContext.html#a850310c4fbab74305d28ad7fabcd48e5">DiracContext::num_refs</a></div><div class="ttdeci">int num_refs</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00158">diracdec.c:158</a></div></div>
<div class="ttc" id="dirac_8c_html_a2ca2f93b4a07bc945c700a11adf1b390"><div class="ttname"><a href="dirac_8c.html#a2ca2f93b4a07bc945c700a11adf1b390">av_dirac_parse_sequence_header</a></div><div class="ttdeci">int av_dirac_parse_sequence_header(AVDiracSeqHeader **pdsh, const uint8_t *buf, size_t buf_size, void *log_ctx)</div><div class="ttdoc">Parse a Dirac sequence header. </div><div class="ttdef"><b>Definition:</b> <a href="dirac_8c_source.html#l00398">dirac.c:398</a></div></div>
<div class="ttc" id="structPlane_html_aa10c31d713459362abf953b21b212cba"><div class="ttname"><a href="structPlane.html#aa10c31d713459362abf953b21b212cba">Plane::xoffset</a></div><div class="ttdeci">uint8_t xoffset</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00118">diracdec.c:118</a></div></div>
<div class="ttc" id="structDWTPlane_html_acfc7dda66feb9a80b01fe3793d70d139"><div class="ttname"><a href="structDWTPlane.html#acfc7dda66feb9a80b01fe3793d70d139">DWTPlane::tmp</a></div><div class="ttdeci">uint8_t * tmp</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00043">dirac_dwt.h:43</a></div></div>
<div class="ttc" id="structDiracContext_html_a9861a46953896a4b9bd0d92b10ddcf8e"><div class="ttname"><a href="structDiracContext.html#a9861a46953896a4b9bd0d92b10ddcf8e">DiracContext::weight_log2denom</a></div><div class="ttdeci">unsigned weight_log2denom</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00207">diracdec.c:207</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a13dd5bea4d14edb76f29ac0541922632"><div class="ttname"><a href="dirac__arith_8h.html#a13dd5bea4d14edb76f29ac0541922632">CTX_GLOBAL_BLOCK</a></div><div class="ttdeci">#define CTX_GLOBAL_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00069">dirac_arith.h:69</a></div></div>
<div class="ttc" id="structSubBand_html_ab52b5c8101eef8d57c588b9a7ea1e36e"><div class="ttname"><a href="structSubBand.html#ab52b5c8101eef8d57c588b9a7ea1e36e">SubBand::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00048">cfhd.h:48</a></div></div>
<div class="ttc" id="af__biquads_8c_html_a7ef0ab496f57e183b484e62e2053c94fa3f92cf4d12d060d0589478f932a871b9"><div class="ttname"><a href="af__biquads_8c.html#a7ef0ab496f57e183b484e62e2053c94fa3f92cf4d12d060d0589478f932a871b9">band</a></div><div class="ttdef"><b>Definition:</b> <a href="af__biquads_8c_source.html#l00076">af_biquads.c:76</a></div></div>
<div class="ttc" id="structSliceCoeffs_html_a9651fcdbe62fbc1c092d032173f5ae0e"><div class="ttname"><a href="structSliceCoeffs.html#a9651fcdbe62fbc1c092d032173f5ae0e">SliceCoeffs::left</a></div><div class="ttdeci">int left</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00782">diracdec.c:782</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2eadc43a2a062d874c99aee4fe8a43d223f"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eadc43a2a062d874c99aee4fe8a43d223f">subband_hh</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00244">diracdec.c:244</a></div></div>
<div class="ttc" id="tests_2dct_8c_html_a376a2fac1a6f6b3f6efa31fed92176e7"><div class="ttname"><a href="tests_2dct_8c.html#a376a2fac1a6f6b3f6efa31fed92176e7">block</a></div><div class="ttdeci">static int16_t block[64]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2dct_8c_source.html#l00113">dct.c:113</a></div></div>
<div class="ttc" id="structMpegvideoEncDSPContext_html_aa6ccdd7d6c6533482d923a00977a3731"><div class="ttname"><a href="structMpegvideoEncDSPContext.html#aa6ccdd7d6c6533482d923a00977a3731">MpegvideoEncDSPContext::draw_edges</a></div><div class="ttdeci">void(* draw_edges)(uint8_t *buf, int wrap, int width, int height, int w, int h, int sides)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideoencdsp_8h_source.html#l00043">mpegvideoencdsp.h:43</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdoc">Encoder or decoder requires flushing with NULL input at the end in order to give the complete and cor...</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00988">avcodec.h:988</a></div></div>
<div class="ttc" id="structVideoDSPContext_html_a69febc8b6d61dec0aa81a1ddd6660b5a"><div class="ttname"><a href="structVideoDSPContext.html#a69febc8b6d61dec0aa81a1ddd6660b5a">VideoDSPContext::emulated_edge_mc</a></div><div class="ttdeci">void(* emulated_edge_mc)(uint8_t *dst, const uint8_t *src, ptrdiff_t dst_linesize, ptrdiff_t src_linesize, int block_w, int block_h, int src_x, int src_y, int w, int h)</div><div class="ttdoc">Copy a rectangular area of samples to a temporary buffer and replicate the border samples...</div><div class="ttdef"><b>Definition:</b> <a href="videodsp_8h_source.html#l00063">videodsp.h:63</a></div></div>
<div class="ttc" id="avassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdoc">assert() equivalent, that is always enabled. </div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="structDiracContext_html_a1b800e64cf7f215fd6a05dea76b37932"><div class="ttname"><a href="structDiracContext.html#a1b800e64cf7f215fd6a05dea76b37932">DiracContext::delay_frames</a></div><div class="ttdeci">DiracFrame * delay_frames[MAX_DELAY+1]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00236">diracdec.c:236</a></div></div>
<div class="ttc" id="structDiracContext_html_a7aff19829bad6fbc910378842592951f"><div class="ttname"><a href="structDiracContext.html#a7aff19829bad6fbc910378842592951f">DiracContext::mcscratch</a></div><div class="ttdeci">uint8_t * mcscratch</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00221">diracdec.c:221</a></div></div>
<div class="ttc" id="structDiracContext_html_a922580ca410cb6a8e5b8e0910fae7470"><div class="ttname"><a href="structDiracContext.html#a922580ca410cb6a8e5b8e0910fae7470">DiracContext::dc_prediction</a></div><div class="ttdeci">int dc_prediction</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00156">diracdec.c:156</a></div></div>
<div class="ttc" id="mpegvideoencdsp_8c_html_a5541c64c94768b55c658e4e88ab60103"><div class="ttname"><a href="mpegvideoencdsp_8c.html#a5541c64c94768b55c658e4e88ab60103">ff_mpegvideoencdsp_init</a></div><div class="ttdeci">av_cold void ff_mpegvideoencdsp_init(MpegvideoEncDSPContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideoencdsp_8c_source.html#l00243">mpegvideoencdsp.c:243</a></div></div>
<div class="ttc" id="dirac__vlc_8h_html"><div class="ttname"><a href="dirac__vlc_8h.html">dirac_vlc.h</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_afca3badbccd3f12f363332423e530149"><div class="ttname"><a href="structAVDiracSeqHeader.html#afca3badbccd3f12f363332423e530149">AVDiracSeqHeader::profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00100">dirac.h:100</a></div></div>
<div class="ttc" id="audio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="attributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00082">attributes.h:82</a></div></div>
<div class="ttc" id="structDiracContext_html_af9a556f0e523f1938ae7455390723ffe"><div class="ttname"><a href="structDiracContext.html#af9a556f0e523f1938ae7455390723ffe">DiracContext::wavelet_idx</a></div><div class="ttdeci">unsigned wavelet_idx</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00162">diracdec.c:162</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="group__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdoc">Allocate an AVFrame and set its fields to default values. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00145">frame.c:145</a></div></div>
<div class="ttc" id="dirac_8h_html"><div class="ttname"><a href="dirac_8h.html">dirac.h</a></div><div class="ttdoc">Interface to Dirac Decoder/Encoder. </div></div>
<div class="ttc" id="dirac__arith_8h_html_a620d78258fe895152eb18369b299338f"><div class="ttname"><a href="dirac__arith_8h.html#a620d78258fe895152eb18369b299338f">CTX_PMODE_REF1</a></div><div class="ttdeci">#define CTX_PMODE_REF1</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00067">dirac_arith.h:67</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a6f6f870917184fbefd8440ece096e77ca0256b6a1974595b2ac5e1765172d002c"><div class="ttname"><a href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77ca0256b6a1974595b2ac5e1765172d002c">CTX_DELTA_Q_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00056">dirac_arith.h:56</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_af02e8ce387eebdcc403a767f4be45d06"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#af02e8ce387eebdcc403a767f4be45d06">coeff_unpack_golomb</a></div><div class="ttdeci">static int coeff_unpack_golomb(GetBitContext *gb, int qfactor, int qoffset)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00436">diracdec.c:436</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aa75ebd943d797fa17c4a288ddaa50eba"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aa75ebd943d797fa17c4a288ddaa50eba">DIVRNDUP</a></div><div class="ttdeci">#define DIVRNDUP(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00070">diracdec.c:70</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a0989b0c2b9830b9c428fa9a80fd82e02"><div class="ttname"><a href="structAVDiracSeqHeader.html#a0989b0c2b9830b9c428fa9a80fd82e02">AVDiracSeqHeader::bit_depth</a></div><div class="ttdeci">int bit_depth</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00113">dirac.h:113</a></div></div>
<div class="ttc" id="structDiracContext_html_aa72605952eb00347314d7994713a4d69"><div class="ttname"><a href="structDiracContext.html#aa72605952eb00347314d7994713a4d69">DiracContext::hq_picture</a></div><div class="ttdeci">int hq_picture</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00154">diracdec.c:154</a></div></div>
<div class="ttc" id="group__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea00d5e8ca007d62fe704bb22b2be7b556"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea00d5e8ca007d62fe704bb22b2be7b556">AV_CODEC_ID_DIRAC</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00313">avcodec.h:313</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a640af427e4187904b9ba4b76d762c477"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a640af427e4187904b9ba4b76d762c477">dirac_decode_init</a></div><div class="ttdeci">static av_cold int dirac_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00382">diracdec.c:382</a></div></div>
<div class="ttc" id="avr32_2intreadwrite_8h_html_a236265133da1ecd6375e5e7c405020a0"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a236265133da1ecd6375e5e7c405020a0">AV_RB32</a></div><div class="ttdeci">#define AV_RB32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00130">intreadwrite.h:130</a></div></div>
<div class="ttc" id="structDiracContext_html_a6c9c9cd29c371e626dadea419edbbb66"><div class="ttname"><a href="structDiracContext.html#a6c9c9cd29c371e626dadea419edbbb66">DiracContext::quant</a></div><div class="ttdeci">uint8_t quant[MAX_DWT_LEVELS][4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00188">diracdec.c:188</a></div></div>
<div class="ttc" id="structDiracSlice_html"><div class="ttname"><a href="structDiracSlice.html">DiracSlice</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00125">diracdec.c:125</a></div></div>
<div class="ttc" id="structDiracContext_html_a181321af8a7065bed76ace88208acd49"><div class="ttname"><a href="structDiracContext.html#a181321af8a7065bed76ace88208acd49">DiracContext::prefix_bytes</a></div><div class="ttdeci">unsigned prefix_bytes</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00192">diracdec.c:192</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a4c350080fef358c117fd97eb622b9b90"><div class="ttname"><a href="structAVDiracSeqHeader.html#a4c350080fef358c117fd97eb622b9b90">AVDiracSeqHeader::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00104">dirac.h:104</a></div></div>
<div class="ttc" id="structDiracContext_html_a6e317bc1772682692abfea67d06fbe7b"><div class="ttname"><a href="structDiracContext.html#a6e317bc1772682692abfea67d06fbe7b">DiracContext::num_x</a></div><div class="ttdeci">unsigned num_x</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00171">diracdec.c:171</a></div></div>
<div class="ttc" id="structDiracContext_html_a1ac350f10ed670b1e229cda7c7190659"><div class="ttname"><a href="structDiracContext.html#a1ac350f10ed670b1e229cda7c7190659">DiracContext::low_delay</a></div><div class="ttdeci">int low_delay</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00153">diracdec.c:153</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ga88b0ecbc4eb3453eef3fbefa3bddeb7c"><div class="ttname"><a href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a></div><div class="ttdeci">int av_frame_ref(AVFrame *dst, const AVFrame *src)</div><div class="ttdoc">Set up a new reference to the data described by the source frame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00385">frame.c:385</a></div></div>
<div class="ttc" id="structDiracContext_html_ae923c106a231b8d1514ebef7365b731d"><div class="ttname"><a href="structDiracContext.html#ae923c106a231b8d1514ebef7365b731d">DiracContext::plane</a></div><div class="ttdeci">Plane plane[3]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00143">diracdec.c:143</a></div></div>
<div class="ttc" id="golomb_8h_html_a1e8c13850edcf84d0afdcbb58c56a641"><div class="ttname"><a href="golomb_8h.html#a1e8c13850edcf84d0afdcbb58c56a641">dirac_get_se_golomb</a></div><div class="ttdeci">static int dirac_get_se_golomb(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00255">golomb.h:255</a></div></div>
<div class="ttc" id="demuxing__decoding_8c_html_ad7d33d579a8d4241a5e643e39287a209"><div class="ttname"><a href="demuxing__decoding_8c.html#ad7d33d579a8d4241a5e643e39287a209">frame</a></div><div class="ttdeci">static AVFrame * frame</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00053">demuxing_decoding.c:53</a></div></div>
<div class="ttc" id="structDiracContext_html_aa61000341312314ebda05774c456becf"><div class="ttname"><a href="structDiracContext.html#aa61000341312314ebda05774c456becf">DiracContext::slice_params_buf</a></div><div class="ttdeci">DiracSlice * slice_params_buf</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00178">diracdec.c:178</a></div></div>
<div class="ttc" id="mxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00089">mxf.c:89</a></div></div>
<div class="ttc" id="group__lavu__mem__macros_html_ga7a422611f83afb33d6e0da44184b548e"><div class="ttname"><a href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a></div><div class="ttdeci">#define DECLARE_ALIGNED(n, t, v)</div><div class="ttdoc">Declare a variable that is aligned in memory. </div><div class="ttdef"><b>Definition:</b> <a href="mem_8h_source.html#l00101">mem.h:101</a></div></div>
<div class="ttc" id="structSliceCoeffs_html_a0ac8d6a74a9c92902c78e96b017329c6"><div class="ttname"><a href="structSliceCoeffs.html#a0ac8d6a74a9c92902c78e96b017329c6">SliceCoeffs::tot</a></div><div class="ttdeci">int tot</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00786">diracdec.c:786</a></div></div>
<div class="ttc" id="structAVPacket_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="structAVPacket.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01611">avcodec.h:1611</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a249638f79537ac44180aaba75952424c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a249638f79537ac44180aaba75952424c">free_sequence_buffers</a></div><div class="ttdeci">static void free_sequence_buffers(DiracContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00350">diracdec.c:350</a></div></div>
<div class="ttc" id="get__bits_8h_html_aac3f793480c01f793f2acc9eba031ff5"><div class="ttname"><a href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a></div><div class="ttdeci">static int get_bits_count(const GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00199">get_bits.h:199</a></div></div>
<div class="ttc" id="structDiracArith_html"><div class="ttname"><a href="structDiracArith.html">DiracArith</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00075">dirac_arith.h:75</a></div></div>
<div class="ttc" id="log_8c_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="log_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a></div><div class="ttdeci">static int flags</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00057">log.c:57</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_a6f234e0cc3f8e214f4934844601ae85c"><div class="ttname"><a href="libavcodec_2internal_8h.html#a6f234e0cc3f8e214f4934844601ae85c">ff_set_sar</a></div><div class="ttdeci">int ff_set_sar(AVCodecContext *avctx, AVRational sar)</div><div class="ttdoc">Check that the provided sample aspect ratio is valid and set it on the codec context. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00225">utils.c:225</a></div></div>
<div class="ttc" id="structDWTPlane_html_ac3e96024c1a7d09e57f60b3ca0d117dd"><div class="ttname"><a href="structDWTPlane.html#ac3e96024c1a7d09e57f60b3ca0d117dd">DWTPlane::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00039">dirac_dwt.h:39</a></div></div>
<div class="ttc" id="get__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div><div class="ttdoc">bitstream reader API header. </div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a29635eba891ab70f6f89b4e02dbbdb60"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a29635eba891ab70f6f89b4e02dbbdb60">epel_weights</a></div><div class="ttdeci">static const uint8_t epel_weights[4][4][4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01565">diracdec.c:1565</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2eaee3bdeeb1a1e080a61e25c53aa941391"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eaee3bdeeb1a1e080a61e25c53aa941391">subband_nb</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00245">diracdec.c:245</a></div></div>
<div class="ttc" id="structPlane_html_ae2a069d33090a826d2a0c6b47c328953"><div class="ttname"><a href="structPlane.html#ae2a069d33090a826d2a0c6b47c328953">Plane::xblen</a></div><div class="ttdeci">uint8_t xblen</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00112">diracdec.c:112</a></div></div>
<div class="ttc" id="diracdsp_8h_html"><div class="ttname"><a href="diracdsp_8h.html">diracdsp.h</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a833539c7d54fbc72c01ff24762fa8bf0"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a833539c7d54fbc72c01ff24762fa8bf0">decode_lowdelay_slice</a></div><div class="ttdeci">static int decode_lowdelay_slice(AVCodecContext *avctx, void *arg)</div><div class="ttdoc">Dirac Specification -&gt; 13.5.2 Slices. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00743">diracdec.c:743</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_ae4c4d4ed99eda3c70df92e5d7a903045"><div class="ttname"><a href="dirac__arith_8h.html#ae4c4d4ed99eda3c70df92e5d7a903045">CTX_DC_DATA</a></div><div class="ttdeci">#define CTX_DC_DATA</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00073">dirac_arith.h:73</a></div></div>
<div class="ttc" id="structDiracContext_html"><div class="ttname"><a href="structDiracContext.html">DiracContext</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00132">diracdec.c:132</a></div></div>
<div class="ttc" id="arm_2vp56__arith_8h_html_a3d7d1b6b25e26030cf09f680a1aa0e81"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a></div><div class="ttdeci">#define A(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00028">vp56_arith.h:28</a></div></div>
<div class="ttc" id="macros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="structSubBand_html_aa4902c103f721a001fe4e720beec8c34"><div class="ttname"><a href="structSubBand.html#aa4902c103f721a001fe4e720beec8c34">SubBand::x</a></div><div class="ttdeci">unsigned x</div><div class="ttdef"><b>Definition:</b> <a href="pixlet_8c_source.html#l00043">pixlet.c:43</a></div></div>
<div class="ttc" id="structSubBand_html"><div class="ttname"><a href="structSubBand.html">SubBand</a></div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00043">cfhd.h:43</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_a9c9053cd66f650f494f324c90e9db0ce"><div class="ttname"><a href="structDiracDSPContext.html#a9c9053cd66f650f494f324c90e9db0ce">DiracDSPContext::avg_dirac_pixels_tab</a></div><div class="ttdeci">void(* avg_dirac_pixels_tab[3][4])(uint8_t *dst, const uint8_t *src[5], int stride, int h)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00043">diracdsp.h:43</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a0c0b6c78463768276c6dc19b0af5826e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a0c0b6c78463768276c6dc19b0af5826e">pred_block_dc</a></div><div class="ttdeci">static void pred_block_dc(DiracBlock *block, int stride, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01308">diracdec.c:1308</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_ad1f22b68576a9f2d155ffff49d6b45f6"><div class="ttname"><a href="structAVDiracSeqHeader.html#ad1f22b68576a9f2d155ffff49d6b45f6">AVDiracSeqHeader::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00103">dirac.h:103</a></div></div>
<div class="ttc" id="structDiracContext_html_aacd74f76852929d9b9fa0fce0a1e4700"><div class="ttname"><a href="structDiracContext.html#aacd74f76852929d9b9fa0fce0a1e4700">DiracContext::pan_tilt</a></div><div class="ttdeci">int pan_tilt[2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00197">diracdec.c:197</a></div></div>
<div class="ttc" id="structDiracFrame_html_aa06c35bb33a70035d20f88f2fcd3eb55"><div class="ttname"><a href="structDiracFrame.html#aa06c35bb33a70035d20f88f2fcd3eb55">DiracFrame::interpolated</a></div><div class="ttdeci">int interpolated[3]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00074">diracdec.c:74</a></div></div>
<div class="ttc" id="mpegpicture_8h_html_a7e1ec81d4826411cba58a2e8e2bd333e"><div class="ttname"><a href="mpegpicture_8h.html#a7e1ec81d4826411cba58a2e8e2bd333e">EDGE_WIDTH</a></div><div class="ttdeci">#define EDGE_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00033">mpegpicture.h:33</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a33ce2c8148de5c9f68b8c140ccf619eb"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a33ce2c8148de5c9f68b8c140ccf619eb">ROLLOFF</a></div><div class="ttdeci">#define ROLLOFF(i)</div></div>
<div class="ttc" id="arm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="vp3_8c_html_a86527b2169eb693a23405feae80d5242"><div class="ttname"><a href="vp3_8c.html#a86527b2169eb693a23405feae80d5242">ref_frames</a></div><div class="ttdeci">static int ref_frames(Vp3DecodeContext *dst, Vp3DecodeContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="vp3_8c_source.html#l01923">vp3.c:1923</a></div></div>
<div class="ttc" id="dirac__vlc_8c_html_a18e47040fe054724eb334d0f517b6314"><div class="ttname"><a href="dirac__vlc_8c.html#a18e47040fe054724eb334d0f517b6314">ff_dirac_golomb_reader_init</a></div><div class="ttdeci">av_cold int ff_dirac_golomb_reader_init(DiracGolombLUT **lut_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__vlc_8c_source.html#l00227">dirac_vlc.c:227</a></div></div>
<div class="ttc" id="get__bits_8h_html_a44d39cea027a76211f31e3bf2e3e68a4"><div class="ttname"><a href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a></div><div class="ttdeci">static int get_bits_left(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00573">get_bits.h:573</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2e">dirac_subband</a></div><div class="ttdeci">dirac_subband</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00240">diracdec.c:240</a></div></div>
<div class="ttc" id="diractab_8c_html_a572434af0ce97f3cb1be2e7fa1d05824"><div class="ttname"><a href="diractab_8c.html#a572434af0ce97f3cb1be2e7fa1d05824">ff_dirac_qoffset_intra_tab</a></div><div class="ttdeci">const int32_t ff_dirac_qoffset_intra_tab[120]</div><div class="ttdef"><b>Definition:</b> <a href="diractab_8c_source.html#l00053">diractab.c:53</a></div></div>
<div class="ttc" id="diracdsp_8c_html_a98f655e8b5255e71a4272b7720a4fa10"><div class="ttname"><a href="diracdsp_8c.html#a98f655e8b5255e71a4272b7720a4fa10">ff_diracdsp_init</a></div><div class="ttdeci">av_cold void ff_diracdsp_init(DiracDSPContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8c_source.html#l00219">diracdsp.c:219</a></div></div>
<div class="ttc" id="structAVFrame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="structAVFrame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">width and height of the video frame </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00242">frame.h:242</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdoc">Something went wrong and cannot losslessly be recovered. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00176">log.h:176</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2eafb6f3eb638035c0def4783b164d81b06"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2eafb6f3eb638035c0def4783b164d81b06">subband_lh</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00243">diracdec.c:243</a></div></div>
<div class="ttc" id="structSubBand_html_a0b44d95e880ae869dcacdf525a137be7"><div class="ttname"><a href="structSubBand.html#a0b44d95e880ae869dcacdf525a137be7">SubBand::length</a></div><div class="ttdeci">unsigned length</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00100">diracdec.c:100</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a855a60718fee8fc93d70fb598b2d0053"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a855a60718fee8fc93d70fb598b2d0053">dirac_decode_frame</a></div><div class="ttdeci">static int dirac_decode_frame(AVCodecContext *avctx, void *data, int *got_frame, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l02196">diracdec.c:2196</a></div></div>
<div class="ttc" id="structDiracFrame_html_a2cbce3df961594025dcf11fe5c073044"><div class="ttname"><a href="structDiracFrame.html#a2cbce3df961594025dcf11fe5c073044">DiracFrame::hpel</a></div><div class="ttdeci">uint8_t * hpel[3][4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00075">diracdec.c:75</a></div></div>
<div class="ttc" id="structDiracSlice_html_a066a8e674225ed910166ca15d07be5a0"><div class="ttname"><a href="structDiracSlice.html#a066a8e674225ed910166ca15d07be5a0">DiracSlice::slice_x</a></div><div class="ttdeci">int slice_x</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00127">diracdec.c:127</a></div></div>
<div class="ttc" id="lzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="structDiracContext_html_a72a75c74febfd0f4464c67e037daa3ac"><div class="ttname"><a href="structDiracContext.html#a72a75c74febfd0f4464c67e037daa3ac">DiracContext::mctmp</a></div><div class="ttdeci">uint16_t * mctmp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00220">diracdec.c:220</a></div></div>
<div class="ttc" id="structDiracContext_html_a9390e4a0238e3f79551ed440131542aa"><div class="ttname"><a href="structDiracContext.html#a9390e4a0238e3f79551ed440131542aa">DiracContext::add_obmc</a></div><div class="ttdeci">void(* add_obmc)(uint16_t *dst, const uint8_t *src, int stride, const uint8_t *obmc_weight, int yblen)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00228">diracdec.c:228</a></div></div>
<div class="ttc" id="group__lavu__error_html_gae4bb6f165973d09584e0ec0f335f69ca"><div class="ttname"><a href="group__lavu__error.html#gae4bb6f165973d09584e0ec0f335f69ca">AVERROR</a></div><div class="ttdeci">#define AVERROR(e)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00043">error.h:43</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a6b50a2dbf44abfc3c360c271ff2aeed6"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a6b50a2dbf44abfc3c360c271ff2aeed6">DIRAC_REF_MASK_GLOBAL</a></div><div class="ttdeci">#define DIRAC_REF_MASK_GLOBAL</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00059">diracdec.c:59</a></div></div>
<div class="ttc" id="structDWTPlane_html_a4b526c3f99e729cec931c17d15b6e7ee"><div class="ttname"><a href="structDWTPlane.html#a4b526c3f99e729cec931c17d15b6e7ee">DWTPlane::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00038">dirac_dwt.h:38</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdoc">Free the frame and any dynamically allocated objects in it, e.g. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00158">frame.c:158</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ad270c0f600ca74f45292a1436d36a90c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ad270c0f600ca74f45292a1436d36a90c">pred_sbsplit</a></div><div class="ttdeci">static int pred_sbsplit(uint8_t *sbsplit, int stride, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01278">diracdec.c:1278</a></div></div>
<div class="ttc" id="libavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdoc">Return NULL if CONFIG_SMALL is true, otherwise the argument without modification. ...</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00176">internal.h:176</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ac5ed4730b680063a1f1810a08d4e6e8c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ac5ed4730b680063a1f1810a08d4e6e8c">add_frame</a></div><div class="ttdeci">static int add_frame(DiracFrame *framelist[], int maxframes, DiracFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00272">diracdec.c:272</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a9d79c772142036cdc3ee3c5c64d433b2"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a9d79c772142036cdc3ee3c5c64d433b2">pred_mv</a></div><div class="ttdeci">static void pred_mv(DiracBlock *block, int stride, int x, int y, int ref)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01341">diracdec.c:1341</a></div></div>
<div class="ttc" id="group__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdoc">Stuff which is only useful for libav* developers. </div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00197">log.h:197</a></div></div>
<div class="ttc" id="libavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="diractab_8c_html_a9b3301e2b136d251223e00c89bdb0053"><div class="ttname"><a href="diractab_8c.html#a9b3301e2b136d251223e00c89bdb0053">ff_dirac_default_qmat</a></div><div class="ttdeci">const uint8_t ff_dirac_default_qmat[7][4][4]</div><div class="ttdef"><b>Definition:</b> <a href="diractab_8c_source.html#l00024">diractab.c:24</a></div></div>
<div class="ttc" id="structDiracContext_html_af30d8861d1310ac381323b5d1bc90753"><div class="ttname"><a href="structDiracContext.html#af30d8861d1310ac381323b5d1bc90753">DiracContext::num_y</a></div><div class="ttdeci">unsigned num_y</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00172">diracdec.c:172</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a8b56e2073d7228ff2c1bd7e1de878cab"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a8b56e2073d7228ff2c1bd7e1de878cab">interpolate_refplane</a></div><div class="ttdeci">static int interpolate_refplane(DiracContext *s, DiracFrame *ref, int plane, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01775">diracdec.c:1775</a></div></div>
<div class="ttc" id="structDiracFrame_html"><div class="ttname"><a href="structDiracFrame.html">DiracFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00072">diracdec.c:72</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ab609330f1d31b95a4f8d41ca14390924"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ab609330f1d31b95a4f8d41ca14390924">mc_subpel</a></div><div class="ttdeci">static int mc_subpel(DiracContext *s, DiracBlock *block, const uint8_t *src[5], int x, int y, int ref, int plane)</div><div class="ttdoc">For block x,y, determine which of the hpel planes to do bilinear interpolation from and set src[] to ...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01592">diracdec.c:1592</a></div></div>
<div class="ttc" id="structDiracContext_html_a16ff01a50f5f2be3ac503756cc1fa1fc"><div class="ttname"><a href="structDiracContext.html#a16ff01a50f5f2be3ac503756cc1fa1fc">DiracContext::wavelet_depth</a></div><div class="ttdeci">unsigned wavelet_depth</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00161">diracdec.c:161</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a4abdd95fab839e95cd9143b033bfd2ed"><div class="ttname"><a href="dirac__arith_8h.html#a4abdd95fab839e95cd9143b033bfd2ed">CTX_MV_DATA</a></div><div class="ttdeci">#define CTX_MV_DATA</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00071">dirac_arith.h:71</a></div></div>
<div class="ttc" id="structSubBand_html_a35bda844e70ff6876d9dbca24537857b"><div class="ttname"><a href="structSubBand.html#a35bda844e70ff6876d9dbca24537857b">SubBand::stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00046">cfhd.h:46</a></div></div>
<div class="ttc" id="structAVCodec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="structAVCodec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name of the codec implementation. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03626">avcodec.h:3626</a></div></div>
<div class="ttc" id="structDiracContext_html_a9971cb2ead2b1001ebc4e7dd8a72fde2"><div class="ttname"><a href="structDiracContext.html#a9971cb2ead2b1001ebc4e7dd8a72fde2">DiracContext::current_picture</a></div><div class="ttdeci">DiracFrame * current_picture</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00232">diracdec.c:232</a></div></div>
<div class="ttc" id="diractab_8h_html_a961d731075d3d8ad9f0bfc7dc6a6498d"><div class="ttname"><a href="diractab_8h.html#a961d731075d3d8ad9f0bfc7dc6a6498d">DIRAC_MAX_QUANT_INDEX</a></div><div class="ttdeci">#define DIRAC_MAX_QUANT_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="diractab_8h_source.html#l00041">diractab.h:41</a></div></div>
<div class="ttc" id="structDiracSlice_html_a559c8b1c8a6eb78a6a5230b75713ff6b"><div class="ttname"><a href="structDiracSlice.html#a559c8b1c8a6eb78a6a5230b75713ff6b">DiracSlice::slice_y</a></div><div class="ttdeci">int slice_y</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00128">diracdec.c:128</a></div></div>
<div class="ttc" id="structDiracContext_html_ab341c8bb377ea50ac1521fc90d5b58e0"><div class="ttname"><a href="structDiracContext.html#ab341c8bb377ea50ac1521fc90d5b58e0">DiracContext::old_delta_quant</a></div><div class="ttdeci">unsigned old_delta_quant</div><div class="ttdoc">schroedinger older than 1.0.8 doesn&amp;#39;t store quant delta if only one codebook exists in a band ...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00168">diracdec.c:168</a></div></div>
<div class="ttc" id="vf__spp_8c_html_a3ac533abdb7fafba276c70740502e406"><div class="ttname"><a href="vf__spp_8c.html#a3ac533abdb7fafba276c70740502e406">offset</a></div><div class="ttdeci">static const uint8_t offset[127][2]</div><div class="ttdef"><b>Definition:</b> <a href="vf__spp_8c_source.html#l00092">vf_spp.c:92</a></div></div>
<div class="ttc" id="common_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="group__lavu__mem__funcs_html_gae0443f550815c80af42c5ae967351433"><div class="ttname"><a href="group__lavu__mem__funcs.html#gae0443f550815c80af42c5ae967351433">av_mallocz_array</a></div><div class="ttdeci">static void * av_mallocz_array(size_t nmemb, size_t size)</div><div class="ttdoc">Allocate a memory block for an array with av_mallocz(). </div><div class="ttdef"><b>Definition:</b> <a href="mem_8h_source.html#l00226">mem.h:226</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a8c75a595ac2ac48bfd1213bd90f1ceeb"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a8c75a595ac2ac48bfd1213bd90f1ceeb">dirac_decode_data_unit</a></div><div class="ttdeci">static int dirac_decode_data_unit(AVCodecContext *avctx, const uint8_t *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l02061">diracdec.c:2061</a></div></div>
<div class="ttc" id="bytestream_8h_html"><div class="ttname"><a href="bytestream_8h.html">bytestream.h</a></div></div>
<div class="ttc" id="structDiracContext_html_aaa0b2e945a2882dd4f409a00b453f57f"><div class="ttname"><a href="structDiracContext.html#aaa0b2e945a2882dd4f409a00b453f57f">DiracContext::diracdsp</a></div><div class="ttdeci">DiracDSPContext diracdsp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00136">diracdec.c:136</a></div></div>
<div class="ttc" id="structSubBand_html_a891287b5b41082feff064eede0406061"><div class="ttname"><a href="structSubBand.html#a891287b5b41082feff064eede0406061">SubBand::orientation</a></div><div class="ttdeci">int orientation</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00045">cfhd.h:45</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_af8a1d2ed31f7c9a00fec46a798edb61b"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a></div><div class="ttdeci">#define MAX_BLOCKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00052">diracdec.c:52</a></div></div>
<div class="ttc" id="af__channelmap_8c_html_ad79bfa4ac7a887fff6b118ca6e77ad27"><div class="ttname"><a href="af__channelmap_8c.html#ad79bfa4ac7a887fff6b118ca6e77ad27">split</a></div><div class="ttdeci">static char * split(char *message, char delim)</div><div class="ttdef"><b>Definition:</b> <a href="af__channelmap_8c_source.html#l00081">af_channelmap.c:81</a></div></div>
<div class="ttc" id="structDiracSlice_html_ad19a27300213aeec73dafb68a63a574b"><div class="ttname"><a href="structDiracSlice.html#ad19a27300213aeec73dafb68a63a574b">DiracSlice::bytes</a></div><div class="ttdeci">int bytes</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00129">diracdec.c:129</a></div></div>
<div class="ttc" id="diractab_8h_html"><div class="ttname"><a href="diractab_8h.html">diractab.h</a></div></div>
<div class="ttc" id="structDiracContext_html_a38c24eb4aee63858d5eefb59a16b680f"><div class="ttname"><a href="structDiracContext.html#a38c24eb4aee63858d5eefb59a16b680f">DiracContext::slice_params_num_buf</a></div><div class="ttdeci">int slice_params_num_buf</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00179">diracdec.c:179</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ad005d55a3a640f22b8ed513fd4aa96f2"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ad005d55a3a640f22b8ed513fd4aa96f2">INTRA_DC_PRED</a></div><div class="ttdeci">#define INTRA_DC_PRED(n, type)</div><div class="ttdoc">Dirac Specification -&gt; 13.3 intra_dc_prediction(band) </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00560">diracdec.c:560</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a1c0c591dd6b330b0c7ba2f3dd3bffb45"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a1c0c591dd6b330b0c7ba2f3dd3bffb45">init_planes</a></div><div class="ttdeci">static void init_planes(DiracContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01013">diracdec.c:1013</a></div></div>
<div class="ttc" id="structDiracContext_html_ac487c5afc52311d6205ddcf20ad9591e"><div class="ttname"><a href="structDiracContext.html#ac487c5afc52311d6205ddcf20ad9591e">DiracContext::globalmc_flag</a></div><div class="ttdeci">int globalmc_flag</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00157">diracdec.c:157</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ad3853523e5bc3894949cde5b4be1a6d6"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ad3853523e5bc3894949cde5b4be1a6d6">ff_dirac_decoder</a></div><div class="ttdeci">AVCodec ff_dirac_decoder</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l02292">diracdec.c:2292</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a67244182b20868420d63a7b7b797ac4c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a67244182b20868420d63a7b7b797ac4c">decode_block_params</a></div><div class="ttdeci">static void decode_block_params(DiracContext *s, DiracArith arith[8], DiracBlock *block, int stride, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01393">diracdec.c:1393</a></div></div>
<div class="ttc" id="structPlane_html_a62cba26f8e6a778847ed423e956212df"><div class="ttname"><a href="structPlane.html#a62cba26f8e6a778847ed423e956212df">Plane::band</a></div><div class="ttdeci">SubBand band[DWT_LEVELS][4]</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00068">cfhd.h:68</a></div></div>
<div class="ttc" id="structAVFrame_html_af9920fc3fbfa347b8943ae461b50d18b"><div class="ttname"><a href="structAVFrame.html#af9920fc3fbfa347b8943ae461b50d18b">AVFrame::pict_type</a></div><div class="ttdeci">enum AVPictureType pict_type</div><div class="ttdoc">Picture type of the frame. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00264">frame.h:264</a></div></div>
<div class="ttc" id="structSubBand_html_af1a0c1c1146ba2ca489c503aa21409a5"><div class="ttname"><a href="structSubBand.html#af1a0c1c1146ba2ca489c503aa21409a5">SubBand::ibuf</a></div><div class="ttdeci">uint8_t * ibuf</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00053">cfhd.h:53</a></div></div>
<div class="ttc" id="common_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="structAVFrame_html_a12b00a552b74c79f0760b80fac18efe7"><div class="ttname"><a href="structAVFrame.html#a12b00a552b74c79f0760b80fac18efe7">AVFrame::display_picture_number</a></div><div class="ttdeci">int display_picture_number</div><div class="ttdoc">picture number in display order </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00299">frame.h:299</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a0b261d56f629b5479affb8cd20b43c02"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a0b261d56f629b5479affb8cd20b43c02">CALC_PADDING</a></div><div class="ttdeci">#define CALC_PADDING(size, depth)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00067">diracdec.c:67</a></div></div>
<div class="ttc" id="structDiracContext_html_a1bd01b56920f0ec7b86c27c8452fbaa1"><div class="ttname"><a href="structDiracContext.html#a1bd01b56920f0ec7b86c27c8452fbaa1">DiracContext::ref_pics</a></div><div class="ttdeci">DiracFrame * ref_pics[2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00233">diracdec.c:233</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a059764fc4134ff43cba8844e74fc9dfa"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a059764fc4134ff43cba8844e74fc9dfa">decode_hq_slice_row</a></div><div class="ttdeci">static int decode_hq_slice_row(AVCodecContext *avctx, void *arg, int jobnr, int threadnr)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00884">diracdec.c:884</a></div></div>
<div class="ttc" id="structDiracContext_html_aec5d771ad7ae9049bec174c775fb0ec7"><div class="ttname"><a href="structDiracContext.html#aec5d771ad7ae9049bec174c775fb0ec7">DiracContext::avg_pixels_tab</a></div><div class="ttdeci">void(* avg_pixels_tab[4])(uint8_t *dst, const uint8_t *src[5], int stride, int h)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00227">diracdec.c:227</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aa121af51ad65f15a5755268b94c30c34"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aa121af51ad65f15a5755268b94c30c34">block_mc</a></div><div class="ttdeci">static void block_mc(DiracContext *s, DiracBlock *block, uint16_t *mctmp, uint8_t *obmc_weight, int plane, int dstx, int dsty)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01703">diracdec.c:1703</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a9bfdfd50600595cc6eb2766593b2ca7c"><div class="ttname"><a href="structAVDiracSeqHeader.html#a9bfdfd50600595cc6eb2766593b2ca7c">AVDiracSeqHeader::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00110">dirac.h:110</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a12c0041849d7dfd197f6343762b33312"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a12c0041849d7dfd197f6343762b33312">remove_frame</a></div><div class="ttdeci">static DiracFrame * remove_frame(DiracFrame *framelist[], int picnum)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00254">diracdec.c:254</a></div></div>
<div class="ttc" id="dirac__dwt_8c_html_a579773279770cace6973bea5ac861587"><div class="ttname"><a href="dirac__dwt_8c.html#a579773279770cace6973bea5ac861587">ff_spatial_idwt_slice2</a></div><div class="ttdeci">void ff_spatial_idwt_slice2(DWTContext *d, int y)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8c_source.html#l00067">dirac_dwt.c:67</a></div></div>
<div class="ttc" id="common_8h_html_af5e4ff7761996bc901e59bd59756268d"><div class="ttname"><a href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a></div><div class="ttdeci">#define FFSIGN(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00073">common.h:73</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="structAVCodecContext.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdoc">picture width / height. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01873">avcodec.h:1873</a></div></div>
<div class="ttc" id="structMpegvideoEncDSPContext_html"><div class="ttname"><a href="structMpegvideoEncDSPContext.html">MpegvideoEncDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mpegvideoencdsp_8h_source.html#l00032">mpegvideoencdsp.h:32</a></div></div>
<div class="ttc" id="structDiracBlock_html_abcf5a980b3587da340f963b43ded4b5e"><div class="ttname"><a href="structDiracBlock.html#abcf5a980b3587da340f963b43ded4b5e">DiracBlock::u</a></div><div class="ttdeci">union DiracBlock::@55 u</div></div>
<div class="ttc" id="structDiracContext_html_aa44d39d5d5b9f719c5abd10ac22ee022"><div class="ttname"><a href="structDiracContext.html#aa44d39d5d5b9f719c5abd10ac22ee022">DiracContext::perspective</a></div><div class="ttdeci">int perspective[2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00199">diracdec.c:199</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a223983da3d9e9529b6fae368a4139437"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a223983da3d9e9529b6fae368a4139437">dirac_unpack_prediction_parameters</a></div><div class="ttdeci">static int dirac_unpack_prediction_parameters(DiracContext *s)</div><div class="ttdoc">Unpack the motion compensation parameters Dirac Specification -&gt; 11.2 Picture prediction data...</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01067">diracdec.c:1067</a></div></div>
<div class="ttc" id="audio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="structDiracGolombLUT_html"><div class="ttname"><a href="structDiracGolombLUT.html">DiracGolombLUT</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__vlc_8h_source.html#l00034">dirac_vlc.h:34</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="structAVCodecContext.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdoc">Chromaticity coordinates of the source primaries. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02402">avcodec.h:2402</a></div></div>
<div class="ttc" id="dirac__vlc_8c_html_a5542d1beee398aee627b4c85f555149c"><div class="ttname"><a href="dirac__vlc_8c.html#a5542d1beee398aee627b4c85f555149c">ff_dirac_golomb_reader_end</a></div><div class="ttdeci">av_cold void ff_dirac_golomb_reader_end(DiracGolombLUT **lut_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__vlc_8c_source.html#l00244">dirac_vlc.c:244</a></div></div>
<div class="ttc" id="structDiracContext_html_a145460db55c1e3b1bf5ea7a4e8f07e57"><div class="ttname"><a href="structDiracContext.html#a145460db55c1e3b1bf5ea7a4e8f07e57">DiracContext::mpvencdsp</a></div><div class="ttdeci">MpegvideoEncDSPContext mpvencdsp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00134">diracdec.c:134</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ac458c479568c30049fe415e8e33716c9"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ac458c479568c30049fe415e8e33716c9">mc_row</a></div><div class="ttdeci">static void mc_row(DiracContext *s, DiracBlock *block, uint16_t *mctmp, int plane, int dsty)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01739">diracdec.c:1739</a></div></div>
<div class="ttc" id="common_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdoc">Absolute value, Note, INT_MIN / INT64_MIN result in undefined behavior as they are not representable ...</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="structSliceCoeffs_html_a06dc88786c3efc0ae05ba34c0e4800fa"><div class="ttname"><a href="structSliceCoeffs.html#a06dc88786c3efc0ae05ba34c0e4800fa">SliceCoeffs::top</a></div><div class="ttdeci">int top</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00783">diracdec.c:783</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a6927dc652ae6241f1dfdbad4e12d3a40"><div class="ttname"><a href="structAVCodecContext.html#a6927dc652ae6241f1dfdbad4e12d3a40">AVCodecContext::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">level </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03290">avcodec.h:3290</a></div></div>
<div class="ttc" id="structDiracContext_html_a54d794a44c552cf8ada575b1b504cd00"><div class="ttname"><a href="structDiracContext.html#a54d794a44c552cf8ada575b1b504cd00">DiracContext::perspective_exp</a></div><div class="ttdeci">unsigned perspective_exp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00201">diracdec.c:201</a></div></div>
<div class="ttc" id="structDWTContext_html"><div class="ttname"><a href="structDWTContext.html">DWTContext</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00054">dirac_dwt.h:54</a></div></div>
<div class="ttc" id="structDiracContext_html_ace706accdb5284a65dd21936776e24ab"><div class="ttname"><a href="structDiracContext.html#ace706accdb5284a65dd21936776e24ab">DiracContext::chroma_y_shift</a></div><div class="ttdeci">int chroma_y_shift</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00145">diracdec.c:145</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae9cedc0f04787a8e1c18133ca843198b"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae9cedc0f04787a8e1c18133ca843198b">select_dsp_funcs</a></div><div class="ttdeci">static void select_dsp_funcs(DiracContext *s, int width, int height, int xblen, int yblen)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01755">diracdec.c:1755</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="avisynth__c_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00684">avisynth_c.h:684</a></div></div>
<div class="ttc" id="structDiracContext_html_ae0ed01ecb6efe4e2e6e8b99a81170e95"><div class="ttname"><a href="structDiracContext.html#ae0ed01ecb6efe4e2e6e8b99a81170e95">DiracContext::globalmc</a></div><div class="ttdeci">struct DiracContext::@59 globalmc[2]</div></div>
<div class="ttc" id="structDiracBlock_html_a6502be565175bf9844a6f91966eafb60"><div class="ttname"><a href="structDiracBlock.html#a6502be565175bf9844a6f91966eafb60">DiracBlock::dc</a></div><div class="ttdeci">int16_t dc[3]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00083">diracdec.c:83</a></div></div>
<div class="ttc" id="group__lavc__misc__pixfmt_html_ga8734c0195b87efe1a060ca101505c7b8"><div class="ttname"><a href="group__lavc__misc__pixfmt.html#ga8734c0195b87efe1a060ca101505c7b8">avcodec_get_chroma_sub_sample</a></div><div class="ttdeci">void avcodec_get_chroma_sub_sample(enum AVPixelFormat pix_fmt, int *h_shift, int *v_shift)</div><div class="ttdoc">Utility function to access log2_chroma_w log2_chroma_h from the pixel format AVPixFmtDescriptor. </div><div class="ttdef"><b>Definition:</b> <a href="imgconvert_8c_source.html#l00038">imgconvert.c:38</a></div></div>
<div class="ttc" id="structDiracContext_html_a918fcf3e699af20edc4f9a2c796fc663"><div class="ttname"><a href="structDiracContext.html#a918fcf3e699af20edc4f9a2c796fc663">DiracContext::edge_emu_buffer_base</a></div><div class="ttdeci">uint8_t * edge_emu_buffer_base</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00218">diracdec.c:218</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="structAVCodecContext.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01873">avcodec.h:1873</a></div></div>
<div class="ttc" id="vf__mcdeint_8c_html_a22dd5e4b362bda39fe025467d2d1ecf5"><div class="ttname"><a href="vf__mcdeint_8c.html#a22dd5e4b362bda39fe025467d2d1ecf5">if</a></div><div class="ttdeci">if(ret&lt; 0)</div><div class="ttdef"><b>Definition:</b> <a href="vf__mcdeint_8c_source.html#l00282">vf_mcdeint.c:282</a></div></div>
<div class="ttc" id="structSliceCoeffs_html_a2feb6061fadd847737d621b7c38a9fe1"><div class="ttname"><a href="structSliceCoeffs.html#a2feb6061fadd847737d621b7c38a9fe1">SliceCoeffs::tot_h</a></div><div class="ttdeci">int tot_h</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00784">diracdec.c:784</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a943332759c7410358a0336f22374b8c5"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a943332759c7410358a0336f22374b8c5">decode_component</a></div><div class="ttdeci">static void decode_component(DiracContext *s, int comp)</div><div class="ttdoc">Dirac Specification -&gt; [DIRAC_STD] 13.4.1 core_transform_data() </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00645">diracdec.c:645</a></div></div>
<div class="ttc" id="structDiracContext_html_a4b1c6d18c71e86dfcc29b55ccba46f83"><div class="ttname"><a href="structDiracContext.html#a4b1c6d18c71e86dfcc29b55ccba46f83">DiracContext::pshift</a></div><div class="ttdeci">int pshift</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00148">diracdec.c:148</a></div></div>
<div class="ttc" id="dirac_8h_html_a2359aa6142dd80d61213be6aa1e78f05ae2560b5b918710234ea901d7470d24b0"><div class="ttname"><a href="dirac_8h.html#a2359aa6142dd80d61213be6aa1e78f05ae2560b5b918710234ea901d7470d24b0">DIRAC_PCODE_SEQ_HEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00058">dirac.h:58</a></div></div>
<div class="ttc" id="structAVCodecContext_html_aa852b6227d0778b62e9cc4034ad3720c"><div class="ttname"><a href="structAVCodecContext.html#aa852b6227d0778b62e9cc4034ad3720c">AVCodecContext::thread_count</a></div><div class="ttdeci">int thread_count</div><div class="ttdoc">thread count is used to decide how many independent tasks should be passed to execute() ...</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03118">avcodec.h:3118</a></div></div>
<div class="ttc" id="intmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_acca130ad3f5763df7e0dbefae9630ae8"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#acca130ad3f5763df7e0dbefae9630ae8">init_obmc_weights</a></div><div class="ttdeci">static void init_obmc_weights(DiracContext *s, Plane *p, int by)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01552">diracdec.c:1552</a></div></div>
<div class="ttc" id="siprdata_8h_html_a3cce87604695942e930d8853d9cad953"><div class="ttname"><a href="siprdata_8h.html#a3cce87604695942e930d8853d9cad953">pred</a></div><div class="ttdeci">static const float pred[4]</div><div class="ttdef"><b>Definition:</b> <a href="siprdata_8h_source.html#l00259">siprdata.h:259</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_a312385f19d3fa6eec05bf8fa58ea66a3"><div class="ttname"><a href="structDiracDSPContext.html#a312385f19d3fa6eec05bf8fa58ea66a3">DiracDSPContext::add_dirac_obmc</a></div><div class="ttdeci">void(* add_dirac_obmc[3])(uint16_t *dst, const uint8_t *src, int stride, const uint8_t *obmc_weight, int yblen)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00048">diracdsp.h:48</a></div></div>
<div class="ttc" id="group__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome. </div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="structDWTPlane_html_af748ef61e94228256375abbe519c9959"><div class="ttname"><a href="structDWTPlane.html#af748ef61e94228256375abbe519c9959">DWTPlane::buf_base</a></div><div class="ttdeci">uint8_t * buf_base</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00042">dirac_dwt.h:42</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga7c4f386d1d6df0214eb35f2be1c82779"><div class="ttname"><a href="group__lavc__core.html#ga7c4f386d1d6df0214eb35f2be1c82779">AV_CODEC_CAP_SLICE_THREADS</a></div><div class="ttdeci">#define AV_CODEC_CAP_SLICE_THREADS</div><div class="ttdoc">Codec supports slice-based (or partition-based) multithreading. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01030">avcodec.h:1030</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a6f6f870917184fbefd8440ece096e77caaa50901372a72a20b137bb67121c8f2e"><div class="ttname"><a href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77caaa50901372a72a20b137bb67121c8f2e">CTX_ZERO_BLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00054">dirac_arith.h:54</a></div></div>
<div class="ttc" id="libavcodec_24xm_8c_html_a19c59215a57cc549287f6d8481937b12"><div class="ttname"><a href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a></div><div class="ttdeci">static const int8_t mv[256][2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_24xm_8c_source.html#l00077">4xm.c:77</a></div></div>
<div class="ttc" id="structAVCodecContext_html_acacf593700a5cf7d121196e53bd94ad2"><div class="ttname"><a href="structAVCodecContext.html#acacf593700a5cf7d121196e53bd94ad2">AVCodecContext::execute2</a></div><div class="ttdeci">int(* execute2)(struct AVCodecContext *c, int(*func)(struct AVCodecContext *c2, void *arg, int jobnr, int threadnr), void *arg2, int *ret, int count)</div><div class="ttdoc">The codec may call this to execute several independent things. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03178">avcodec.h:3178</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_af8dd60a672baa233d43bb7595c2f5c8b"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#af8dd60a672baa233d43bb7595c2f5c8b">get_buffer_with_edge</a></div><div class="ttdeci">static int get_buffer_with_edge(AVCodecContext *avctx, AVFrame *f, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01911">diracdec.c:1911</a></div></div>
<div class="ttc" id="structDiracContext_html_ab486ac0ab57ae25eda3ef0c37a370e1e"><div class="ttname"><a href="structDiracContext.html#ab486ac0ab57ae25eda3ef0c37a370e1e">DiracContext::vdsp</a></div><div class="ttdeci">VideoDSPContext vdsp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00135">diracdec.c:135</a></div></div>
<div class="ttc" id="structPlane_html_a7006305741a6427adea00c841eedf195"><div class="ttname"><a href="structPlane.html#a7006305741a6427adea00c841eedf195">Plane::ybsep</a></div><div class="ttdeci">uint8_t ybsep</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00116">diracdec.c:116</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a617fcaeec059a1ae66652eeae047eac9"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a617fcaeec059a1ae66652eeae047eac9">decode_subband_internal</a></div><div class="ttdeci">static av_always_inline void decode_subband_internal(DiracContext *s, SubBand *b, int is_arith)</div><div class="ttdoc">Dirac Specification -&gt; 13.4.2 Non-skipped subbands. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00588">diracdec.c:588</a></div></div>
<div class="ttc" id="avcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div><div class="ttdoc">Libavcodec external API header. </div></div>
<div class="ttc" id="diracdsp_8h_html_a523f1f5a5d222eb2622c398decc50158"><div class="ttname"><a href="diracdsp_8h.html#a523f1f5a5d222eb2622c398decc50158">dirac_biweight_func</a></div><div class="ttdeci">void(* dirac_biweight_func)(uint8_t *dst, const uint8_t *src, int stride, int log2_denom, int weightd, int weights, int h)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00028">diracdsp.h:28</a></div></div>
<div class="ttc" id="structDiracContext_html_a61ac6ac6b4888d38deeae322548fc18a"><div class="ttname"><a href="structDiracContext.html#a61ac6ac6b4888d38deeae322548fc18a">DiracContext::edge_emu_buffer</a></div><div class="ttdeci">uint8_t * edge_emu_buffer[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00217">diracdec.c:217</a></div></div>
<div class="ttc" id="rematrix__template_8c_html_a4dfdfbb7b69470f1152e022432ee2d45"><div class="ttname"><a href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a></div><div class="ttdeci">typedef void(RENAME(mix_any_func_type))</div><div class="ttdef"><b>Definition:</b> <a href="rematrix__template_8c_source.html#l00052">rematrix_template.c:52</a></div></div>
<div class="ttc" id="structDiracContext_html_a47f716d0967c328972acf2faeaf11dd5"><div class="ttname"><a href="structDiracContext.html#a47f716d0967c328972acf2faeaf11dd5">DiracContext::seen_sequence_header</a></div><div class="ttdeci">int seen_sequence_header</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00141">diracdec.c:141</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_aab64f10d00a1bce12bf0b5e343f50003"><div class="ttname"><a href="structAVDiracSeqHeader.html#aab64f10d00a1bce12bf0b5e343f50003">AVDiracSeqHeader::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00106">dirac.h:106</a></div></div>
<div class="ttc" id="structAVFrame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="structAVFrame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdoc">For video, size in bytes of each picture line. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00221">frame.h:221</a></div></div>
<div class="ttc" id="diractab_8c_html_a65f2a2058bc653f8e6280027ebad78f2"><div class="ttname"><a href="diractab_8c.html#a65f2a2058bc653f8e6280027ebad78f2">ff_dirac_qoffset_inter_tab</a></div><div class="ttdeci">const int ff_dirac_qoffset_inter_tab[122]</div><div class="ttdef"><b>Definition:</b> <a href="diractab_8c_source.html#l00072">diractab.c:72</a></div></div>
<div class="ttc" id="get__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdoc">Initialize GetBitContext. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00442">get_bits.h:442</a></div></div>
<div class="ttc" id="ff__glob_8c_html_a4bbb2f081a64bd1133aa6ba6f29525ab"><div class="ttname"><a href="ff__glob_8c.html#a4bbb2f081a64bd1133aa6ba6f29525ab">LL</a></div><div class="ttdeci">#define LL(CS)</div><div class="ttdef"><b>Definition:</b> <a href="ff__glob_8c_source.html#l00461">ff_glob.c:461</a></div></div>
<div class="ttc" id="structDiracContext_html_afb93db90f53b06061bc3ab909c1b0fb9"><div class="ttname"><a href="structDiracContext.html#afb93db90f53b06061bc3ab909c1b0fb9">DiracContext::codeblock</a></div><div class="ttdeci">struct DiracContext::@56 codeblock[MAX_DWT_LEVELS+1]</div></div>
<div class="ttc" id="structDiracVersionInfo_html"><div class="ttname"><a href="structDiracVersionInfo.html">DiracVersionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00076">dirac.h:76</a></div></div>
<div class="ttc" id="structAVCodecContext_html"><div class="ttname"><a href="structAVCodecContext.html">AVCodecContext</a></div><div class="ttdoc">main external API structure. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01686">avcodec.h:1686</a></div></div>
<div class="ttc" id="structSliceCoeffs_html_af93dc12368b92fd935751af5ca2d5751"><div class="ttname"><a href="structSliceCoeffs.html#af93dc12368b92fd935751af5ca2d5751">SliceCoeffs::tot_v</a></div><div class="ttdeci">int tot_v</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00785">diracdec.c:785</a></div></div>
<div class="ttc" id="structDiracContext_html_a142097c8666a90096a106505b7269ef2"><div class="ttname"><a href="structDiracContext.html#a142097c8666a90096a106505b7269ef2">DiracContext::buffer_stride</a></div><div class="ttdeci">int buffer_stride</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00222">diracdec.c:222</a></div></div>
<div class="ttc" id="mpeg12data_8h_html"><div class="ttname"><a href="mpeg12data_8h.html">mpeg12data.h</a></div><div class="ttdoc">MPEG-1/2 tables. </div></div>
<div class="ttc" id="libavcodec_2internal_8h_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="libavcodec_2internal_8h.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdoc">Get a buffer for a frame. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00948">utils.c:948</a></div></div>
<div class="ttc" id="structDiracContext_html_ad4b621611d695438ffbb7b908de6b40e"><div class="ttname"><a href="structDiracContext.html#ad4b621611d695438ffbb7b908de6b40e">DiracContext::all_frames</a></div><div class="ttdeci">DiracFrame all_frames[MAX_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00237">diracdec.c:237</a></div></div>
<div class="ttc" id="structDiracFrame_html_ab1d67cfd1fbaa9d6279437093e1430b7"><div class="ttname"><a href="structDiracFrame.html#ab1d67cfd1fbaa9d6279437093e1430b7">DiracFrame::reference</a></div><div class="ttdeci">int reference</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00077">diracdec.c:77</a></div></div>
<div class="ttc" id="dirac__arith_8h_html"><div class="ttname"><a href="dirac__arith_8h.html">dirac_arith.h</a></div><div class="ttdoc">Arithmetic decoder for Dirac. </div></div>
<div class="ttc" id="structSubBand_html_a7605c5274cf09bbf4c99c10fb2143e89"><div class="ttname"><a href="structSubBand.html#a7605c5274cf09bbf4c99c10fb2143e89">SubBand::parent</a></div><div class="ttdeci">struct SubBand * parent</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00097">diracdec.c:97</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_aa32677263ff407ac4cb5274a799fc8ac"><div class="ttname"><a href="structDiracDSPContext.html#aa32677263ff407ac4cb5274a799fc8ac">DiracDSPContext::biweight_dirac_pixels_tab</a></div><div class="ttdeci">dirac_biweight_func biweight_dirac_pixels_tab[3]</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00054">diracdsp.h:54</a></div></div>
<div class="ttc" id="dirac_8h_html_a5a5d8c67c6041d3f765f183deb9919ff"><div class="ttname"><a href="dirac_8h.html#a5a5d8c67c6041d3f765f183deb9919ff">MAX_DWT_LEVELS</a></div><div class="ttdeci">#define MAX_DWT_LEVELS</div><div class="ttdoc">The spec limits the number of wavelet decompositions to 4 for both level 1 (VC-2) and 128 (long-gop d...</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00045">dirac.h:45</a></div></div>
<div class="ttc" id="get__bits_8h_html_a505086b48eb34d53e47f60ac777204b9"><div class="ttname"><a href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a></div><div class="ttdeci">static unsigned int get_bits1(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00299">get_bits.h:299</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_aaa9d00f5deecef8ae7dfe289b25469d0"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#aaa9d00f5deecef8ae7dfe289b25469d0">decode_lowdelay</a></div><div class="ttdeci">static int decode_lowdelay(DiracContext *s)</div><div class="ttdoc">Dirac Specification -&gt; 13.5.1 low_delay_transform_data() </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00899">diracdec.c:899</a></div></div>
<div class="ttc" id="structDiracContext_html_abf37c2e9350d519b1233c013f448392c"><div class="ttname"><a href="structDiracContext.html#abf37c2e9350d519b1233c013f448392c">DiracContext::core_syntax</a></div><div class="ttdeci">int core_syntax</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00152">diracdec.c:152</a></div></div>
<div class="ttc" id="structDiracContext_html_aeeb19bff067f6975b01381dac68f42b3"><div class="ttname"><a href="structDiracContext.html#aeeb19bff067f6975b01381dac68f42b3">DiracContext::frame_number</a></div><div class="ttdeci">int frame_number</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00142">diracdec.c:142</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a9939ad07037837c5a2961833447f7502"><div class="ttname"><a href="dirac__arith_8h.html#a9939ad07037837c5a2961833447f7502">dirac_get_arith_bit</a></div><div class="ttdeci">static int dirac_get_arith_bit(DiracArith *c, int ctx)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00129">dirac_arith.h:129</a></div></div>
<div class="ttc" id="structDiracContext_html_a0e7a88782c5fa6076fa24c05ceda7150"><div class="ttname"><a href="structDiracContext.html#a0e7a88782c5fa6076fa24c05ceda7150">DiracContext::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00133">diracdec.c:133</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="structAVCodecContext.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdoc">YUV colorspace type. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02416">avcodec.h:2416</a></div></div>
<div class="ttc" id="structAVRational_html"><div class="ttname"><a href="structAVRational.html">AVRational</a></div><div class="ttdoc">Rational number (pair of numerator and denominator). </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="structAVCodecContext_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="structAVCodecContext.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdoc">Color Transfer Characteristic. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02409">avcodec.h:2409</a></div></div>
<div class="ttc" id="get__bits_8h_html_af65c008755f74e99d139eae8b46534b5"><div class="ttname"><a href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a></div><div class="ttdeci">static int init_get_bits(GetBitContext *s, const uint8_t *buffer, int bit_size)</div><div class="ttdoc">Initialize GetBitContext. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00411">get_bits.h:411</a></div></div>
<div class="ttc" id="structDiracContext_html_a72039586798c14aef655a63082a88824"><div class="ttname"><a href="structDiracContext.html#a72039586798c14aef655a63082a88824">DiracContext::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00139">diracdec.c:139</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a6f6f870917184fbefd8440ece096e77ca9a8bce407a0a53e46989819f6e849a47"><div class="ttname"><a href="dirac__arith_8h.html#a6f6f870917184fbefd8440ece096e77ca9a8bce407a0a53e46989819f6e849a47">CTX_DELTA_Q_F</a></div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00055">dirac_arith.h:55</a></div></div>
<div class="ttc" id="mathops_8h_html_a6948a24017ba60d76640f7587429a9f6"><div class="ttname"><a href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a></div><div class="ttdeci">#define mid_pred</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00096">mathops.h:96</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2ea7fb53e3e62736af3f6fc986153bb25dc"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea7fb53e3e62736af3f6fc986153bb25dc">subband_hl</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00242">diracdec.c:242</a></div></div>
<div class="ttc" id="structDiracContext_html_a2a5bbd15bb8653e1a45ee2eda6993894"><div class="ttname"><a href="structDiracContext.html#a2a5bbd15bb8653e1a45ee2eda6993894">DiracContext::biweight_func</a></div><div class="ttdeci">dirac_biweight_func biweight_func</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00230">diracdec.c:230</a></div></div>
<div class="ttc" id="structPlane_html_a9e426af530bbbd02f14ee55fae057954"><div class="ttname"><a href="structPlane.html#a9e426af530bbbd02f14ee55fae057954">Plane::xbsep</a></div><div class="ttdeci">uint8_t xbsep</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00115">diracdec.c:115</a></div></div>
<div class="ttc" id="structDiracContext_html_acd4141ea25adeef4048a2c212abc7e1f"><div class="ttname"><a href="structDiracContext.html#acd4141ea25adeef4048a2c212abc7e1f">DiracContext::thread_buf_size</a></div><div class="ttdeci">int thread_buf_size</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00176">diracdec.c:176</a></div></div>
<div class="ttc" id="vaapi__encode__h26x_8h_html_a5349d1cad2e486e8c30d8cde8b783b0d"><div class="ttname"><a href="vaapi__encode__h26x_8h.html#a5349d1cad2e486e8c30d8cde8b783b0d">u</a></div><div class="ttdeci">#define u(width,...)</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__encode__h26x_8h_source.html#l00036">vaapi_encode_h26x.h:36</a></div></div>
<div class="ttc" id="structDiracContext_html_ae029692452063be87f56173e4251fc52"><div class="ttname"><a href="structDiracContext.html#ae029692452063be87f56173e4251fc52">DiracContext::chroma_x_shift</a></div><div class="ttdeci">int chroma_x_shift</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00144">diracdec.c:144</a></div></div>
<div class="ttc" id="structDiracContext_html_a088ca88da5298ff113962f4d149d6039"><div class="ttname"><a href="structDiracContext.html#a088ca88da5298ff113962f4d149d6039">DiracContext::bytes</a></div><div class="ttdeci">AVRational bytes</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00187">diracdec.c:187</a></div></div>
<div class="ttc" id="get__bits_8h_html_a20dc15e40874f46af0d2b4ad34aed9a7"><div class="ttname"><a href="get__bits_8h.html#a20dc15e40874f46af0d2b4ad34aed9a7">get_bits_long</a></div><div class="ttdeci">static unsigned int get_bits_long(GetBitContext *s, int n)</div><div class="ttdoc">Read 0-32 bits. </div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00332">get_bits.h:332</a></div></div>
<div class="ttc" id="structSliceCoeffs_html"><div class="ttname"><a href="structSliceCoeffs.html">SliceCoeffs</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00781">diracdec.c:781</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a428f9b4f3f20f3402fb8481285cb9949"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a428f9b4f3f20f3402fb8481285cb9949">decode_subband_arith</a></div><div class="ttdeci">static int decode_subband_arith(AVCodecContext *avctx, void *b)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00626">diracdec.c:626</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_abba89017a0b8aef3a4defd8fe9c20a9e"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#abba89017a0b8aef3a4defd8fe9c20a9e">weight</a></div><div class="ttdeci">static int weight(int i, int blen, int offset)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01507">diracdec.c:1507</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a16027d8acc5301e440cefa086eb9db2a"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a16027d8acc5301e440cefa086eb9db2a">MAX_DELAY</a></div><div class="ttdeci">#define MAX_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00049">diracdec.c:49</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a46e55953e617eb50d6f5fa6db18afdd9"><div class="ttname"><a href="structAVDiracSeqHeader.html#a46e55953e617eb50d6f5fa6db18afdd9">AVDiracSeqHeader::height</a></div><div class="ttdeci">unsigned height</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00083">dirac.h:83</a></div></div>
<div class="ttc" id="structDiracContext_html_aa105bb809553714c19833121309bef33"><div class="ttname"><a href="structDiracContext.html#aa105bb809553714c19833121309bef33">DiracContext::zero_res</a></div><div class="ttdeci">int zero_res</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00150">diracdec.c:150</a></div></div>
<div class="ttc" id="audio__convert_8c_html_a431c7653c1fc679a567aaabfc1101b3a"><div class="ttname"><a href="audio__convert_8c.html#a431c7653c1fc679a567aaabfc1101b3a">dc</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; dc</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="group__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdoc">Unreference all the buffers referenced by frame and reset the frame fields. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00495">frame.c:495</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a5b4055201d2d8170e179b1ceaa438b9c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a></div><div class="ttdeci">#define MAX_FRAMES</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00050">diracdec.c:50</a></div></div>
<div class="ttc" id="structSubBand_html_a690d20481bd1095d6319f0655d50ba10"><div class="ttname"><a href="structSubBand.html#a690d20481bd1095d6319f0655d50ba10">SubBand::pshift</a></div><div class="ttdeci">int pshift</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00051">cfhd.h:51</a></div></div>
<div class="ttc" id="structAVFrame_html_a1d0f65014a8d1bf78cec8cbed2304992"><div class="ttname"><a href="structAVFrame.html#a1d0f65014a8d1bf78cec8cbed2304992">AVFrame::data</a></div><div class="ttdeci">uint8_t * data[AV_NUM_DATA_POINTERS]</div><div class="ttdoc">pointer to the picture/channel planes. </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00204">frame.h:204</a></div></div>
<div class="ttc" id="structSubBand_html_ab76ae8a0f9d3e3e91a145aca1dc6d891"><div class="ttname"><a href="structSubBand.html#ab76ae8a0f9d3e3e91a145aca1dc6d891">SubBand::y</a></div><div class="ttdeci">unsigned y</div><div class="ttdef"><b>Definition:</b> <a href="pixlet_8c_source.html#l00043">pixlet.c:43</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a80e8591f0915570c295711763b554692"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a80e8591f0915570c295711763b554692">pred_block_mode</a></div><div class="ttdeci">static int pred_block_mode(DiracBlock *block, int stride, int x, int y, int refmask)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01292">diracdec.c:1292</a></div></div>
<div class="ttc" id="structDiracFrame_html_a3bf2cb5d91d2bec1ecbf0e0965ecb699"><div class="ttname"><a href="structDiracFrame.html#a3bf2cb5d91d2bec1ecbf0e0965ecb699">DiracFrame::avframe</a></div><div class="ttdeci">AVFrame * avframe</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00073">diracdec.c:73</a></div></div>
<div class="ttc" id="structDiracContext_html_a6fa5903488cbdc3e755100bf173916bc"><div class="ttname"><a href="structDiracContext.html#a6fa5903488cbdc3e755100bf173916bc">DiracContext::blmotion</a></div><div class="ttdeci">DiracBlock * blmotion</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00215">diracdec.c:215</a></div></div>
<div class="ttc" id="diracdsp_8h_html_a9589285010e26bb2e4228eec18d9e598"><div class="ttname"><a href="diracdsp_8h.html#a9589285010e26bb2e4228eec18d9e598">dirac_weight_func</a></div><div class="ttdeci">void(* dirac_weight_func)(uint8_t *block, int stride, int log2_denom, int weight, int h)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00027">diracdsp.h:27</a></div></div>
<div class="ttc" id="structDiracBlock_html"><div class="ttname"><a href="structDiracBlock.html">DiracBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00080">diracdec.c:80</a></div></div>
<div class="ttc" id="structDiracContext_html_acf8b13dcf852822d36f72698c756aa59"><div class="ttname"><a href="structDiracContext.html#acf8b13dcf852822d36f72698c756aa59">DiracContext::reader_ctx</a></div><div class="ttdeci">DiracGolombLUT * reader_ctx</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00137">diracdec.c:137</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a1f99d0554a99a0d366962c6d0a764032"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a1f99d0554a99a0d366962c6d0a764032">MAX_REFERENCE_FRAMES</a></div><div class="ttdeci">#define MAX_REFERENCE_FRAMES</div><div class="ttdoc">The spec limits this to 3 for frame coding, but in practice can be as high as 6. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00048">diracdec.c:48</a></div></div>
<div class="ttc" id="dirac__dwt_8h_html"><div class="ttname"><a href="dirac__dwt_8h.html">dirac_dwt.h</a></div></div>
<div class="ttc" id="ffmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00190">ffmpeg_filter.c:190</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a24c235e0661b9539ada7a404c0b5304a"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a24c235e0661b9539ada7a404c0b5304a">dirac_decode_picture_header</a></div><div class="ttdeci">static int dirac_decode_picture_header(DiracContext *s)</div><div class="ttdoc">Dirac Specification -&gt; 11.1.1 Picture Header. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01938">diracdec.c:1938</a></div></div>
<div class="ttc" id="structGetBitContext_html"><div class="ttname"><a href="structGetBitContext.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00055">get_bits.h:55</a></div></div>
<div class="ttc" id="libavcodec_2internal_8h_html"><div class="ttname"><a href="libavcodec_2internal_8h.html">internal.h</a></div><div class="ttdoc">common internal api header. </div></div>
<div class="ttc" id="tests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="structDiracContext_html_ad44b81b5508b42b972ef7256370eff22"><div class="ttname"><a href="structDiracContext.html#ad44b81b5508b42b972ef7256370eff22">DiracContext::seq</a></div><div class="ttdeci">AVDiracSeqHeader seq</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00140">diracdec.c:140</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_a1b5acc160c4752ec37479a1d36989717"><div class="ttname"><a href="intreadwrite_8h.html#a1b5acc160c4752ec37479a1d36989717">AV_WN32</a></div><div class="ttdeci">#define AV_WN32(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00376">intreadwrite.h:376</a></div></div>
<div class="ttc" id="structPlane_html_a414124869d45b556fd23262ad3122a5f"><div class="ttname"><a href="structPlane.html#a414124869d45b556fd23262ad3122a5f">Plane::stride</a></div><div class="ttdeci">ptrdiff_t stride</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00059">cfhd.h:59</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a60ab0ea212ec6b8cf479736b02c609b0"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a60ab0ea212ec6b8cf479736b02c609b0">decode_subband</a></div><div class="ttdeci">static void decode_subband(DiracContext *s, GetBitContext *gb, int quant, int slice_x, int slice_y, int bits_end, SubBand *b1, SubBand *b2)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00691">diracdec.c:691</a></div></div>
<div class="ttc" id="structSubBand_html_ac807cab0243f70eaec1d333a6f16b1f0"><div class="ttname"><a href="structSubBand.html#ac807cab0243f70eaec1d333a6f16b1f0">SubBand::size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="pixlet_8c_source.html#l00042">pixlet.c:42</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a435263d23ef652273d9c8f9407a23ae9"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a435263d23ef652273d9c8f9407a23ae9">decode_subband_golomb</a></div><div class="ttdeci">static int decode_subband_golomb(AVCodecContext *avctx, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00633">diracdec.c:633</a></div></div>
<div class="ttc" id="structDiracContext_html_af62c0c41e7d102b011b4061f199a0264"><div class="ttname"><a href="structDiracContext.html#af62c0c41e7d102b011b4061f199a0264">DiracContext::weight</a></div><div class="ttdeci">int16_t weight[2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00206">diracdec.c:206</a></div></div>
<div class="ttc" id="structDiracBlock_html_ae453699babb91a8d094e3eb0fda6e15b"><div class="ttname"><a href="structDiracBlock.html#ae453699babb91a8d094e3eb0fda6e15b">DiracBlock::mv</a></div><div class="ttdeci">int16_t mv[2][2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00082">diracdec.c:82</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_ad401fd831ab833f58c4688e3b4afa03d"><div class="ttname"><a href="dirac__arith_8h.html#ad401fd831ab833f58c4688e3b4afa03d">dirac_get_arith_int</a></div><div class="ttdeci">static int dirac_get_arith_int(DiracArith *c, int follow_ctx, int data_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00185">dirac_arith.h:185</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_a287010569db8ec56c2f452bf8d2f377d"><div class="ttname"><a href="dirac__arith_8h.html#a287010569db8ec56c2f452bf8d2f377d">CTX_MV_F1</a></div><div class="ttdeci">#define CTX_MV_F1</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00070">dirac_arith.h:70</a></div></div>
<div class="ttc" id="structDiracContext_html_a2cb2868e0702999494c82596c5dc3788"><div class="ttname"><a href="structDiracContext.html#a2cb2868e0702999494c82596c5dc3788">DiracContext::sbheight</a></div><div class="ttdeci">int sbheight</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00212">diracdec.c:212</a></div></div>
<div class="ttc" id="structAVRational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="structAVRational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator. </div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a8b95ae83d97db70f4d66039d627c6123"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a8b95ae83d97db70f4d66039d627c6123">init_obmc_weight_row</a></div><div class="ttdeci">static void init_obmc_weight_row(Plane *p, uint8_t *obmc_weight, int stride, int left, int right, int wy)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01519">diracdec.c:1519</a></div></div>
<div class="ttc" id="videodsp_8h_html"><div class="ttname"><a href="videodsp_8h.html">videodsp.h</a></div><div class="ttdoc">Core video DSP helper functions. </div></div>
<div class="ttc" id="structDiracDSPContext_html_a36ae3c1a6a2d52c4b299fe809695c1a2"><div class="ttname"><a href="structDiracDSPContext.html#a36ae3c1a6a2d52c4b299fe809695c1a2">DiracDSPContext::put_dirac_pixels_tab</a></div><div class="ttdeci">void(* put_dirac_pixels_tab[3][4])(uint8_t *dst, const uint8_t *src[5], int stride, int h)</div><div class="ttdoc">dirac_pixels_tab[width][subpel] width is 2 for 32, 1 for 16, 0 for 8 subpel is 0 for fpel and hpel (o...</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00042">diracdsp.h:42</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_aae6b0930e12985a20faaeb473ec5a959"><div class="ttname"><a href="dirac__arith_8h.html#aae6b0930e12985a20faaeb473ec5a959">CTX_DC_F1</a></div><div class="ttdeci">#define CTX_DC_F1</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00072">dirac_arith.h:72</a></div></div>
<div class="ttc" id="structAVCodecContext_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="structAVCodecContext.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01728">avcodec.h:1728</a></div></div>
<div class="ttc" id="structPlane_html_a65a6ebeb196a190d89c035d4f8bf2886"><div class="ttname"><a href="structPlane.html#a65a6ebeb196a190d89c035d4f8bf2886">Plane::idwt</a></div><div class="ttdeci">DWTPlane idwt</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00105">diracdec.c:105</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a45dd7a5b11e0b78ffffb5485bc3bc521"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a45dd7a5b11e0b78ffffb5485bc3bc521">alloc_sequence_buffers</a></div><div class="ttdeci">static int alloc_sequence_buffers(DiracContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00283">diracdec.c:283</a></div></div>
<div class="ttc" id="structDiracContext_html_a750399d3c166f6b54e096e710921e77d"><div class="ttname"><a href="structDiracContext.html#a750399d3c166f6b54e096e710921e77d">DiracContext::put_pixels_tab</a></div><div class="ttdeci">void(* put_pixels_tab[4])(uint8_t *dst, const uint8_t *src[5], int stride, int h)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00226">diracdec.c:226</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a66c6736ecbbb653eb8f41c08bd09bf11"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a66c6736ecbbb653eb8f41c08bd09bf11">init_obmc_weight</a></div><div class="ttdeci">static void init_obmc_weight(Plane *p, uint8_t *obmc_weight, int stride, int left, int right, int top, int bottom)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01533">diracdec.c:1533</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_af9ccdea5260eb791a21377eb68a30475"><div class="ttname"><a href="structDiracDSPContext.html#af9ccdea5260eb791a21377eb68a30475">DiracDSPContext::dequant_subband</a></div><div class="ttdeci">void(* dequant_subband[4])(uint8_t *src, uint8_t *dst, ptrdiff_t stride, const int qf, const int qs, int tot_v, int tot_h)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00051">diracdsp.h:51</a></div></div>
<div class="ttc" id="structDiracContext_html_a352a6220c709d1cd67c5af7bd4bcc4b7"><div class="ttname"><a href="structDiracContext.html#a352a6220c709d1cd67c5af7bd4bcc4b7">DiracContext::threads_num_buf</a></div><div class="ttdeci">int threads_num_buf</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00175">diracdec.c:175</a></div></div>
<div class="ttc" id="dirac__arith_8h_html_afc3dfdc62c27609053d7dd95467b8663"><div class="ttname"><a href="dirac__arith_8h.html#afc3dfdc62c27609053d7dd95467b8663">CTX_SB_F1</a></div><div class="ttdeci">#define CTX_SB_F1</div><div class="ttdef"><b>Definition:</b> <a href="dirac__arith_8h_source.html#l00065">dirac_arith.h:65</a></div></div>
<div class="ttc" id="tests_2des_8c_html_ae9a986282b2908caa6e018751ead8ade"><div class="ttname"><a href="tests_2des_8c.html#ae9a986282b2908caa6e018751ead8ade">tmp</a></div><div class="ttdeci">static uint8_t tmp[8]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2des_8c_source.html#l00038">des.c:38</a></div></div>
<div class="ttc" id="structDiracContext_html_a445ae8bd4b8b6e424b27aac07a6503a1"><div class="ttname"><a href="structDiracContext.html#a445ae8bd4b8b6e424b27aac07a6503a1">DiracContext::blwidth</a></div><div class="ttdeci">int blwidth</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00209">diracdec.c:209</a></div></div>
<div class="ttc" id="structAVFrame_html_a3649a81e8414a193d685a6eee06ce902"><div class="ttname"><a href="structAVFrame.html#a3649a81e8414a193d685a6eee06ce902">AVFrame::key_frame</a></div><div class="ttdeci">int key_frame</div><div class="ttdoc">1 -&gt; keyframe, 0-&gt; not </div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00259">frame.h:259</a></div></div>
<div class="ttc" id="structSubBand_html_ad6a008dace44b400ff6a92b554f8a966"><div class="ttname"><a href="structSubBand.html#ad6a008dace44b400ff6a92b554f8a966">SubBand::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00050">cfhd.h:50</a></div></div>
<div class="ttc" id="decoder__targeted_8c_html_acfe27e61edea06412363421f1a013e81"><div class="ttname"><a href="decoder__targeted_8c.html#acfe27e61edea06412363421f1a013e81">c</a></div><div class="ttdeci">static AVCodec * c</div><div class="ttdef"><b>Definition:</b> <a href="decoder__targeted_8c_source.html#l00059">decoder_targeted.c:59</a></div></div>
<div class="ttc" id="vf__owdenoise_8c_html_a35c8a1e85abdf2de13b1be2fe51f293b"><div class="ttname"><a href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a></div><div class="ttdeci">static const double coeff[2][5]</div><div class="ttdef"><b>Definition:</b> <a href="vf__owdenoise_8c_source.html#l00072">vf_owdenoise.c:72</a></div></div>
<div class="ttc" id="get__bits_8h_html_ade604fdf49709e1ae3e4781d4b878f6d"><div class="ttname"><a href="get__bits_8h.html#ade604fdf49709e1ae3e4781d4b878f6d">align_get_bits</a></div><div class="ttdeci">static const uint8_t * align_get_bits(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00450">get_bits.h:450</a></div></div>
<div class="ttc" id="mpegvideoencdsp_8h_html_a625ea9100e2f1b3611afe7495a68c594"><div class="ttname"><a href="mpegvideoencdsp_8h.html#a625ea9100e2f1b3611afe7495a68c594">EDGE_BOTTOM</a></div><div class="ttdeci">#define EDGE_BOTTOM</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideoencdsp_8h_source.html#l00030">mpegvideoencdsp.h:30</a></div></div>
<div class="ttc" id="structPlane_html_a541b39aa57b2825842a5ff52376746e4"><div class="ttname"><a href="structPlane.html#a541b39aa57b2825842a5ff52376746e4">Plane::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00057">cfhd.h:57</a></div></div>
<div class="ttc" id="structDiracContext_html_a821a75fdc20cddf7179063c9fc33e9cb"><div class="ttname"><a href="structDiracContext.html#a821a75fdc20cddf7179063c9fc33e9cb">DiracContext::highquality</a></div><div class="ttdeci">struct DiracContext::@58 highquality</div></div>
<div class="ttc" id="structDiracContext_html_a41bf89e60642ff71adad9b663a2f6ae0"><div class="ttname"><a href="structDiracContext.html#a41bf89e60642ff71adad9b663a2f6ae0">DiracContext::sbwidth</a></div><div class="ttdeci">int sbwidth</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00211">diracdec.c:211</a></div></div>
<div class="ttc" id="structSubBand_html_a1430f0d62982f24c47d83a60d756e2fc"><div class="ttname"><a href="structSubBand.html#a1430f0d62982f24c47d83a60d756e2fc">SubBand::buf</a></div><div class="ttdeci">DWTELEM * buf</div><div class="ttdef"><b>Definition:</b> <a href="snow_8h_source.html#l00088">snow.h:88</a></div></div>
<div class="ttc" id="structDiracVersionInfo_html_ac643456f88bbcbb3e723c1ca7d102be2"><div class="ttname"><a href="structDiracVersionInfo.html#ac643456f88bbcbb3e723c1ca7d102be2">DiracVersionInfo::minor</a></div><div class="ttdeci">int minor</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00078">dirac.h:78</a></div></div>
<div class="ttc" id="structAVFrame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="structAVFrame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00242">frame.h:242</a></div></div>
<div class="ttc" id="tests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="structDiracBlock_html_ac17282bbf3d4141cda36f34c1523270a"><div class="ttname"><a href="structDiracBlock.html#ac17282bbf3d4141cda36f34c1523270a">DiracBlock::ref</a></div><div class="ttdeci">uint8_t ref</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00085">diracdec.c:85</a></div></div>
<div class="ttc" id="structDiracContext_html_a133830215770b83f2a0469a5c2478c46"><div class="ttname"><a href="structDiracContext.html#a133830215770b83f2a0469a5c2478c46">DiracContext::is_arith</a></div><div class="ttdeci">int is_arith</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00151">diracdec.c:151</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="eamad_8c_html_ad7e4bf27a38e9760796305b65098ae68"><div class="ttname"><a href="eamad_8c.html#ad7e4bf27a38e9760796305b65098ae68">comp</a></div><div class="ttdeci">static void comp(unsigned char *dst, int dst_stride, unsigned char *src, int src_stride, int add)</div><div class="ttdef"><b>Definition:</b> <a href="eamad_8c_source.html#l00083">eamad.c:83</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a86ff0479548c1e5804bd6964ffbc705c"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a86ff0479548c1e5804bd6964ffbc705c">add_dc</a></div><div class="ttdeci">static void add_dc(uint16_t *dst, int dc, int stride, uint8_t *obmc_weight, int xblen, int yblen)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01687">diracdec.c:1687</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a2afbd8f459983463062fe456086bc86a"><div class="ttname"><a href="structAVDiracSeqHeader.html#a2afbd8f459983463062fe456086bc86a">AVDiracSeqHeader::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00108">dirac.h:108</a></div></div>
<div class="ttc" id="avisynth__c_8h_html_a8fc0b8ec0a1ff0e9ffb827a29083d895"><div class="ttname"><a href="avisynth__c_8h.html#a8fc0b8ec0a1ff0e9ffb827a29083d895">start</a></div><div class="ttdeci">void INT64 start</div><div class="ttdef"><b>Definition:</b> <a href="avisynth__c_8h_source.html#l00690">avisynth_c.h:690</a></div></div>
<div class="ttc" id="ffmpeg_8c_html_a22b853326688d8b01baa28b9aad668d8"><div class="ttname"><a href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a></div><div class="ttdeci">static int decode(AVCodecContext *avctx, AVFrame *frame, int *got_frame, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02061">ffmpeg.c:2061</a></div></div>
<div class="ttc" id="intreadwrite_8h_html_ab57091b00cb68a113d18ab0d79f62823"><div class="ttname"><a href="intreadwrite_8h.html#ab57091b00cb68a113d18ab0d79f62823">AV_WN16</a></div><div class="ttdeci">#define AV_WN16(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00372">intreadwrite.h:372</a></div></div>
<div class="ttc" id="group__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="attributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00039">attributes.h:39</a></div></div>
<div class="ttc" id="tableprint__vlc_8h_html_a0bbd41ab30b4164703f00cb76142ffe8"><div class="ttname"><a href="tableprint__vlc_8h.html#a0bbd41ab30b4164703f00cb76142ffe8">av_malloc_array</a></div><div class="ttdeci">#define av_malloc_array(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00032">tableprint_vlc.h:32</a></div></div>
<div class="ttc" id="structDiracFrame_html_a7ab551d9f3e01f52a44579989926a85f"><div class="ttname"><a href="structDiracFrame.html#a7ab551d9f3e01f52a44579989926a85f">DiracFrame::hpel_base</a></div><div class="ttdeci">uint8_t * hpel_base[3][4]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00076">diracdec.c:76</a></div></div>
<div class="ttc" id="structAVDiracSeqHeader_html_a84012a395eed7a8b866b2c6d8c3d06f1"><div class="ttname"><a href="structAVDiracSeqHeader.html#a84012a395eed7a8b866b2c6d8c3d06f1">AVDiracSeqHeader::width</a></div><div class="ttdeci">unsigned width</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00082">dirac.h:82</a></div></div>
<div class="ttc" id="common_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="golomb_8h_html_ac0928cd9c45384860a57d8a7e5c3da5f"><div class="ttname"><a href="golomb_8h.html#ac0928cd9c45384860a57d8a7e5c3da5f">get_interleaved_ue_golomb</a></div><div class="ttdeci">static unsigned get_interleaved_ue_golomb(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="golomb_8h_source.html#l00115">golomb.h:115</a></div></div>
<div class="ttc" id="structDWTPlane_html_ace41c1f0cc6a7237895f3d5d872e6a20"><div class="ttname"><a href="structDWTPlane.html#ace41c1f0cc6a7237895f3d5d872e6a20">DWTPlane::stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8h_source.html#l00040">dirac_dwt.h:40</a></div></div>
<div class="ttc" id="structPlane_html_a775728bf1541de167e3358f9e73ab406"><div class="ttname"><a href="structPlane.html#a775728bf1541de167e3358f9e73ab406">Plane::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00058">cfhd.h:58</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_ac8fed5e42dbc6a119308b0b20457ce65"><div class="ttname"><a href="structDiracDSPContext.html#ac8fed5e42dbc6a119308b0b20457ce65">DiracDSPContext::dirac_hpel_filter</a></div><div class="ttdeci">void(* dirac_hpel_filter)(uint8_t *dsth, uint8_t *dstv, uint8_t *dstc, const uint8_t *src, int stride, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00031">diracdsp.h:31</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#ae881cad13ff8e89978469871f6abec2ea80ffebbee85a3a8fe5ff82079ea0332b">subband_ll</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00241">diracdec.c:241</a></div></div>
<div class="ttc" id="structAVCodecContext_html_a83b625bf9454b63ee8c04ac4f8ef648c"><div class="ttname"><a href="structAVCodecContext.html#a83b625bf9454b63ee8c04ac4f8ef648c">AVCodecContext::execute</a></div><div class="ttdeci">int(* execute)(struct AVCodecContext *c, int(*func)(struct AVCodecContext *c2, void *arg), void *arg2, int *ret, int count, int size)</div><div class="ttdoc">The codec may call this to execute several independent things. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03158">avcodec.h:3158</a></div></div>
<div class="ttc" id="golomb_8h_html"><div class="ttname"><a href="golomb_8h.html">golomb.h</a></div><div class="ttdoc">exp golomb vlc stuff  </div></div>
<div class="ttc" id="structAVPacket_html"><div class="ttname"><a href="structAVPacket.html">AVPacket</a></div><div class="ttdoc">This structure stores compressed data. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01588">avcodec.h:1588</a></div></div>
<div class="ttc" id="structDiracVersionInfo_html_a3556ff64a55e6ed39c7176a0164035e5"><div class="ttname"><a href="structDiracVersionInfo.html#a3556ff64a55e6ed39c7176a0164035e5">DiracVersionInfo::major</a></div><div class="ttdeci">int major</div><div class="ttdef"><b>Definition:</b> <a href="dirac_8h_source.html#l00077">dirac.h:77</a></div></div>
<div class="ttc" id="structDiracDSPContext_html_ac0e05723d368df493cd40bee04f74e5c"><div class="ttname"><a href="structDiracDSPContext.html#ac0e05723d368df493cd40bee04f74e5c">DiracDSPContext::put_signed_rect_clamped</a></div><div class="ttdeci">void(* put_signed_rect_clamped[3])(uint8_t *dst, int dst_stride, const uint8_t *src, int src_stride, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="diracdsp_8h_source.html#l00045">diracdsp.h:45</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga6b4950dd3320e524f648799927f256a7"><div class="ttname"><a href="group__lavc__core.html#ga6b4950dd3320e524f648799927f256a7">AV_GET_BUFFER_FLAG_REF</a></div><div class="ttdeci">#define AV_GET_BUFFER_FLAG_REF</div><div class="ttdoc">The decoder will keep a reference to the frame and may reuse it later. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01358">avcodec.h:1358</a></div></div>
<div class="ttc" id="group__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdoc">Codec uses get_buffer() for allocating buffers and supports custom allocators. </div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00963">avcodec.h:963</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_af6722c56143b81bddeb805e3980858d2"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#af6722c56143b81bddeb805e3980858d2">DIRAC_REF_MASK_REF1</a></div><div class="ttdeci">#define DIRAC_REF_MASK_REF1</div><div class="ttdoc">DiracBlock-&gt;ref flags, if set then the block does MC from the given ref. </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00057">diracdec.c:57</a></div></div>
<div class="ttc" id="structDiracContext_html_ac02cb113348a81db0a279afe35fe2306"><div class="ttname"><a href="structDiracContext.html#ac02cb113348a81db0a279afe35fe2306">DiracContext::size_scaler</a></div><div class="ttdeci">uint64_t size_scaler</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00193">diracdec.c:193</a></div></div>
<div class="ttc" id="structDiracContext_html_ab60ed28b2e25a73b5a7e4d6f232f7e49"><div class="ttname"><a href="structDiracContext.html#ab60ed28b2e25a73b5a7e4d6f232f7e49">DiracContext::zrs_exp</a></div><div class="ttdeci">unsigned zrs_exp</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00200">diracdec.c:200</a></div></div>
<div class="ttc" id="common_8h_html_a013fdaa079045ec5632fe121e211e516"><div class="ttname"><a href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a></div><div class="ttdeci">#define FFMAX3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00095">common.h:95</a></div></div>
<div class="ttc" id="structDiracContext_html_ab8db2aa4fb69872c8e5ff8f7c8fd7837"><div class="ttname"><a href="structDiracContext.html#ab8db2aa4fb69872c8e5ff8f7c8fd7837">DiracContext::mv_precision</a></div><div class="ttdeci">uint8_t mv_precision</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00205">diracdec.c:205</a></div></div>
<div class="ttc" id="libavcodec_2diracdec_8c_html_a0ec1f7b39c5f06c062b600b159c97d60"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#a0ec1f7b39c5f06c062b600b159c97d60">dirac_unpack_block_motion_data</a></div><div class="ttdeci">static int dirac_unpack_block_motion_data(DiracContext *s)</div><div class="ttdoc">Dirac Specification -&gt; </div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l01452">diracdec.c:1452</a></div></div>
<div class="ttc" id="structPlane_html"><div class="ttname"><a href="structPlane.html">Plane</a></div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00056">cfhd.h:56</a></div></div>
<div class="ttc" id="structDiracContext_html_a488db1b7f30821650be1713857964ad4"><div class="ttname"><a href="structDiracContext.html#a488db1b7f30821650be1713857964ad4">DiracContext::obmc_weight</a></div><div class="ttdeci">uint8_t obmc_weight[3][MAX_BLOCKSIZE *MAX_BLOCKSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00224">diracdec.c:224</a></div></div>
<div class="ttc" id="dirac__dwt_8c_html_a6ef08fde94d043c7fda69bb348a46433"><div class="ttname"><a href="dirac__dwt_8c.html#a6ef08fde94d043c7fda69bb348a46433">ff_spatial_idwt_init</a></div><div class="ttdeci">int ff_spatial_idwt_init(DWTContext *d, DWTPlane *p, enum dwt_type type, int decomposition_count, int bit_depth)</div><div class="ttdef"><b>Definition:</b> <a href="dirac__dwt_8c_source.html#l00036">dirac_dwt.c:36</a></div></div>
<div class="ttc" id="structSubBand_html_ab021471270550f6936840d8f2536b923"><div class="ttname"><a href="structSubBand.html#ab021471270550f6936840d8f2536b923">SubBand::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="cfhd_8h_source.html#l00044">cfhd.h:44</a></div></div>
<div class="ttc" id="structPlane_html_a3effcf87b097c40b9a9c69912b470ecb"><div class="ttname"><a href="structPlane.html#a3effcf87b097c40b9a9c69912b470ecb">Plane::yblen</a></div><div class="ttdeci">uint8_t yblen</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00113">diracdec.c:113</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 2 2017 22:46:52 for FFmpeg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
